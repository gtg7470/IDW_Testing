ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"wifi_interface.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.wifi_set_socket_certificates,"ax",%progbits
  18              		.align	1
  19              		.global	wifi_set_socket_certificates
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	wifi_set_socket_certificates:
  26              	.LFB276:
  27              		.file 1 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c"
   1:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
   2:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  ******************************************************************************
   3:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @file    wifi_interface.c
   4:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @author  Central LAB
   5:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @version V2.1.0
   6:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @date    17-May-2016
   7:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @brief   User APIs implementation for X-CUBE-WIFI1
   8:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  ******************************************************************************
   9:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @attention
  10:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *
  11:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * <h2><center>&copy; COPYRIGHT(c) 2015 STMicroelectronics</center></h2>
  12:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *
  13:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * Redistribution and use in source and binary forms, with or without modification,
  14:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * are permitted provided that the following conditions are met:
  15:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *   1. Redistributions of source code must retain the above copyright notice,
  16:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *      this list of conditions and the following disclaimer.
  17:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *   2. Redistributions in binary form must reproduce the above copyright notice,
  18:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *      this list of conditions and the following disclaimer in the documentation
  19:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *      and/or other materials provided with the distribution.
  20:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *   3. Neither the name of STMicroelectronics nor the names of its contributors
  21:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *      may be used to endorse or promote products derived from this software
  22:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *      without specific prior written permission.
  23:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *
  24:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  25:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  26:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  27:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  28:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  29:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  30:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  31:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 2


  32:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  33:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  34:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *
  35:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  ******************************************************************************
  36:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  */
  37:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  38:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /* Includes ------------------------------------------------------------------*/
  39:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #include "wifi_module.h"
  40:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #include "wifi_globals.h"
  41:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #include "stdarg.h"
  42:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  43:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /** @addtogroup MIDDLEWARES
  44:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @{
  45:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */ 
  46:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  47:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /** @defgroup  NUCLEO_WIFI_INTERFACE
  48:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @brief Wi-Fi User API modules
  49:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @{
  50:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  51:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  52:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /** @defgroup NUCLEO_WIFI_INTERFACE_Private_Defines
  53:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @{
  54:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  55:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  56:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
  57:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @}
  58:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  59:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  60:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /** @addtogroup NUCLEO_WIFI_INTERFACE_Private_Variables
  61:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @{
  62:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  63:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /* Private variables ---------------------------------------------------------*/
  64:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  65:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
  66:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @}
  67:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  68:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
  69:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /** @defgroup NUCLEO_WIFI_INTERFACE_Private_Functions
  70:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @{
  71:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  72:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  73:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** GPIO_InitTypeDef  WAKEUP_InitStruct;
  74:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  75:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
  76:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @brief  wifi_init
  77:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   *         User API for wifi init
  78:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @param  None
  79:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @retval None
  80:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  81:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_init(wifi_config* config)
  82:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
  83:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
  84:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  85:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined (DEBUG_PRINT) && !defined (WIFI_USE_VCOM)
  86:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     printf("\r\n\nBuild Configuration:");
  87:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32F4XX_NUCLEO)  
  88:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("\r\nNucleo: NUCLEO-F401RE\r\n");
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 3


  89:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
  90:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32L4XX_NUCLEO)  
  91:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("\r\nNucleo: NUCLEO-L476RG\r\n");
  92:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
  93:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32L0XX_NUCLEO)  
  94:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("\r\nNucleo: NUCLEO-L053R8\r\n");
  95:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
  96:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32F1xx_NUCLEO)  
  97:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("\r\nNucleo: NUCLEO-F103RB\r\n");
  98:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
  99:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(SPWF04)
 100:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("X-Nucleo: X-NUCLEO-IDW04A1\r\n");
 101:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
 102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("X-Nucleo: X-NUCLEO-IDW01M1\r\n");
 103:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 104:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined (CONSOLE_UART_ENABLED)
 105:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("Interface: UART\r\n");
 106:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
 107:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("Interface: SPI\r\n");
 108:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 109:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif  
 110:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 111:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Module_Init();
 112:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 113:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined (DEBUG_PRINT) && !defined (WIFI_USE_VCOM)
 114:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     printf("IDW Module Initialized..\r\n");
 115:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     fflush(stdout);
 116:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 117:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 118:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #ifndef WIFI_USE_VCOM  
 119:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 	printf("WIFI WAKEUP\r\n");
 120:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 121:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wifi_wakeup(WIFI_TRUE);//Prevent from going to sleep during configuration    
 122:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 	
 123:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 	printf("WIFI RESET\r\n");
 124:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* Soft reset the module */
 125:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wifi_reset();
 126:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 127:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 	printf("if defined(CONSOLE_UART_ENABLED)\r\n");
 128:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(CONSOLE_UART_ENABLED)
 129:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Restore default setting*/    
 130:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = Restore_Default_Setting();
 131:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) 
 132:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return status;
 133:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 134:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #if !defined (USE_STM32L0XX_NUCLEO)
 135:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         
 136:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Restore_Default_Setting, resets the usart baud rate to 115200.
 137:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****            Set it to the value of config->mcu_baud_rate for synchronisation. */
 138:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(CONSOLE1_SPEED, config->mcu_baud_rate);
 139:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 140:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         
 141:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* save current setting in flash */
 142:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         Reset_AT_CMD_Buffer();  
 143:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_SAVE_CURRENT_SETTING);  
 144:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 145:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 4


 146:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 147:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Receive_AT_Resp( );
 148:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 149:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         } 
 150:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 151:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Soft reset the module */
 152:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         wifi_reset();
 153:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 154:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Switch on HW Flow Control*/  
 156:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF04
 157:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(CONSOLE1_HWFC, 0);
 158:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
 159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(CONSOLE1_HWFC, 1);
 160:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 161:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 162:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status; 
 163:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 164:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->wifi_baud_rate)
 165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 166:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Set USART Speed*/  
 167:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(CONSOLE1_SPEED, config->wifi_baud_rate);
 168:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 169:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 170:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 171:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF04
 172:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           /*AT+S.WIFI=0<cr>*/  
 173:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);  
 174:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 175:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 176:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Receive_AT_Resp( );
 178:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 179:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           else IO_status_flag.radio_off = WIFI_TRUE;
 180:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
 181:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         
 182:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arr
 183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif  
 184:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set wifi_mode to idle*/  
 186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_Configuration_Value(WIFI_MODE, WiFi_IDLE_MODE);
 187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;   
 188:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       switch(config->ht_mode)
 190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 191:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case WIFI_FALSE:
 192:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_HT_MODE, 0);
 193:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 194:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Addr(WIFI_OPR_RATE_MASK, "0x00003FCF");
 195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 196:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 197:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case WIFI_TRUE:
 198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_HT_MODE, 1);
 199:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 200:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Addr(WIFI_OPR_RATE_MASK, "0x003FFFCF");
 201:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 202:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 5


 203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         default:
 204:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 207:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       switch(config->power)
 208:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 209:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case wifi_active:
 210:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_POWERSAVE, 0);
 211:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 212:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 214:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case wifi_reactive:
 218:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_POWERSAVE, 1);
 219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 220:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_OPERATIONAL_MODE, 11);  
 221:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 222:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_BEACON_WAKEUP, 0);
 223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 224:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_LISTEN_INTERVAL, 0);
 225:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 226:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 228:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 229:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 230:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 231:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case wifi_sleep:
 232:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_POWERSAVE, 1);
 233:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 234:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_OPERATIONAL_MODE, 12);  
 235:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 236:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_BEACON_WAKEUP, 10);
 237:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 238:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_LISTEN_INTERVAL, 1);
 239:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 240:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 1);  
 241:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 242:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 243:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 244:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 245:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         default:
 246:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 247:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 248:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 249:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       switch(config->power_level)
 250:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 251:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case low:
 252:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case medium:
 253:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case high:
 254:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case max:
 255:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_TX_POWER, config->power_level*6);
 256:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 257:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 258:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         default:
 259:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 6


 260:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 261:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 262:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       switch(config->dhcp)
 263:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 264:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case off:
 265:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case on:
 266:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case custom:
 267:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(IP_USE_DHCP_SERVER, config->dhcp);
 268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 269:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 270:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         default:
 271:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 272:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 273:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 274:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set IP address */
 275:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->ip_addr)
 276:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 277:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_ADDRESS, config->ip_addr);
 278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 279:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 280:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set netmask address */
 281:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->netmask_addr)
 282:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 283:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_NETMASK, config->netmask_addr);
 284:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 285:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 286:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set default gateway address */
 287:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->gateway_addr)
 288:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 289:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_DEFAULT_GATEWAY, config->gateway_addr);
 290:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 291:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 292:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set dns address */
 293:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->dns_addr)
 294:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 295:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #ifdef SPWF04
 296:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             status = SET_Configuration_Addr(WIFI_IP_DNS1, config->dns_addr);
 297:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #else
 298:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             status = SET_Configuration_Addr(WIFI_IP_DNS, config->dns_addr);
 299:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #endif
 300:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 301:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 302:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set hostname */
 303:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->host_name)
 304:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 305:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_HOSTNAME, config->host_name);  
 306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 307:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 308:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 309:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->ap_domain_name)
 310:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 311:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_APDOMAINNAME, config->ap_domain_name);
 312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 313:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 314:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 315:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->ap_config_page_name)
 316:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 7


 317:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_APREDIRECT, config->ap_config_page_name);
 318:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 319:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 320:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 321:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->http_timeout)
 322:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 323:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(WIFI_IP_HTTP_TIMEOUT, config->http_timeout*1000);
 324:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 325:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 326:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->dhcp_timeout)
 327:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 328:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(WIFI_IP_DHCP_TIMEOUT, config->dhcp_timeout);
 329:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 330:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 331:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->wifi_region)
 332:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 333:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(WIFI_REG_COUNTRY, config->wifi_region);
 334:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 335:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }   
 336:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 337:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF01
 338:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         Reset_AT_CMD_Buffer();  
 339:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_HTTPD, config->web_server);  
 340:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 341:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 342:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 343:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Receive_AT_Resp( );
 344:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 345:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }  
 346:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif  
 347:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 348:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF04
 349:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           /*AT+S.TLSCERT2=content,2 */
 350:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           Reset_AT_CMD_Buffer();  
 351:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=content,2\r");        
 352:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 353:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status == WiFi_MODULE_SUCCESS)
 354:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           {
 355:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             status = USART_Receive_AT_Resp( );
 356:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 357:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           }  
 358:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           
 359:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           /* Set verbose to 1 for SPWF04 UART*/
 360:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value("console_verbose", 1);
 361:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 362:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 363:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             /*AT+S.WIFI=1<cr>*/  
 364:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);  
 365:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 366:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status == WiFi_MODULE_SUCCESS)
 367:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           {
 368:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             status = USART_Receive_AT_Resp( );
 369:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 370:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             else IO_status_flag.radio_off = WIFI_FALSE;
 371:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           }
 372:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           
 373:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 8


 374:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
 375:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           /* AT+S.TLSCERT2=clean,all */
 376:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           Reset_AT_CMD_Buffer();  
 377:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT2=clean,all\r");        
 378:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 379:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status == WiFi_MODULE_SUCCESS)
 380:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           {
 381:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             status = USART_Receive_AT_Resp( );
 382:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 383:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           }
 384:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 385:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 386:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* save current setting in flash */
 387:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 388:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_SAVE_CURRENT_SETTING);  
 389:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 390:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
 391:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 392:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
 393:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 394:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }   
 395:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 396:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->wifi_baud_rate)
 397:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 398:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         UART_Configuration(config->wifi_baud_rate); 
 399:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #if defined(SPWF01) 
 400:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           Receive_Data();//Restart data reception
 401:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #else
 402:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Counter_Variables.dma_buffer_count =0;
 403:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Counter_Variables.dma_buffer_previous_index =0;
 404:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           Receive_DMA_Uart_Data();
 405:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #endif
 406:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 407:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 408:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Soft reset the module, Do the second reset after setting all parameters and saving in flas
 409:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       wifi_reset();
 410:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 411:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
 412:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 413:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /*SPI Interface in use*/
 414:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 415:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set localecho to 0*/
 416:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_Configuration_Value(LOCALECHO1, 0);
 417:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 418:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 419:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Restore default setting*/    
 420:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 421:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.FCFG");  
 422:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 423:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 424:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 425:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 426:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* save current setting in flash */
 427:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 428:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WCFG");  
 429:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 430:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 9


 431:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 432:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 433:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Soft reset the module */
 434:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       wifi_reset();
 435:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 436:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /*AT+S.WIFI=0<cr>*/  
 437:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 438:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
 439:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 440:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 441:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 442:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arriv
 443:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 444:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set wifi_mode to idle*/  
 445:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_Configuration_Value(WIFI_MODE, WiFi_IDLE_MODE);
 446:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;  
 447:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 448:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /*AT+S.WIFI=1<cr>*/  
 449:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 450:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 1);  
 451:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 452:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 453:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 454:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
 455:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 456:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /*AT+S.TLSCERT2=content,2 -> clean certificates*/
 457:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 458:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=content,2");        
 459:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 460:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 461:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status; 
 462:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 463:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****        /* Set verbose to 0 for SPWF04 SPI */
 464:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_Configuration_Value("console_verbose", 0);
 465:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 466:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 467:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     //No need to reset again in case of new module SPI
 468:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif  //#if defined(CONSOLE_UART_ENABLED)
 469:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 	printf("endif defined(CONSOLE_UART_ENABLED)\r\n");
 470:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 471:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   wifi_wakeup(WIFI_FALSE);//De-assert wakeup signal (PC13) to allow sleep if enabled
 472:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif  //WIFI_USE_VCOM
 473:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 474:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF04)
 475:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* check for compatibility between middleware and firmware versions. */  
 476:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = wifi_firmware_middleware_version_compatibility();
 477:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
 478:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 479:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 480:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined (DEBUG_PRINT) && !defined (WIFI_USE_VCOM)
 481:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     printf("\r\nEnd of Initialization..\r\n");
 482:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     fflush(stdout);
 483:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 484:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 485:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 486:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 487:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 10


 488:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_set_socket_certificates
 489:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Set the security certificates and key for secure socket (TLS)
 490:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  tls_mode : 'o': one way authentication 'm': mutual authentication
 491:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  ca_certificate: Certificate Authority (CA) certificate (rootca_of_server.pem/rootca_of_cl
 492:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  certificate: could be client/server certificate (client_cert.pem/server_cert.pem) and its
 493:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  certificate_key : key corresponding to the certificate stored (client_key.rsa.pem/server_
 494:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  client_domain: common name of the server certificate 'server' for SPWF01 and auth file co
 495:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         rootca_of_server/client.pem for SPWF04 (rootca_of_client.bin/root_ca_of_server.bin) and i
 496:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  tls_epoch_time : epoch time
 497:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status
 498:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 499:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_set_socket_certificates(TLS_Certificate ca_certificate, TLS_Certificate tls_cert
 500:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
  28              		.loc 1 500 0
  29              		.cfi_startproc
  30              		@ args = 20, pretend = 0, frame = 16
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 30B5     		push	{r4, r5, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 12
  36              		.cfi_offset 4, -12
  37              		.cfi_offset 5, -8
  38              		.cfi_offset 14, -4
  39 0002 85B0     		sub	sp, sp, #20
  40              	.LCFI1:
  41              		.cfi_def_cfa_offset 32
  42 0004 04AC     		add	r4, sp, #16
  43 0006 04E90300 		stmdb	r4, {r0, r1}
  44 000a 8DE80C00 		stm	sp, {r2, r3}
  45 000e 0C9B     		ldr	r3, [sp, #48]
  46              	.LVL1:
 501:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 502:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 503:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(tls_epoch_time==0) 
  47              		.loc 1 503 0
  48 0010 002B     		cmp	r3, #0
  49 0012 40F08180 		bne	.L2
 504:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.epoch_time = EPOCH_TIME;
  50              		.loc 1 504 0
  51 0016 504A     		ldr	r2, .L16
  52 0018 504B     		ldr	r3, .L16+4
  53 001a C3F8BC20 		str	r2, [r3, #188]
  54              	.L3:
 505:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else
 506:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.epoch_time = tls_epoch_time;
 507:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 508:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
 509:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 510:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Clean the already stored certificates */
 511:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
  55              		.loc 1 511 0
  56 001e FFF7FEFF 		bl	Reset_AT_CMD_Buffer
  57              	.LVL2:
 512:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_CLEAN_TLS_CERT);        
  58              		.loc 1 512 0
  59 0022 4F4D     		ldr	r5, .L16+8
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 11


  60 0024 4F4C     		ldr	r4, .L16+12
  61 0026 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
  62 0028 2860     		str	r0, [r5]	@ unaligned
  63 002a 6960     		str	r1, [r5, #4]	@ unaligned
  64 002c AA60     		str	r2, [r5, #8]	@ unaligned
  65 002e EB60     		str	r3, [r5, #12]	@ unaligned
  66 0030 03CC     		ldmia	r4!, {r0, r1}
  67 0032 2861     		str	r0, [r5, #16]	@ unaligned
  68 0034 6961     		str	r1, [r5, #20]	@ unaligned
  69 0036 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
  70 0038 2B76     		strb	r3, [r5, #24]
 513:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
  71              		.loc 1 513 0
  72 003a 2846     		mov	r0, r5
  73 003c FFF7FEFF 		bl	strlen
  74              	.LVL3:
  75 0040 80B2     		uxth	r0, r0
  76 0042 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
  77              	.LVL4:
 514:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
  78              		.loc 1 514 0
  79 0046 20B9     		cbnz	r0, .L4
 515:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 516:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
  80              		.loc 1 516 0
  81 0048 FFF7FEFF 		bl	USART_Receive_AT_Resp
  82              	.LVL5:
 517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
  83              		.loc 1 517 0
  84 004c 0346     		mov	r3, r0
  85 004e 0028     		cmp	r0, #0
  86 0050 5FD1     		bne	.L5
  87              	.L4:
 518:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 519:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 520:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the epoch time */  
 521:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
  88              		.loc 1 521 0
  89 0052 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
  90              	.LVL6:
 522:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_SETTIME,(unsigned long)WiFi_Counter_Variables.epoch_time);    
  91              		.loc 1 522 0
  92 0056 424C     		ldr	r4, .L16+8
  93 0058 404B     		ldr	r3, .L16+4
  94 005a D3F8BC20 		ldr	r2, [r3, #188]
  95 005e 4249     		ldr	r1, .L16+16
  96 0060 2046     		mov	r0, r4
  97 0062 FFF7FEFF 		bl	sprintf
  98              	.LVL7:
 523:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
  99              		.loc 1 523 0
 100 0066 2046     		mov	r0, r4
 101 0068 FFF7FEFF 		bl	strlen
 102              	.LVL8:
 103 006c 80B2     		uxth	r0, r0
 104 006e FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 105              	.LVL9:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 12


 524:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 106              		.loc 1 524 0
 107 0072 0346     		mov	r3, r0
 108 0074 0028     		cmp	r0, #0
 109 0076 53D0     		beq	.L11
 110              	.L6:
 111              	.LVL10:
 525:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 526:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 527:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
 528:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 529:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 530:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Store the CA Cert(if specified) */
 531:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ca_certificate.certificate) {
 112              		.loc 1 531 0
 113 0078 029C     		ldr	r4, [sp, #8]
 114 007a 8CB1     		cbz	r4, .L7
 532:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 115              		.loc 1 532 0
 116 007c FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 117              	.LVL11:
 533:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_STORE_CA_CERT,(ca_certificate.certificate_size), ca_certific
 118              		.loc 1 533 0
 119 0080 374D     		ldr	r5, .L16+8
 120 0082 2346     		mov	r3, r4
 121 0084 039A     		ldr	r2, [sp, #12]
 122 0086 3949     		ldr	r1, .L16+20
 123 0088 2846     		mov	r0, r5
 124 008a FFF7FEFF 		bl	sprintf
 125              	.LVL12:
 534:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 535:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 126              		.loc 1 535 0
 127 008e 2846     		mov	r0, r5
 128 0090 FFF7FEFF 		bl	strlen
 129              	.LVL13:
 130 0094 80B2     		uxth	r0, r0
 131 0096 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 132              	.LVL14:
 536:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 133              		.loc 1 536 0
 134 009a 0346     		mov	r3, r0
 135 009c 0028     		cmp	r0, #0
 136 009e 45D0     		beq	.L12
 137              	.LVL15:
 138              	.L7:
 537:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 538:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 539:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 540:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 541:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 542:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 543:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Store the 'CA Authority Key ID' for SPWF04 and 'CA domain name' for SPWF01 module */
 544:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(client_domain.certificate) {
 139              		.loc 1 544 0
 140 00a0 0A9C     		ldr	r4, [sp, #40]
 141 00a2 84B1     		cbz	r4, .L8
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 13


 545:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 142              		.loc 1 545 0
 143 00a4 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 144              	.LVL16:
 546:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #ifdef SPWF04
 547:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_STORE_AUTH_KEY, client_domain.certificate_size, client_dom
 548:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
 549:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_SET_CA_DOMAIN_NAME, client_domain.certificate);
 145              		.loc 1 549 0
 146 00a8 2D4D     		ldr	r5, .L16+8
 147 00aa 2246     		mov	r2, r4
 148 00ac 3049     		ldr	r1, .L16+24
 149 00ae 2846     		mov	r0, r5
 150 00b0 FFF7FEFF 		bl	sprintf
 151              	.LVL17:
 550:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 551:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 552:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 152              		.loc 1 552 0
 153 00b4 2846     		mov	r0, r5
 154 00b6 FFF7FEFF 		bl	strlen
 155              	.LVL18:
 156 00ba 80B2     		uxth	r0, r0
 157 00bc FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 158              	.LVL19:
 553:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 159              		.loc 1 553 0
 160 00c0 0346     		mov	r3, r0
 161 00c2 0028     		cmp	r0, #0
 162 00c4 38D0     		beq	.L13
 163              	.LVL20:
 164              	.L8:
 554:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 556:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 557:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }  
 558:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 559:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 560:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Store Certificate */
 561:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(tls_certificate.certificate) {
 165              		.loc 1 561 0
 166 00c6 009C     		ldr	r4, [sp]
 167 00c8 84B1     		cbz	r4, .L9
 562:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 168              		.loc 1 562 0
 169 00ca FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 170              	.LVL21:
 563:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_STORE_CERT,(tls_certificate.certificate_size), tls_certifica
 171              		.loc 1 563 0
 172 00ce 244D     		ldr	r5, .L16+8
 173 00d0 2346     		mov	r3, r4
 174 00d2 019A     		ldr	r2, [sp, #4]
 175 00d4 2749     		ldr	r1, .L16+28
 176 00d6 2846     		mov	r0, r5
 177 00d8 FFF7FEFF 		bl	sprintf
 178              	.LVL22:
 564:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 14


 565:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 179              		.loc 1 565 0
 180 00dc 2846     		mov	r0, r5
 181 00de FFF7FEFF 		bl	strlen
 182              	.LVL23:
 183 00e2 80B2     		uxth	r0, r0
 184 00e4 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 185              	.LVL24:
 566:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 186              		.loc 1 566 0
 187 00e8 0346     		mov	r3, r0
 188 00ea 58B3     		cbz	r0, .L14
 189              	.LVL25:
 190              	.L9:
 567:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 568:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 569:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 570:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 571:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 572:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 573:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Store the key corresponding to the above certificate */
 574:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(certificate_key.certificate) {
 191              		.loc 1 574 0
 192 00ec 089C     		ldr	r4, [sp, #32]
 193 00ee 84B1     		cbz	r4, .L5
 575:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 194              		.loc 1 575 0
 195 00f0 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 196              	.LVL26:
 576:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_STORE_KEY,(certificate_key.certificate_size), certificate_ke
 197              		.loc 1 576 0
 198 00f4 1A4D     		ldr	r5, .L16+8
 199 00f6 2346     		mov	r3, r4
 200 00f8 099A     		ldr	r2, [sp, #36]
 201 00fa 1F49     		ldr	r1, .L16+32
 202 00fc 2846     		mov	r0, r5
 203 00fe FFF7FEFF 		bl	sprintf
 204              	.LVL27:
 577:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 578:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 205              		.loc 1 578 0
 206 0102 2846     		mov	r0, r5
 207 0104 FFF7FEFF 		bl	strlen
 208              	.LVL28:
 209 0108 80B2     		uxth	r0, r0
 210 010a FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 211              	.LVL29:
 579:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 212              		.loc 1 579 0
 213 010e 0346     		mov	r3, r0
 214 0110 F0B1     		cbz	r0, .L15
 215              	.LVL30:
 216              	.L5:
 580:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 581:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
 582:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 583:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 15


 584:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 585:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 586:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
 587:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 588:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.TIME=<seconds> */  
 589:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
 590:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TIME=%lu",(unsigned long)WiFi_Counter_Variables.epoch_time)
 591:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 592:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 593:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status; 
 594:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 595:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.TLSCERT=ca,<size><CR><Peer CA>*/
 596:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ca_certificate.certificate) {
 597:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 598:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_CERT_WRITE_EVENT;
 599:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.send_data = WIFI_TRUE;
 600:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_DataLength = (ca_certificate.certificate_size);
 601:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_data = (char *)ca_certificate.certificate;
 602:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=Ca,%d %s",WiFi_Counter_Variables.curr_DataLength,
 603:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 604:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 605:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_NO_EVENT;
 606:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status; 
 607:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 608:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 609:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /*AT+S.TLSCERT=auth,<Peer CA Authority Key Id>*/
 610:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(client_domain.certificate) {
 611:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 612:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_CERT_WRITE_EVENT;
 613:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.send_data = WIFI_TRUE;
 614:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_DataLength = client_domain.certificate_size;
 615:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_data = (char *)client_domain.certificate;
 616:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=Auth,%d %s", WiFi_Counter_Variables.curr_DataLeng
 617:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 618:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 619:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_NO_EVENT;
 620:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status; 
 621:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 622:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 623:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.TLSCERT=cert,<size><CR><SPWF04S certificate>*/
 624:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(tls_certificate.certificate) {
 625:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 626:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_CERT_WRITE_EVENT;
 627:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.send_data = WIFI_TRUE;
 628:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_DataLength = (tls_certificate.certificate_size);
 629:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_data = (char *)tls_certificate.certificate;
 630:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=cert,%d %s",WiFi_Counter_Variables.curr_DataLengt
 631:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 632:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 633:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_NO_EVENT;
 634:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status; 
 635:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 636:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 637:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.TLSCERT=key,<size><CR><SPWF04S private key>*/
 638:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(certificate_key.certificate) {
 639:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 640:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_CERT_WRITE_EVENT;
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 16


 641:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.send_data = WIFI_TRUE;
 642:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_DataLength = (certificate_key.certificate_size);
 643:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_data = (char *)certificate_key.certificate;
 644:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=key,%d %s",WiFi_Counter_Variables.curr_DataLength
 645:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 646:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 647:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_NO_EVENT;
 648:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status; 
 649:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 650:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 651:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 652:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 217              		.loc 1 652 0
 218 0112 1846     		mov	r0, r3
 219 0114 05B0     		add	sp, sp, #20
 220              	.LCFI2:
 221              		.cfi_remember_state
 222              		.cfi_def_cfa_offset 12
 223              		@ sp needed
 224 0116 30BD     		pop	{r4, r5, pc}
 225              	.LVL31:
 226              	.L2:
 227              	.LCFI3:
 228              		.cfi_restore_state
 506:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 229              		.loc 1 506 0
 230 0118 104A     		ldr	r2, .L16+4
 231 011a C2F8BC30 		str	r3, [r2, #188]
 232 011e 7EE7     		b	.L3
 233              	.LVL32:
 234              	.L11:
 526:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
 235              		.loc 1 526 0
 236 0120 FFF7FEFF 		bl	USART_Receive_AT_Resp
 237              	.LVL33:
 527:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 238              		.loc 1 527 0
 239 0124 0346     		mov	r3, r0
 240 0126 0028     		cmp	r0, #0
 241 0128 A6D0     		beq	.L6
 242 012a F2E7     		b	.L5
 243              	.L12:
 538:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 244              		.loc 1 538 0
 245 012c FFF7FEFF 		bl	USART_Receive_AT_Resp
 246              	.LVL34:
 539:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 247              		.loc 1 539 0
 248 0130 0346     		mov	r3, r0
 249 0132 0028     		cmp	r0, #0
 250 0134 B4D0     		beq	.L7
 251 0136 ECE7     		b	.L5
 252              	.L13:
 555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 253              		.loc 1 555 0
 254 0138 FFF7FEFF 		bl	USART_Receive_AT_Resp
 255              	.LVL35:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 17


 556:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }  
 256              		.loc 1 556 0
 257 013c 0346     		mov	r3, r0
 258 013e 0028     		cmp	r0, #0
 259 0140 C1D0     		beq	.L8
 260 0142 E6E7     		b	.L5
 261              	.L14:
 568:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 262              		.loc 1 568 0
 263 0144 FFF7FEFF 		bl	USART_Receive_AT_Resp
 264              	.LVL36:
 569:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 265              		.loc 1 569 0
 266 0148 0346     		mov	r3, r0
 267 014a 0028     		cmp	r0, #0
 268 014c CED0     		beq	.L9
 269 014e E0E7     		b	.L5
 270              	.L15:
 581:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 271              		.loc 1 581 0
 272 0150 FFF7FEFF 		bl	USART_Receive_AT_Resp
 273              	.LVL37:
 274 0154 0346     		mov	r3, r0
 275              	.LVL38:
 276 0156 DCE7     		b	.L5
 277              	.L17:
 278              		.align	2
 279              	.L16:
 280 0158 A91FA656 		.word	1453727657
 281 015c 00000000 		.word	WiFi_Counter_Variables
 282 0160 00000000 		.word	WiFi_AT_Cmd_Buff
 283 0164 00000000 		.word	.LC0
 284 0168 1C000000 		.word	.LC1
 285 016c 30000000 		.word	.LC2
 286 0170 48000000 		.word	.LC3
 287 0174 64000000 		.word	.LC4
 288 0178 80000000 		.word	.LC5
 289              		.cfi_endproc
 290              	.LFE276:
 292              		.section	.text.wifi_ping,"ax",%progbits
 293              		.align	1
 294              		.global	wifi_ping
 295              		.syntax unified
 296              		.thumb
 297              		.thumb_func
 298              		.fpu fpv4-sp-d16
 300              	wifi_ping:
 301              	.LFB277:
 653:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 654:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 655:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 656:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_ping
 657:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         issues a single ICMP ECHO request to the given host.
 658:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
 659:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t: status of PING Command.
 660:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 661:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_ping(uint8_t * hostname)
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 18


 662:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 302              		.loc 1 662 0
 303              		.cfi_startproc
 304              		@ args = 0, pretend = 0, frame = 0
 305              		@ frame_needed = 0, uses_anonymous_args = 0
 306              	.LVL39:
 307 0000 10B5     		push	{r4, lr}
 308              	.LCFI4:
 309              		.cfi_def_cfa_offset 8
 310              		.cfi_offset 4, -8
 311              		.cfi_offset 14, -4
 312              	.LVL40:
 663:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    WiFi_Status_t status = WiFi_MODULE_SUCCESS;   
 664:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 665:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)   
 666:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    sprintf((char*)WiFi_AT_Cmd_Buff,AT_PING,hostname);        
 313              		.loc 1 666 0
 314 0002 0A4C     		ldr	r4, .L22
 315 0004 0246     		mov	r2, r0
 316 0006 0A49     		ldr	r1, .L22+4
 317 0008 2046     		mov	r0, r4
 318              	.LVL41:
 319 000a FFF7FEFF 		bl	sprintf
 320              	.LVL42:
 667:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 321              		.loc 1 667 0
 322 000e 2046     		mov	r0, r4
 323 0010 FFF7FEFF 		bl	strlen
 324              	.LVL43:
 325 0014 80B2     		uxth	r0, r0
 326 0016 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 327              	.LVL44:
 668:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
 669:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.PING=1,56,%s",hostname);
 670:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 671:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = WiFi_MODULE_SUCCESS;
 672:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 673:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 328              		.loc 1 673 0
 329 001a 0346     		mov	r3, r0
 330 001c 08B1     		cbz	r0, .L21
 331              	.LVL45:
 332              	.L19:
 674:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 675:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
 676:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 677:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 678:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
 679:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 333              		.loc 1 679 0
 334 001e 1846     		mov	r0, r3
 335 0020 10BD     		pop	{r4, pc}
 336              	.LVL46:
 337              	.L21:
 675:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 338              		.loc 1 675 0
 339 0022 FFF7FEFF 		bl	USART_Receive_AT_Resp
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 19


 340              	.LVL47:
 341 0026 0346     		mov	r3, r0
 342              	.LVL48:
 343 0028 F9E7     		b	.L19
 344              	.L23:
 345 002a 00BF     		.align	2
 346              	.L22:
 347 002c 00000000 		.word	WiFi_AT_Cmd_Buff
 348 0030 00000000 		.word	.LC6
 349              		.cfi_endproc
 350              	.LFE277:
 352              		.section	.text.wifi_websocket_client_open,"ax",%progbits
 353              		.align	1
 354              		.global	wifi_websocket_client_open
 355              		.syntax unified
 356              		.thumb
 357              		.thumb_func
 358              		.fpu fpv4-sp-d16
 360              	wifi_websocket_client_open:
 361              	.LFB278:
 680:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 681:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 682:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_websocket_client_open
 683:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Open a network websocket
 684:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Hostname hostname to connect to
 685:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         portnumber portnumber of the Host to connect to
 686:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         protocol tcp or udp protocol
 687:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         sock_id socket id of the opened socket returned to the user
 688:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket open request
 689:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 690:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_websocket_client_open(uint8_t * hostname, uint32_t port_number, uint8_t * protoc
 691:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 362              		.loc 1 691 0
 363              		.cfi_startproc
 364              		@ args = 0, pretend = 0, frame = 0
 365              		@ frame_needed = 0, uses_anonymous_args = 0
 366              	.LVL49:
 367 0000 10B5     		push	{r4, lr}
 368              	.LCFI5:
 369              		.cfi_def_cfa_offset 8
 370              		.cfi_offset 4, -8
 371              		.cfi_offset 14, -4
 372 0002 1C46     		mov	r4, r3
 373              	.LVL50:
 692:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 693:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 694:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_Open_Event(hostname,port_number,protocol, WEB_SOCKET);
 374              		.loc 1 694 0
 375 0004 0123     		movs	r3, #1
 376              	.LVL51:
 377 0006 FFF7FEFF 		bl	Queue_Client_Open_Event
 378              	.LVL52:
 695:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 379              		.loc 1 695 0
 380 000a FFF7FEFF 		bl	USART_Receive_AT_Resp
 381              	.LVL53:
 696:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 20


 697:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   *sock_id = WiFi_Counter_Variables.Socket_Open_ID; //return the socket id to the user
 382              		.loc 1 697 0
 383 000e 034B     		ldr	r3, .L26
 384 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 385 0012 C3F30203 		ubfx	r3, r3, #0, #3
 386 0016 2370     		strb	r3, [r4]
 698:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
 699:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 387              		.loc 1 699 0
 388 0018 10BD     		pop	{r4, pc}
 389              	.LVL54:
 390              	.L27:
 391 001a 00BF     		.align	2
 392              	.L26:
 393 001c 00000000 		.word	WiFi_Counter_Variables
 394              		.cfi_endproc
 395              	.LFE278:
 397              		.section	.text.wifi_websocket_client_write,"ax",%progbits
 398              		.align	1
 399              		.global	wifi_websocket_client_write
 400              		.syntax unified
 401              		.thumb
 402              		.thumb_func
 403              		.fpu fpv4-sp-d16
 405              	wifi_websocket_client_write:
 406              	.LFB279:
 700:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 701:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 702:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_websocket_client_write
 703:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Write len bytes of data to socket
 704:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sock_id socket ID of the websocket to write to
 705:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         DataLength: data length to send
 706:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         pData : pointer of data buffer to be written
 707:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket write request
 708:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 709:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_websocket_client_write(uint8_t sock_id, uint32_t DataLength, char * pData)
 710:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 407              		.loc 1 710 0
 408              		.cfi_startproc
 409              		@ args = 0, pretend = 0, frame = 0
 410              		@ frame_needed = 0, uses_anonymous_args = 0
 411              	.LVL55:
 412 0000 08B5     		push	{r3, lr}
 413              	.LCFI6:
 414              		.cfi_def_cfa_offset 8
 415              		.cfi_offset 3, -8
 416              		.cfi_offset 14, -4
 417              	.LVL56:
 711:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKW=00,11<cr> */
 712:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 713:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 714:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Check if sock_id is open
 715:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!open_web_socket[sock_id])
 418              		.loc 1 715 0
 419 0002 094B     		ldr	r3, .L35
 420 0004 1B5C     		ldrb	r3, [r3, r0]	@ zero_extendqisi2
 421 0006 0BB9     		cbnz	r3, .L34
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 21


 716:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;
 422              		.loc 1 716 0
 423 0008 0520     		movs	r0, #5
 424              	.LVL57:
 425 000a 08BD     		pop	{r3, pc}
 426              	.LVL58:
 427              	.L34:
 717:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 718:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength <= 0 && DataLength > WiFi_Counter_Variables.wifi_socket_write_limit)
 428              		.loc 1 718 0
 429 000c 31B9     		cbnz	r1, .L30
 430              		.loc 1 718 0 is_stmt 0 discriminator 1
 431 000e 074B     		ldr	r3, .L35+4
 432 0010 D3F8E430 		ldr	r3, [r3, #228]
 433 0014 9942     		cmp	r1, r3
 434 0016 01D9     		bls	.L30
 719:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
 435              		.loc 1 719 0 is_stmt 1
 436 0018 0420     		movs	r0, #4
 437              	.LVL59:
 720:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 721:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_Write_Event(sock_id,DataLength,pData,WEB_SOCKET);
 722:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 723:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 724:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 438              		.loc 1 724 0
 439 001a 08BD     		pop	{r3, pc}
 440              	.LVL60:
 441              	.L30:
 721:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 442              		.loc 1 721 0
 443 001c 0123     		movs	r3, #1
 444 001e FFF7FEFF 		bl	Queue_Client_Write_Event
 445              	.LVL61:
 722:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 446              		.loc 1 722 0
 447 0022 FFF7FEFF 		bl	USART_Receive_AT_Resp
 448              	.LVL62:
 723:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 449              		.loc 1 723 0
 450 0026 08BD     		pop	{r3, pc}
 451              	.L36:
 452              		.align	2
 453              	.L35:
 454 0028 00000000 		.word	open_web_socket
 455 002c 00000000 		.word	WiFi_Counter_Variables
 456              		.cfi_endproc
 457              	.LFE279:
 459              		.section	.text.wifi_websocket_client_close,"ax",%progbits
 460              		.align	1
 461              		.global	wifi_websocket_client_close
 462              		.syntax unified
 463              		.thumb
 464              		.thumb_func
 465              		.fpu fpv4-sp-d16
 467              	wifi_websocket_client_close:
 468              	.LFB280:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 22


 725:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 726:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 727:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_websocket_client_close
 728:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         The WSOCKC command allows to close the websocket
 729:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sock_close_id the socket ID of the socket which needs to be closed.
 730:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket close request
 731:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 732:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_websocket_client_close(uint8_t sock_close_id)
 733:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 469              		.loc 1 733 0
 470              		.cfi_startproc
 471              		@ args = 0, pretend = 0, frame = 0
 472              		@ frame_needed = 0, uses_anonymous_args = 0
 473              	.LVL63:
 474 0000 08B5     		push	{r3, lr}
 475              	.LCFI7:
 476              		.cfi_def_cfa_offset 8
 477              		.cfi_offset 3, -8
 478              		.cfi_offset 14, -4
 479              	.LVL64:
 734:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
 735:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_Close_Event(sock_close_id, WEB_SOCKET);
 480              		.loc 1 735 0
 481 0002 0121     		movs	r1, #1
 482 0004 FFF7FEFF 		bl	Queue_Client_Close_Event
 483              	.LVL65:
 736:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 737:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 738:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 484              		.loc 1 738 0
 485 0008 0020     		movs	r0, #0
 486 000a 08BD     		pop	{r3, pc}
 487              		.cfi_endproc
 488              	.LFE280:
 490              		.section	.text.wifi_socket_client_open,"ax",%progbits
 491              		.align	1
 492              		.global	wifi_socket_client_open
 493              		.syntax unified
 494              		.thumb
 495              		.thumb_func
 496              		.fpu fpv4-sp-d16
 498              	wifi_socket_client_open:
 499              	.LFB281:
 739:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 740:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 741:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_socket_client_open
 742:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Open a network socket
 743:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Hostname hostname to connect to
 744:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         portnumber portnumber of the Host to connect to
 745:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         protocol tcp or udp protocol
 746:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         sock_id socket id of the opened socket returned to the user
 747:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket open request
 748:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 749:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_client_open(uint8_t * hostname, uint32_t port_number, uint8_t * protocol,
 750:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 500              		.loc 1 750 0
 501              		.cfi_startproc
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 23


 502              		@ args = 0, pretend = 0, frame = 0
 503              		@ frame_needed = 0, uses_anonymous_args = 0
 504              	.LVL66:
 505 0000 10B5     		push	{r4, lr}
 506              	.LCFI8:
 507              		.cfi_def_cfa_offset 8
 508              		.cfi_offset 4, -8
 509              		.cfi_offset 14, -4
 510 0002 1C46     		mov	r4, r3
 511              	.LVL67:
 751:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 752:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 753:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_Open_Event(hostname,port_number,protocol, NET_SOCKET);
 512              		.loc 1 753 0
 513 0004 0223     		movs	r3, #2
 514              	.LVL68:
 515 0006 FFF7FEFF 		bl	Queue_Client_Open_Event
 516              	.LVL69:
 754:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 517              		.loc 1 754 0
 518 000a FFF7FEFF 		bl	USART_Receive_AT_Resp
 519              	.LVL70:
 755:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   *sock_id = WiFi_Counter_Variables.Socket_Open_ID; //return the socket id to the user
 520              		.loc 1 756 0
 521 000e 034B     		ldr	r3, .L41
 522 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 523 0012 C3F30203 		ubfx	r3, r3, #0, #3
 524 0016 2370     		strb	r3, [r4]
 757:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
 758:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 525              		.loc 1 758 0
 526 0018 10BD     		pop	{r4, pc}
 527              	.LVL71:
 528              	.L42:
 529 001a 00BF     		.align	2
 530              	.L41:
 531 001c 00000000 		.word	WiFi_Counter_Variables
 532              		.cfi_endproc
 533              	.LFE281:
 535              		.section	.text.Open_Serial_Port,"ax",%progbits
 536              		.align	1
 537              		.global	Open_Serial_Port
 538              		.syntax unified
 539              		.thumb
 540              		.thumb_func
 541              		.fpu fpv4-sp-d16
 543              	Open_Serial_Port:
 544              	.LFB282:
 759:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 760:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 761:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 762:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Open_Serial_Port
 763:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Open a network socket
 764:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
 765:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : Wifi status
 766:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 24


 767:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t Open_Serial_Port()
 768:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 545              		.loc 1 768 0
 546              		.cfi_startproc
 547              		@ args = 0, pretend = 0, frame = 0
 548              		@ frame_needed = 0, uses_anonymous_args = 0
 549 0000 08B5     		push	{r3, lr}
 550              	.LCFI9:
 551              		.cfi_def_cfa_offset 8
 552              		.cfi_offset 3, -8
 553              		.cfi_offset 14, -4
 554              	.LVL72:
 769:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 770:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKOS=2<cr> */
 771:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
 555              		.loc 1 771 0
 556 0002 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 557              	.LVL73:
 772:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //sprintf((char*)WiFi_AT_Cmd_Buff,"\rAT+S.SOCKOS=%d\r",SerialPortNo);        
 773:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 558              		.loc 1 773 0
 559 0006 0748     		ldr	r0, .L47
 560 0008 FFF7FEFF 		bl	strlen
 561              	.LVL74:
 562 000c 80B2     		uxth	r0, r0
 563 000e FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 564              	.LVL75:
 774:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 775:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status==WiFi_MODULE_SUCCESS)
 565              		.loc 1 775 0
 566 0012 0346     		mov	r3, r0
 567 0014 08B1     		cbz	r0, .L46
 568              	.LVL76:
 569              	.L44:
 776:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 777:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( ); 
 778:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 779:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 780:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 570              		.loc 1 780 0
 571 0016 1846     		mov	r0, r3
 572 0018 08BD     		pop	{r3, pc}
 573              	.LVL77:
 574              	.L46:
 777:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 575              		.loc 1 777 0
 576 001a FFF7FEFF 		bl	USART_Receive_AT_Resp
 577              	.LVL78:
 578 001e 0346     		mov	r3, r0
 579              	.LVL79:
 580 0020 F9E7     		b	.L44
 581              	.L48:
 582 0022 00BF     		.align	2
 583              	.L47:
 584 0024 00000000 		.word	WiFi_AT_Cmd_Buff
 585              		.cfi_endproc
 586              	.LFE282:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 25


 588              		.section	.text.wifi_socket_client_write,"ax",%progbits
 589              		.align	1
 590              		.global	wifi_socket_client_write
 591              		.syntax unified
 592              		.thumb
 593              		.thumb_func
 594              		.fpu fpv4-sp-d16
 596              	wifi_socket_client_write:
 597              	.LFB283:
 781:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 782:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 783:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_socket_client_write
 784:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Write len bytes of data to socket
 785:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sock_id socket ID of the socket to write to
 786:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         DataLength: data length to send
 787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         pData : pointer of data buffer to be written
 788:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket write request
 789:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 790:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_client_write(uint8_t sock_id, uint32_t DataLength, char * pData)
 791:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 598              		.loc 1 791 0
 599              		.cfi_startproc
 600              		@ args = 0, pretend = 0, frame = 0
 601              		@ frame_needed = 0, uses_anonymous_args = 0
 602              	.LVL80:
 792:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKW=00,11<cr> */
 793:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 794:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 795:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Check if sock_id is open
 796:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!open_sockets[sock_id])
 603              		.loc 1 796 0
 604 0000 1B4B     		ldr	r3, .L64
 605 0002 1B5C     		ldrb	r3, [r3, r0]	@ zero_extendqisi2
 606 0004 13B9     		cbnz	r3, .L62
 797:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;  
 607              		.loc 1 797 0
 608 0006 0523     		movs	r3, #5
 798:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 799:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength <= 0)
 800:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
 801:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 802:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01)
 803:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     uint16_t chunk_count = 0, chunk_index;
 804:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     uint32_t chunk_size = 0;
 805:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     chunk_count = DataLength/MAX_CLIENT_WRITE_SIZE;
 806:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     chunk_count = (DataLength % MAX_CLIENT_WRITE_SIZE == 0)? chunk_count: chunk_count+1;
 807:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     chunk_index = 0;
 808:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(chunk_index < chunk_count)
 810:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 811:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       chunk_size = (DataLength > MAX_CLIENT_WRITE_SIZE)? MAX_CLIENT_WRITE_SIZE: DataLength;
 812:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       DataLength = (DataLength > MAX_CLIENT_WRITE_SIZE)? (DataLength-MAX_CLIENT_WRITE_SIZE): 0;
 813:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Queue_Client_Write_Event(sock_id,chunk_size,pData+(chunk_index*MAX_CLIENT_WRITE_SIZE), NET_SO
 814:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 815:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS)
 816:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         break;
 817:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       chunk_index++;
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 26


 818:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 819:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else //free to use max proportional to free heap size
 820:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(DataLength > WiFi_Counter_Variables.wifi_socket_write_limit)
 821:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       return WiFi_NOT_SUPPORTED;
 822:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 823:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Queue_Client_Write_Event(sock_id,DataLength,pData, NET_SOCKET);
 824:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 825:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 826:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 827:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 828:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 609              		.loc 1 828 0
 610 0008 1846     		mov	r0, r3
 611              	.LVL81:
 612 000a 7047     		bx	lr
 613              	.LVL82:
 614              	.L62:
 791:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKW=00,11<cr> */
 615              		.loc 1 791 0
 616 000c 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 617              	.LCFI10:
 618              		.cfi_def_cfa_offset 24
 619              		.cfi_offset 4, -24
 620              		.cfi_offset 5, -20
 621              		.cfi_offset 6, -16
 622              		.cfi_offset 7, -12
 623              		.cfi_offset 8, -8
 624              		.cfi_offset 14, -4
 625 0010 0646     		mov	r6, r0
 626 0012 0D46     		mov	r5, r1
 627 0014 1746     		mov	r7, r2
 799:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
 628              		.loc 1 799 0
 629 0016 19B9     		cbnz	r1, .L63
 800:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 630              		.loc 1 800 0
 631 0018 0423     		movs	r3, #4
 632              	.LVL83:
 633              	.L50:
 634              		.loc 1 828 0
 635 001a 1846     		mov	r0, r3
 636 001c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 637              	.LVL84:
 638              	.L63:
 805:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     chunk_count = (DataLength % MAX_CLIENT_WRITE_SIZE == 0)? chunk_count: chunk_count+1;
 639              		.loc 1 805 0
 640 0020 C1F30F38 		ubfx	r8, r1, #12, #16
 641              	.LVL85:
 806:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     chunk_index = 0;
 642              		.loc 1 806 0
 643 0024 C1F30B03 		ubfx	r3, r1, #0, #12
 644 0028 1BB1     		cbz	r3, .L51
 806:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     chunk_index = 0;
 645              		.loc 1 806 0 is_stmt 0 discriminator 1
 646 002a 08F10108 		add	r8, r8, #1
 647              	.LVL86:
 648 002e 1FFA88F8 		uxth	r8, r8
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 27


 649              	.LVL87:
 650              	.L51:
 807:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 651              		.loc 1 807 0 is_stmt 1 discriminator 4
 652 0032 0024     		movs	r4, #0
 793:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 653              		.loc 1 793 0 discriminator 4
 654 0034 2346     		mov	r3, r4
 809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 655              		.loc 1 809 0 discriminator 4
 656 0036 0DE0     		b	.L52
 657              	.LVL88:
 658              	.L57:
 812:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Queue_Client_Write_Event(sock_id,chunk_size,pData+(chunk_index*MAX_CLIENT_WRITE_SIZE), NET_SO
 659              		.loc 1 812 0
 660 0038 0025     		movs	r5, #0
 661              	.LVL89:
 662              	.L53:
 813:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 663              		.loc 1 813 0 discriminator 4
 664 003a 0223     		movs	r3, #2
 665              	.LVL90:
 666 003c 07EB0432 		add	r2, r7, r4, lsl #12
 667 0040 3046     		mov	r0, r6
 668 0042 FFF7FEFF 		bl	Queue_Client_Write_Event
 669              	.LVL91:
 814:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS)
 670              		.loc 1 814 0 discriminator 4
 671 0046 FFF7FEFF 		bl	USART_Receive_AT_Resp
 672              	.LVL92:
 815:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         break;
 673              		.loc 1 815 0 discriminator 4
 674 004a 0346     		mov	r3, r0
 675 004c 0028     		cmp	r0, #0
 676 004e E4D1     		bne	.L50
 817:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 677              		.loc 1 817 0
 678 0050 0134     		adds	r4, r4, #1
 679              	.LVL93:
 680 0052 A4B2     		uxth	r4, r4
 681              	.LVL94:
 682              	.L52:
 809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 683              		.loc 1 809 0
 684 0054 4445     		cmp	r4, r8
 685 0056 E0D2     		bcs	.L50
 811:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       DataLength = (DataLength > MAX_CLIENT_WRITE_SIZE)? (DataLength-MAX_CLIENT_WRITE_SIZE): 0;
 686              		.loc 1 811 0
 687 0058 2946     		mov	r1, r5
 688 005a B5F5805F 		cmp	r5, #4096
 689 005e 28BF     		it	cs
 690 0060 4FF48051 		movcs	r1, #4096
 691              	.LVL95:
 812:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Queue_Client_Write_Event(sock_id,chunk_size,pData+(chunk_index*MAX_CLIENT_WRITE_SIZE), NET_SO
 692              		.loc 1 812 0
 693 0064 B5F5805F 		cmp	r5, #4096
 694 0068 E6D9     		bls	.L57
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 28


 812:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Queue_Client_Write_Event(sock_id,chunk_size,pData+(chunk_index*MAX_CLIENT_WRITE_SIZE), NET_SO
 695              		.loc 1 812 0 is_stmt 0 discriminator 1
 696 006a A5F58055 		sub	r5, r5, #4096
 697              	.LVL96:
 698 006e E4E7     		b	.L53
 699              	.L65:
 700              		.align	2
 701              	.L64:
 702 0070 00000000 		.word	open_sockets
 703              		.cfi_endproc
 704              	.LFE283:
 706              		.section	.text.wifi_socket_client_close,"ax",%progbits
 707              		.align	1
 708              		.global	wifi_socket_client_close
 709              		.syntax unified
 710              		.thumb
 711              		.thumb_func
 712              		.fpu fpv4-sp-d16
 714              	wifi_socket_client_close:
 715              	.LFB285:
 829:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 830:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 831:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Socket_Read
 832:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Return len bytes of data from socket
 833:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: data length to read
 834:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket read request
 835:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 836:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t Socket_Read(uint16_t DataLength)
 837:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 838:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKR=01,12<cr> */
 839:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 840:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01) && defined(CONSOLE_UART_ENABLED)
 841:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wait_for_command_mode();
 842:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 843:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 844:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKON=myserver,1234,t<cr> */
 845:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)
 846:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_SOCKET_READ,WiFi_Counter_Variables.sockon_query_id,DataLengt
 847:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 848:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 849:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
 850:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     //printf("\r\nAT+S.SOCKR");
 851:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.SOCKR=%d,%d",WiFi_Counter_Variables.sockon_query_id,DataL
 852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 853:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
 854:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
 855:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_CLIENT_SOCKET_READ_DATA;
 856:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Start_AT_CMD_Timer();
 857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
 858:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 859:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 860:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 861:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 862:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(WiFi_Control_Variables.stop_event_dequeue == WIFI_FALSE)
 863:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 864:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 865:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* enable the data receive in chunk mode only in spwfsa01 *///--------> TBD->Enable chunk mode 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 29


 866:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #ifdef SPWF01
 867:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Counter_Variables.last_process_buffer_index = 5;
 868:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_receive_data_chunk = WIFI_TRUE;
 869:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
 870:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #elif defined(SPWF04) && !defined(CONSOLE_UART_ENABLED)
 871:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
 872:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 873:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 874:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 875:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 876:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 877:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 878:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
 879:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 880:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Socket_Server_Read
 881:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Return len bytes of data from socket
 882:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: data length to read
 883:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket read request
 884:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 885:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t Socket_Server_Read(uint16_t DataLength)
 886:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 887:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKR=01,12<cr> */
 888:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 889:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01) && defined(CONSOLE_UART_ENABLED)
 890:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wait_for_command_mode();
 891:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 892:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 893:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKDR=%d,%d,%d<cr> */
 894:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_SERVER_SOCKET_READ,WiFi_Counter_Variables.sockdon_query_id, Wi
 895:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 896:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)
 897:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 898:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
 899:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
 900:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
 901:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_SERVER_SOCKET_READ_DATA;
 902:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Start_AT_CMD_Timer();
 903:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
 904:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 905:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 906:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 907:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 908:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.stop_event_dequeue = (WiFi_Control_Variables.stop_event_dequeue == WIFI_
 909:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 910:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(SPWF04) && !defined(CONSOLE_UART_ENABLED)
 911:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
 912:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 913:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 914:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 915:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 916:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 917:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 918:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Websocket_Read
 919:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Return len bytes of data from socket
 920:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: data length to read
 921:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket read request
 922:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 30


 923:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t Websocket_Read(uint16_t DataLength)
 924:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 925:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.WSOCKR=01,12<cr> */
 926:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 927:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 928:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
 929:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WEB_SOCKET_READ,WiFi_Counter_Variables.sockon_query_id,DataLen
 930:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 931:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
 932:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //printf("\r\nAT+S.SOCKR");
 933:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WSOCKR=%d,%d",WiFi_Counter_Variables.sockon_query_id,DataLe
 934:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
 935:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
 936:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   IO_status_flag.AT_event_processing = WIFI_CLIENT_WEB_SOCKET_READ_DATA;
 937:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Start_AT_CMD_Timer();
 938:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
 939:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 940:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 941:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 942:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(WiFi_Control_Variables.stop_event_dequeue == WIFI_FALSE)
 943:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 944:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 945:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 946:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* enable sock_read for SPI only */
 947:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(SPWF04) && !defined(CONSOLE_UART_ENABLED)
 948:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
 949:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 950:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 951:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* enable the data receive in chunk mode only in spwfsa01 *///--------> TBD->Enable chunk mode 
 952:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF01
 953:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.last_process_buffer_index = 5;
 954:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.enable_receive_data_chunk = WIFI_TRUE;
 955:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
 956:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.last_process_buffer_index = 10;
 957:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 958:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 959:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 960:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 961:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 962:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 963:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 964:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 965:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_socket_client_close
 966:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         The SOCKC command allows to close socket
 967:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sock_close_id the socket ID of the socket which needs to be closed.
 968:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket close request
 969:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 970:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_client_close(uint8_t sock_close_id)
 971:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 716              		.loc 1 971 0 is_stmt 1
 717              		.cfi_startproc
 718              		@ args = 0, pretend = 0, frame = 0
 719              		@ frame_needed = 0, uses_anonymous_args = 0
 720              	.LVL97:
 721 0000 08B5     		push	{r3, lr}
 722              	.LCFI11:
 723              		.cfi_def_cfa_offset 8
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 31


 724              		.cfi_offset 3, -8
 725              		.cfi_offset 14, -4
 726              	.LVL98:
 972:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 973:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* User is asking for a socket close, no need for callback. */
 974:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 975:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01)
 976:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.enable_SockON_Server_Closed_Callback = WIFI_FALSE;
 727              		.loc 1 976 0
 728 0002 074B     		ldr	r3, .L71
 729 0004 9A79     		ldrb	r2, [r3, #6]	@ zero_extendqisi2
 730 0006 6FF38202 		bfc	r2, #2, #1
 731 000a 9A71     		strb	r2, [r3, #6]
 977:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
 978:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Client_Socket_Close_Callback[sock_close_id] = WIFI_FALSE;
 979:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 980:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(open_sockets[sock_close_id])
 732              		.loc 1 980 0
 733 000c 054B     		ldr	r3, .L71+4
 734 000e 1B5C     		ldrb	r3, [r3, r0]	@ zero_extendqisi2
 735 0010 0BB9     		cbnz	r3, .L70
 981:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 982:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Queue_Client_Close_Event(sock_close_id, NET_SOCKET);
 983:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
 984:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 985:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else
 986:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 736              		.loc 1 986 0
 737 0012 0220     		movs	r0, #2
 738              	.LVL99:
 987:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 739              		.loc 1 987 0
 740 0014 08BD     		pop	{r3, pc}
 741              	.LVL100:
 742              	.L70:
 982:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
 743              		.loc 1 982 0
 744 0016 0221     		movs	r1, #2
 745 0018 FFF7FEFF 		bl	Queue_Client_Close_Event
 746              	.LVL101:
 983:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 747              		.loc 1 983 0
 748 001c 0020     		movs	r0, #0
 749 001e 08BD     		pop	{r3, pc}
 750              	.L72:
 751              		.align	2
 752              	.L71:
 753 0020 00000000 		.word	WiFi_Control_Variables
 754 0024 00000000 		.word	open_sockets
 755              		.cfi_endproc
 756              	.LFE285:
 758              		.section	.text.wifi_socket_server_open,"ax",%progbits
 759              		.align	1
 760              		.global	wifi_socket_server_open
 761              		.syntax unified
 762              		.thumb
 763              		.thumb_func
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 32


 764              		.fpu fpv4-sp-d16
 766              	wifi_socket_server_open:
 767              	.LFB287:
 988:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 989:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 990:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Socket_Pending_Data
 991:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Query pending data.It will returns the number of bytes of data waiting on socket
 992:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param None
 993:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval uint8_t :number of bytes of data waiting on socket
 994:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 995:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** void Socket_Pending_Data()
 996:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 997:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKQ=01<cr> */
 998:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
 999:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1000:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01)
1001:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wait_for_command_mode();
1002:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
1003:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1004:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(open_sockets[WiFi_Counter_Variables.sockon_query_id])
1005:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1006:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(WiFi_Control_Variables.stop_event_dequeue == WIFI_FALSE)
1007:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
1008:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
1009:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #if defined(CONSOLE_UART_ENABLED)
1010:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_QUERY_PENDING_DATA,WiFi_Counter_Variables.sockon_query_i
1011:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1012:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
1013:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //printf("\r\nAT+S.SOCKQ");
1014:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.SOCKQ=%d",WiFi_Counter_Variables.sockon_query_id);   
1015:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
1016:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
1017:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         IO_status_flag.AT_event_processing = WIFI_CLIENT_SOCKET_QUERY_EVENT;
1018:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         Start_AT_CMD_Timer();
1019:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
1020:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
1021:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
1022:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifndef CONSOLE_UART_ENABLED
1023:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //prevent the OK received after socket close command to be Q'ed
1024:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         IO_status_flag.prevent_push_OK_event       = WIFI_TRUE;
1025:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
1026:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1027:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1028:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1029:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1030:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1031:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Server_Pending_Data
1032:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Query pending data.It will returns the number of bytes of data waiting on socket
1033:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1034:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval void
1035:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1036:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** void Server_Pending_Data()
1037:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1038:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* "AT+S.SOCKDQ=%d,%d\r" */
1039:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1040:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1041:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01) && defined(CONSOLE_UART_ENABLED)
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 33


1042:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wait_for_command_mode();
1043:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
1044:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1045:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(open_server_sockets[WiFi_Counter_Variables.sockdon_query_id])
1046:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1047:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(WiFi_Control_Variables.stop_event_dequeue == WIFI_FALSE)
1048:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
1049:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(CONSOLE_UART_ENABLED)
1050:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_SERVER_SOCKET_QUERY,WiFi_Counter_Variables.sockdon_query_i
1051:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1052:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
1053:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.SOCKDQ=%d,%d",WiFi_Counter_Variables.sockdon_query_id, 
1054:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
1055:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
1056:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       IO_status_flag.AT_event_processing = WIFI_SERVER_SOCKET_QUERY_EVENT;
1057:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Start_AT_CMD_Timer();
1058:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
1059:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
1060:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #ifndef CONSOLE_UART_ENABLED
1061:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //prevent the OK received after socket close command to be Q'ed
1062:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       IO_status_flag.prevent_push_OK_event       = WIFI_TRUE;
1063:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
1064:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1065:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1066:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1067:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1068:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Websocket_Pending_Data
1069:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Query pending data.It will returns the number of bytes of data waiting on websocket
1070:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1071:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval void
1072:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1073:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** void Websocket_Pending_Data()
1074:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1075:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* "AT+S.WSOCKDQ=%d,%d\r" */
1076:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1077:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1078:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //if(open_server_sockets[WiFi_Counter_Variables.sockdon_query_id])
1079:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1080:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(WiFi_Control_Variables.stop_event_dequeue == WIFI_FALSE)
1081:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
1082:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #if defined(CONSOLE_UART_ENABLED)
1083:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_WEB_SOCKET_QUERY,WiFi_Counter_Variables.sockon_query_id); 
1084:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1085:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
1086:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WSOCKQ=%d",WiFi_Counter_Variables.sockon_query_id);    
1087:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
1088:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
1089:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       IO_status_flag.AT_event_processing = WIFI_CLIENT_WEB_SOCKET_QUERY_EVENT;
1090:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Start_AT_CMD_Timer();
1091:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
1092:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
1093:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifndef CONSOLE_UART_ENABLED
1094:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //prevent the OK received after socket close command to be Q'ed
1095:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         IO_status_flag.prevent_push_OK_event       = WIFI_TRUE;
1096:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1097:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1098:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 34


1099:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1100:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1101:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_socket_server_open
1103:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Open a Server socket
1104:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1105:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of server socket request
1106:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1107:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1108:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_server_open(uint32_t port_number, uint8_t *protocol, uint8_t *sock_id)
1109:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1110:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1111:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1112:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_Open_Event(port_number,protocol);
1113:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1114:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   *sock_id = WiFi_Counter_Variables.Server_Socket_Open_ID; //return the socket id to the user
1115:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1116:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1117:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1118:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_server_open(uint32_t port_number, uint8_t * protocol)
1119:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 768              		.loc 1 1119 0
 769              		.cfi_startproc
 770              		@ args = 0, pretend = 0, frame = 0
 771              		@ frame_needed = 0, uses_anonymous_args = 0
 772              	.LVL102:
 773 0000 08B5     		push	{r3, lr}
 774              	.LCFI12:
 775              		.cfi_def_cfa_offset 8
 776              		.cfi_offset 3, -8
 777              		.cfi_offset 14, -4
 778              	.LVL103:
1120:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1121:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1122:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_Open_Event(port_number,protocol);
 779              		.loc 1 1122 0
 780 0002 FFF7FEFF 		bl	Queue_Server_Open_Event
 781              	.LVL104:
1123:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 782              		.loc 1 1123 0
 783 0006 FFF7FEFF 		bl	USART_Receive_AT_Resp
 784              	.LVL105:
1124:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1125:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1126:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 785              		.loc 1 1126 0
 786 000a 08BD     		pop	{r3, pc}
 787              		.cfi_endproc
 788              	.LFE287:
 790              		.section	.text.wifi_socket_server_close,"ax",%progbits
 791              		.align	1
 792              		.global	wifi_socket_server_close
 793              		.syntax unified
 794              		.thumb
 795              		.thumb_func
 796              		.fpu fpv4-sp-d16
 798              	wifi_socket_server_close:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 35


 799              	.LFB289:
1127:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1128:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1129:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1130:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1131:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_socket_server_write
1132:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Write to a Server socket
1133:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  server_id 
1134:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         client_id
1135:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Datalength
1136:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of server socket request
1137:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1138:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1139:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_server_write(uint8_t server_id, uint8_t client_id, uint32_t DataLength,ch
1140:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1141:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKW=00,11<cr> */
1142:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1143:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1144:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Check if sock_id is open
1145:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!open_server_sockets[server_id])
1146:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;
1147:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1148:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength<=0 && DataLength > WiFi_Counter_Variables.wifi_socket_write_limit)
1149:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
1150:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1151:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_Write_Event(server_id, client_id, DataLength,Data);
1152:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1153:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1154:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1156:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1157:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_server_write(uint32_t DataLength,char * Data) 
1158:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1160:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Can only write if there is a client connected */
1161:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!wifi_client_connected)
1162:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;
1163:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1164:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength <= 0 && DataLength > WiFi_Counter_Variables.wifi_socket_write_limit)
1165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1166:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1167:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   wait_for_command_mode(); 
1168:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
1169:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __disable_irq();
1170:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1171:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_TRUE;
1172:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_TRUE;
1173:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __enable_irq();
1174:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1175:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.sock_read_ongoing || IO_status_flag.WIND64_count!= 0)//wait till any pending
1176:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       __NOP(); //nothing to do
1178:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1179:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1180:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*to make sure that by default the mode is not switched to command mode from data mode*/
1181:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.switch_by_default_to_command_mode = WIFI_FALSE;
1182:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 36


1183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*Switch to Data Mode first*/
1184:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!IO_status_flag.data_mode)
1185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_switch_to_data_mode();//switch by default
1187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(!IO_status_flag.data_mode && wifi_client_connected)
1188:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
1189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           //Wait till data_mode is active
1190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __NOP(); //nothing to do
1191:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
1192:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       // if client got disconnected
1193:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(!wifi_client_connected)
1194:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
1195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Control_Variables.switch_by_default_to_command_mode = WIFI_TRUE;  /*back to default 
1196:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __disable_irq();
1197:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_FALSE;
1198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_FALSE;
1199:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __enable_irq();
1200:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           return WiFi_MODULE_ERROR;
1201:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
1202:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1204:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*Write the data on the uart*/
1205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(HAL_UART_Transmit(&UartWiFiHandle, (uint8_t *)Data, DataLength,1000)!= HAL_OK)
1206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1207:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_UART_Error_Handler();
1208:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = WiFi_HAL_UART_ERROR;
1209:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1210:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //HAL_Delay(100);//Wait for tx before switching back to command mode
1211:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1212:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*Switch back to Command Mode*/
1213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!IO_status_flag.command_mode)
1214:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_switch_to_command_mode();//switch by default
1216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(!IO_status_flag.command_mode)
1217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
1218:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           //Wait till command_mode is active
1219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __NOP(); //nothing to do
1220:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
1221:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1222:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.switch_by_default_to_command_mode = WIFI_TRUE;  /*back to default behaviou
1224:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1225:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __disable_irq();
1226:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_FALSE;
1227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_FALSE;
1228:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __enable_irq();
1229:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1230:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1231:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1232:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1233:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1234:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1235:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Server Socket Close
1236:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Queue the server socket close command
1237:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  count: the number of arguments 
1238:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of server socket request
1239:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 37


1240:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1241:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t socket_server_close(int count,...)
1242:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1243:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   va_list v;
1244:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   va_start(v,count);
1245:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   int sid = va_arg(v,int);
1246:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   int cid;
1247:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   (count == 2) ? (cid = va_arg(v,int)): (cid = 9);
1248:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_Close_Event(sid,cid);
1249:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   va_end(v);
1250:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return WiFi_MODULE_SUCCESS;
1251:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1252:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1253:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1254:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Server Socket Close
1255:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Close a Server socket
1256:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1257:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of server socket request
1258:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1259:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_server_close() 
1260:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 800              		.loc 1 1260 0
 801              		.cfi_startproc
 802              		@ args = 0, pretend = 0, frame = 0
 803              		@ frame_needed = 0, uses_anonymous_args = 0
 804 0000 08B5     		push	{r3, lr}
 805              	.LCFI13:
 806              		.cfi_def_cfa_offset 8
 807              		.cfi_offset 3, -8
 808              		.cfi_offset 14, -4
1261:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_Close_Event(-1,-1);
 809              		.loc 1 1261 0
 810 0002 4FF0FF31 		mov	r1, #-1
 811 0006 0846     		mov	r0, r1
 812 0008 FFF7FEFF 		bl	Queue_Server_Close_Event
 813              	.LVL106:
1262:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return WiFi_MODULE_SUCCESS; 
1263:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 814              		.loc 1 1263 0
 815 000c 0020     		movs	r0, #0
 816 000e 08BD     		pop	{r3, pc}
 817              		.cfi_endproc
 818              	.LFE289:
 820              		.section	.text.wait_for_command_mode,"ax",%progbits
 821              		.align	1
 822              		.global	wait_for_command_mode
 823              		.syntax unified
 824              		.thumb
 825              		.thumb_func
 826              		.fpu fpv4-sp-d16
 828              	wait_for_command_mode:
 829              	.LFB290:
1264:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1265:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1266:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef CONSOLE_UART_ENABLED
1267:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wait_for_command_mode
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 38


1269:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Waits till we are in command mode
1270:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1271:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval None
1272:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1273:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** void wait_for_command_mode(void)
1274:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 830              		.loc 1 1274 0
 831              		.cfi_startproc
 832              		@ args = 0, pretend = 0, frame = 0
 833              		@ frame_needed = 0, uses_anonymous_args = 0
 834              		@ link register save eliminated.
1275:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(!IO_status_flag.command_mode)
 835              		.loc 1 1275 0
 836 0000 00E0     		b	.L78
 837              	.L79:
1276:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
1277:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //Make sure we are in command mode, ideally we should do this in every User API?
1278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
 838              		.loc 1 1278 0
 839              		.syntax unified
 840              	@ 1278 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 841 0002 00BF     		nop
 842              	@ 0 "" 2
 843              		.thumb
 844              		.syntax unified
 845              	.L78:
1275:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(!IO_status_flag.command_mode)
 846              		.loc 1 1275 0
 847 0004 024B     		ldr	r3, .L80
 848 0006 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 849 0008 DB09     		lsrs	r3, r3, #7
 850 000a FAD0     		beq	.L79
1279:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
1280:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 851              		.loc 1 1280 0
 852 000c 7047     		bx	lr
 853              	.L81:
 854 000e 00BF     		.align	2
 855              	.L80:
 856 0010 00000000 		.word	IO_status_flag
 857              		.cfi_endproc
 858              	.LFE290:
 860              		.section	.text.Socket_Read,"ax",%progbits
 861              		.align	1
 862              		.global	Socket_Read
 863              		.syntax unified
 864              		.thumb
 865              		.thumb_func
 866              		.fpu fpv4-sp-d16
 868              	Socket_Read:
 869              	.LFB284:
 837:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKR=01,12<cr> */
 870              		.loc 1 837 0
 871              		.cfi_startproc
 872              		@ args = 0, pretend = 0, frame = 0
 873              		@ frame_needed = 0, uses_anonymous_args = 0
 874              	.LVL107:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 39


 875 0000 70B5     		push	{r4, r5, r6, lr}
 876              	.LCFI14:
 877              		.cfi_def_cfa_offset 16
 878              		.cfi_offset 4, -16
 879              		.cfi_offset 5, -12
 880              		.cfi_offset 6, -8
 881              		.cfi_offset 14, -4
 882 0002 0646     		mov	r6, r0
 883              	.LVL108:
 841:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 884              		.loc 1 841 0
 885 0004 FFF7FEFF 		bl	wait_for_command_mode
 886              	.LVL109:
 846:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 887              		.loc 1 846 0
 888 0008 134D     		ldr	r5, .L86
 889 000a 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 890 000c 134C     		ldr	r4, .L86+4
 891 000e 3346     		mov	r3, r6
 892 0010 C2F3C202 		ubfx	r2, r2, #3, #3
 893 0014 1249     		ldr	r1, .L86+8
 894 0016 2046     		mov	r0, r4
 895 0018 FFF7FEFF 		bl	sprintf
 896              	.LVL110:
 847:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 897              		.loc 1 847 0
 898 001c C5F8A460 		str	r6, [r5, #164]
 848:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
 899              		.loc 1 848 0
 900 0020 2046     		mov	r0, r4
 901 0022 FFF7FEFF 		bl	strlen
 902              	.LVL111:
 903 0026 80B2     		uxth	r0, r0
 904 0028 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 905              	.LVL112:
 860:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 906              		.loc 1 860 0
 907 002c 0246     		mov	r2, r0
 908 002e 88B9     		cbnz	r0, .L83
 862:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 909              		.loc 1 862 0
 910 0030 0C4B     		ldr	r3, .L86+12
 911 0032 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 912 0034 13F0080F 		tst	r3, #8
 913 0038 03D1     		bne	.L84
 863:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 914              		.loc 1 863 0
 915 003a 0A49     		ldr	r1, .L86+12
 916 003c 43F00803 		orr	r3, r3, #8
 917 0040 0B70     		strb	r3, [r1]
 918              	.L84:
 867:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_receive_data_chunk = WIFI_TRUE;
 919              		.loc 1 867 0
 920 0042 0521     		movs	r1, #5
 921 0044 044B     		ldr	r3, .L86
 922 0046 A3F89A10 		strh	r1, [r3, #154]	@ movhi
 868:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 40


 923              		.loc 1 868 0
 924 004a 0649     		ldr	r1, .L86+12
 925 004c 8B78     		ldrb	r3, [r1, #2]	@ zero_extendqisi2
 869:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #elif defined(SPWF04) && !defined(CONSOLE_UART_ENABLED)
 926              		.loc 1 869 0
 927 004e 43F02403 		orr	r3, r3, #36
 928 0052 8B70     		strb	r3, [r1, #2]
 929              	.L83:
 876:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 930              		.loc 1 876 0
 931 0054 1046     		mov	r0, r2
 932              	.LVL113:
 933 0056 70BD     		pop	{r4, r5, r6, pc}
 934              	.L87:
 935              		.align	2
 936              	.L86:
 937 0058 00000000 		.word	WiFi_Counter_Variables
 938 005c 00000000 		.word	WiFi_AT_Cmd_Buff
 939 0060 00000000 		.word	.LC7
 940 0064 00000000 		.word	WiFi_Control_Variables
 941              		.cfi_endproc
 942              	.LFE284:
 944              		.section	.text.Socket_Pending_Data,"ax",%progbits
 945              		.align	1
 946              		.global	Socket_Pending_Data
 947              		.syntax unified
 948              		.thumb
 949              		.thumb_func
 950              		.fpu fpv4-sp-d16
 952              	Socket_Pending_Data:
 953              	.LFB286:
 996:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKQ=01<cr> */
 954              		.loc 1 996 0
 955              		.cfi_startproc
 956              		@ args = 0, pretend = 0, frame = 0
 957              		@ frame_needed = 0, uses_anonymous_args = 0
 958 0000 10B5     		push	{r4, lr}
 959              	.LCFI15:
 960              		.cfi_def_cfa_offset 8
 961              		.cfi_offset 4, -8
 962              		.cfi_offset 14, -4
 998:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 963              		.loc 1 998 0
 964 0002 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 965              	.LVL114:
1001:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 966              		.loc 1 1001 0
 967 0006 FFF7FEFF 		bl	wait_for_command_mode
 968              	.LVL115:
1004:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 969              		.loc 1 1004 0
 970 000a 0E4B     		ldr	r3, .L92
 971 000c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 972 000e C2F3C202 		ubfx	r2, r2, #3, #3
 973 0012 0D4B     		ldr	r3, .L92+4
 974 0014 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 975 0016 9BB1     		cbz	r3, .L88
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 41


1006:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 976              		.loc 1 1006 0
 977 0018 0C4B     		ldr	r3, .L92+8
 978 001a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 979 001c 13F0080F 		tst	r3, #8
 980 0020 03D1     		bne	.L90
1007:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 981              		.loc 1 1007 0
 982 0022 0A49     		ldr	r1, .L92+8
 983 0024 43F00803 		orr	r3, r3, #8
 984 0028 0B70     		strb	r3, [r1]
 985              	.L90:
1010:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 986              		.loc 1 1010 0
 987 002a 094C     		ldr	r4, .L92+12
 988 002c 0949     		ldr	r1, .L92+16
 989 002e 2046     		mov	r0, r4
 990 0030 FFF7FEFF 		bl	sprintf
 991              	.LVL116:
1011:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
 992              		.loc 1 1011 0
 993 0034 2046     		mov	r0, r4
 994 0036 FFF7FEFF 		bl	strlen
 995              	.LVL117:
 996 003a 80B2     		uxth	r0, r0
 997 003c FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 998              	.LVL118:
 999              	.L88:
 1000 0040 10BD     		pop	{r4, pc}
 1001              	.L93:
 1002 0042 00BF     		.align	2
 1003              	.L92:
 1004 0044 00000000 		.word	WiFi_Counter_Variables
 1005 0048 00000000 		.word	open_sockets
 1006 004c 00000000 		.word	WiFi_Control_Variables
 1007 0050 00000000 		.word	WiFi_AT_Cmd_Buff
 1008 0054 00000000 		.word	.LC8
 1009              		.cfi_endproc
 1010              	.LFE286:
 1012              		.section	.text.wifi_socket_server_write,"ax",%progbits
 1013              		.align	1
 1014              		.global	wifi_socket_server_write
 1015              		.syntax unified
 1016              		.thumb
 1017              		.thumb_func
 1018              		.fpu fpv4-sp-d16
 1020              	wifi_socket_server_write:
 1021              	.LFB288:
1158:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 1022              		.loc 1 1158 0
 1023              		.cfi_startproc
 1024              		@ args = 0, pretend = 0, frame = 0
 1025              		@ frame_needed = 0, uses_anonymous_args = 0
 1026              	.LVL119:
 1027 0000 38B5     		push	{r3, r4, r5, lr}
 1028              	.LCFI16:
 1029              		.cfi_def_cfa_offset 16
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 42


 1030              		.cfi_offset 3, -16
 1031              		.cfi_offset 4, -12
 1032              		.cfi_offset 5, -8
 1033              		.cfi_offset 14, -4
 1034              	.LVL120:
1161:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;
 1035              		.loc 1 1161 0
 1036 0002 3A4B     		ldr	r3, .L114
 1037 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1038 0006 13B9     		cbnz	r3, .L111
1162:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 1039              		.loc 1 1162 0
 1040 0008 0524     		movs	r4, #5
 1041              	.LVL121:
 1042              	.L95:
1231:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 1043              		.loc 1 1231 0
 1044 000a 2046     		mov	r0, r4
 1045 000c 38BD     		pop	{r3, r4, r5, pc}
 1046              	.LVL122:
 1047              	.L111:
1164:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 1048              		.loc 1 1164 0
 1049 000e 30B9     		cbnz	r0, .L96
1164:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 1050              		.loc 1 1164 0 is_stmt 0 discriminator 1
 1051 0010 374B     		ldr	r3, .L114+4
 1052 0012 D3F8E430 		ldr	r3, [r3, #228]
 1053 0016 9842     		cmp	r0, r3
 1054 0018 01D9     		bls	.L96
1165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1055              		.loc 1 1165 0 is_stmt 1
 1056 001a 0224     		movs	r4, #2
 1057 001c F5E7     		b	.L95
 1058              	.L96:
 1059 001e 0D46     		mov	r5, r1
 1060 0020 0446     		mov	r4, r0
1167:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 1061              		.loc 1 1167 0
 1062 0022 FFF7FEFF 		bl	wait_for_command_mode
 1063              	.LVL123:
 1064              	.LBB14:
 1065              	.LBB15:
 1066              		.file 2 "Drivers/CMSIS/Include/cmsis_gcc.h"
   1:Drivers/CMSIS/Include/cmsis_gcc.h **** /**************************************************************************//**
   2:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @version  V5.0.4
   5:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @date     09. April 2018
   6:Drivers/CMSIS/Include/cmsis_gcc.h ****  ******************************************************************************/
   7:Drivers/CMSIS/Include/cmsis_gcc.h **** /*
   8:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Copyright (c) 2009-2018 Arm Limited. All rights reserved.
   9:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  10:Drivers/CMSIS/Include/cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  12:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:Drivers/CMSIS/Include/cmsis_gcc.h ****  * not use this file except in compliance with the License.
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 43


  14:Drivers/CMSIS/Include/cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  16:Drivers/CMSIS/Include/cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  18:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:Drivers/CMSIS/Include/cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:Drivers/CMSIS/Include/cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:Drivers/CMSIS/Include/cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:Drivers/CMSIS/Include/cmsis_gcc.h ****  * limitations under the License.
  23:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  24:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  25:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  28:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ignore some GCC warnings */
  29:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic push
  30:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  34:Drivers/CMSIS/Include/cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __has_builtin
  36:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  38:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  39:Drivers/CMSIS/Include/cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ASM
  41:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ASM                                  __asm
  42:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  43:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __INLINE
  44:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __INLINE                               inline
  45:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  46:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  49:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif                                           
  52:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  55:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __USED
  56:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  58:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __WEAK
  59:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  61:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED
  62:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  64:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  67:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  70:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 44


  71:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:Drivers/CMSIS/Include/cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  78:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  86:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  94:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 102:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 110:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ALIGNED
 111:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 113:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __RESTRICT
 114:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 116:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 117:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 118:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 119:Drivers/CMSIS/Include/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 120:Drivers/CMSIS/Include/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 121:Drivers/CMSIS/Include/cmsis_gcc.h ****   @{
 122:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 123:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 124:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 125:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 126:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 127:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 45


 128:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 129:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 130:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 131:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 132:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 133:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 134:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 135:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 136:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 137:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 138:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 139:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 140:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 141:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 142:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 1067              		.loc 2 142 0
 1068              		.syntax unified
 1069              	@ 142 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1070 0026 72B6     		cpsid i
 1071              	@ 0 "" 2
 1072              		.thumb
 1073              		.syntax unified
 1074              	.LBE15:
 1075              	.LBE14:
1171:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_TRUE;
 1076              		.loc 1 1171 0
 1077 0028 324A     		ldr	r2, .L114+8
 1078 002a 1379     		ldrb	r3, [r2, #4]	@ zero_extendqisi2
1172:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __enable_irq();
 1079              		.loc 1 1172 0
 1080 002c 43F00503 		orr	r3, r3, #5
 1081 0030 1371     		strb	r3, [r2, #4]
 1082              	.LBB16:
 1083              	.LBB17:
 131:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 1084              		.loc 2 131 0
 1085              		.syntax unified
 1086              	@ 131 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1087 0032 62B6     		cpsie i
 1088              	@ 0 "" 2
 1089              		.thumb
 1090              		.syntax unified
 1091 0034 00E0     		b	.L97
 1092              	.L98:
 1093              	.LBE17:
 1094              	.LBE16:
1177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 1095              		.loc 1 1177 0
 1096              		.syntax unified
 1097              	@ 1177 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 1098 0036 00BF     		nop
 1099              	@ 0 "" 2
 1100              		.thumb
 1101              		.syntax unified
 1102              	.L97:
1175:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1103              		.loc 1 1175 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 46


 1104 0038 2F4B     		ldr	r3, .L114+12
 1105 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1106 003c 13F0010F 		tst	r3, #1
 1107 0040 F9D1     		bne	.L98
1175:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1108              		.loc 1 1175 0 is_stmt 0 discriminator 1
 1109 0042 2D4B     		ldr	r3, .L114+12
 1110 0044 5B68     		ldr	r3, [r3, #4]
 1111 0046 002B     		cmp	r3, #0
 1112 0048 F5D1     		bne	.L98
1181:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1113              		.loc 1 1181 0 is_stmt 1
 1114 004a 2A4B     		ldr	r3, .L114+8
 1115 004c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1116 004e 6FF30002 		bfc	r2, #0, #1
 1117 0052 1A70     		strb	r2, [r3]
1184:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1118              		.loc 1 1184 0
 1119 0054 284B     		ldr	r3, .L114+12
 1120 0056 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1121 0058 13F0200F 		tst	r3, #32
 1122 005c 1ED1     		bne	.L99
1186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(!IO_status_flag.data_mode && wifi_client_connected)
 1123              		.loc 1 1186 0
 1124 005e FFF7FEFF 		bl	WiFi_switch_to_data_mode
 1125              	.LVL124:
1187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1126              		.loc 1 1187 0
 1127 0062 00E0     		b	.L100
 1128              	.L102:
1190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
 1129              		.loc 1 1190 0
 1130              		.syntax unified
 1131              	@ 1190 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 1132 0064 00BF     		nop
 1133              	@ 0 "" 2
 1134              		.thumb
 1135              		.syntax unified
 1136              	.L100:
1187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1137              		.loc 1 1187 0
 1138 0066 244B     		ldr	r3, .L114+12
 1139 0068 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1140 006a 13F0200F 		tst	r3, #32
 1141 006e 03D1     		bne	.L101
1187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1142              		.loc 1 1187 0 is_stmt 0 discriminator 1
 1143 0070 1E4B     		ldr	r3, .L114
 1144 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1145 0074 002B     		cmp	r3, #0
 1146 0076 F5D1     		bne	.L102
 1147              	.L101:
1193:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1148              		.loc 1 1193 0 is_stmt 1
 1149 0078 1C4B     		ldr	r3, .L114
 1150 007a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1151 007c 73B9     		cbnz	r3, .L99
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 47


1195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __disable_irq();
 1152              		.loc 1 1195 0
 1153 007e 1D4B     		ldr	r3, .L114+8
 1154 0080 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1155 0082 42F00102 		orr	r2, r2, #1
 1156 0086 1A70     		strb	r2, [r3]
 1157              	.LBB18:
 1158              	.LBB19:
 1159              		.loc 2 142 0
 1160              		.syntax unified
 1161              	@ 142 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1162 0088 72B6     		cpsid i
 1163              	@ 0 "" 2
 1164              		.thumb
 1165              		.syntax unified
 1166              	.LBE19:
 1167              	.LBE18:
1197:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_FALSE;
 1168              		.loc 1 1197 0
 1169 008a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
1198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __enable_irq();
 1170              		.loc 1 1198 0
 1171 008c 02F0FE02 		and	r2, r2, #254
 1172 0090 6FF38202 		bfc	r2, #2, #1
 1173 0094 1A71     		strb	r2, [r3, #4]
 1174              	.LBB20:
 1175              	.LBB21:
 131:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 1176              		.loc 2 131 0
 1177              		.syntax unified
 1178              	@ 131 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1179 0096 62B6     		cpsie i
 1180              	@ 0 "" 2
 1181              		.thumb
 1182              		.syntax unified
 1183              	.LBE21:
 1184              	.LBE20:
1200:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
 1185              		.loc 1 1200 0
 1186 0098 0224     		movs	r4, #2
 1187              	.LVL125:
 1188 009a B6E7     		b	.L95
 1189              	.LVL126:
 1190              	.L99:
1205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1191              		.loc 1 1205 0
 1192 009c 4FF47A73 		mov	r3, #1000
 1193 00a0 A2B2     		uxth	r2, r4
 1194 00a2 2946     		mov	r1, r5
 1195 00a4 1548     		ldr	r0, .L114+16
 1196 00a6 FFF7FEFF 		bl	HAL_UART_Transmit
 1197              	.LVL127:
 1198 00aa 90B9     		cbnz	r0, .L112
1159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Can only write if there is a client connected */
 1199              		.loc 1 1159 0
 1200 00ac 0024     		movs	r4, #0
 1201              	.LVL128:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 48


 1202              	.L103:
1213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1203              		.loc 1 1213 0
 1204 00ae 124B     		ldr	r3, .L114+12
 1205 00b0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1206 00b2 DB09     		lsrs	r3, r3, #7
 1207 00b4 11D0     		beq	.L113
 1208              	.L104:
1223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1209              		.loc 1 1223 0
 1210 00b6 0F4B     		ldr	r3, .L114+8
 1211 00b8 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1212 00ba 42F00102 		orr	r2, r2, #1
 1213 00be 1A70     		strb	r2, [r3]
 1214              	.LBB22:
 1215              	.LBB23:
 1216              		.loc 2 142 0
 1217              		.syntax unified
 1218              	@ 142 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1219 00c0 72B6     		cpsid i
 1220              	@ 0 "" 2
 1221              		.thumb
 1222              		.syntax unified
 1223              	.LBE23:
 1224              	.LBE22:
1226:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_FALSE;
 1225              		.loc 1 1226 0
 1226 00c2 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
1227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __enable_irq();
 1227              		.loc 1 1227 0
 1228 00c4 02F0FE02 		and	r2, r2, #254
 1229 00c8 6FF38202 		bfc	r2, #2, #1
 1230 00cc 1A71     		strb	r2, [r3, #4]
 1231              	.LBB24:
 1232              	.LBB25:
 131:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 1233              		.loc 2 131 0
 1234              		.syntax unified
 1235              	@ 131 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1236 00ce 62B6     		cpsie i
 1237              	@ 0 "" 2
 1238              		.thumb
 1239              		.syntax unified
 1240              	.LBE25:
 1241              	.LBE24:
1230:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1242              		.loc 1 1230 0
 1243 00d0 9BE7     		b	.L95
 1244              	.LVL129:
 1245              	.L112:
1207:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = WiFi_HAL_UART_ERROR;
 1246              		.loc 1 1207 0
 1247 00d2 FFF7FEFF 		bl	WiFi_UART_Error_Handler
 1248              	.LVL130:
1208:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 1249              		.loc 1 1208 0
 1250 00d6 0F24     		movs	r4, #15
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 49


 1251              	.LVL131:
 1252 00d8 E9E7     		b	.L103
 1253              	.LVL132:
 1254              	.L113:
1215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(!IO_status_flag.command_mode)
 1255              		.loc 1 1215 0
 1256 00da FFF7FEFF 		bl	WiFi_switch_to_command_mode
 1257              	.LVL133:
1216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1258              		.loc 1 1216 0
 1259 00de 00E0     		b	.L105
 1260              	.L106:
1219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
 1261              		.loc 1 1219 0
 1262              		.syntax unified
 1263              	@ 1219 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 1264 00e0 00BF     		nop
 1265              	@ 0 "" 2
 1266              		.thumb
 1267              		.syntax unified
 1268              	.L105:
1216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1269              		.loc 1 1216 0
 1270 00e2 054B     		ldr	r3, .L114+12
 1271 00e4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1272 00e6 DB09     		lsrs	r3, r3, #7
 1273 00e8 FAD0     		beq	.L106
 1274 00ea E4E7     		b	.L104
 1275              	.L115:
 1276              		.align	2
 1277              	.L114:
 1278 00ec 00000000 		.word	wifi_client_connected
 1279 00f0 00000000 		.word	WiFi_Counter_Variables
 1280 00f4 00000000 		.word	WiFi_Control_Variables
 1281 00f8 00000000 		.word	IO_status_flag
 1282 00fc 00000000 		.word	UartWiFiHandle
 1283              		.cfi_endproc
 1284              	.LFE288:
 1286              		.section	.text.wifi_file_delete,"ax",%progbits
 1287              		.align	1
 1288              		.global	wifi_file_delete
 1289              		.syntax unified
 1290              		.thumb
 1291              		.thumb_func
 1292              		.fpu fpv4-sp-d16
 1294              	wifi_file_delete:
 1295              	.LFB291:
1281:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1282:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1283:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1284:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1285:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_rename
1286:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Rename an existing file
1287:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName : Filename to be renamed
1288:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Mod_FileName : New File Name
1289:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1290:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 50


1291:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_rename(char *FileName, char *Mod_FileName)
1292:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1293:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1294:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1295:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName ==NULL || Mod_FileName == NULL)
1296:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1297:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1298:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_File_Event(FileName,Mod_FileName,-1,-1);
1299:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1300:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1301:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1302:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1303:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1304:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1305:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifndef WIFI_USE_VCOM  
1306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1307:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_unmount_user_memory
1308:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Unmount/erase user memory volumes
1309:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Volume : Indicates the memory volume. Default: 0.  <1:User Flash 0:SD Card>
1310:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Erase  : Default: 0. when 1, the specified volume is erased.
1311:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1313:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_unmount_user_memory(int8_t volume, int8_t erase)
1314:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1315:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1316:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1317:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   volume = (volume==-1)?0:volume;
1318:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   erase = (erase==-1)?0:erase;
1319:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_File_Event(NULL,NULL,volume,erase);
1320:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1321:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1322:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1323:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1324:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1325:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1326:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1327:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_delete
1328:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Delete a file
1329:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName : File Name to be deleted
1330:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of delete file request
1331:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1332:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_delete(char *FileName)
1333:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1296              		.loc 1 1333 0
 1297              		.cfi_startproc
 1298              		@ args = 0, pretend = 0, frame = 0
 1299              		@ frame_needed = 0, uses_anonymous_args = 0
 1300              	.LVL134:
1334:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName==NULL)
 1301              		.loc 1 1334 0
 1302 0000 48B1     		cbz	r0, .L118
1333:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName==NULL)
 1303              		.loc 1 1333 0
 1304 0002 08B5     		push	{r3, lr}
 1305              	.LCFI17:
 1306              		.cfi_def_cfa_offset 8
 1307              		.cfi_offset 3, -8
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 51


 1308              		.cfi_offset 14, -4
 1309              	.LVL135:
1335:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1336:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1337:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
1338:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_File_Event(FileName,NULL,-1,-1);
 1310              		.loc 1 1338 0
 1311 0004 4FF0FF33 		mov	r3, #-1
 1312 0008 1A46     		mov	r2, r3
 1313 000a 0021     		movs	r1, #0
 1314 000c FFF7FEFF 		bl	Queue_File_Event
 1315              	.LVL136:
1339:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1340:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 1316              		.loc 1 1340 0
 1317 0010 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1318              	.LVL137:
1341:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1342:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
 1319              		.loc 1 1342 0
 1320 0014 08BD     		pop	{r3, pc}
 1321              	.LVL138:
 1322              	.L118:
 1323              	.LCFI18:
 1324              		.cfi_def_cfa_offset 0
 1325              		.cfi_restore 3
 1326              		.cfi_restore 14
1335:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1327              		.loc 1 1335 0
 1328 0016 0220     		movs	r0, #2
 1329              	.LVL139:
 1330 0018 7047     		bx	lr
 1331              		.cfi_endproc
 1332              	.LFE291:
 1334              		.section	.text.wifi_file_list,"ax",%progbits
 1335              		.align	1
 1336              		.global	wifi_file_list
 1337              		.syntax unified
 1338              		.thumb
 1339              		.thumb_func
 1340              		.fpu fpv4-sp-d16
 1342              	wifi_file_list:
 1343              	.LFB292:
1343:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1344:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1345:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1346:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1347:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_list
1348:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         List existing filename
1349:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1350:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1351:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1352:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1353:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_list()
1354:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1344              		.loc 1 1354 0
 1345              		.cfi_startproc
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 52


 1346              		@ args = 0, pretend = 0, frame = 0
 1347              		@ frame_needed = 0, uses_anonymous_args = 0
 1348 0000 00B5     		push	{lr}
 1349              	.LCFI19:
 1350              		.cfi_def_cfa_offset 4
 1351              		.cfi_offset 14, -4
 1352 0002 83B0     		sub	sp, sp, #12
 1353              	.LCFI20:
 1354              		.cfi_def_cfa_offset 16
 1355              	.LVL140:
1355:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
1356:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Wifi_File_Event(NULL,NULL,0,-1,-1);
 1356              		.loc 1 1356 0
 1357 0004 4FF0FF33 		mov	r3, #-1
 1358 0008 0093     		str	r3, [sp]
 1359 000a 0022     		movs	r2, #0
 1360 000c 1146     		mov	r1, r2
 1361 000e 1046     		mov	r0, r2
 1362 0010 FFF7FEFF 		bl	Queue_Wifi_File_Event
 1363              	.LVL141:
1357:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 1364              		.loc 1 1357 0
 1365 0014 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1366              	.LVL142:
1358:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1359:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1367              		.loc 1 1359 0
 1368 0018 03B0     		add	sp, sp, #12
 1369              	.LCFI21:
 1370              		.cfi_def_cfa_offset 4
 1371              		@ sp needed
 1372 001a 5DF804FB 		ldr	pc, [sp], #4
 1373              		.cfi_endproc
 1374              	.LFE292:
 1376              		.section	.text.wifi_file_print_content,"ax",%progbits
 1377              		.align	1
 1378              		.global	wifi_file_print_content
 1379              		.syntax unified
 1380              		.thumb
 1381              		.thumb_func
 1382              		.fpu fpv4-sp-d16
 1384              	wifi_file_print_content:
 1385              	.LFB293:
1360:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1361:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1362:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_print_content
1363:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Print the contents of an existing file
1364:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName : Name of the File whose content is to be printed.
1365:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1366:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1367:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_print_content(uint8_t * FileName)
1368:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1386              		.loc 1 1368 0
 1387              		.cfi_startproc
 1388              		@ args = 0, pretend = 0, frame = 0
 1389              		@ frame_needed = 0, uses_anonymous_args = 0
 1390              	.LVL143:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 53


1369:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName==NULL)
 1391              		.loc 1 1369 0
 1392 0000 70B1     		cbz	r0, .L127
1368:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName==NULL)
 1393              		.loc 1 1368 0
 1394 0002 00B5     		push	{lr}
 1395              	.LCFI22:
 1396              		.cfi_def_cfa_offset 4
 1397              		.cfi_offset 14, -4
 1398 0004 83B0     		sub	sp, sp, #12
 1399              	.LCFI23:
 1400              		.cfi_def_cfa_offset 16
 1401 0006 0146     		mov	r1, r0
 1402              	.LVL144:
1370:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       return WiFi_MODULE_ERROR;
1371:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1372:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
1373:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Wifi_File_Event(NULL,FileName,0,-1,-1);
 1403              		.loc 1 1373 0
 1404 0008 4FF0FF33 		mov	r3, #-1
 1405 000c 0093     		str	r3, [sp]
 1406 000e 0022     		movs	r2, #0
 1407 0010 1046     		mov	r0, r2
 1408              	.LVL145:
 1409 0012 FFF7FEFF 		bl	Queue_Wifi_File_Event
 1410              	.LVL146:
1374:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 1411              		.loc 1 1374 0
 1412 0016 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1413              	.LVL147:
1375:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1376:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1414              		.loc 1 1376 0
 1415 001a 03B0     		add	sp, sp, #12
 1416              	.LCFI24:
 1417              		.cfi_def_cfa_offset 4
 1418              		@ sp needed
 1419 001c 5DF804FB 		ldr	pc, [sp], #4
 1420              	.LVL148:
 1421              	.L127:
 1422              	.LCFI25:
 1423              		.cfi_def_cfa_offset 0
 1424              		.cfi_restore 14
1370:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1425              		.loc 1 1370 0
 1426 0020 0220     		movs	r0, #2
 1427              	.LVL149:
 1428 0022 7047     		bx	lr
 1429              		.cfi_endproc
 1430              	.LFE293:
 1432              		.section	.text.wifi_file_create,"ax",%progbits
 1433              		.align	1
 1434              		.global	wifi_file_create
 1435              		.syntax unified
 1436              		.thumb
 1437              		.thumb_func
 1438              		.fpu fpv4-sp-d16
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 54


 1440              	wifi_file_create:
 1441              	.LFB294:
1377:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1378:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(SPWF01) && defined(CONSOLE_UART_ENABLED)
1379:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1380:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_create
1381:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Create file for HTTP server
1382:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName : Name of the file to be created
1383:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         length   : length of file
1384:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         UserFileBuff : pointer to the buffer
1385:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1386:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1387:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_create(char *FileName, uint16_t length, char *UserFileBuff)
1388:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1442              		.loc 1 1388 0
 1443              		.cfi_startproc
 1444              		@ args = 0, pretend = 0, frame = 0
 1445              		@ frame_needed = 0, uses_anonymous_args = 0
 1446              	.LVL150:
 1447 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1448              	.LCFI26:
 1449              		.cfi_def_cfa_offset 24
 1450              		.cfi_offset 3, -24
 1451              		.cfi_offset 4, -20
 1452              		.cfi_offset 5, -16
 1453              		.cfi_offset 6, -12
 1454              		.cfi_offset 7, -8
 1455              		.cfi_offset 14, -4
 1456              	.LVL151:
1389:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1390:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1391:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(length >1024)
 1457              		.loc 1 1391 0
 1458 0002 B1F5806F 		cmp	r1, #1024
 1459 0006 02D9     		bls	.L137
1392:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_AT_FILE_LENGTH_ERROR;
 1460              		.loc 1 1392 0
 1461 0008 0E23     		movs	r3, #14
 1462              	.LVL152:
 1463              	.L133:
1393:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1394:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1395:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1396:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.FSC=/index.html  */
1397:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff, AT_CREATE_FILE, FileName, length);
1398:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1399:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1400:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
1401:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1402:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
1403:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     int len = strlen(UserFileBuff);
1404:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1405:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(len >= 1024)
1406:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****        return WiFi_AT_FILE_LENGTH_ERROR;
1407:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1408:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* AT+S.FSA=/index.html  */
1409:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_APPEND_FILE,FileName,len);
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 55


1410:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1411:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1412:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
1413:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1414:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_AT_Cmd_Buff, 0x00, sizeof WiFi_AT_Cmd_Buff);
1415:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy((char*)WiFi_AT_Cmd_Buff, (char*) UserFileBuff,len);
1416:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_AT_Cmd_Buff[len+1]='\r';
1417:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1418:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
1419:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
1420:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
1421:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
1422:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1423:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1424:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1425:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1464              		.loc 1 1425 0
 1465 000a 1846     		mov	r0, r3
 1466 000c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1467              	.LVL153:
 1468              	.L137:
 1469 000e 1646     		mov	r6, r2
 1470 0010 0C46     		mov	r4, r1
 1471 0012 0546     		mov	r5, r0
1394:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1472              		.loc 1 1394 0
 1473 0014 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 1474              	.LVL154:
1397:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1475              		.loc 1 1397 0
 1476 0018 224F     		ldr	r7, .L139
 1477 001a 2346     		mov	r3, r4
 1478 001c 2A46     		mov	r2, r5
 1479 001e 2249     		ldr	r1, .L139+4
 1480 0020 3846     		mov	r0, r7
 1481 0022 FFF7FEFF 		bl	sprintf
 1482              	.LVL155:
1399:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 1483              		.loc 1 1399 0
 1484 0026 3846     		mov	r0, r7
 1485 0028 FFF7FEFF 		bl	strlen
 1486              	.LVL156:
 1487 002c 80B2     		uxth	r0, r0
 1488 002e FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 1489              	.LVL157:
1400:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 1490              		.loc 1 1400 0
 1491 0032 0346     		mov	r3, r0
 1492 0034 0028     		cmp	r0, #0
 1493 0036 E8D1     		bne	.L133
 1494              	.LBB26:
1402:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     int len = strlen(UserFileBuff);
 1495              		.loc 1 1402 0
 1496 0038 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1497              	.LVL158:
1403:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1498              		.loc 1 1403 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 56


 1499 003c 3046     		mov	r0, r6
 1500 003e FFF7FEFF 		bl	strlen
 1501              	.LVL159:
 1502 0042 0446     		mov	r4, r0
 1503              	.LVL160:
1405:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****        return WiFi_AT_FILE_LENGTH_ERROR;
 1504              		.loc 1 1405 0
 1505 0044 B0F5806F 		cmp	r0, #1024
 1506 0048 01DB     		blt	.L138
1406:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1507              		.loc 1 1406 0
 1508 004a 0E23     		movs	r3, #14
 1509 004c DDE7     		b	.L133
 1510              	.L138:
1409:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1511              		.loc 1 1409 0
 1512 004e 0346     		mov	r3, r0
 1513 0050 2A46     		mov	r2, r5
 1514 0052 1649     		ldr	r1, .L139+8
 1515 0054 3846     		mov	r0, r7
 1516              	.LVL161:
 1517 0056 FFF7FEFF 		bl	sprintf
 1518              	.LVL162:
1411:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 1519              		.loc 1 1411 0
 1520 005a 3846     		mov	r0, r7
 1521 005c FFF7FEFF 		bl	strlen
 1522              	.LVL163:
 1523 0060 80B2     		uxth	r0, r0
 1524 0062 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 1525              	.LVL164:
1412:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1526              		.loc 1 1412 0
 1527 0066 0346     		mov	r3, r0
 1528 0068 0028     		cmp	r0, #0
 1529 006a CED1     		bne	.L133
1414:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy((char*)WiFi_AT_Cmd_Buff, (char*) UserFileBuff,len);
 1530              		.loc 1 1414 0
 1531 006c 4FF40062 		mov	r2, #2048
 1532 0070 0021     		movs	r1, #0
 1533 0072 3846     		mov	r0, r7
 1534              	.LVL165:
 1535 0074 FFF7FEFF 		bl	memset
 1536              	.LVL166:
1415:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_AT_Cmd_Buff[len+1]='\r';
 1537              		.loc 1 1415 0
 1538 0078 2246     		mov	r2, r4
 1539 007a 3146     		mov	r1, r6
 1540 007c 3846     		mov	r0, r7
 1541 007e FFF7FEFF 		bl	memcpy
 1542              	.LVL167:
1416:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 1543              		.loc 1 1416 0
 1544 0082 0134     		adds	r4, r4, #1
 1545              	.LVL168:
 1546 0084 0D23     		movs	r3, #13
 1547 0086 3B55     		strb	r3, [r7, r4]
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 57


1417:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
 1548              		.loc 1 1417 0
 1549 0088 3846     		mov	r0, r7
 1550 008a FFF7FEFF 		bl	strlen
 1551              	.LVL169:
 1552 008e 80B2     		uxth	r0, r0
 1553 0090 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 1554              	.LVL170:
1418:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 1555              		.loc 1 1418 0
 1556 0094 0346     		mov	r3, r0
 1557 0096 0028     		cmp	r0, #0
 1558 0098 B7D1     		bne	.L133
1420:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 1559              		.loc 1 1420 0
 1560 009a FFF7FEFF 		bl	USART_Receive_AT_Resp
 1561              	.LVL171:
 1562 009e 0346     		mov	r3, r0
 1563              	.LVL172:
 1564 00a0 B3E7     		b	.L133
 1565              	.L140:
 1566 00a2 00BF     		.align	2
 1567              	.L139:
 1568 00a4 00000000 		.word	WiFi_AT_Cmd_Buff
 1569 00a8 00000000 		.word	.LC9
 1570 00ac 14000000 		.word	.LC10
 1571              	.LBE26:
 1572              		.cfi_endproc
 1573              	.LFE294:
 1575              		.section	.text.wifi_fill_input_buffer,"ax",%progbits
 1576              		.align	1
 1577              		.global	wifi_fill_input_buffer
 1578              		.syntax unified
 1579              		.thumb
 1580              		.thumb_func
 1581              		.fpu fpv4-sp-d16
 1583              	wifi_fill_input_buffer:
 1584              	.LFB295:
1426:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1427:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1428:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_create
1429:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Create file for HTTP server
1430:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName : Name of the file to be created
1431:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         length   : length of file
1432:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         UserFileBuff : pointer to the buffer
1433:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1434:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1435:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1436:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_create(char *FileName, uint16_t length, char *UserFileBuff)
1437:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1438:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1439:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1440:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1441:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName==NULL || UserFileBuff==NULL)
1442:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1443:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1444:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(length > 1024)
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 58


1445:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_AT_FILE_LENGTH_ERROR;
1446:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1447:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Wifi_File_Create_Event((uint8_t *)FileName,length,UserFileBuff);
1448:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1449:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1450:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1451:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1452:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1453:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(SPWF04)
1454:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1455:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_mqtt_connect
1456:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Open a connection with MQTT broker
1457:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Hostname hostname to connect to
1458:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         portnumber portnumber of the Host to connect to
1459:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of mqtt connect request
1460:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1461:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_mqtt_connect(uint8_t * hostname, uint32_t port_num)
1462:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1463:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1464:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1465:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   mqtt_type = CONNECT;
1466:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Mqtt_Connect_Event(hostname, port_num);
1467:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1468:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1469:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1470:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1471:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1472:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1473:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_mqtt_subscribe
1474:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Subscribe topic to an mqtt broker
1475:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  topic: topic to subscribe to
1476:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of mqtt subscribe request
1477:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1478:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_mqtt_subscribe(uint8_t *topic)
1479:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1480:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1481:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1482:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   mqtt_type = SUBSCRIBE;
1483:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Mqtt_Event(topic);
1484:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1485:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1486:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1487:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1488:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1489:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1490:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_mqtt_publish
1491:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Publish message to an mqtt broker
1492:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  topic: topic to publish to
1493:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: MQTT message length
1494:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Data: data to publish 
1495:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of mqtt publish request
1496:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1497:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_mqtt_publish(uint8_t *topic, uint32_t DataLength, char *Data)
1498:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1499:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1500:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
1501:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   mqtt_type = PUBLISH;
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 59


1502:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Mqtt_Publish_Event(topic, DataLength, Data);
1503:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1504:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1505:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1506:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1507:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1508:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1509:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_mqtt_disconnect
1510:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         disconnect from an mqtt broker
1511:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of mqtt disconnect request
1512:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1513:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_mqtt_disconnect(void)
1514:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1515:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1516:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   mqtt_type = DISCONNECT;
1518:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Mqtt_Event(NULL);
1519:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1520:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1521:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1522:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1523:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1524:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1525:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_mqtt_unsubscribe
1526:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Unsubscribe topic from an mqtt broker
1527:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  topic: topic to unsubscribe from 
1528:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of mqtt unsubscribe request
1529:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1530:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_mqtt_unsubscribe(uint8_t *topic)
1531:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1532:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1533:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1534:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   mqtt_type = UNSUBSCRIBE;
1535:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Mqtt_Event(topic);
1536:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1537:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1538:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1539:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1540:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1541:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1542:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1543:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_list_open_client_socket
1544:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         list opened client sockets
1545:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1546:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status
1547:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1548:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_list_open_client_socket(void)
1549:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1550:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1551:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_List_Event(NET_SOCKET);
1552:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1553:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1554:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1556:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1557:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_list_open_web_client_socket
1558:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         list opened web client sockets
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 60


1559:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1560:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status
1561:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1562:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_list_open_web_client_socket(void)
1563:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1564:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1565:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_List_Event(WEB_SOCKET);
1566:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1567:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1568:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1569:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1570:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1571:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_list_bound_client_socket
1572:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         list all bounded client sockets
1573:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1574:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status
1575:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1576:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_list_bound_client_socket(void)
1577:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1578:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1579:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_List_Event();
1580:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1581:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1582:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1583:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1584:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1585:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1586:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_send_mail
1587:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         SMTP protocol to send a secure mail
1588:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param hostname: DMA resolvable name or IP address of the remote host
1589:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param port:     Server port.
1590:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param From:     Email address on the SMTP server
1591:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param To:       Destinator Email. Multiple email are seperated by semicolon  
1592:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param subject:  Email subject. String message.
1593:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param length:   length of body message
1594:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param Data:     Body of the Mail
1595:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of send mail
1596:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1597:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_send_mail(uint8_t *hostname,
1598:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              uint32_t port_num,
1599:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              uint8_t *from, 
1600:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              uint8_t *to, 
1601:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              uint8_t *subject, 
1602:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              uint32_t length, 
1603:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              char *Data)
1604:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1605:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(length >= 1021 || length <= 0)
1606:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
1607:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1608:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1609:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Wifi_Send_Mail_Event(hostname,port_num,from,to,subject,length,Data);
1610:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1611:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1612:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1613:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1614:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1615:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_tftp_get
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 61


1616:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Issue an TFTP GET of the given filename to the specified host
1617:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
1618:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  filename: Document path/name
1619:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1620:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd response
1621:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1622:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_tftp_get(uint8_t * hostname, uint32_t port_number, uint8_t * filename)
1623:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1624:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || filename == NULL)
1625:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1626:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1627:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1628:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1629:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.sock_read_ongoing || IO_status_flag.WIND64_count!= 0) //wait till any pendin
1630:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1631:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       __NOP(); //nothing to do
1632:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1633:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1634:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   // AT+S.TFTPGET=host.example.com,port_number,filename,NULL<cr>
1635:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Queue the ftp-get command
1636:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Tftp_Event(hostname, port_number, filename, 0);
1637:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1638:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Make the user wait anyway
1639:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1640:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1641:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1642:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1643:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1644:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_tftp_put
1645:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Issue an TFTP PUT of the given filename from the specified host
1646:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
1647:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  filename: Document path/name
1648:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1649:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd response
1650:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1651:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_tftp_put(uint8_t * hostname, uint32_t port_number, uint8_t * filename)
1652:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1653:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || filename == NULL)
1654:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1655:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1656:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1657:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1658:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.sock_read_ongoing || IO_status_flag.WIND64_count!= 0) //wait till any pendin
1659:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1660:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       __NOP(); //nothing to do
1661:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1662:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1663:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   // AT+S.TFTPPUT=host.example.com,port_number, filename<cr>
1664:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Queue the ftp-get command
1665:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Tftp_Event(hostname, port_number, filename, 1);
1666:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1667:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Make the user wait anyway
1668:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1669:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1670:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1671:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1672:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 62


1673:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1674:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_fill_input_buffer
1675:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Fill buffer for raw text input ssi.
1676:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: Length of the data. (maximum internal buffer size is 128 bytes)
1677:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Data:       Data to save in buffer.
1678:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         NOTE:       {data} used to fill the buffer must be properly set. The first byte is used a
1679:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *                     splitter; so use this special character to fill the buffer with multiple toke
1680:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *                     be directly referred remotely by SSI indexes contained inside the HTML page. 
1681:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *                     example: |hello|world| will create 2 tokens: "hello accessed by <!--|06|In
1682:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *                     world accessed by <!--|06|Input|1|-->. 
1683:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd response
1684:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1685:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1686:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_fill_input_buffer(uint32_t DataLength, char * Data)
1687:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1688:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKW=00,11<cr> */
1689:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1690:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1691:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength >= 128 || DataLength<=0)
1692:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
1693:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1694:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1695:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1696:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.INPUTSSI=<length><cr>{data} */
1697:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* should not queue, we have a minimal window of 30sec to write the data*/
1698:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)
1699:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_FILL_INTERNAL_BUFFER,DataLength);
1700:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1701:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
1702:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1703:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();
1704:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy((char*)WiFi_AT_Cmd_Buff, (char*)Data, DataLength);
1705:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(DataLength);
1706:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1707:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
1708:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.INPUTSSI=%d %s", DataLength, "DATA");
1709:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_DataLength = DataLength;
1710:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_data = Data;
1711:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
1712:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code
1713:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
1714:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
1715:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1716:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.send_data = WIFI_TRUE;
1717:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.fill_buffer_command_ongoing = WIFI_TRUE;
1718:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
1719:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1720:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   HAL_NVIC_EnableIRQ(TIMx_IRQn);
1721:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1722:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1723:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1724:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1725:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1726:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(SPWF01)
1727:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /* @brief  wifi_fill_input_buffer
1728:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Fill buffer for raw text input ssi.
1729:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: Length of the data. (maximum internal buffer size is 128 bytes)
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 63


1730:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Data:       Data to save in buffer.
1731:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd response
1732:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1733:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1734:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_fill_input_buffer(uint32_t DataLength, char * Data)
1735:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1585              		.loc 1 1735 0
 1586              		.cfi_startproc
 1587              		@ args = 0, pretend = 0, frame = 0
 1588              		@ frame_needed = 0, uses_anonymous_args = 0
 1589              	.LVL173:
 1590 0000 38B5     		push	{r3, r4, r5, lr}
 1591              	.LCFI27:
 1592              		.cfi_def_cfa_offset 16
 1593              		.cfi_offset 3, -16
 1594              		.cfi_offset 4, -12
 1595              		.cfi_offset 5, -8
 1596              		.cfi_offset 14, -4
1736:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength >1024 || DataLength <=0)
 1597              		.loc 1 1736 0
 1598 0002 431E     		subs	r3, r0, #1
 1599 0004 B3F5806F 		cmp	r3, #1024
 1600 0008 02D3     		bcc	.L145
1737:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
 1601              		.loc 1 1737 0
 1602 000a 0424     		movs	r4, #4
 1603              	.LVL174:
 1604              	.L142:
1738:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1739:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1740:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1741:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1742:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   memcpy((char*)WiFi_AT_Cmd_Buff,Data,DataLength);
1743:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(DataLength);
1744:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1745:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   HAL_NVIC_EnableIRQ(TIMx_IRQn);
1746:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1747:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1605              		.loc 1 1747 0
 1606 000c 2046     		mov	r0, r4
 1607 000e 38BD     		pop	{r3, r4, r5, pc}
 1608              	.LVL175:
 1609              	.L145:
 1610 0010 0D46     		mov	r5, r1
 1611 0012 0446     		mov	r4, r0
 1612              	.LVL176:
1740:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1613              		.loc 1 1740 0
 1614 0014 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 1615              	.LVL177:
1742:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(DataLength);
 1616              		.loc 1 1742 0
 1617 0018 2246     		mov	r2, r4
 1618 001a 2946     		mov	r1, r5
 1619 001c 0548     		ldr	r0, .L146
 1620 001e FFF7FEFF 		bl	memcpy
 1621              	.LVL178:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 64


1743:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1622              		.loc 1 1743 0
 1623 0022 A0B2     		uxth	r0, r4
 1624 0024 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 1625              	.LVL179:
 1626 0028 0446     		mov	r4, r0
 1627              	.LVL180:
1745:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 1628              		.loc 1 1745 0
 1629 002a 1D20     		movs	r0, #29
 1630 002c FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 1631              	.LVL181:
1746:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1632              		.loc 1 1746 0
 1633 0030 ECE7     		b	.L142
 1634              	.L147:
 1635 0032 00BF     		.align	2
 1636              	.L146:
 1637 0034 00000000 		.word	WiFi_AT_Cmd_Buff
 1638              		.cfi_endproc
 1639              	.LFE295:
 1641              		.section	.text.wifi_http_get,"ax",%progbits
 1642              		.align	1
 1643              		.global	wifi_http_get
 1644              		.syntax unified
 1645              		.thumb
 1646              		.thumb_func
 1647              		.fpu fpv4-sp-d16
 1649              	wifi_http_get:
 1650              	.LFB296:
1748:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1749:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1750:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1751:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_http_get
1752:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Issue an HTTP GET of the given path to the specified host
1753:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
1754:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  path : Document path
1755:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd response
1757:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1758:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1759:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_http_get(uint8_t * hostname, uint8_t * path, uint32_t port_number)
1760:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1651              		.loc 1 1760 0
 1652              		.cfi_startproc
 1653              		@ args = 0, pretend = 0, frame = 0
 1654              		@ frame_needed = 0, uses_anonymous_args = 0
 1655              	.LVL182:
1761:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || path == NULL)
 1656              		.loc 1 1761 0
 1657 0000 A0B1     		cbz	r0, .L152
1760:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || path == NULL)
 1658              		.loc 1 1760 0 discriminator 1
 1659 0002 10B5     		push	{r4, lr}
 1660              	.LCFI28:
 1661              		.cfi_def_cfa_offset 8
 1662              		.cfi_offset 4, -8
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 65


 1663              		.cfi_offset 14, -4
 1664 0004 0446     		mov	r4, r0
 1665              		.loc 1 1761 0 discriminator 1
 1666 0006 11B9     		cbnz	r1, .L150
1762:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 1667              		.loc 1 1762 0
 1668 0008 0220     		movs	r0, #2
 1669              	.LVL183:
1763:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1764:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1765:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1766:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.sock_read_ongoing || IO_status_flag.WIND64_count!= 0) //wait till any pendin
1767:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1768:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       __NOP(); //nothing to do
1769:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1770:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1771:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   // AT+S.HTTPGET=host.example.com,/index.html, port_number<cr>
1772:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Queue the http-get command
1773:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Http_Event(hostname, path, port_number,0);
1774:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1775:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Make the user wait anyway
1776:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1777:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1778:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1779:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1670              		.loc 1 1779 0
 1671 000a 10BD     		pop	{r4, pc}
 1672              	.LVL184:
 1673              	.L151:
1768:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 1674              		.loc 1 1768 0
 1675              		.syntax unified
 1676              	@ 1768 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 1677 000c 00BF     		nop
 1678              	@ 0 "" 2
 1679              		.thumb
 1680              		.syntax unified
 1681              	.L150:
1766:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1682              		.loc 1 1766 0
 1683 000e 084B     		ldr	r3, .L158
 1684 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1685 0012 13F0010F 		tst	r3, #1
 1686 0016 F9D1     		bne	.L151
1766:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1687              		.loc 1 1766 0 is_stmt 0 discriminator 1
 1688 0018 054B     		ldr	r3, .L158
 1689 001a 5B68     		ldr	r3, [r3, #4]
 1690 001c 002B     		cmp	r3, #0
 1691 001e F5D1     		bne	.L151
 1692 0020 2046     		mov	r0, r4
 1693              	.LVL185:
1773:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1694              		.loc 1 1773 0 is_stmt 1
 1695 0022 FFF7FEFF 		bl	Queue_Http_Event
 1696              	.LVL186:
1776:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 66


 1697              		.loc 1 1776 0
 1698 0026 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1699              	.LVL187:
1778:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1700              		.loc 1 1778 0
 1701 002a 10BD     		pop	{r4, pc}
 1702              	.LVL188:
 1703              	.L152:
 1704              	.LCFI29:
 1705              		.cfi_def_cfa_offset 0
 1706              		.cfi_restore 4
 1707              		.cfi_restore 14
1762:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 1708              		.loc 1 1762 0
 1709 002c 0220     		movs	r0, #2
 1710              	.LVL189:
 1711 002e 7047     		bx	lr
 1712              	.L159:
 1713              		.align	2
 1714              	.L158:
 1715 0030 00000000 		.word	IO_status_flag
 1716              		.cfi_endproc
 1717              	.LFE296:
 1719              		.section	.text.wifi_http_post,"ax",%progbits
 1720              		.align	1
 1721              		.global	wifi_http_post
 1722              		.syntax unified
 1723              		.thumb
 1724              		.thumb_func
 1725              		.fpu fpv4-sp-d16
 1727              	wifi_http_post:
 1728              	.LFB297:
1780:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1781:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1782:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_http_post
1783:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Issue an HTTP GET of the given path to the specified host
1784:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
1785:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  path: Document path
1786:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of Http Post Request
1788:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1789:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1790:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_http_post(uint8_t * hostname, uint8_t * path, uint32_t port_number)
1791:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1729              		.loc 1 1791 0
 1730              		.cfi_startproc
 1731              		@ args = 0, pretend = 0, frame = 0
 1732              		@ frame_needed = 0, uses_anonymous_args = 0
 1733              	.LVL190:
1792:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || path == NULL)
 1734              		.loc 1 1792 0
 1735 0000 A8B1     		cbz	r0, .L164
1791:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || path == NULL)
 1736              		.loc 1 1791 0 discriminator 1
 1737 0002 10B5     		push	{r4, lr}
 1738              	.LCFI30:
 1739              		.cfi_def_cfa_offset 8
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 67


 1740              		.cfi_offset 4, -8
 1741              		.cfi_offset 14, -4
 1742 0004 0446     		mov	r4, r0
 1743              		.loc 1 1792 0 discriminator 1
 1744 0006 11B9     		cbnz	r1, .L162
1793:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 1745              		.loc 1 1793 0
 1746 0008 0220     		movs	r0, #2
 1747              	.LVL191:
1794:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1795:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1796:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1797:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.sock_read_ongoing || IO_status_flag.WIND64_count!= 0)//wait till any pending
1798:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1799:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       __NOP(); //nothing to do
1800:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1801:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1802:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   // AT+S.HTTPPOST = posttestserver.com,/post.php,name=demo&email=mymail&subject=subj&body=message<
1803:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Http_Event(hostname, path, port_number,1);
1804:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1805:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Make the user wait anyway
1806:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1807:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1808:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1748              		.loc 1 1808 0
 1749 000a 10BD     		pop	{r4, pc}
 1750              	.LVL192:
 1751              	.L163:
1799:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 1752              		.loc 1 1799 0
 1753              		.syntax unified
 1754              	@ 1799 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 1755 000c 00BF     		nop
 1756              	@ 0 "" 2
 1757              		.thumb
 1758              		.syntax unified
 1759              	.L162:
1797:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1760              		.loc 1 1797 0
 1761 000e 094B     		ldr	r3, .L170
 1762 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1763 0012 13F0010F 		tst	r3, #1
 1764 0016 F9D1     		bne	.L163
1797:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1765              		.loc 1 1797 0 is_stmt 0 discriminator 1
 1766 0018 064B     		ldr	r3, .L170
 1767 001a 5B68     		ldr	r3, [r3, #4]
 1768 001c 002B     		cmp	r3, #0
 1769 001e F5D1     		bne	.L163
 1770 0020 2046     		mov	r0, r4
 1771              	.LVL193:
1803:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 1772              		.loc 1 1803 0 is_stmt 1
 1773 0022 0123     		movs	r3, #1
 1774 0024 FFF7FEFF 		bl	Queue_Http_Event
 1775              	.LVL194:
1806:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 68


 1776              		.loc 1 1806 0
 1777 0028 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1778              	.LVL195:
1807:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1779              		.loc 1 1807 0
 1780 002c 10BD     		pop	{r4, pc}
 1781              	.LVL196:
 1782              	.L164:
 1783              	.LCFI31:
 1784              		.cfi_def_cfa_offset 0
 1785              		.cfi_restore 4
 1786              		.cfi_restore 14
1793:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 1787              		.loc 1 1793 0
 1788 002e 0220     		movs	r0, #2
 1789              	.LVL197:
 1790 0030 7047     		bx	lr
 1791              	.L171:
 1792 0032 00BF     		.align	2
 1793              	.L170:
 1794 0034 00000000 		.word	IO_status_flag
 1795              		.cfi_endproc
 1796              	.LFE297:
 1798              		.section	.text.wifi_file_image_create,"ax",%progbits
 1799              		.align	1
 1800              		.global	wifi_file_image_create
 1801              		.syntax unified
 1802              		.thumb
 1803              		.thumb_func
 1804              		.fpu fpv4-sp-d16
 1806              	wifi_file_image_create:
 1807              	.LFB298:
1809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1810:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1811:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_image_create
1812:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Downloads an updated file system via a single HTTP GET request to the
1813:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         named host and path.
1814:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  HostName: Target host. DNS resolvable name or IP address.
1815:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName: Document path/name
1816:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1817:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t
1818:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1819:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_image_create(uint8_t * HostName, uint8_t * FileName, uint32_t port_number)
1820:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1808              		.loc 1 1820 0
 1809              		.cfi_startproc
 1810              		@ args = 0, pretend = 0, frame = 0
 1811              		@ frame_needed = 0, uses_anonymous_args = 0
 1812              	.LVL198:
 1813 0000 10B5     		push	{r4, lr}
 1814              	.LCFI32:
 1815              		.cfi_def_cfa_offset 8
 1816              		.cfi_offset 4, -8
 1817              		.cfi_offset 14, -4
 1818 0002 82B0     		sub	sp, sp, #8
 1819              	.LCFI33:
 1820              		.cfi_def_cfa_offset 16
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 69


1821:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(HostName == NULL || FileName == NULL ||  port_number ==0)
 1821              		.loc 1 1821 0
 1822 0004 98B1     		cbz	r0, .L174
 1823              		.loc 1 1821 0 is_stmt 0 discriminator 1
 1824 0006 A1B1     		cbz	r1, .L175
 1825              		.loc 1 1821 0 discriminator 2
 1826 0008 1AB9     		cbnz	r2, .L178
1822:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 1827              		.loc 1 1822 0 is_stmt 1
 1828 000a 0224     		movs	r4, #2
 1829              	.LVL199:
 1830              	.L173:
1823:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1824:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1825:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Queue_Wifi_File_Event(HostName,FileName,port_number,-1,-1);
1826:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
1827:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
1828:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****      if(status == WiFi_MODULE_SUCCESS) 
1829:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1830:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Soft reset the module */
1831:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF04
1832:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         Soft_Reset();
1833:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
1834:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         SET_Power_State(PowerSave_State); 
1835:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
1836:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1837:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
1838:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1831              		.loc 1 1838 0
 1832 000c 2046     		mov	r0, r4
 1833 000e 02B0     		add	sp, sp, #8
 1834              	.LCFI34:
 1835              		.cfi_remember_state
 1836              		.cfi_def_cfa_offset 8
 1837              		@ sp needed
 1838 0010 10BD     		pop	{r4, pc}
 1839              	.LVL200:
 1840              	.L178:
 1841              	.LCFI35:
 1842              		.cfi_restore_state
1825:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 1843              		.loc 1 1825 0
 1844 0012 4FF0FF33 		mov	r3, #-1
 1845 0016 0093     		str	r3, [sp]
 1846 0018 FFF7FEFF 		bl	Queue_Wifi_File_Event
 1847              	.LVL201:
1826:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 1848              		.loc 1 1826 0
 1849 001c FFF7FEFF 		bl	USART_Receive_AT_Resp
 1850              	.LVL202:
1828:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1851              		.loc 1 1828 0
 1852 0020 0446     		mov	r4, r0
 1853 0022 0028     		cmp	r0, #0
 1854 0024 F2D1     		bne	.L173
1834:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 1855              		.loc 1 1834 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 70


 1856 0026 0120     		movs	r0, #1
 1857              	.LVL203:
 1858 0028 FFF7FEFF 		bl	SET_Power_State
 1859              	.LVL204:
 1860 002c EEE7     		b	.L173
 1861              	.LVL205:
 1862              	.L174:
1822:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 1863              		.loc 1 1822 0
 1864 002e 0224     		movs	r4, #2
 1865 0030 ECE7     		b	.L173
 1866              	.L175:
 1867 0032 0224     		movs	r4, #2
 1868 0034 EAE7     		b	.L173
 1869              		.cfi_endproc
 1870              	.LFE298:
 1872              		.section	.text.wifi_file_erase_external_flash,"ax",%progbits
 1873              		.align	1
 1874              		.global	wifi_file_erase_external_flash
 1875              		.syntax unified
 1876              		.thumb
 1877              		.thumb_func
 1878              		.fpu fpv4-sp-d16
 1880              	wifi_file_erase_external_flash:
 1881              	.LFB299:
1839:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1840:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1841:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_erase_external_flash
1842:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         This API allows to erase the content of the external flash
1843:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1844:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t
1845:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1846:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_erase_external_flash()
1847:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1882              		.loc 1 1847 0
 1883              		.cfi_startproc
 1884              		@ args = 0, pretend = 0, frame = 0
 1885              		@ frame_needed = 0, uses_anonymous_args = 0
 1886 0000 38B5     		push	{r3, r4, r5, lr}
 1887              	.LCFI36:
 1888              		.cfi_def_cfa_offset 16
 1889              		.cfi_offset 3, -16
 1890              		.cfi_offset 4, -12
 1891              		.cfi_offset 5, -8
 1892              		.cfi_offset 14, -4
 1893              	.LVL206:
1848:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
1849:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1850:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
 1894              		.loc 1 1850 0
 1895 0002 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 1896              	.LVL207:
1851:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   ResetBuffer();
 1897              		.loc 1 1851 0
 1898 0006 FFF7FEFF 		bl	ResetBuffer
 1899              	.LVL208:
1852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 71


1853:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.HTTPDFSERASE */
1854:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_ERASE_FLASH_MEMORY);  
 1900              		.loc 1 1854 0
 1901 000a 0B4D     		ldr	r5, .L181
 1902 000c 0B4C     		ldr	r4, .L181+4
 1903 000e 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 1904 0010 2860     		str	r0, [r5]	@ unaligned
 1905 0012 6960     		str	r1, [r5, #4]	@ unaligned
 1906 0014 AA60     		str	r2, [r5, #8]	@ unaligned
 1907 0016 EB60     		str	r3, [r5, #12]	@ unaligned
 1908 0018 2288     		ldrh	r2, [r4]	@ unaligned
 1909 001a A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 1910 001c 2A82     		strh	r2, [r5, #16]	@ unaligned
 1911 001e AB74     		strb	r3, [r5, #18]
1855:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 1912              		.loc 1 1855 0
 1913 0020 2846     		mov	r0, r5
 1914 0022 FFF7FEFF 		bl	strlen
 1915              	.LVL209:
 1916 0026 80B2     		uxth	r0, r0
 1917 0028 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 1918              	.LVL210:
 1919 002c 0446     		mov	r4, r0
 1920              	.LVL211:
1856:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
1858:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1859:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
1860:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    Soft_Reset();
1861:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1862:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
1863:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    SET_Power_State(PowerSave_State); 
 1921              		.loc 1 1863 0
 1922 002e 0120     		movs	r0, #1
 1923 0030 FFF7FEFF 		bl	SET_Power_State
 1924              	.LVL212:
1864:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1865:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1866:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    return status;
1867:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1925              		.loc 1 1867 0
 1926 0034 2046     		mov	r0, r4
 1927 0036 38BD     		pop	{r3, r4, r5, pc}
 1928              	.LVL213:
 1929              	.L182:
 1930              		.align	2
 1931              	.L181:
 1932 0038 00000000 		.word	WiFi_AT_Cmd_Buff
 1933 003c 00000000 		.word	.LC11
 1934              		.cfi_endproc
 1935              	.LFE299:
 1937              		.section	.text.wifi_fw_update,"ax",%progbits
 1938              		.align	1
 1939              		.global	wifi_fw_update
 1940              		.syntax unified
 1941              		.thumb
 1942              		.thumb_func
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 72


 1943              		.fpu fpv4-sp-d16
 1945              	wifi_fw_update:
 1946              	.LFB300:
1868:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1869:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1870:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_fw_update
1871:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Issue an HTTP GET of the given path to the specified host and get the firmware updated
1872:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
1873:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName: Document path/name
1874:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1875:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval None
1876:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1877:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_fw_update(uint8_t * hostname, uint8_t * filename_path, uint32_t port_number)
1878:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1947              		.loc 1 1878 0
 1948              		.cfi_startproc
 1949              		@ args = 0, pretend = 0, frame = 0
 1950              		@ frame_needed = 0, uses_anonymous_args = 0
 1951              	.LVL214:
 1952 0000 10B5     		push	{r4, lr}
 1953              	.LCFI37:
 1954              		.cfi_def_cfa_offset 8
 1955              		.cfi_offset 4, -8
 1956              		.cfi_offset 14, -4
 1957              	.LVL215:
1879:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1880:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Wifi_FW_Update_Event(hostname,filename_path,port_number);
 1958              		.loc 1 1880 0
 1959 0002 FFF7FEFF 		bl	Queue_Wifi_FW_Update_Event
 1960              	.LVL216:
1881:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 1961              		.loc 1 1881 0
 1962 0006 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1963              	.LVL217:
1882:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1883:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS) {
 1964              		.loc 1 1883 0
 1965 000a 0446     		mov	r4, r0
 1966 000c 08B1     		cbz	r0, .L186
 1967              	.LVL218:
 1968              	.L184:
1884:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
1885:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Soft reset the module */
1886:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF04
1887:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****          Soft_Reset();
1888:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
1889:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****          SET_Power_State(PowerSave_State); 
1890:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
1891:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1892:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("\r\nFW Updated...\r\nResetting module...");
1893:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();
1894:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.RESET");
1895:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);     
1896:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //status = USART_Receive_AT_Resp( );//there is no OK after this?
1897:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //wifi_connected = 0; //reset wifi_connected to get user callback
1898:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       IO_status_flag.WiFi_WIND_State = Undefine_state;
1899:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(IO_status_flag.WiFi_WIND_State != WiFiHWStarted)
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 73


1900:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
1901:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //__NOP(); //nothing to do
1902:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
1903:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1904:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1905:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1906:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1969              		.loc 1 1906 0
 1970 000e 2046     		mov	r0, r4
 1971 0010 10BD     		pop	{r4, pc}
 1972              	.LVL219:
 1973              	.L186:
1889:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 1974              		.loc 1 1889 0
 1975 0012 0120     		movs	r0, #1
 1976              	.LVL220:
 1977 0014 FFF7FEFF 		bl	SET_Power_State
 1978              	.LVL221:
 1979 0018 F9E7     		b	.L184
 1980              		.cfi_endproc
 1981              	.LFE300:
 1983              		.section	.text.wifi_network_scan,"ax",%progbits
 1984              		.align	1
 1985              		.global	wifi_network_scan
 1986              		.syntax unified
 1987              		.thumb
 1988              		.thumb_func
 1989              		.fpu fpv4-sp-d16
 1991              	wifi_network_scan:
 1992              	.LFB301:
1907:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1908:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1909:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_network_scan
1910:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Performs an immediate scan for available network
1911:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1912:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : WiFi status error
1913:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1914:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_network_scan(wifi_scan *scan_result, uint16_t max_scan_number)
1915:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1993              		.loc 1 1915 0
 1994              		.cfi_startproc
 1995              		@ args = 0, pretend = 0, frame = 0
 1996              		@ frame_needed = 0, uses_anonymous_args = 0
 1997              	.LVL222:
 1998 0000 08B5     		push	{r3, lr}
 1999              	.LCFI38:
 2000              		.cfi_def_cfa_offset 8
 2001              		.cfi_offset 3, -8
 2002              		.cfi_offset 14, -4
 2003              	.LVL223:
1916:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1917:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   wifi_scanned_list = scan_result;
 2004              		.loc 1 1917 0
 2005 0002 164B     		ldr	r3, .L194
 2006 0004 1860     		str	r0, [r3]
1918:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(max_scan_number>MAX_WIFI_SCAN_NETWORK)
 2007              		.loc 1 1918 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 74


 2008 0006 B1F5807F 		cmp	r1, #256
 2009 000a 02D9     		bls	.L192
1919:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
 2010              		.loc 1 1919 0
 2011 000c 0423     		movs	r3, #4
 2012              	.LVL224:
 2013              	.L188:
1920:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Counter_Variables.user_scan_number = max_scan_number;
1921:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1922:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(WiFi_Control_Variables.Scan_Ongoing)
1923:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1924:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_AT_CMD_BUSY;
1925:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1926:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1927:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.Scan_Ongoing = WIFI_TRUE;
1928:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1929:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SCAN: performs an immediate scan for available networks */
1930:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1931:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
1932:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WiFi_SCAN);  
1933:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1934:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else  
1935:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.SCAN=s,NULL");
1936:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
1937:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   IO_status_flag.AT_event_processing = WIFI_SCAN_EVENT;
1938:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;
1939:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1940:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1941:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
1942:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1943:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
1944:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1945:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1946:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*At this point we have WiFi_Scan_Buffer filled with RSSI and SSID values*/
1947:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1948:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2014              		.loc 1 1948 0
 2015 000e 1846     		mov	r0, r3
 2016 0010 08BD     		pop	{r3, pc}
 2017              	.LVL225:
 2018              	.L192:
1920:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Counter_Variables.user_scan_number = max_scan_number;
 2019              		.loc 1 1920 0
 2020 0012 134B     		ldr	r3, .L194+4
 2021 0014 1973     		strb	r1, [r3, #12]
1922:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 2022              		.loc 1 1922 0
 2023 0016 134B     		ldr	r3, .L194+8
 2024 0018 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2025 001a 13F0020F 		tst	r3, #2
 2026 001e 01D0     		beq	.L193
1924:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2027              		.loc 1 1924 0
 2028 0020 0723     		movs	r3, #7
 2029 0022 F4E7     		b	.L188
 2030              	.L193:
1927:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 75


 2031              		.loc 1 1927 0
 2032 0024 0F4A     		ldr	r2, .L194+8
 2033 0026 43F00203 		orr	r3, r3, #2
 2034 002a 5370     		strb	r3, [r2, #1]
1930:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
 2035              		.loc 1 1930 0
 2036 002c FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 2037              	.LVL226:
1932:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 2038              		.loc 1 1932 0
 2039 0030 0D4A     		ldr	r2, .L194+12
 2040 0032 0E4B     		ldr	r3, .L194+16
 2041 0034 03CB     		ldmia	r3!, {r0, r1}
 2042 0036 1060     		str	r0, [r2]	@ unaligned
 2043 0038 5160     		str	r1, [r2, #4]	@ unaligned
 2044 003a 1988     		ldrh	r1, [r3]	@ unaligned
 2045 003c 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 2046 003e 1181     		strh	r1, [r2, #8]	@ unaligned
 2047 0040 9372     		strb	r3, [r2, #10]
1933:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else  
 2048              		.loc 1 1933 0
 2049 0042 1046     		mov	r0, r2
 2050 0044 FFF7FEFF 		bl	strlen
 2051              	.LVL227:
 2052 0048 80B2     		uxth	r0, r0
 2053 004a FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 2054              	.LVL228:
1941:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 2055              		.loc 1 1941 0
 2056 004e 0346     		mov	r3, r0
 2057 0050 0028     		cmp	r0, #0
 2058 0052 DCD1     		bne	.L188
1943:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2059              		.loc 1 1943 0
 2060 0054 FFF7FEFF 		bl	USART_Receive_AT_Resp
 2061              	.LVL229:
 2062 0058 0346     		mov	r3, r0
 2063              	.LVL230:
 2064 005a D8E7     		b	.L188
 2065              	.L195:
 2066              		.align	2
 2067              	.L194:
 2068 005c 00000000 		.word	wifi_scanned_list
 2069 0060 00000000 		.word	WiFi_Counter_Variables
 2070 0064 00000000 		.word	WiFi_Control_Variables
 2071 0068 00000000 		.word	WiFi_AT_Cmd_Buff
 2072 006c 00000000 		.word	.LC12
 2073              		.cfi_endproc
 2074              	.LFE301:
 2076              		.section	.text.wifi_ap_start,"ax",%progbits
 2077              		.align	1
 2078              		.global	wifi_ap_start
 2079              		.syntax unified
 2080              		.thumb
 2081              		.thumb_func
 2082              		.fpu fpv4-sp-d16
 2084              	wifi_ap_start:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 76


 2085              	.LFB302:
1949:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1950:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1951:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Set_MiniAP_Mode
1952:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configure Wi-Fi module in AP mode.
1953:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           MiniAP is always configured in open mode (WEP not supported)
1954:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  SSID      : SSID name of the AP
1955:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sec_key   : security key
1956:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  channel_num   : channel number
1957:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  priv_mode : privacy mode
1958:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd 
1959:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1960:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_ap_start(uint8_t * ssid, char * sec_key, uint8_t channel_num, WiFi_Priv_Mode pri
1961:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2086              		.loc 1 1961 0
 2087              		.cfi_startproc
 2088              		@ args = 0, pretend = 0, frame = 0
 2089              		@ frame_needed = 0, uses_anonymous_args = 0
 2090              	.LVL231:
 2091 0000 70B5     		push	{r4, r5, r6, lr}
 2092              	.LCFI39:
 2093              		.cfi_def_cfa_offset 16
 2094              		.cfi_offset 4, -16
 2095              		.cfi_offset 5, -12
 2096              		.cfi_offset 6, -8
 2097              		.cfi_offset 14, -4
 2098 0002 0446     		mov	r4, r0
 2099 0004 1646     		mov	r6, r2
 2100 0006 1D46     		mov	r5, r3
 2101              	.LVL232:
1962:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
1963:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1964:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(sec_key) {
 2102              		.loc 1 1964 0
 2103 0008 31B1     		cbz	r1, .L197
 2104 000a 0846     		mov	r0, r1
 2105              	.LVL233:
1965:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_WiFi_SecKey((char*)sec_key);
 2106              		.loc 1 1965 0
 2107 000c FFF7FEFF 		bl	SET_WiFi_SecKey
 2108              	.LVL234:
1966:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS)
 2109              		.loc 1 1966 0
 2110 0010 10B1     		cbz	r0, .L197
1967:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return WiFi_SecKey_ERROR;
 2111              		.loc 1 1967 0
 2112 0012 0924     		movs	r4, #9
 2113              	.LVL235:
 2114              	.L198:
1968:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1969:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1970:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the SSID : AT+S.SSIDTXT=<SSID>*/    
1971:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ssid)
1972:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_SSID((char*)ssid);
1973:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
1974:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* default SSID : AT+S.SSIDTXT=SPWF_AP*/
1975:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_SSID(WiFi_Config_Variables.wifi_ssid);
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 77


1976:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1977:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
1978:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_SSID_ERROR;
1979:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
1980:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
1981:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1982:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1983:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /*AT+S.WIFI=0<cr>*/  
1984:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);  
1985:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1986:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
1987:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1988:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
1989:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
1990:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
1991:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1992:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1993:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
1994:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif    
1995:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1996:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the network privacy mode : AT+S.SCFG=wifi_priv_mode,mode*/ 
1997:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_PRIV_MODE, priv_mode); 
1998:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
1999:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2000:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2001:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the network mode (1 = STA, 2 = IBSS, 3 = MiniAP) :: AT+S.SCFG=wifi_mode,3*/  
2002:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_MODE, WiFi_MiniAP_MODE);
2003:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
2004:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2005:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
2006:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the channel number */  
2007:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_CHANNEL_NUMBER, channel_num);
2008:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
2009:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;    
2010:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
2011:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04  
2012:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /*AT+S.WIFI=1<cr>*/  
2013:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);  
2014:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2015:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2016:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2017:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2018:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2019:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_FALSE;
2020:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2021:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2022:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2023:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif    
2024:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
2025:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF01
2026:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Save the settings on the flash memory : AT&W*/ 
2027:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    Save_Current_Setting();
2028:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    WiFi_Control_Variables.WiFi_Configuration_Done = WIFI_TRUE;
2029:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2030:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
2031:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    SET_Power_State(PowerSave_State); 
2032:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 78


2033:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2034:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2035:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set radio OFF */
2036:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2037:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
2038:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2039:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2040:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2041:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2042:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2043:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set the network privacy mode : AT+S.SCFG=wifi_priv_mode,mode*/ 
2044:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_PRIV_MODE, priv_mode);
2045:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2046:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2047:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2048:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the network mode (1 = STA, 2 = IBSS, 3 = MiniAP) :: AT+S.SCFG=wifi_mode,3*/  
2049:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_MODE, WiFi_MiniAP_MODE);
2050:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
2051:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2052:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2053:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the SSID : AT+S.SSIDTXT=<SSID>*/    
2054:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ssid)
2055:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_SSID((char*)ssid);
2056:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
2057:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* default SSID : AT+S.SSIDTXT=SPWF_AP*/
2058:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_SSID(WiFi_Config_Variables.wifi_ssid);
2059:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2060:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2061:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_SSID_ERROR;
2062:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2063:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the channel number */  
2064:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_CHANNEL_NUMBER, channel_num);
2065:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
2066:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR; 
2067:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2068:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set radio ON */  
2069:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2070:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 1);  
2071:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2072:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2073:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2074:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2075:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.WiFi_Configuration_Done = WIFI_TRUE;
2076:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2077:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2078:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2079:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
2080:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2115              		.loc 1 2080 0
 2116 0014 2046     		mov	r0, r4
 2117 0016 70BD     		pop	{r4, r5, r6, pc}
 2118              	.LVL236:
 2119              	.L197:
1971:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_SSID((char*)ssid);
 2120              		.loc 1 1971 0
 2121 0018 2CB1     		cbz	r4, .L199
1972:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 79


 2122              		.loc 1 1972 0
 2123 001a 2046     		mov	r0, r4
 2124 001c FFF7FEFF 		bl	SET_SSID
 2125              	.LVL237:
 2126              	.L200:
1977:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_SSID_ERROR;
 2127              		.loc 1 1977 0
 2128 0020 30B1     		cbz	r0, .L207
1978:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 2129              		.loc 1 1978 0
 2130 0022 0824     		movs	r4, #8
 2131              	.LVL238:
 2132 0024 F6E7     		b	.L198
 2133              	.LVL239:
 2134              	.L199:
1975:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2135              		.loc 1 1975 0
 2136 0026 134B     		ldr	r3, .L211
 2137 0028 5868     		ldr	r0, [r3, #4]
 2138 002a FFF7FEFF 		bl	SET_SSID
 2139              	.LVL240:
 2140 002e F7E7     		b	.L200
 2141              	.L207:
1997:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2142              		.loc 1 1997 0
 2143 0030 2946     		mov	r1, r5
 2144 0032 1148     		ldr	r0, .L211+4
 2145              	.LVL241:
 2146 0034 FFF7FEFF 		bl	SET_Configuration_Value
 2147              	.LVL242:
1998:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
 2148              		.loc 1 1998 0
 2149 0038 08B1     		cbz	r0, .L208
1999:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2150              		.loc 1 1999 0
 2151 003a 0A24     		movs	r4, #10
 2152              	.LVL243:
 2153 003c EAE7     		b	.L198
 2154              	.LVL244:
 2155              	.L208:
2002:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
 2156              		.loc 1 2002 0
 2157 003e 0321     		movs	r1, #3
 2158 0040 0E48     		ldr	r0, .L211+8
 2159              	.LVL245:
 2160 0042 FFF7FEFF 		bl	SET_Configuration_Value
 2161              	.LVL246:
2003:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
 2162              		.loc 1 2003 0
 2163 0046 08B1     		cbz	r0, .L209
2004:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 2164              		.loc 1 2004 0
 2165 0048 0A24     		movs	r4, #10
 2166              	.LVL247:
 2167 004a E3E7     		b	.L198
 2168              	.LVL248:
 2169              	.L209:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 80


2007:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
 2170              		.loc 1 2007 0
 2171 004c 3146     		mov	r1, r6
 2172 004e 0C48     		ldr	r0, .L211+12
 2173              	.LVL249:
 2174 0050 FFF7FEFF 		bl	SET_Configuration_Value
 2175              	.LVL250:
2008:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;    
 2176              		.loc 1 2008 0
 2177 0054 0446     		mov	r4, r0
 2178              	.LVL251:
 2179 0056 08B1     		cbz	r0, .L210
2009:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 2180              		.loc 1 2009 0
 2181 0058 0A24     		movs	r4, #10
 2182 005a DBE7     		b	.L198
 2183              	.L210:
2027:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    WiFi_Control_Variables.WiFi_Configuration_Done = WIFI_TRUE;
 2184              		.loc 1 2027 0
 2185 005c FFF7FEFF 		bl	Save_Current_Setting
 2186              	.LVL252:
2028:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2187              		.loc 1 2028 0
 2188 0060 084A     		ldr	r2, .L211+16
 2189 0062 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2190 0064 43F00403 		orr	r3, r3, #4
 2191 0068 1370     		strb	r3, [r2]
2031:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 2192              		.loc 1 2031 0
 2193 006a 0120     		movs	r0, #1
 2194 006c FFF7FEFF 		bl	SET_Power_State
 2195              	.LVL253:
2079:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2196              		.loc 1 2079 0
 2197 0070 D0E7     		b	.L198
 2198              	.L212:
 2199 0072 00BF     		.align	2
 2200              	.L211:
 2201 0074 00000000 		.word	WiFi_Config_Variables
 2202 0078 00000000 		.word	.LC13
 2203 007c 10000000 		.word	.LC14
 2204 0080 1C000000 		.word	.LC15
 2205 0084 00000000 		.word	WiFi_Control_Variables
 2206              		.cfi_endproc
 2207              	.LFE302:
 2209              		.section	.text.wifi_connect,"ax",%progbits
 2210              		.align	1
 2211              		.global	wifi_connect
 2212              		.syntax unified
 2213              		.thumb
 2214              		.thumb_func
 2215              		.fpu fpv4-sp-d16
 2217              	wifi_connect:
 2218              	.LFB303:
2081:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2082:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2083:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 81


2084:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  SET_WiFi_STA_Mode
2085:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configure Wi-Fi module in STA mode
2086:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  SSID     : SSID name
2087:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sec_key  : security key
2088:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  priv_mode : network privecy mode
2089:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd 
2090:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2091:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_connect(char * ssid, char * sec_key, WiFi_Priv_Mode priv_mode)
2092:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2219              		.loc 1 2092 0
 2220              		.cfi_startproc
 2221              		@ args = 0, pretend = 0, frame = 0
 2222              		@ frame_needed = 0, uses_anonymous_args = 0
 2223              	.LVL254:
 2224 0000 38B5     		push	{r3, r4, r5, lr}
 2225              	.LCFI40:
 2226              		.cfi_def_cfa_offset 16
 2227              		.cfi_offset 3, -16
 2228              		.cfi_offset 4, -12
 2229              		.cfi_offset 5, -8
 2230              		.cfi_offset 14, -4
 2231              	.LVL255:
2093:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2094:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(WiFi_Control_Variables.AT_Cmd_Ongoing == WIFI_FALSE)
 2232              		.loc 1 2094 0
 2233 0002 1F4B     		ldr	r3, .L228
 2234 0004 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2235 0006 13F0040F 		tst	r3, #4
 2236 000a 02D0     		beq	.L224
2095:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.AT_Cmd_Ongoing = WIFI_TRUE;
2096:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
2097:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2098:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_AT_CMD_BUSY;
 2237              		.loc 1 2098 0
 2238 000c 0724     		movs	r4, #7
 2239              	.LVL256:
 2240              	.L214:
2099:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2100:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2101:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(sec_key) {
2102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_WiFi_SecKey((char*)sec_key);
2103:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS)
2104:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return WiFi_SecKey_ERROR;
2105:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2106:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
2107:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the SSID : AT+S.SSIDTXT=<SSID>*/    
2108:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ssid)
2109:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_SSID((char*)ssid);
2110:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
2111:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* default SSID : AT+S.SSIDTXT=SPWF_STA*/
2112:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_SSID(WiFi_Config_Variables.wifi_ssid);
2113:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2114:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
2115:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_SSID_ERROR;
2116:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2117:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2118:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 82


2119:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
2120:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /*AT+S.WIFI=0<cr>*/  
2121:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);  
2122:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2123:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2124:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2125:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2126:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2127:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
2128:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2129:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State != WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2130:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2131:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2132:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set the network privacy mode : AT+S.SCFG=wifi_priv_mode,2*/ 
2133:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_PRIV_MODE, priv_mode);
2134:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
2135:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2136:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2137:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set the network mode (1 = STA, 2 = IBSS, 3 = MiniAP) :: AT+S.SCFG=wifi_mode,1*/  
2138:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_MODE, WiFi_STA_MODE);
2139:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
2140:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2141:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2142:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
2143:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=1<cr>*/  
2144:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);  
2145:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2146:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2147:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2148:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2149:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2150:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
2151:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2152:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2153:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2154:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Save the settings on the flash memory : AT&W*/ 
2155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Save_Current_Setting();
2156:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2157:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Power_State(PowerSave_State);
2158:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2160:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2161:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2162:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set radio OFF */
2163:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2164:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
2165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2166:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2167:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2168:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2169:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2170:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(sec_key) {
2171:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_WiFi_SecKey((char*)sec_key);
2172:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS)
2173:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return WiFi_SecKey_ERROR;
2174:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2175:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 83


2176:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the SSID : AT+S.SSIDTXT=<SSID>*/    
2177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ssid)
2178:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_SSID((char*)ssid);
2179:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
2180:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* default SSID : AT+S.SSIDTXT=SPWF_STA*/
2181:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_SSID(WiFi_Config_Variables.wifi_ssid);
2182:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2184:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    return WiFi_SSID_ERROR;
2185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set the network privacy mode : AT+S.SCFG=wifi_priv_mode,2 */  
2187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_PRIV_MODE, priv_mode);
2188:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set wifi_mode to STA */  
2191:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_MODE, WiFi_STA_MODE);
2192:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2193:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2194:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set radio ON */  
2195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2196:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 1);  
2197:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2199:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2200:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2201:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2202:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2204:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.WiFi_Configuration_Done = WIFI_TRUE;  
2205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.AT_Cmd_Ongoing = WIFI_FALSE;
2206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2207:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
2208:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2241              		.loc 1 2208 0
 2242 000e 2046     		mov	r0, r4
 2243 0010 38BD     		pop	{r3, r4, r5, pc}
 2244              	.LVL257:
 2245              	.L224:
 2246 0012 1546     		mov	r5, r2
 2247 0014 0446     		mov	r4, r0
2095:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.AT_Cmd_Ongoing = WIFI_TRUE;
 2248              		.loc 1 2095 0
 2249 0016 1A4A     		ldr	r2, .L228
 2250              	.LVL258:
 2251 0018 43F00403 		orr	r3, r3, #4
 2252 001c 5370     		strb	r3, [r2, #1]
2101:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_WiFi_SecKey((char*)sec_key);
 2253              		.loc 1 2101 0
 2254 001e 29B1     		cbz	r1, .L215
2102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS)
 2255              		.loc 1 2102 0
 2256 0020 0846     		mov	r0, r1
 2257              	.LVL259:
 2258 0022 FFF7FEFF 		bl	SET_WiFi_SecKey
 2259              	.LVL260:
2103:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return WiFi_SecKey_ERROR;
 2260              		.loc 1 2103 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 84


 2261 0026 08B1     		cbz	r0, .L215
2104:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2262              		.loc 1 2104 0
 2263 0028 0924     		movs	r4, #9
 2264              	.LVL261:
 2265 002a F0E7     		b	.L214
 2266              	.LVL262:
 2267              	.L215:
2108:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_SSID((char*)ssid);
 2268              		.loc 1 2108 0
 2269 002c 2CB1     		cbz	r4, .L216
2109:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
 2270              		.loc 1 2109 0
 2271 002e 2046     		mov	r0, r4
 2272 0030 FFF7FEFF 		bl	SET_SSID
 2273              	.LVL263:
 2274              	.L217:
2114:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_SSID_ERROR;
 2275              		.loc 1 2114 0
 2276 0034 30B1     		cbz	r0, .L225
2115:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2277              		.loc 1 2115 0
 2278 0036 0824     		movs	r4, #8
 2279              	.LVL264:
 2280 0038 E9E7     		b	.L214
 2281              	.LVL265:
 2282              	.L216:
2112:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2283              		.loc 1 2112 0
 2284 003a 124B     		ldr	r3, .L228+4
 2285 003c 5868     		ldr	r0, [r3, #4]
 2286 003e FFF7FEFF 		bl	SET_SSID
 2287              	.LVL266:
 2288 0042 F7E7     		b	.L217
 2289              	.L225:
2133:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
 2290              		.loc 1 2133 0
 2291 0044 2946     		mov	r1, r5
 2292 0046 1048     		ldr	r0, .L228+8
 2293              	.LVL267:
 2294 0048 FFF7FEFF 		bl	SET_Configuration_Value
 2295              	.LVL268:
2134:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
 2296              		.loc 1 2134 0
 2297 004c 08B1     		cbz	r0, .L226
2135:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2298              		.loc 1 2135 0
 2299 004e 0A24     		movs	r4, #10
 2300              	.LVL269:
 2301 0050 DDE7     		b	.L214
 2302              	.LVL270:
 2303              	.L226:
2138:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
 2304              		.loc 1 2138 0
 2305 0052 0121     		movs	r1, #1
 2306 0054 0D48     		ldr	r0, .L228+12
 2307              	.LVL271:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 85


 2308 0056 FFF7FEFF 		bl	SET_Configuration_Value
 2309              	.LVL272:
2139:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
 2310              		.loc 1 2139 0
 2311 005a 0446     		mov	r4, r0
 2312              	.LVL273:
 2313 005c 08B1     		cbz	r0, .L227
2140:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2314              		.loc 1 2140 0
 2315 005e 0A24     		movs	r4, #10
 2316 0060 D5E7     		b	.L214
 2317              	.L227:
2155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2318              		.loc 1 2155 0
 2319 0062 FFF7FEFF 		bl	Save_Current_Setting
 2320              	.LVL274:
2157:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 2321              		.loc 1 2157 0
 2322 0066 0120     		movs	r0, #1
 2323 0068 FFF7FEFF 		bl	SET_Power_State
 2324              	.LVL275:
2204:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.AT_Cmd_Ongoing = WIFI_FALSE;
 2325              		.loc 1 2204 0
 2326 006c 044B     		ldr	r3, .L228
 2327 006e 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2328 0070 42F00402 		orr	r2, r2, #4
 2329 0074 1A70     		strb	r2, [r3]
2205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2330              		.loc 1 2205 0
 2331 0076 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 2332 0078 6FF38202 		bfc	r2, #2, #1
 2333 007c 5A70     		strb	r2, [r3, #1]
2207:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2334              		.loc 1 2207 0
 2335 007e C6E7     		b	.L214
 2336              	.L229:
 2337              		.align	2
 2338              	.L228:
 2339 0080 00000000 		.word	WiFi_Control_Variables
 2340 0084 00000000 		.word	WiFi_Config_Variables
 2341 0088 00000000 		.word	.LC13
 2342 008c 10000000 		.word	.LC14
 2343              		.cfi_endproc
 2344              	.LFE303:
 2346              		.section	.text.wifi_adhoc_create,"ax",%progbits
 2347              		.align	1
 2348              		.global	wifi_adhoc_create
 2349              		.syntax unified
 2350              		.thumb
 2351              		.thumb_func
 2352              		.fpu fpv4-sp-d16
 2354              	wifi_adhoc_create:
 2355              	.LFB304:
2209:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2210:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2211:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  SET_WiFi_IBSS_Mode
2212:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configure Wi-Fi module in IBSS mode
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 86


2213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  SSID     : SSID name
2214:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  priv_mode : network privecy mode
2215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_adhoc_create(uint8_t * ssid, WiFi_Priv_Mode priv_mode)
2218:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2356              		.loc 1 2218 0
 2357              		.cfi_startproc
 2358              		@ args = 0, pretend = 0, frame = 0
 2359              		@ frame_needed = 0, uses_anonymous_args = 0
 2360              	.LVL276:
 2361 0000 10B5     		push	{r4, lr}
 2362              	.LCFI41:
 2363              		.cfi_def_cfa_offset 8
 2364              		.cfi_offset 4, -8
 2365              		.cfi_offset 14, -4
 2366 0002 0C46     		mov	r4, r1
 2367              	.LVL277:
2219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2220:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2221:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the SSID : AT+S.SSIDTXT=<SSID>*/    
2222:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_SSID((char*)ssid);  
 2368              		.loc 1 2222 0
 2369 0004 FFF7FEFF 		bl	SET_SSID
 2370              	.LVL278:
2223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2371              		.loc 1 2223 0
 2372 0008 10B1     		cbz	r0, .L240
2224:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_SSID_ERROR;
 2373              		.loc 1 2224 0
 2374 000a 0824     		movs	r4, #8
 2375              	.LVL279:
 2376              	.L231:
2225:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2226:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #ifdef SPWF04
2227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /*AT+S.WIFI=0<cr>*/
2228:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);
2229:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2230:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #ifdef CONSOLE_UART_ENABLED
2231:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2232:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
2233:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2234:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
2235:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
2236:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         else IO_status_flag.radio_off = WIFI_TRUE;
2237:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2238:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
2239:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2240:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
2241:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;  
2242:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif //end of CONSOLE_UART_ENABLED
2243:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2244:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif // end of SPWF04
2245:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2246:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the network privacy mode : AT+S.SCFG=wifi_priv_mode,0*/ 
2247:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_PRIV_MODE, priv_mode);
2248:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 87


2249:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;  
2250:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2251:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the network mode (1 = STA, 2 = IBSS, 3 = MiniAP) :: AT+S.SCFG=wifi_mode,2*/  
2252:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_MODE, WiFi_IBSS_MODE);
2253:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2254:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2255:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2256:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set IP address */
2257:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Addr(WIFI_IP_ADDRESS, WIFI_IBSS_IP_ADDR);
2258:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2259:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2260:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2261:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set IP default gateway */
2262:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Addr(WIFI_IP_DEFAULT_GATEWAY, WIFI_IBSS_DEFAULT_GATEWAY);
2263:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2264:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;  
2265:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2266:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set IP DNS */
2267:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #ifdef SPWF04
2268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_Configuration_Addr(WIFI_IP_DNS1, WIFI_IBSS_IP_DNS_ADDR);
2269:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
2270:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_Configuration_Addr(WIFI_IP_DNS, WIFI_IBSS_IP_DNS_ADDR);
2271:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
2272:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2273:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2274:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2275:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set IP netmask */
2276:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Addr(WIFI_IP_NETMASK, WIFI_IBSS_IP_MASK);
2277:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2279:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2280:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Turn OFF the DHCP */
2281:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(IP_USE_DHCP_SERVER, WIFI_IP_USE_DHCP);   
2282:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2283:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2284:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2285:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #ifdef SPWF04  
2286:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /*AT+S.WIFI=1<cr>*/  
2287:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);
2288:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2289:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #ifdef CONSOLE_UART_ENABLED
2290:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2291:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
2292:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2293:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
2294:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
2295:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         else IO_status_flag.radio_off = WIFI_TRUE;
2296:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2297:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
2298:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2299:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
2300:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
2301:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif //end of CONSOLE_UART_ENABLED
2302:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2303:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif  //end of SPWF04  
2304:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2305:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Save the settings on the flash memory : AT&W*/ 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 88


2306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Save_Current_Setting();
2307:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2308:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
2309:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #ifdef SPWF04
2310:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Soft_Reset();
2311:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
2312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     SET_Power_State(PowerSave_State);   
2313:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
2314:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2315:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2316:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2377              		.loc 1 2316 0
 2378 000c 2046     		mov	r0, r4
 2379 000e 10BD     		pop	{r4, pc}
 2380              	.LVL280:
 2381              	.L240:
2247:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2382              		.loc 1 2247 0
 2383 0010 2146     		mov	r1, r4
 2384 0012 1A48     		ldr	r0, .L246
 2385              	.LVL281:
 2386 0014 FFF7FEFF 		bl	SET_Configuration_Value
 2387              	.LVL282:
2248:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;  
 2388              		.loc 1 2248 0
 2389 0018 08B1     		cbz	r0, .L241
2249:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2390              		.loc 1 2249 0
 2391 001a 0A24     		movs	r4, #10
 2392 001c F6E7     		b	.L231
 2393              	.L241:
2252:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2394              		.loc 1 2252 0
 2395 001e 0221     		movs	r1, #2
 2396 0020 1748     		ldr	r0, .L246+4
 2397              	.LVL283:
 2398 0022 FFF7FEFF 		bl	SET_Configuration_Value
 2399              	.LVL284:
2253:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
 2400              		.loc 1 2253 0
 2401 0026 08B1     		cbz	r0, .L242
2254:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2402              		.loc 1 2254 0
 2403 0028 0A24     		movs	r4, #10
 2404 002a EFE7     		b	.L231
 2405              	.L242:
2257:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2406              		.loc 1 2257 0
 2407 002c 1549     		ldr	r1, .L246+8
 2408 002e 1648     		ldr	r0, .L246+12
 2409              	.LVL285:
 2410 0030 FFF7FEFF 		bl	SET_Configuration_Addr
 2411              	.LVL286:
2258:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
 2412              		.loc 1 2258 0
 2413 0034 08B1     		cbz	r0, .L243
2259:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 89


 2414              		.loc 1 2259 0
 2415 0036 0A24     		movs	r4, #10
 2416 0038 E8E7     		b	.L231
 2417              	.L243:
2262:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2418              		.loc 1 2262 0
 2419 003a 1449     		ldr	r1, .L246+16
 2420 003c 1448     		ldr	r0, .L246+20
 2421              	.LVL287:
 2422 003e FFF7FEFF 		bl	SET_Configuration_Addr
 2423              	.LVL288:
2263:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;  
 2424              		.loc 1 2263 0
 2425 0042 08B1     		cbz	r0, .L244
2264:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2426              		.loc 1 2264 0
 2427 0044 0A24     		movs	r4, #10
 2428 0046 E1E7     		b	.L231
 2429              	.L244:
2270:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 2430              		.loc 1 2270 0
 2431 0048 1049     		ldr	r1, .L246+16
 2432 004a 1248     		ldr	r0, .L246+24
 2433              	.LVL289:
 2434 004c FFF7FEFF 		bl	SET_Configuration_Addr
 2435              	.LVL290:
2272:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
 2436              		.loc 1 2272 0
 2437 0050 08B1     		cbz	r0, .L245
2273:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2438              		.loc 1 2273 0
 2439 0052 0A24     		movs	r4, #10
 2440 0054 DAE7     		b	.L231
 2441              	.L245:
2276:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2442              		.loc 1 2276 0
 2443 0056 1049     		ldr	r1, .L246+28
 2444 0058 1048     		ldr	r0, .L246+32
 2445              	.LVL291:
 2446 005a FFF7FEFF 		bl	SET_Configuration_Addr
 2447              	.LVL292:
2277:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
 2448              		.loc 1 2277 0
 2449 005e 0446     		mov	r4, r0
 2450 0060 48B9     		cbnz	r0, .L238
2281:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2451              		.loc 1 2281 0
 2452 0062 0021     		movs	r1, #0
 2453 0064 0E48     		ldr	r0, .L246+36
 2454              	.LVL293:
 2455 0066 FFF7FEFF 		bl	SET_Configuration_Value
 2456              	.LVL294:
2306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2457              		.loc 1 2306 0
 2458 006a FFF7FEFF 		bl	Save_Current_Setting
 2459              	.LVL295:
2312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 90


 2460              		.loc 1 2312 0
 2461 006e 0120     		movs	r0, #1
 2462 0070 FFF7FEFF 		bl	SET_Power_State
 2463              	.LVL296:
2315:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2464              		.loc 1 2315 0
 2465 0074 CAE7     		b	.L231
 2466              	.LVL297:
 2467              	.L238:
2278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2468              		.loc 1 2278 0
 2469 0076 0A24     		movs	r4, #10
 2470 0078 C8E7     		b	.L231
 2471              	.L247:
 2472 007a 00BF     		.align	2
 2473              	.L246:
 2474 007c 00000000 		.word	.LC13
 2475 0080 10000000 		.word	.LC14
 2476 0084 00000000 		.word	.LC16
 2477 0088 10000000 		.word	.LC17
 2478 008c 1C000000 		.word	.LC18
 2479 0090 28000000 		.word	.LC19
 2480 0094 30000000 		.word	.LC20
 2481 0098 38000000 		.word	.LC21
 2482 009c 48000000 		.word	.LC22
 2483 00a0 54000000 		.word	.LC23
 2484              		.cfi_endproc
 2485              	.LFE304:
 2487              		.section	.text.wifi_standby,"ax",%progbits
 2488              		.align	1
 2489              		.global	wifi_standby
 2490              		.syntax unified
 2491              		.thumb
 2492              		.thumb_func
 2493              		.fpu fpv4-sp-d16
 2495              	wifi_standby:
 2496              	.LFB305:
2317:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2318:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2319:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_standby
2320:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configured WiFi module to enter standby
2321:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  arg_standby_time: standby time (in seconds)
2322:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2323:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2324:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_standby(uint8_t arg_standby_time)
2325:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2497              		.loc 1 2325 0
 2498              		.cfi_startproc
 2499              		@ args = 0, pretend = 0, frame = 0
 2500              		@ frame_needed = 0, uses_anonymous_args = 0
 2501              	.LVL298:
 2502 0000 10B5     		push	{r4, lr}
 2503              	.LCFI42:
 2504              		.cfi_def_cfa_offset 8
 2505              		.cfi_offset 4, -8
 2506              		.cfi_offset 14, -4
 2507 0002 0446     		mov	r4, r0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 91


 2508              	.LVL299:
2326:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*
2327:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   For SPWF01:
2328:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   For Standby, the presence of Jumpers on JP4 and JP3 has the following behaviour:
2329:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   JP3 (middle and bottom): prevents standby and immediately wakes-up module
2330:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   JP3 (middle and top): no effect on standby
2331:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   JP4 (middle and right): prevents wakeup and standby runs forever
2332:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   JP4 (middle and left): no effect on standby
2333:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
2334:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2335:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2336:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2337:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*if(arg_standby_time<2)
2338:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;*/
2339:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
2340:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 2509              		.loc 1 2340 0
 2510 0004 0021     		movs	r1, #0
 2511 0006 1248     		ldr	r0, .L251
 2512              	.LVL300:
 2513 0008 FFF7FEFF 		bl	SET_Configuration_Value
 2514              	.LVL301:
2341:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(WIFI_STANDBY_ENABLED, 1);  
 2515              		.loc 1 2341 0
 2516 000c 0121     		movs	r1, #1
 2517 000e 1148     		ldr	r0, .L251+4
 2518 0010 FFF7FEFF 		bl	SET_Configuration_Value
 2519              	.LVL302:
2342:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_STANDBY_TIME, arg_standby_time);  
 2520              		.loc 1 2342 0
 2521 0014 2146     		mov	r1, r4
 2522 0016 1048     		ldr	r0, .L251+8
 2523 0018 FFF7FEFF 		bl	SET_Configuration_Value
 2524              	.LVL303:
2343:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2344:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF01  
2345:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* save current setting in flash */
2346:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Save_Current_Setting();
 2525              		.loc 1 2346 0
 2526 001c FFF7FEFF 		bl	Save_Current_Setting
 2527              	.LVL304:
2347:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2348:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2349:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module/ Set the PMS mode */
2350:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04  
2351:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef CONSOLE_UART_ENABLED
2352:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.PMS=%d\r",3);//3->standby
2353:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2354:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2355:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.PMS=%d",3);//3->standby
2356:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);  
2357:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif  
2358:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(WiFi_Control_Variables.in_standby_mode != WIFI_TRUE);//Till WIND:67 arrives
2359:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2360:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else //if SPWF01
2361:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_SET_POWER_STATE,1);//cfun=1->simple reset (SPWF01)
 2528              		.loc 1 2361 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 92


 2529 0020 0E4C     		ldr	r4, .L251+12
 2530 0022 0122     		movs	r2, #1
 2531 0024 0E49     		ldr	r1, .L251+16
 2532 0026 2046     		mov	r0, r4
 2533 0028 FFF7FEFF 		bl	sprintf
 2534              	.LVL305:
2362:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 2535              		.loc 1 2362 0
 2536 002c 2046     		mov	r0, r4
 2537 002e FFF7FEFF 		bl	strlen
 2538              	.LVL306:
 2539 0032 80B2     		uxth	r0, r0
 2540 0034 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 2541              	.LVL307:
2363:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   IO_status_flag.WiFi_Enabled=WIFI_FALSE;
 2542              		.loc 1 2363 0
 2543 0038 0A4A     		ldr	r2, .L251+20
 2544 003a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2545 003c 6FF30413 		bfc	r3, #4, #1
 2546 0040 1370     		strb	r3, [r2]
 2547              	.L249:
2364:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
 2548              		.loc 1 2364 0 discriminator 1
 2549 0042 084B     		ldr	r3, .L251+20
 2550 0044 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2551 0046 13F0100F 		tst	r3, #16
 2552 004a FAD0     		beq	.L249
2365:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2366:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2367:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2553              		.loc 1 2367 0
 2554 004c 10BD     		pop	{r4, pc}
 2555              	.L252:
 2556 004e 00BF     		.align	2
 2557              	.L251:
 2558 0050 00000000 		.word	.LC24
 2559 0054 10000000 		.word	.LC25
 2560 0058 20000000 		.word	.LC26
 2561 005c 00000000 		.word	WiFi_AT_Cmd_Buff
 2562 0060 30000000 		.word	.LC27
 2563 0064 00000000 		.word	IO_status_flag
 2564              		.cfi_endproc
 2565              	.LFE305:
 2567              		.section	.text.wifi_wakeup,"ax",%progbits
 2568              		.align	1
 2569              		.global	wifi_wakeup
 2570              		.syntax unified
 2571              		.thumb
 2572              		.thumb_func
 2573              		.fpu fpv4-sp-d16
 2575              	wifi_wakeup:
 2576              	.LFB306:
2368:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2369:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
2370:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2371:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_sleep
2372:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configured WiFi module to enter sleep mode
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 93


2373:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Needs to be woken up by wifi_wakeup()
2374:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
2375:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2376:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2377:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_powersave(power_mode mode)
2378:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
2379:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2380:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2381:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef CONSOLE_UART_ENABLED
2382:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.PMS=%d\r",mode);
2383:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2384:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2385:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.PMS=%d",mode);
2386:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);  
2387:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2388:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2389:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(mode==wifi_sleep)
2390:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2391:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.Deep_Sleep_Enabled = WIFI_FALSE; 
2392:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(WiFi_Control_Variables.Deep_Sleep_Enabled != WIFI_TRUE);//Till WIND:69 arrives    
2393:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2394:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else if(mode==wifi_reactive)
2395:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2396:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.LowPowerMode_Enabled = WIFI_FALSE;
2397:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(WiFi_Control_Variables.LowPowerMode_Enabled != WIFI_TRUE);//Till WIND:66 arrives
2398:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2399:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else if(mode==wifi_active)
2400:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2401:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.WiFi_Enabled=WIFI_FALSE;
2402:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2403:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2404:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2405:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2406:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
2407:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2408:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2409:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2410:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_wakeup
2411:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         wakeup the module from sleep by setting the GPIO6 through PC13
2412:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         or allow it to go to sleep
2413:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Jumper needed on JP4
2414:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  wakeup wakeup (WIFI_TRUE) or allow sleep(WIFI_FALSE)
2415:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of function call 
2416:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2417:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_wakeup(wifi_bool wakeup)
2418:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2577              		.loc 1 2418 0
 2578              		.cfi_startproc
 2579              		@ args = 0, pretend = 0, frame = 24
 2580              		@ frame_needed = 0, uses_anonymous_args = 0
 2581              	.LVL308:
 2582 0000 10B5     		push	{r4, lr}
 2583              	.LCFI43:
 2584              		.cfi_def_cfa_offset 8
 2585              		.cfi_offset 4, -8
 2586              		.cfi_offset 14, -4
 2587 0002 86B0     		sub	sp, sp, #24
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 94


 2588              	.LCFI44:
 2589              		.cfi_def_cfa_offset 32
 2590 0004 0446     		mov	r4, r0
 2591              	.LVL309:
 2592              	.LBB27:
2419:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;    
2420:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2421:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   GPIO_InitTypeDef  WAKEUP_InitStruct;
2422:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   RESET_WAKEUP_GPIO_CLK_ENABLE();
 2593              		.loc 1 2422 0
 2594 0006 0021     		movs	r1, #0
 2595 0008 0091     		str	r1, [sp]
 2596 000a 134B     		ldr	r3, .L258
 2597 000c 1A6B     		ldr	r2, [r3, #48]
 2598 000e 42F00402 		orr	r2, r2, #4
 2599 0012 1A63     		str	r2, [r3, #48]
 2600 0014 1B6B     		ldr	r3, [r3, #48]
 2601 0016 03F00403 		and	r3, r3, #4
 2602 001a 0093     		str	r3, [sp]
 2603 001c 009B     		ldr	r3, [sp]
 2604              	.LBE27:
2423:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2424:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WAKEUP_InitStruct.Pin       = WiFi_WAKEUP_GPIO_PIN;
 2605              		.loc 1 2424 0
 2606 001e 4FF48073 		mov	r3, #256
 2607 0022 0193     		str	r3, [sp, #4]
2425:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WAKEUP_InitStruct.Mode      = GPIO_MODE_OUTPUT_PP;
 2608              		.loc 1 2425 0
 2609 0024 0123     		movs	r3, #1
 2610 0026 0293     		str	r3, [sp, #8]
2426:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WAKEUP_InitStruct.Pull      = GPIO_NOPULL;
 2611              		.loc 1 2426 0
 2612 0028 0391     		str	r1, [sp, #12]
2427:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WAKEUP_InitStruct.Speed     = GPIO_SPEED_HIGH;
 2613              		.loc 1 2427 0
 2614 002a 0323     		movs	r3, #3
 2615 002c 0493     		str	r3, [sp, #16]
2428:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2429:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   HAL_GPIO_Init(WiFi_WAKEUP_GPIO_PORT, &WAKEUP_InitStruct);;
 2616              		.loc 1 2429 0
 2617 002e 01A9     		add	r1, sp, #4
 2618 0030 0A48     		ldr	r0, .L258+4
 2619              	.LVL310:
 2620 0032 FFF7FEFF 		bl	HAL_GPIO_Init
 2621              	.LVL311:
2430:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2431:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(wakeup)
 2622              		.loc 1 2431 0
 2623 0036 44B9     		cbnz	r4, .L257
2432:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     HAL_GPIO_WritePin(WiFi_WAKEUP_GPIO_PORT, WiFi_WAKEUP_GPIO_PIN, GPIO_PIN_SET);
2433:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else
2434:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     HAL_GPIO_WritePin(WiFi_WAKEUP_GPIO_PORT, WiFi_WAKEUP_GPIO_PIN, GPIO_PIN_RESET);
 2624              		.loc 1 2434 0
 2625 0038 0022     		movs	r2, #0
 2626 003a 4FF48071 		mov	r1, #256
 2627 003e 0748     		ldr	r0, .L258+4
 2628 0040 FFF7FEFF 		bl	HAL_GPIO_WritePin
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 95


 2629              	.LVL312:
 2630              	.L255:
2435:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2436:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2437:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2631              		.loc 1 2437 0
 2632 0044 0020     		movs	r0, #0
 2633 0046 06B0     		add	sp, sp, #24
 2634              	.LCFI45:
 2635              		.cfi_remember_state
 2636              		.cfi_def_cfa_offset 8
 2637              		@ sp needed
 2638 0048 10BD     		pop	{r4, pc}
 2639              	.L257:
 2640              	.LCFI46:
 2641              		.cfi_restore_state
2432:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     HAL_GPIO_WritePin(WiFi_WAKEUP_GPIO_PORT, WiFi_WAKEUP_GPIO_PIN, GPIO_PIN_SET);
 2642              		.loc 1 2432 0
 2643 004a 0122     		movs	r2, #1
 2644 004c 4FF48071 		mov	r1, #256
 2645 0050 0248     		ldr	r0, .L258+4
 2646 0052 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2647              	.LVL313:
 2648 0056 F5E7     		b	.L255
 2649              	.L259:
 2650              		.align	2
 2651              	.L258:
 2652 0058 00380240 		.word	1073887232
 2653 005c 00080240 		.word	1073874944
 2654              		.cfi_endproc
 2655              	.LFE306:
 2657              		.section	.text.wifi_init,"ax",%progbits
 2658              		.align	1
 2659              		.global	wifi_init
 2660              		.syntax unified
 2661              		.thumb
 2662              		.thumb_func
 2663              		.fpu fpv4-sp-d16
 2665              	wifi_init:
 2666              	.LFB275:
  82:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 2667              		.loc 1 82 0
 2668              		.cfi_startproc
 2669              		@ args = 0, pretend = 0, frame = 0
 2670              		@ frame_needed = 0, uses_anonymous_args = 0
 2671              	.LVL314:
 2672 0000 70B5     		push	{r4, r5, r6, lr}
 2673              	.LCFI47:
 2674              		.cfi_def_cfa_offset 16
 2675              		.cfi_offset 4, -16
 2676              		.cfi_offset 5, -12
 2677              		.cfi_offset 6, -8
 2678              		.cfi_offset 14, -4
 2679 0002 0546     		mov	r5, r0
 2680              	.LVL315:
  86:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32F4XX_NUCLEO)  
 2681              		.loc 1 86 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 96


 2682 0004 AC48     		ldr	r0, .L295
 2683              	.LVL316:
 2684 0006 FFF7FEFF 		bl	printf
 2685              	.LVL317:
  88:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 2686              		.loc 1 88 0
 2687 000a AC48     		ldr	r0, .L295+4
 2688 000c FFF7FEFF 		bl	puts
 2689              	.LVL318:
 102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 2690              		.loc 1 102 0
 2691 0010 AB48     		ldr	r0, .L295+8
 2692 0012 FFF7FEFF 		bl	puts
 2693              	.LVL319:
 105:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
 2694              		.loc 1 105 0
 2695 0016 AB48     		ldr	r0, .L295+12
 2696 0018 FFF7FEFF 		bl	puts
 2697              	.LVL320:
 111:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2698              		.loc 1 111 0
 2699 001c FFF7FEFF 		bl	WiFi_Module_Init
 2700              	.LVL321:
 114:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     fflush(stdout);
 2701              		.loc 1 114 0
 2702 0020 A948     		ldr	r0, .L295+16
 2703 0022 FFF7FEFF 		bl	puts
 2704              	.LVL322:
 115:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 2705              		.loc 1 115 0
 2706 0026 A94B     		ldr	r3, .L295+20
 2707 0028 1B68     		ldr	r3, [r3]
 2708 002a 9868     		ldr	r0, [r3, #8]
 2709 002c FFF7FEFF 		bl	fflush
 2710              	.LVL323:
 119:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2711              		.loc 1 119 0
 2712 0030 A748     		ldr	r0, .L295+24
 2713 0032 FFF7FEFF 		bl	puts
 2714              	.LVL324:
 121:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 	
 2715              		.loc 1 121 0
 2716 0036 0120     		movs	r0, #1
 2717 0038 FFF7FEFF 		bl	wifi_wakeup
 2718              	.LVL325:
 123:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* Soft reset the module */
 2719              		.loc 1 123 0
 2720 003c A548     		ldr	r0, .L295+28
 2721 003e FFF7FEFF 		bl	puts
 2722              	.LVL326:
 125:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2723              		.loc 1 125 0
 2724 0042 FFF7FEFF 		bl	wifi_reset
 2725              	.LVL327:
 127:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(CONSOLE_UART_ENABLED)
 2726              		.loc 1 127 0
 2727 0046 A448     		ldr	r0, .L295+32
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 97


 2728 0048 FFF7FEFF 		bl	puts
 2729              	.LVL328:
 130:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) 
 2730              		.loc 1 130 0
 2731 004c FFF7FEFF 		bl	Restore_Default_Setting
 2732              	.LVL329:
 131:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return status;
 2733              		.loc 1 131 0
 2734 0050 0446     		mov	r4, r0
 2735 0052 08B1     		cbz	r0, .L290
 2736              	.LVL330:
 2737              	.L261:
 485:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2738              		.loc 1 485 0
 2739 0054 2046     		mov	r0, r4
 2740 0056 70BD     		pop	{r4, r5, r6, pc}
 2741              	.LVL331:
 2742              	.L290:
 138:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 2743              		.loc 1 138 0
 2744 0058 696B     		ldr	r1, [r5, #52]
 2745 005a A048     		ldr	r0, .L295+36
 2746              	.LVL332:
 2747 005c FFF7FEFF 		bl	SET_Configuration_Value
 2748              	.LVL333:
 139:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         
 2749              		.loc 1 139 0
 2750 0060 0446     		mov	r4, r0
 2751 0062 0028     		cmp	r0, #0
 2752 0064 F6D1     		bne	.L261
 142:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_SAVE_CURRENT_SETTING);  
 2753              		.loc 1 142 0
 2754 0066 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 2755              	.LVL334:
 143:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 2756              		.loc 1 143 0
 2757 006a 9D4B     		ldr	r3, .L295+40
 2758 006c 9D4A     		ldr	r2, .L295+44
 2759 006e 1068     		ldr	r0, [r2]
 2760 0070 1860     		str	r0, [r3]	@ unaligned
 2761 0072 9288     		ldrh	r2, [r2, #4]	@ unaligned
 2762 0074 9A80     		strh	r2, [r3, #4]	@ unaligned
 144:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 2763              		.loc 1 144 0
 2764 0076 1846     		mov	r0, r3
 2765 0078 FFF7FEFF 		bl	strlen
 2766              	.LVL335:
 2767 007c 80B2     		uxth	r0, r0
 2768 007e FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 2769              	.LVL336:
 145:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 2770              		.loc 1 145 0
 2771 0082 20B9     		cbnz	r0, .L262
 147:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 2772              		.loc 1 147 0
 2773 0084 FFF7FEFF 		bl	USART_Receive_AT_Resp
 2774              	.LVL337:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 98


 148:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         } 
 2775              		.loc 1 148 0
 2776 0088 0446     		mov	r4, r0
 2777 008a 0028     		cmp	r0, #0
 2778 008c E2D1     		bne	.L261
 2779              	.L262:
 152:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 2780              		.loc 1 152 0
 2781 008e FFF7FEFF 		bl	wifi_reset
 2782              	.LVL338:
 159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 2783              		.loc 1 159 0
 2784 0092 0121     		movs	r1, #1
 2785 0094 9448     		ldr	r0, .L295+48
 2786 0096 FFF7FEFF 		bl	SET_Configuration_Value
 2787              	.LVL339:
 162:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2788              		.loc 1 162 0
 2789 009a 0446     		mov	r4, r0
 2790 009c 0028     		cmp	r0, #0
 2791 009e D9D1     		bne	.L261
 164:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2792              		.loc 1 164 0
 2793 00a0 296B     		ldr	r1, [r5, #48]
 2794 00a2 29B1     		cbz	r1, .L263
 167:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 2795              		.loc 1 167 0
 2796 00a4 8D48     		ldr	r0, .L295+36
 2797              	.LVL340:
 2798 00a6 FFF7FEFF 		bl	SET_Configuration_Value
 2799              	.LVL341:
 168:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 2800              		.loc 1 168 0
 2801 00aa 0446     		mov	r4, r0
 2802 00ac 0028     		cmp	r0, #0
 2803 00ae D1D1     		bne	.L261
 2804              	.L263:
 186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;   
 2805              		.loc 1 186 0
 2806 00b0 0021     		movs	r1, #0
 2807 00b2 8E48     		ldr	r0, .L295+52
 2808              	.LVL342:
 2809 00b4 FFF7FEFF 		bl	SET_Configuration_Value
 2810              	.LVL343:
 187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 2811              		.loc 1 187 0
 2812 00b8 0446     		mov	r4, r0
 2813 00ba 0028     		cmp	r0, #0
 2814 00bc CAD1     		bne	.L261
 189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2815              		.loc 1 189 0
 2816 00be 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 2817 00c0 002B     		cmp	r3, #0
 2818 00c2 00F0BD80 		beq	.L265
 2819 00c6 012B     		cmp	r3, #1
 2820 00c8 00F0CB80 		beq	.L266
 2821              	.L264:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 99


 207:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2822              		.loc 1 207 0
 2823 00cc 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 2824 00ce 012B     		cmp	r3, #1
 2825 00d0 00F03481 		beq	.L268
 2826 00d4 002B     		cmp	r3, #0
 2827 00d6 00F0D580 		beq	.L269
 2828 00da 022B     		cmp	r3, #2
 2829 00dc 00F05F81 		beq	.L270
 2830              	.L267:
 249:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2831              		.loc 1 249 0
 2832 00e0 AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 2833 00e2 032B     		cmp	r3, #3
 2834 00e4 40F28C81 		bls	.L291
 2835              	.L271:
 262:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2836              		.loc 1 262 0
 2837 00e8 E978     		ldrb	r1, [r5, #3]	@ zero_extendqisi2
 2838 00ea 0229     		cmp	r1, #2
 2839 00ec 40F29381 		bls	.L292
 2840              	.L273:
 275:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2841              		.loc 1 275 0
 2842 00f0 6968     		ldr	r1, [r5, #4]
 2843 00f2 29B1     		cbz	r1, .L275
 277:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 2844              		.loc 1 277 0
 2845 00f4 7E48     		ldr	r0, .L295+56
 2846              	.LVL344:
 2847 00f6 FFF7FEFF 		bl	SET_Configuration_Addr
 2848              	.LVL345:
 278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 2849              		.loc 1 278 0
 2850 00fa 0446     		mov	r4, r0
 2851 00fc 0028     		cmp	r0, #0
 2852 00fe A9D1     		bne	.L261
 2853              	.L275:
 281:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2854              		.loc 1 281 0
 2855 0100 A968     		ldr	r1, [r5, #8]
 2856 0102 29B1     		cbz	r1, .L276
 283:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 2857              		.loc 1 283 0
 2858 0104 7B48     		ldr	r0, .L295+60
 2859              	.LVL346:
 2860 0106 FFF7FEFF 		bl	SET_Configuration_Addr
 2861              	.LVL347:
 284:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 2862              		.loc 1 284 0
 2863 010a 0446     		mov	r4, r0
 2864 010c 0028     		cmp	r0, #0
 2865 010e A1D1     		bne	.L261
 2866              	.L276:
 287:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2867              		.loc 1 287 0
 2868 0110 E968     		ldr	r1, [r5, #12]
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 100


 2869 0112 29B1     		cbz	r1, .L277
 289:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 2870              		.loc 1 289 0
 2871 0114 7848     		ldr	r0, .L295+64
 2872              	.LVL348:
 2873 0116 FFF7FEFF 		bl	SET_Configuration_Addr
 2874              	.LVL349:
 290:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 2875              		.loc 1 290 0
 2876 011a 0446     		mov	r4, r0
 2877 011c 0028     		cmp	r0, #0
 2878 011e 99D1     		bne	.L261
 2879              	.L277:
 293:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2880              		.loc 1 293 0
 2881 0120 2969     		ldr	r1, [r5, #16]
 2882 0122 29B1     		cbz	r1, .L278
 298:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #endif
 2883              		.loc 1 298 0
 2884 0124 7548     		ldr	r0, .L295+68
 2885              	.LVL350:
 2886 0126 FFF7FEFF 		bl	SET_Configuration_Addr
 2887              	.LVL351:
 300:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 2888              		.loc 1 300 0
 2889 012a 0446     		mov	r4, r0
 2890 012c 0028     		cmp	r0, #0
 2891 012e 91D1     		bne	.L261
 2892              	.L278:
 303:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2893              		.loc 1 303 0
 2894 0130 6969     		ldr	r1, [r5, #20]
 2895 0132 29B1     		cbz	r1, .L279
 305:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 2896              		.loc 1 305 0
 2897 0134 7248     		ldr	r0, .L295+72
 2898              	.LVL352:
 2899 0136 FFF7FEFF 		bl	SET_Configuration_Addr
 2900              	.LVL353:
 306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 2901              		.loc 1 306 0
 2902 013a 0446     		mov	r4, r0
 2903 013c 0028     		cmp	r0, #0
 2904 013e 89D1     		bne	.L261
 2905              	.L279:
 309:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2906              		.loc 1 309 0
 2907 0140 E969     		ldr	r1, [r5, #28]
 2908 0142 29B1     		cbz	r1, .L280
 311:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 2909              		.loc 1 311 0
 2910 0144 6F48     		ldr	r0, .L295+76
 2911              	.LVL354:
 2912 0146 FFF7FEFF 		bl	SET_Configuration_Addr
 2913              	.LVL355:
 312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 2914              		.loc 1 312 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 101


 2915 014a 0446     		mov	r4, r0
 2916 014c 0028     		cmp	r0, #0
 2917 014e 81D1     		bne	.L261
 2918              	.L280:
 315:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2919              		.loc 1 315 0
 2920 0150 296A     		ldr	r1, [r5, #32]
 2921 0152 31B1     		cbz	r1, .L281
 317:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 2922              		.loc 1 317 0
 2923 0154 6C48     		ldr	r0, .L295+80
 2924              	.LVL356:
 2925 0156 FFF7FEFF 		bl	SET_Configuration_Addr
 2926              	.LVL357:
 318:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 2927              		.loc 1 318 0
 2928 015a 0446     		mov	r4, r0
 2929 015c 0028     		cmp	r0, #0
 2930 015e 7FF479AF 		bne	.L261
 2931              	.L281:
 321:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2932              		.loc 1 321 0
 2933 0162 6B6A     		ldr	r3, [r5, #36]
 2934 0164 002B     		cmp	r3, #0
 2935 0166 40F05E81 		bne	.L293
 2936              	.L282:
 326:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2937              		.loc 1 326 0
 2938 016a A96A     		ldr	r1, [r5, #40]
 2939 016c 0029     		cmp	r1, #0
 2940 016e 40F06681 		bne	.L294
 2941              	.L283:
 331:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 2942              		.loc 1 331 0
 2943 0172 95F82C10 		ldrb	r1, [r5, #44]	@ zero_extendqisi2
 2944 0176 31B1     		cbz	r1, .L284
 333:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 2945              		.loc 1 333 0
 2946 0178 6448     		ldr	r0, .L295+84
 2947              	.LVL358:
 2948 017a FFF7FEFF 		bl	SET_Configuration_Value
 2949              	.LVL359:
 334:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }   
 2950              		.loc 1 334 0
 2951 017e 0446     		mov	r4, r0
 2952 0180 0028     		cmp	r0, #0
 2953 0182 7FF467AF 		bne	.L261
 2954              	.L284:
 338:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_HTTPD, config->web_server);  
 2955              		.loc 1 338 0
 2956 0186 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 2957              	.LVL360:
 339:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 2958              		.loc 1 339 0
 2959 018a 554C     		ldr	r4, .L295+40
 2960 018c 2A7E     		ldrb	r2, [r5, #24]	@ zero_extendqisi2
 2961 018e 6049     		ldr	r1, .L295+88
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 102


 2962 0190 2046     		mov	r0, r4
 2963 0192 FFF7FEFF 		bl	sprintf
 2964              	.LVL361:
 340:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 2965              		.loc 1 340 0
 2966 0196 2046     		mov	r0, r4
 2967 0198 FFF7FEFF 		bl	strlen
 2968              	.LVL362:
 2969 019c 80B2     		uxth	r0, r0
 2970 019e FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 2971              	.LVL363:
 341:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 2972              		.loc 1 341 0
 2973 01a2 28B9     		cbnz	r0, .L285
 343:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 2974              		.loc 1 343 0
 2975 01a4 FFF7FEFF 		bl	USART_Receive_AT_Resp
 2976              	.LVL364:
 344:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }  
 2977              		.loc 1 344 0
 2978 01a8 0446     		mov	r4, r0
 2979 01aa 0028     		cmp	r0, #0
 2980 01ac 7FF452AF 		bne	.L261
 2981              	.L285:
 376:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT2=clean,all\r");        
 2982              		.loc 1 376 0
 2983 01b0 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 2984              	.LVL365:
 377:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 2985              		.loc 1 377 0
 2986 01b4 4A4E     		ldr	r6, .L295+40
 2987 01b6 574C     		ldr	r4, .L295+92
 2988 01b8 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 2989 01ba 3060     		str	r0, [r6]	@ unaligned
 2990 01bc 7160     		str	r1, [r6, #4]	@ unaligned
 2991 01be B260     		str	r2, [r6, #8]	@ unaligned
 2992 01c0 F360     		str	r3, [r6, #12]	@ unaligned
 2993 01c2 03CC     		ldmia	r4!, {r0, r1}
 2994 01c4 3061     		str	r0, [r6, #16]	@ unaligned
 2995 01c6 7161     		str	r1, [r6, #20]	@ unaligned
 2996 01c8 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2997 01ca 3376     		strb	r3, [r6, #24]
 378:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status == WiFi_MODULE_SUCCESS)
 2998              		.loc 1 378 0
 2999 01cc 3046     		mov	r0, r6
 3000 01ce FFF7FEFF 		bl	strlen
 3001              	.LVL366:
 3002 01d2 80B2     		uxth	r0, r0
 3003 01d4 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3004              	.LVL367:
 379:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           {
 3005              		.loc 1 379 0
 3006 01d8 28B9     		cbnz	r0, .L286
 381:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 3007              		.loc 1 381 0
 3008 01da FFF7FEFF 		bl	USART_Receive_AT_Resp
 3009              	.LVL368:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 103


 382:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           }
 3010              		.loc 1 382 0
 3011 01de 0446     		mov	r4, r0
 3012 01e0 0028     		cmp	r0, #0
 3013 01e2 7FF437AF 		bne	.L261
 3014              	.L286:
 387:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_SAVE_CURRENT_SETTING);  
 3015              		.loc 1 387 0
 3016 01e6 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3017              	.LVL369:
 388:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3018              		.loc 1 388 0
 3019 01ea 3D4B     		ldr	r3, .L295+40
 3020 01ec 3D4A     		ldr	r2, .L295+44
 3021 01ee 1068     		ldr	r0, [r2]
 3022 01f0 1860     		str	r0, [r3]	@ unaligned
 3023 01f2 9288     		ldrh	r2, [r2, #4]	@ unaligned
 3024 01f4 9A80     		strh	r2, [r3, #4]	@ unaligned
 389:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
 3025              		.loc 1 389 0
 3026 01f6 1846     		mov	r0, r3
 3027 01f8 FFF7FEFF 		bl	strlen
 3028              	.LVL370:
 3029 01fc 80B2     		uxth	r0, r0
 3030 01fe FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3031              	.LVL371:
 390:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3032              		.loc 1 390 0
 3033 0202 0446     		mov	r4, r0
 3034 0204 28B9     		cbnz	r0, .L287
 392:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3035              		.loc 1 392 0
 3036 0206 FFF7FEFF 		bl	USART_Receive_AT_Resp
 3037              	.LVL372:
 393:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }   
 3038              		.loc 1 393 0
 3039 020a 0446     		mov	r4, r0
 3040 020c 0028     		cmp	r0, #0
 3041 020e 7FF421AF 		bne	.L261
 3042              	.L287:
 3043              	.LVL373:
 396:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3044              		.loc 1 396 0
 3045 0212 286B     		ldr	r0, [r5, #48]
 3046 0214 18B1     		cbz	r0, .L288
 398:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #if defined(SPWF01) 
 3047              		.loc 1 398 0
 3048 0216 FFF7FEFF 		bl	UART_Configuration
 3049              	.LVL374:
 400:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #else
 3050              		.loc 1 400 0
 3051 021a FFF7FEFF 		bl	Receive_Data
 3052              	.LVL375:
 3053              	.L288:
 409:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 3054              		.loc 1 409 0
 3055 021e FFF7FEFF 		bl	wifi_reset
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 104


 3056              	.LVL376:
 469:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 3057              		.loc 1 469 0
 3058 0222 3D48     		ldr	r0, .L295+96
 3059 0224 FFF7FEFF 		bl	puts
 3060              	.LVL377:
 471:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif  //WIFI_USE_VCOM
 3061              		.loc 1 471 0
 3062 0228 0020     		movs	r0, #0
 3063 022a FFF7FEFF 		bl	wifi_wakeup
 3064              	.LVL378:
 481:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     fflush(stdout);
 3065              		.loc 1 481 0
 3066 022e 3B48     		ldr	r0, .L295+100
 3067 0230 FFF7FEFF 		bl	puts
 3068              	.LVL379:
 482:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 3069              		.loc 1 482 0
 3070 0234 254B     		ldr	r3, .L295+20
 3071 0236 1B68     		ldr	r3, [r3]
 3072 0238 9868     		ldr	r0, [r3, #8]
 3073 023a FFF7FEFF 		bl	fflush
 3074              	.LVL380:
 484:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3075              		.loc 1 484 0
 3076 023e 09E7     		b	.L261
 3077              	.LVL381:
 3078              	.L265:
 192:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3079              		.loc 1 192 0
 3080 0240 0021     		movs	r1, #0
 3081 0242 3748     		ldr	r0, .L295+104
 3082              	.LVL382:
 3083 0244 FFF7FEFF 		bl	SET_Configuration_Value
 3084              	.LVL383:
 193:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Addr(WIFI_OPR_RATE_MASK, "0x00003FCF");
 3085              		.loc 1 193 0
 3086 0248 0446     		mov	r4, r0
 3087 024a 0028     		cmp	r0, #0
 3088 024c 7FF402AF 		bne	.L261
 194:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3089              		.loc 1 194 0
 3090 0250 3449     		ldr	r1, .L295+108
 3091 0252 3548     		ldr	r0, .L295+112
 3092              	.LVL384:
 3093 0254 FFF7FEFF 		bl	SET_Configuration_Addr
 3094              	.LVL385:
 195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3095              		.loc 1 195 0
 3096 0258 0446     		mov	r4, r0
 3097 025a 0028     		cmp	r0, #0
 3098 025c 3FF436AF 		beq	.L264
 3099 0260 F8E6     		b	.L261
 3100              	.L266:
 198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3101              		.loc 1 198 0
 3102 0262 0121     		movs	r1, #1
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 105


 3103 0264 2E48     		ldr	r0, .L295+104
 3104              	.LVL386:
 3105 0266 FFF7FEFF 		bl	SET_Configuration_Value
 3106              	.LVL387:
 199:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Addr(WIFI_OPR_RATE_MASK, "0x003FFFCF");
 3107              		.loc 1 199 0
 3108 026a 0446     		mov	r4, r0
 3109 026c 0028     		cmp	r0, #0
 3110 026e 7FF4F1AE 		bne	.L261
 200:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3111              		.loc 1 200 0
 3112 0272 2E49     		ldr	r1, .L295+116
 3113 0274 2C48     		ldr	r0, .L295+112
 3114              	.LVL388:
 3115 0276 FFF7FEFF 		bl	SET_Configuration_Addr
 3116              	.LVL389:
 201:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3117              		.loc 1 201 0
 3118 027a 0446     		mov	r4, r0
 3119 027c 0028     		cmp	r0, #0
 3120 027e 3FF425AF 		beq	.L264
 3121 0282 E7E6     		b	.L261
 3122              	.L269:
 210:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3123              		.loc 1 210 0
 3124 0284 0021     		movs	r1, #0
 3125 0286 2A48     		ldr	r0, .L295+120
 3126              	.LVL390:
 3127 0288 FFF7FEFF 		bl	SET_Configuration_Value
 3128              	.LVL391:
 211:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 3129              		.loc 1 211 0
 3130 028c 0446     		mov	r4, r0
 3131 028e 0028     		cmp	r0, #0
 3132 0290 7FF4E0AE 		bne	.L261
 212:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3133              		.loc 1 212 0
 3134 0294 0021     		movs	r1, #0
 3135 0296 2748     		ldr	r0, .L295+124
 3136              	.LVL392:
 3137 0298 FFF7FEFF 		bl	SET_Configuration_Value
 3138              	.LVL393:
 213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 3139              		.loc 1 213 0
 3140 029c 0446     		mov	r4, r0
 3141 029e 0028     		cmp	r0, #0
 3142 02a0 7FF4D8AE 		bne	.L261
 214:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3143              		.loc 1 214 0
 3144 02a4 0021     		movs	r1, #0
 3145 02a6 2448     		ldr	r0, .L295+128
 3146              	.LVL394:
 3147 02a8 FFF7FEFF 		bl	SET_Configuration_Value
 3148              	.LVL395:
 215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3149              		.loc 1 215 0
 3150 02ac 0446     		mov	r4, r0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 106


 3151 02ae 0028     		cmp	r0, #0
 3152 02b0 3FF416AF 		beq	.L267
 3153 02b4 CEE6     		b	.L261
 3154              	.L296:
 3155 02b6 00BF     		.align	2
 3156              	.L295:
 3157 02b8 00000000 		.word	.LC28
 3158 02bc 18000000 		.word	.LC29
 3159 02c0 34000000 		.word	.LC30
 3160 02c4 50000000 		.word	.LC31
 3161 02c8 64000000 		.word	.LC32
 3162 02cc 00000000 		.word	_impure_ptr
 3163 02d0 80000000 		.word	.LC33
 3164 02d4 90000000 		.word	.LC34
 3165 02d8 9C000000 		.word	.LC35
 3166 02dc C0000000 		.word	.LC36
 3167 02e0 00000000 		.word	WiFi_AT_Cmd_Buff
 3168 02e4 D0000000 		.word	.LC37
 3169 02e8 D8000000 		.word	.LC38
 3170 02ec 10000000 		.word	.LC14
 3171 02f0 10000000 		.word	.LC17
 3172 02f4 48000000 		.word	.LC22
 3173 02f8 28000000 		.word	.LC19
 3174 02fc 30000000 		.word	.LC20
 3175 0300 88010000 		.word	.LC48
 3176 0304 94010000 		.word	.LC49
 3177 0308 A4010000 		.word	.LC50
 3178 030c E0010000 		.word	.LC53
 3179 0310 F4010000 		.word	.LC54
 3180 0314 00000000 		.word	.LC0
 3181 0318 04020000 		.word	.LC55
 3182 031c 2C020000 		.word	.LC56
 3183 0320 E8000000 		.word	.LC39
 3184 0324 F8000000 		.word	.LC40
 3185 0328 04010000 		.word	.LC41
 3186 032c 18010000 		.word	.LC42
 3187 0330 24010000 		.word	.LC43
 3188 0334 00000000 		.word	.LC24
 3189 0338 10000000 		.word	.LC25
 3190              	.L268:
 218:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3191              		.loc 1 218 0
 3192 033c 0121     		movs	r1, #1
 3193 033e 4448     		ldr	r0, .L297
 3194              	.LVL396:
 3195 0340 FFF7FEFF 		bl	SET_Configuration_Value
 3196              	.LVL397:
 219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_OPERATIONAL_MODE, 11);  
 3197              		.loc 1 219 0
 3198 0344 0446     		mov	r4, r0
 3199 0346 0028     		cmp	r0, #0
 3200 0348 7FF484AE 		bne	.L261
 220:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3201              		.loc 1 220 0
 3202 034c 0B21     		movs	r1, #11
 3203 034e 4148     		ldr	r0, .L297+4
 3204              	.LVL398:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 107


 3205 0350 FFF7FEFF 		bl	SET_Configuration_Value
 3206              	.LVL399:
 221:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_BEACON_WAKEUP, 0);
 3207              		.loc 1 221 0
 3208 0354 0446     		mov	r4, r0
 3209 0356 0028     		cmp	r0, #0
 3210 0358 7FF47CAE 		bne	.L261
 222:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3211              		.loc 1 222 0
 3212 035c 0021     		movs	r1, #0
 3213 035e 3E48     		ldr	r0, .L297+8
 3214              	.LVL400:
 3215 0360 FFF7FEFF 		bl	SET_Configuration_Value
 3216              	.LVL401:
 223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_LISTEN_INTERVAL, 0);
 3217              		.loc 1 223 0
 3218 0364 0446     		mov	r4, r0
 3219 0366 0028     		cmp	r0, #0
 3220 0368 7FF474AE 		bne	.L261
 224:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3221              		.loc 1 224 0
 3222 036c 0021     		movs	r1, #0
 3223 036e 3B48     		ldr	r0, .L297+12
 3224              	.LVL402:
 3225 0370 FFF7FEFF 		bl	SET_Configuration_Value
 3226              	.LVL403:
 225:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 3227              		.loc 1 225 0
 3228 0374 0446     		mov	r4, r0
 3229 0376 0028     		cmp	r0, #0
 3230 0378 7FF46CAE 		bne	.L261
 226:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3231              		.loc 1 226 0
 3232 037c 0021     		movs	r1, #0
 3233 037e 3848     		ldr	r0, .L297+16
 3234              	.LVL404:
 3235 0380 FFF7FEFF 		bl	SET_Configuration_Value
 3236              	.LVL405:
 227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 3237              		.loc 1 227 0
 3238 0384 0446     		mov	r4, r0
 3239 0386 0028     		cmp	r0, #0
 3240 0388 7FF464AE 		bne	.L261
 228:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3241              		.loc 1 228 0
 3242 038c 0021     		movs	r1, #0
 3243 038e 3548     		ldr	r0, .L297+20
 3244              	.LVL406:
 3245 0390 FFF7FEFF 		bl	SET_Configuration_Value
 3246              	.LVL407:
 229:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3247              		.loc 1 229 0
 3248 0394 0446     		mov	r4, r0
 3249 0396 0028     		cmp	r0, #0
 3250 0398 3FF4A2AE 		beq	.L267
 3251 039c 5AE6     		b	.L261
 3252              	.L270:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 108


 232:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3253              		.loc 1 232 0
 3254 039e 0121     		movs	r1, #1
 3255 03a0 2B48     		ldr	r0, .L297
 3256              	.LVL408:
 3257 03a2 FFF7FEFF 		bl	SET_Configuration_Value
 3258              	.LVL409:
 233:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_OPERATIONAL_MODE, 12);  
 3259              		.loc 1 233 0
 3260 03a6 0446     		mov	r4, r0
 3261 03a8 0028     		cmp	r0, #0
 3262 03aa 7FF453AE 		bne	.L261
 234:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3263              		.loc 1 234 0
 3264 03ae 0C21     		movs	r1, #12
 3265 03b0 2848     		ldr	r0, .L297+4
 3266              	.LVL410:
 3267 03b2 FFF7FEFF 		bl	SET_Configuration_Value
 3268              	.LVL411:
 235:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_BEACON_WAKEUP, 10);
 3269              		.loc 1 235 0
 3270 03b6 0446     		mov	r4, r0
 3271 03b8 0028     		cmp	r0, #0
 3272 03ba 7FF44BAE 		bne	.L261
 236:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3273              		.loc 1 236 0
 3274 03be 0A21     		movs	r1, #10
 3275 03c0 2548     		ldr	r0, .L297+8
 3276              	.LVL412:
 3277 03c2 FFF7FEFF 		bl	SET_Configuration_Value
 3278              	.LVL413:
 237:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_LISTEN_INTERVAL, 1);
 3279              		.loc 1 237 0
 3280 03c6 0446     		mov	r4, r0
 3281 03c8 0028     		cmp	r0, #0
 3282 03ca 7FF443AE 		bne	.L261
 238:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3283              		.loc 1 238 0
 3284 03ce 0121     		movs	r1, #1
 3285 03d0 2248     		ldr	r0, .L297+12
 3286              	.LVL414:
 3287 03d2 FFF7FEFF 		bl	SET_Configuration_Value
 3288              	.LVL415:
 239:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 1);  
 3289              		.loc 1 239 0
 3290 03d6 0446     		mov	r4, r0
 3291 03d8 0028     		cmp	r0, #0
 3292 03da 7FF43BAE 		bne	.L261
 240:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3293              		.loc 1 240 0
 3294 03de 0121     		movs	r1, #1
 3295 03e0 1F48     		ldr	r0, .L297+16
 3296              	.LVL416:
 3297 03e2 FFF7FEFF 		bl	SET_Configuration_Value
 3298              	.LVL417:
 241:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 3299              		.loc 1 241 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 109


 3300 03e6 0446     		mov	r4, r0
 3301 03e8 0028     		cmp	r0, #0
 3302 03ea 7FF433AE 		bne	.L261
 242:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3303              		.loc 1 242 0
 3304 03ee 0021     		movs	r1, #0
 3305 03f0 1C48     		ldr	r0, .L297+20
 3306              	.LVL418:
 3307 03f2 FFF7FEFF 		bl	SET_Configuration_Value
 3308              	.LVL419:
 243:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3309              		.loc 1 243 0
 3310 03f6 0446     		mov	r4, r0
 3311 03f8 0028     		cmp	r0, #0
 3312 03fa 3FF471AE 		beq	.L267
 3313 03fe 29E6     		b	.L261
 3314              	.L291:
 255:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3315              		.loc 1 255 0
 3316 0400 03EB4303 		add	r3, r3, r3, lsl #1
 3317 0404 5900     		lsls	r1, r3, #1
 3318 0406 1848     		ldr	r0, .L297+24
 3319              	.LVL420:
 3320 0408 FFF7FEFF 		bl	SET_Configuration_Value
 3321              	.LVL421:
 256:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3322              		.loc 1 256 0
 3323 040c 0446     		mov	r4, r0
 3324 040e 0028     		cmp	r0, #0
 3325 0410 3FF46AAE 		beq	.L271
 3326 0414 1EE6     		b	.L261
 3327              	.L292:
 267:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3328              		.loc 1 267 0
 3329 0416 1548     		ldr	r0, .L297+28
 3330              	.LVL422:
 3331 0418 FFF7FEFF 		bl	SET_Configuration_Value
 3332              	.LVL423:
 268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3333              		.loc 1 268 0
 3334 041c 0446     		mov	r4, r0
 3335 041e 0028     		cmp	r0, #0
 3336 0420 3FF466AE 		beq	.L273
 3337 0424 16E6     		b	.L261
 3338              	.L293:
 323:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3339              		.loc 1 323 0
 3340 0426 4FF47A71 		mov	r1, #1000
 3341 042a 01FB03F1 		mul	r1, r1, r3
 3342 042e 1048     		ldr	r0, .L297+32
 3343              	.LVL424:
 3344 0430 FFF7FEFF 		bl	SET_Configuration_Value
 3345              	.LVL425:
 324:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3346              		.loc 1 324 0
 3347 0434 0446     		mov	r4, r0
 3348 0436 0028     		cmp	r0, #0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 110


 3349 0438 3FF497AE 		beq	.L282
 3350 043c 0AE6     		b	.L261
 3351              	.L294:
 328:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3352              		.loc 1 328 0
 3353 043e 0D48     		ldr	r0, .L297+36
 3354              	.LVL426:
 3355 0440 FFF7FEFF 		bl	SET_Configuration_Value
 3356              	.LVL427:
 329:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3357              		.loc 1 329 0
 3358 0444 0446     		mov	r4, r0
 3359 0446 0028     		cmp	r0, #0
 3360 0448 3FF493AE 		beq	.L283
 3361 044c 02E6     		b	.L261
 3362              	.L298:
 3363 044e 00BF     		.align	2
 3364              	.L297:
 3365 0450 24010000 		.word	.LC43
 3366 0454 34010000 		.word	.LC44
 3367 0458 4C010000 		.word	.LC45
 3368 045c 60010000 		.word	.LC46
 3369 0460 00000000 		.word	.LC24
 3370 0464 10000000 		.word	.LC25
 3371 0468 78010000 		.word	.LC47
 3372 046c 54000000 		.word	.LC23
 3373 0470 B4010000 		.word	.LC51
 3374 0474 D0010000 		.word	.LC52
 3375              		.cfi_endproc
 3376              	.LFE275:
 3378              		.section	.text.wifi_disconnect,"ax",%progbits
 3379              		.align	1
 3380              		.global	wifi_disconnect
 3381              		.syntax unified
 3382              		.thumb
 3383              		.thumb_func
 3384              		.fpu fpv4-sp-d16
 3386              	wifi_disconnect:
 3387              	.LFB307:
2438:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2439:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2440:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_disconnect
2441:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         disconnect the module from any AP
2442:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
2443:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2444:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2445:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_disconnect(void)
2446:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 3388              		.loc 1 2446 0
 3389              		.cfi_startproc
 3390              		@ args = 0, pretend = 0, frame = 0
 3391              		@ frame_needed = 0, uses_anonymous_args = 0
 3392 0000 08B5     		push	{r3, lr}
 3393              	.LCFI48:
 3394              		.cfi_def_cfa_offset 8
 3395              		.cfi_offset 3, -8
 3396              		.cfi_offset 14, -4
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 111


 3397              	.LVL428:
2447:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
2448:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2449:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
 3398              		.loc 1 2449 0
 3399 0002 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3400              	.LVL429:
2450:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2451:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04  
2452:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=0<cr>*/  
2453:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2454:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);  
2455:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2456:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2457:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
2458:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2459:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;
2460:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2461:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2462:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2463:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2464:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2465:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
2466:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2467:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2468:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2469:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2470:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2471:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set wifi_mode to idle*/
2472:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_MODE, WiFi_IDLE_MODE);
 3401              		.loc 1 2472 0
 3402 0006 0021     		movs	r1, #0
 3403 0008 0848     		ldr	r0, .L303
 3404 000a FFF7FEFF 		bl	SET_Configuration_Value
 3405              	.LVL430:
2473:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2474:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*If module was connected, reset the status*/
2475:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(wifi_connected == 1)
 3406              		.loc 1 2475 0
 3407 000e 084B     		ldr	r3, .L303+4
 3408 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3409 0012 DBB2     		uxtb	r3, r3
 3410 0014 012B     		cmp	r3, #1
 3411 0016 05D0     		beq	.L302
 3412              	.L300:
2476:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2477:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         wifi_connected = 0;//this will allow the TIM handler to make the callback on connection(WiF
2478:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }  
2479:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2480:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04  
2481:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=1<cr>*/  
2482:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer(); 
2483:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)
2484:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);  
2485:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2486:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2487:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 1);  
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 112


2488:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2489:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;
2490:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2491:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2492:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2493:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2494:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2495:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2496:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_FALSE;
2497:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }  
2498:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2499:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2500:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2501:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2502:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* save current setting in flash */
2503:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Save_Current_Setting();
 3413              		.loc 1 2503 0
 3414 0018 FFF7FEFF 		bl	Save_Current_Setting
 3415              	.LVL431:
2504:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2505:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2506:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
2507:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined (SPWF04)
2508:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //status = Soft_Reset();
2509:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2510:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Power_State((WiFi_Power_State_t)PowerSave_State);//CFUN=1
 3416              		.loc 1 2510 0
 3417 001c 0120     		movs	r0, #1
 3418 001e FFF7FEFF 		bl	SET_Power_State
 3419              	.LVL432:
2511:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2512:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****        
2513:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2514:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3420              		.loc 1 2514 0
 3421 0022 08BD     		pop	{r3, pc}
 3422              	.LVL433:
 3423              	.L302:
2477:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }  
 3424              		.loc 1 2477 0
 3425 0024 0022     		movs	r2, #0
 3426 0026 024B     		ldr	r3, .L303+4
 3427 0028 1A70     		strb	r2, [r3]
 3428 002a F5E7     		b	.L300
 3429              	.L304:
 3430              		.align	2
 3431              	.L303:
 3432 002c 10000000 		.word	.LC14
 3433 0030 00000000 		.word	wifi_connected
 3434              		.cfi_endproc
 3435              	.LFE307:
 3437              		.section	.text.wifi_enable,"ax",%progbits
 3438              		.align	1
 3439              		.global	wifi_enable
 3440              		.syntax unified
 3441              		.thumb
 3442              		.thumb_func
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 113


 3443              		.fpu fpv4-sp-d16
 3445              	wifi_enable:
 3446              	.LFB308:
2515:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2516:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_enable
2518:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Enable/Disable the Wi-Fi interface
2519:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  enable enable Wi-Fi (WIFI_TRUE) disable Wi-Fi (WIFI_FALSE)
2520:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2521:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2522:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_enable(wifi_bool enable)
2523:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 3447              		.loc 1 2523 0
 3448              		.cfi_startproc
 3449              		@ args = 0, pretend = 0, frame = 0
 3450              		@ frame_needed = 0, uses_anonymous_args = 0
 3451              	.LVL434:
 3452 0000 38B5     		push	{r3, r4, r5, lr}
 3453              	.LCFI49:
 3454              		.cfi_def_cfa_offset 16
 3455              		.cfi_offset 3, -16
 3456              		.cfi_offset 4, -12
 3457              		.cfi_offset 5, -8
 3458              		.cfi_offset 14, -4
 3459              	.LVL435:
2524:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2525:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2526:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if((enable && IO_status_flag.WiFi_Enabled == WIFI_TRUE) || (!enable && IO_status_flag.WiFi_Enable
 3460              		.loc 1 2526 0
 3461 0002 0446     		mov	r4, r0
 3462 0004 20B1     		cbz	r0, .L306
 3463              		.loc 1 2526 0 is_stmt 0 discriminator 1
 3464 0006 204B     		ldr	r3, .L318
 3465 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3466 000a 13F0100F 		tst	r3, #16
 3467 000e 36D1     		bne	.L314
 3468              	.L306:
 3469              		.loc 1 2526 0 discriminator 3
 3470 0010 24B9     		cbnz	r4, .L308
 3471              		.loc 1 2526 0 discriminator 4
 3472 0012 1D4B     		ldr	r3, .L318
 3473 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3474 0016 13F0100F 		tst	r3, #16
 3475 001a 32D0     		beq	.L315
 3476              	.L308:
2527:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;//already in desired state
2528:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2529:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Enable or Disable wifi interface*/  
2530:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
 3477              		.loc 1 2530 0 is_stmt 1
 3478 001c FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3479              	.LVL436:
2531:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2532:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2533:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2534:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, enable);  
 3480              		.loc 1 2534 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 114


 3481 0020 1A4D     		ldr	r5, .L318+4
 3482 0022 2246     		mov	r2, r4
 3483 0024 1A49     		ldr	r1, .L318+8
 3484 0026 2846     		mov	r0, r5
 3485 0028 FFF7FEFF 		bl	sprintf
 3486              	.LVL437:
2535:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(HAL_UART_Transmit(&UartWiFiHandle, (uint8_t *)WiFi_AT_Cmd_Buff, strlen((char*)WiFi_AT_Cmd_Buff
 3487              		.loc 1 2535 0
 3488 002c 2846     		mov	r0, r5
 3489 002e FFF7FEFF 		bl	strlen
 3490              	.LVL438:
 3491 0032 4FF47A73 		mov	r3, #1000
 3492 0036 82B2     		uxth	r2, r0
 3493 0038 2946     		mov	r1, r5
 3494 003a 1648     		ldr	r0, .L318+12
 3495 003c FFF7FEFF 		bl	HAL_UART_Transmit
 3496              	.LVL439:
 3497 0040 20B1     		cbz	r0, .L309
2536:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2537:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_UART_Error_Handler();
 3498              		.loc 1 2537 0
 3499 0042 FFF7FEFF 		bl	WiFi_UART_Error_Handler
 3500              	.LVL440:
2538:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if DEBUG_PRINT
2539:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     printf("HAL_UART_Transmit Error");
2540:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
2541:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_HAL_UART_ERROR;
 3501              		.loc 1 2541 0
 3502 0046 0F23     		movs	r3, #15
 3503              	.LVL441:
 3504              	.L307:
2542:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }  
2543:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2544:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2545:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=0<cr>*/  
2546:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
2547:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2548:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;  
2549:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2550:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2551:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2552:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2553:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2554:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2556:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
2557:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2558:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2559:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //wait for power down/hw started
2560:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(enable)
2561:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE) {
2562:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
2563:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2564:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else
2565:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(IO_status_flag.WiFi_Enabled != WIFI_FALSE) {
2566:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
2567:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 115


2568:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2569:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2570:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3505              		.loc 1 2570 0
 3506 0048 1846     		mov	r0, r3
 3507 004a 38BD     		pop	{r3, r4, r5, pc}
 3508              	.LVL442:
 3509              	.L309:
2554:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
 3510              		.loc 1 2554 0
 3511 004c FFF7FEFF 		bl	USART_Receive_AT_Resp
 3512              	.LVL443:
2555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
 3513              		.loc 1 2555 0
 3514 0050 0346     		mov	r3, r0
 3515 0052 0028     		cmp	r0, #0
 3516 0054 F8D1     		bne	.L307
2556:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 3517              		.loc 1 2556 0
 3518 0056 0C49     		ldr	r1, .L318
 3519 0058 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 3520 005a 42F04002 		orr	r2, r2, #64
 3521 005e 0A70     		strb	r2, [r1]
 3522              	.LVL444:
2560:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE) {
 3523              		.loc 1 2560 0
 3524 0060 34B9     		cbnz	r4, .L310
 3525              	.L311:
2565:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
 3526              		.loc 1 2565 0
 3527 0062 094A     		ldr	r2, .L318
 3528 0064 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3529 0066 12F0100F 		tst	r2, #16
 3530 006a EDD0     		beq	.L307
2566:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3531              		.loc 1 2566 0
 3532              		.syntax unified
 3533              	@ 2566 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 3534 006c 00BF     		nop
 3535              	@ 0 "" 2
 3536              		.thumb
 3537              		.syntax unified
 3538 006e F8E7     		b	.L311
 3539              	.L310:
2561:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
 3540              		.loc 1 2561 0
 3541 0070 054A     		ldr	r2, .L318
 3542 0072 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3543 0074 12F0100F 		tst	r2, #16
 3544 0078 E6D1     		bne	.L307
2562:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3545              		.loc 1 2562 0
 3546              		.syntax unified
 3547              	@ 2562 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 3548 007a 00BF     		nop
 3549              	@ 0 "" 2
 3550              		.thumb
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 116


 3551              		.syntax unified
 3552 007c F8E7     		b	.L310
 3553              	.LVL445:
 3554              	.L314:
2527:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 3555              		.loc 1 2527 0
 3556 007e 0023     		movs	r3, #0
 3557 0080 E2E7     		b	.L307
 3558              	.L315:
 3559 0082 0023     		movs	r3, #0
 3560 0084 E0E7     		b	.L307
 3561              	.L319:
 3562 0086 00BF     		.align	2
 3563              	.L318:
 3564 0088 00000000 		.word	IO_status_flag
 3565 008c 00000000 		.word	WiFi_AT_Cmd_Buff
 3566 0090 00000000 		.word	.LC57
 3567 0094 00000000 		.word	UartWiFiHandle
 3568              		.cfi_endproc
 3569              	.LFE308:
 3571              		.section	.text.wifi_restore,"ax",%progbits
 3572              		.align	1
 3573              		.global	wifi_restore
 3574              		.syntax unified
 3575              		.thumb
 3576              		.thumb_func
 3577              		.fpu fpv4-sp-d16
 3579              	wifi_restore:
 3580              	.LFB309:
2571:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2572:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2573:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_restore
2574:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Restore the Wi-Fi with default values.
2575:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
2576:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2577:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2578:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_restore()
2579:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 3581              		.loc 1 2579 0
 3582              		.cfi_startproc
 3583              		@ args = 0, pretend = 0, frame = 0
 3584              		@ frame_needed = 0, uses_anonymous_args = 0
 3585 0000 08B5     		push	{r3, lr}
 3586              	.LCFI50:
 3587              		.cfi_def_cfa_offset 8
 3588              		.cfi_offset 3, -8
 3589              		.cfi_offset 14, -4
 3590              	.LVL446:
2580:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2581:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2582:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Restore default setting*/
2583:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Restore_Default_Setting();  
 3591              		.loc 1 2583 0
 3592 0002 FFF7FEFF 		bl	Restore_Default_Setting
 3593              	.LVL447:
2584:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2585:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 117


2586:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04    
2587:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=0<cr>*/  
2588:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);  
2589:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2590:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2591:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2592:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2593:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2594:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
2595:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2596:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2597:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2598:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif  
2599:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set wifi_mode to idle*/
2600:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(WIFI_MODE, WiFi_IDLE_MODE);
 3594              		.loc 1 2600 0
 3595 0006 0021     		movs	r1, #0
 3596 0008 0648     		ldr	r0, .L322
 3597 000a FFF7FEFF 		bl	SET_Configuration_Value
 3598              	.LVL448:
2601:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04    
2602:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=1<cr>*/  
2603:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Restore_Default_Setting();  
2604:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);  
2605:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2606:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2607:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2608:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2609:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2610:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_FALSE;
2611:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2612:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2613:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2614:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif  
2615:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2616:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2617:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set radio OFF */
2618:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2619:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
2620:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2621:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2622:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2623:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2624:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2625:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set wifi_mode to idle*/
2626:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(WIFI_MODE, WiFi_IDLE_MODE);
2627:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2628:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set radio ON */  
2629:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2630:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 1);  
2631:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2632:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2633:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2634:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2635:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2636:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif  
2637:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 118


2638:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* set the local echo */
2639:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(LOCALECHO1, 0); 
 3599              		.loc 1 2639 0
 3600 000e 0021     		movs	r1, #0
 3601 0010 0548     		ldr	r0, .L322+4
 3602 0012 FFF7FEFF 		bl	SET_Configuration_Value
 3603              	.LVL449:
2640:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2641:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
2642:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined (SPWF04)
2643:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //status = Soft_Reset();
2644:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2645:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* save current setting in flash */
2646:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Save_Current_Setting();
 3604              		.loc 1 2646 0
 3605 0016 FFF7FEFF 		bl	Save_Current_Setting
 3606              	.LVL450:
2647:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2648:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Power_State((WiFi_Power_State_t)PowerSave_State);//CFUN=1
 3607              		.loc 1 2648 0
 3608 001a 0120     		movs	r0, #1
 3609 001c FFF7FEFF 		bl	SET_Power_State
 3610              	.LVL451:
2649:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2650:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2651:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2652:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3611              		.loc 1 2652 0
 3612 0020 08BD     		pop	{r3, pc}
 3613              	.L323:
 3614 0022 00BF     		.align	2
 3615              	.L322:
 3616 0024 10000000 		.word	.LC14
 3617 0028 00000000 		.word	.LC58
 3618              		.cfi_endproc
 3619              	.LFE309:
 3621              		.section	.text.wifi_gpio_init,"ax",%progbits
 3622              		.align	1
 3623              		.global	wifi_gpio_init
 3624              		.syntax unified
 3625              		.thumb
 3626              		.thumb_func
 3627              		.fpu fpv4-sp-d16
 3629              	wifi_gpio_init:
 3630              	.LFB310:
2653:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2654:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /*GPIO Configuration Functions*/
2655:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2656:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2657:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_gpio_init
2658:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configure a GPIO pin as in or out with IRQ setting
2659:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  pin GPIO pin number
2660:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  irq configuration of the pin
2661:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2662:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2663:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** uint8_t wifi_gpio_init(GpioPin pin, char* dir, char irq)
2664:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 119


 3631              		.loc 1 2664 0
 3632              		.cfi_startproc
 3633              		@ args = 0, pretend = 0, frame = 0
 3634              		@ frame_needed = 0, uses_anonymous_args = 0
 3635              	.LVL452:
 3636 0000 70B5     		push	{r4, r5, r6, lr}
 3637              	.LCFI51:
 3638              		.cfi_def_cfa_offset 16
 3639              		.cfi_offset 4, -16
 3640              		.cfi_offset 5, -12
 3641              		.cfi_offset 6, -8
 3642              		.cfi_offset 14, -4
 3643 0002 82B0     		sub	sp, sp, #8
 3644              	.LCFI52:
 3645              		.cfi_def_cfa_offset 24
 3646 0004 0546     		mov	r5, r0
 3647 0006 0E46     		mov	r6, r1
 3648 0008 1446     		mov	r4, r2
 3649              	.LVL453:
2665:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2666:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2667:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* AT+S.GPIOC=pin,dir,irq */
2668:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 3650              		.loc 1 2668 0
 3651 000a FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3652              	.LVL454:
2669:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2670:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(irq!=GPIO_Off)
 3653              		.loc 1 2670 0
 3654 000e 302C     		cmp	r4, #48
 3655 0010 11D0     		beq	.L325
2671:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOC=%d,%s,%c\r", pin, dir, irq);
 3656              		.loc 1 2671 0
 3657 0012 0094     		str	r4, [sp]
 3658 0014 3346     		mov	r3, r6
 3659 0016 2A46     		mov	r2, r5
 3660 0018 0C49     		ldr	r1, .L330
 3661 001a 0D48     		ldr	r0, .L330+4
 3662 001c FFF7FEFF 		bl	sprintf
 3663              	.LVL455:
 3664              	.L326:
2672:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else
2673:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOC=%d,%s\r", pin, dir);
2674:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2675:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3665              		.loc 1 2675 0
 3666 0020 0B48     		ldr	r0, .L330+4
 3667 0022 FFF7FEFF 		bl	strlen
 3668              	.LVL456:
 3669 0026 80B2     		uxth	r0, r0
 3670 0028 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3671              	.LVL457:
2676:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2677:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(irq!=GPIO_Off)
2678:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOC=%d,%s,%c", pin, dir, irq);
2679:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else
2680:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOC=%d,%s", pin, dir);
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 120


2681:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2682:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;  
2683:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2684:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2685:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2686:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 3672              		.loc 1 2686 0
 3673 002c 0346     		mov	r3, r0
 3674 002e 48B1     		cbz	r0, .L329
 3675              	.LVL458:
 3676              	.L327:
2687:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2688:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
2689:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2690:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2691:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
2692:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3677              		.loc 1 2692 0
 3678 0030 1846     		mov	r0, r3
 3679 0032 02B0     		add	sp, sp, #8
 3680              	.LCFI53:
 3681              		.cfi_remember_state
 3682              		.cfi_def_cfa_offset 16
 3683              		@ sp needed
 3684 0034 70BD     		pop	{r4, r5, r6, pc}
 3685              	.LVL459:
 3686              	.L325:
 3687              	.LCFI54:
 3688              		.cfi_restore_state
2673:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 3689              		.loc 1 2673 0
 3690 0036 3346     		mov	r3, r6
 3691 0038 2A46     		mov	r2, r5
 3692 003a 0649     		ldr	r1, .L330+8
 3693 003c 0448     		ldr	r0, .L330+4
 3694 003e FFF7FEFF 		bl	sprintf
 3695              	.LVL460:
 3696 0042 EDE7     		b	.L326
 3697              	.LVL461:
 3698              	.L329:
2688:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3699              		.loc 1 2688 0
 3700 0044 FFF7FEFF 		bl	USART_Receive_AT_Resp
 3701              	.LVL462:
 3702 0048 0346     		mov	r3, r0
 3703              	.LVL463:
 3704 004a F1E7     		b	.L327
 3705              	.L331:
 3706              		.align	2
 3707              	.L330:
 3708 004c 00000000 		.word	.LC59
 3709 0050 00000000 		.word	WiFi_AT_Cmd_Buff
 3710 0054 18000000 		.word	.LC60
 3711              		.cfi_endproc
 3712              	.LFE310:
 3714              		.section	.text.wifi_gpio_read,"ax",%progbits
 3715              		.align	1
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 121


 3716              		.global	wifi_gpio_read
 3717              		.syntax unified
 3718              		.thumb
 3719              		.thumb_func
 3720              		.fpu fpv4-sp-d16
 3722              	wifi_gpio_read:
 3723              	.LFB311:
2693:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2694:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2695:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_gpio_read
2696:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Read the configuration of a GPIO pin
2697:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  pin GPIO pin number
2698:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  val value returned
2699:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  dir configuration direction returned
2700:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2701:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2702:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** uint8_t wifi_gpio_read(GpioPin pin, uint8_t *val, uint8_t *dir)
2703:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 3724              		.loc 1 2703 0
 3725              		.cfi_startproc
 3726              		@ args = 0, pretend = 0, frame = 0
 3727              		@ frame_needed = 0, uses_anonymous_args = 0
 3728              	.LVL464:
 3729 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3730              	.LCFI55:
 3731              		.cfi_def_cfa_offset 24
 3732              		.cfi_offset 3, -24
 3733              		.cfi_offset 4, -20
 3734              		.cfi_offset 5, -16
 3735              		.cfi_offset 6, -12
 3736              		.cfi_offset 7, -8
 3737              		.cfi_offset 14, -4
 3738 0002 0746     		mov	r7, r0
 3739 0004 0E46     		mov	r6, r1
 3740 0006 1546     		mov	r5, r2
 3741              	.LVL465:
2704:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Status_t status = WiFi_MODULE_SUCCESS;    
2705:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2706:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* AT+S.GPIOR=pin */
2707:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();  
 3742              		.loc 1 2707 0
 3743 0008 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3744              	.LVL466:
2708:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2709:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOR=%d\r", pin);
 3745              		.loc 1 2709 0
 3746 000c 0C4C     		ldr	r4, .L336
 3747 000e 3A46     		mov	r2, r7
 3748 0010 0C49     		ldr	r1, .L336+4
 3749 0012 2046     		mov	r0, r4
 3750 0014 FFF7FEFF 		bl	sprintf
 3751              	.LVL467:
2710:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3752              		.loc 1 2710 0
 3753 0018 2046     		mov	r0, r4
 3754 001a FFF7FEFF 		bl	strlen
 3755              	.LVL468:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 122


 3756 001e 80B2     		uxth	r0, r0
 3757 0020 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3758              	.LVL469:
2711:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2712:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOR=%d", pin);
2713:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2714:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_GPIO_EVENT;
2715:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;
2716:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2717:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2718:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 3759              		.loc 1 2718 0
 3760 0024 0246     		mov	r2, r0
 3761 0026 30B1     		cbz	r0, .L335
 3762              	.LVL470:
 3763              	.L333:
2719:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2720:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
2721:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2722:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     *val = WiFi_Counter_Variables.gpio_value;
 3764              		.loc 1 2722 0
 3765 0028 074B     		ldr	r3, .L336+8
 3766 002a 597A     		ldrb	r1, [r3, #9]	@ zero_extendqisi2
 3767 002c 3170     		strb	r1, [r6]
2723:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     *dir = WiFi_Counter_Variables.gpio_dir;
 3768              		.loc 1 2723 0
 3769 002e 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 3770 0030 2B70     		strb	r3, [r5]
2724:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2725:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
2726:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3771              		.loc 1 2726 0
 3772 0032 1046     		mov	r0, r2
 3773 0034 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3774              	.LVL471:
 3775              	.L335:
2720:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3776              		.loc 1 2720 0
 3777 0036 FFF7FEFF 		bl	USART_Receive_AT_Resp
 3778              	.LVL472:
 3779 003a 0246     		mov	r2, r0
 3780              	.LVL473:
 3781 003c F4E7     		b	.L333
 3782              	.L337:
 3783 003e 00BF     		.align	2
 3784              	.L336:
 3785 0040 00000000 		.word	WiFi_AT_Cmd_Buff
 3786 0044 00000000 		.word	.LC61
 3787 0048 00000000 		.word	WiFi_Counter_Variables
 3788              		.cfi_endproc
 3789              	.LFE311:
 3791              		.section	.text.wifi_gpio_write,"ax",%progbits
 3792              		.align	1
 3793              		.global	wifi_gpio_write
 3794              		.syntax unified
 3795              		.thumb
 3796              		.thumb_func
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 123


 3797              		.fpu fpv4-sp-d16
 3799              	wifi_gpio_write:
 3800              	.LFB312:
2727:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2728:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2729:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_gpio_write
2730:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Read the value of a GPIO pin
2731:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  pin GPIO pin number
2732:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  val value to be configured
2733:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2734:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2735:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** uint8_t wifi_gpio_write(GpioPin pin, GpioWriteValue value)
2736:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 3801              		.loc 1 2736 0
 3802              		.cfi_startproc
 3803              		@ args = 0, pretend = 0, frame = 0
 3804              		@ frame_needed = 0, uses_anonymous_args = 0
 3805              	.LVL474:
 3806 0000 70B5     		push	{r4, r5, r6, lr}
 3807              	.LCFI56:
 3808              		.cfi_def_cfa_offset 16
 3809              		.cfi_offset 4, -16
 3810              		.cfi_offset 5, -12
 3811              		.cfi_offset 6, -8
 3812              		.cfi_offset 14, -4
 3813 0002 0546     		mov	r5, r0
 3814 0004 0E46     		mov	r6, r1
 3815              	.LVL475:
2737:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2738:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2739:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* AT+S.GPIOW=pin,value */
2740:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer(); 
 3816              		.loc 1 2740 0
 3817 0006 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3818              	.LVL476:
2741:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2742:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOW=%d,%d\r", pin, value);
 3819              		.loc 1 2742 0
 3820 000a 0A4C     		ldr	r4, .L342
 3821 000c 3346     		mov	r3, r6
 3822 000e 2A46     		mov	r2, r5
 3823 0010 0949     		ldr	r1, .L342+4
 3824 0012 2046     		mov	r0, r4
 3825 0014 FFF7FEFF 		bl	sprintf
 3826              	.LVL477:
2743:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2744:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3827              		.loc 1 2744 0
 3828 0018 2046     		mov	r0, r4
 3829 001a FFF7FEFF 		bl	strlen
 3830              	.LVL478:
 3831 001e 80B2     		uxth	r0, r0
 3832 0020 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3833              	.LVL479:
2745:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2746:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOW=%d,%d", pin, value);
2747:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 124


2748:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;
2749:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2750:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2751:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 3834              		.loc 1 2751 0
 3835 0024 0346     		mov	r3, r0
 3836 0026 08B1     		cbz	r0, .L341
 3837              	.LVL480:
 3838              	.L339:
2752:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2753:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
2754:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2755:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
2757:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3839              		.loc 1 2757 0
 3840 0028 1846     		mov	r0, r3
 3841 002a 70BD     		pop	{r4, r5, r6, pc}
 3842              	.LVL481:
 3843              	.L341:
2753:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3844              		.loc 1 2753 0
 3845 002c FFF7FEFF 		bl	USART_Receive_AT_Resp
 3846              	.LVL482:
 3847 0030 0346     		mov	r3, r0
 3848              	.LVL483:
 3849 0032 F9E7     		b	.L339
 3850              	.L343:
 3851              		.align	2
 3852              	.L342:
 3853 0034 00000000 		.word	WiFi_AT_Cmd_Buff
 3854 0038 00000000 		.word	.LC62
 3855              		.cfi_endproc
 3856              	.LFE312:
 3858              		.section	.text.wifi_get_IP_address,"ax",%progbits
 3859              		.align	1
 3860              		.global	wifi_get_IP_address
 3861              		.syntax unified
 3862              		.thumb
 3863              		.thumb_func
 3864              		.fpu fpv4-sp-d16
 3866              	wifi_get_IP_address:
 3867              	.LFB313:
2758:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2759:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2760:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_get_IP_address
2761:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Get the ip address
2762:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  ip_addr : pointer to ip address
2763:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval status  : status of AT cmd request
2764:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2765:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_get_IP_address(uint8_t *ip_addr)
2766:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 3868              		.loc 1 2766 0
 3869              		.cfi_startproc
 3870              		@ args = 0, pretend = 0, frame = 0
 3871              		@ frame_needed = 0, uses_anonymous_args = 0
 3872              	.LVL484:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 125


 3873 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3874              	.LCFI57:
 3875              		.cfi_def_cfa_offset 24
 3876              		.cfi_offset 3, -24
 3877              		.cfi_offset 4, -20
 3878              		.cfi_offset 5, -16
 3879              		.cfi_offset 6, -12
 3880              		.cfi_offset 7, -8
 3881              		.cfi_offset 14, -4
 3882 0002 0646     		mov	r6, r0
 3883              	.LVL485:
2767:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2768:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   int cfg_value_length;
2769:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2770:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* AT : send AT command */
2771:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer(); 
 3884              		.loc 1 2771 0
 3885 0004 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3886              	.LVL486:
2772:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)  
2773:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_GET_STATUS_VALUE,"ip_ipaddr");
 3887              		.loc 1 2773 0
 3888 0008 114C     		ldr	r4, .L348
 3889 000a 124A     		ldr	r2, .L348+4
 3890 000c 1249     		ldr	r1, .L348+8
 3891 000e 2046     		mov	r0, r4
 3892 0010 FFF7FEFF 		bl	sprintf
 3893              	.LVL487:
2774:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3894              		.loc 1 2774 0
 3895 0014 2046     		mov	r0, r4
 3896 0016 FFF7FEFF 		bl	strlen
 3897              	.LVL488:
 3898 001a 80B2     		uxth	r0, r0
 3899 001c FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3900              	.LVL489:
2775:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2776:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.STS=%s", "ip_ipaddr");  
2777:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2778:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   IO_status_flag.AT_event_processing = WIFI_GCFG_EVENT;
2779:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;
2780:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2781:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2782:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 3901              		.loc 1 2782 0
 3902 0020 0446     		mov	r4, r0
 3903 0022 08B1     		cbz	r0, .L347
 3904              	.LVL490:
 3905              	.L345:
2783:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
2784:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
2785:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
2786:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
2787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* copy user pointer to get_cfg_value */
2788:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy(ip_addr,WiFi_Counter_Variables.get_cfg_value,cfg_value_length);   
2789:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
2790:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 126


2791:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2792:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3906              		.loc 1 2792 0
 3907 0024 2046     		mov	r0, r4
 3908 0026 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3909              	.LVL491:
 3910              	.L347:
2784:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 3911              		.loc 1 2784 0
 3912 0028 FFF7FEFF 		bl	USART_Receive_AT_Resp
 3913              	.LVL492:
 3914 002c 0446     		mov	r4, r0
 3915              	.LVL493:
2785:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 3916              		.loc 1 2785 0
 3917 002e 0B4D     		ldr	r5, .L348+12
 3918 0030 2846     		mov	r0, r5
 3919 0032 FFF7FEFF 		bl	strlen
 3920              	.LVL494:
 3921 0036 0746     		mov	r7, r0
 3922              	.LVL495:
2788:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
 3923              		.loc 1 2788 0
 3924 0038 0246     		mov	r2, r0
 3925 003a 2946     		mov	r1, r5
 3926 003c 3046     		mov	r0, r6
 3927              	.LVL496:
 3928 003e FFF7FEFF 		bl	memcpy
 3929              	.LVL497:
2789:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 3930              		.loc 1 2789 0
 3931 0042 3A46     		mov	r2, r7
 3932 0044 0021     		movs	r1, #0
 3933 0046 2846     		mov	r0, r5
 3934 0048 FFF7FEFF 		bl	memset
 3935              	.LVL498:
 3936 004c EAE7     		b	.L345
 3937              	.L349:
 3938 004e 00BF     		.align	2
 3939              	.L348:
 3940 0050 00000000 		.word	WiFi_AT_Cmd_Buff
 3941 0054 10000000 		.word	.LC17
 3942 0058 00000000 		.word	.LC63
 3943 005c 0E000000 		.word	WiFi_Counter_Variables+14
 3944              		.cfi_endproc
 3945              	.LFE313:
 3947              		.section	.text.wifi_get_MAC_address,"ax",%progbits
 3948              		.align	1
 3949              		.global	wifi_get_MAC_address
 3950              		.syntax unified
 3951              		.thumb
 3952              		.thumb_func
 3953              		.fpu fpv4-sp-d16
 3955              	wifi_get_MAC_address:
 3956              	.LFB314:
2793:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2794:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 127


2795:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  WiFi_get_MAC_address
2796:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Get the MAC address
2797:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  ip_addr : pointer to MAC address
2798:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval status  : status of AT cmd request
2799:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2800:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_get_MAC_address(uint8_t *mac_addr)
2801:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 3957              		.loc 1 2801 0
 3958              		.cfi_startproc
 3959              		@ args = 0, pretend = 0, frame = 0
 3960              		@ frame_needed = 0, uses_anonymous_args = 0
 3961              	.LVL499:
 3962 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3963              	.LCFI58:
 3964              		.cfi_def_cfa_offset 24
 3965              		.cfi_offset 3, -24
 3966              		.cfi_offset 4, -20
 3967              		.cfi_offset 5, -16
 3968              		.cfi_offset 6, -12
 3969              		.cfi_offset 7, -8
 3970              		.cfi_offset 14, -4
 3971 0002 0646     		mov	r6, r0
 3972              	.LVL500:
2802:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2803:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   int cfg_value_length;
2804:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2805:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT : send AT command */
2806:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer(); 
 3973              		.loc 1 2806 0
 3974 0004 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3975              	.LVL501:
2807:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)  
2808:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_GET_CONFIGURATION_VALUE,"nv_wifi_macaddr");
 3976              		.loc 1 2808 0
 3977 0008 114C     		ldr	r4, .L354
 3978 000a 124A     		ldr	r2, .L354+4
 3979 000c 1249     		ldr	r1, .L354+8
 3980 000e 2046     		mov	r0, r4
 3981 0010 FFF7FEFF 		bl	sprintf
 3982              	.LVL502:
2809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3983              		.loc 1 2809 0
 3984 0014 2046     		mov	r0, r4
 3985 0016 FFF7FEFF 		bl	strlen
 3986              	.LVL503:
 3987 001a 80B2     		uxth	r0, r0
 3988 001c FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3989              	.LVL504:
2810:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2811:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GCFG=%s", "nv_wifi_macaddr");  
2812:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2813:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   IO_status_flag.AT_event_processing = WIFI_GCFG_EVENT;
2814:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;
2815:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif   
2816:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2817:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 3990              		.loc 1 2817 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 128


 3991 0020 0446     		mov	r4, r0
 3992 0022 08B1     		cbz	r0, .L353
 3993              	.LVL505:
 3994              	.L351:
2818:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
2819:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
2820:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
2821:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
2822:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* copy user pointer to get_cfg_value */
2823:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy(mac_addr,&WiFi_Counter_Variables.get_cfg_value,cfg_value_length);  //IP address will h
2824:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
2825:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
2826:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2827:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3995              		.loc 1 2827 0
 3996 0024 2046     		mov	r0, r4
 3997 0026 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3998              	.LVL506:
 3999              	.L353:
2819:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 4000              		.loc 1 2819 0
 4001 0028 FFF7FEFF 		bl	USART_Receive_AT_Resp
 4002              	.LVL507:
 4003 002c 0446     		mov	r4, r0
 4004              	.LVL508:
2820:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 4005              		.loc 1 2820 0
 4006 002e 0B4D     		ldr	r5, .L354+12
 4007 0030 2846     		mov	r0, r5
 4008 0032 FFF7FEFF 		bl	strlen
 4009              	.LVL509:
 4010 0036 0746     		mov	r7, r0
 4011              	.LVL510:
2823:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
 4012              		.loc 1 2823 0
 4013 0038 0246     		mov	r2, r0
 4014 003a 2946     		mov	r1, r5
 4015 003c 3046     		mov	r0, r6
 4016              	.LVL511:
 4017 003e FFF7FEFF 		bl	memcpy
 4018              	.LVL512:
2824:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 4019              		.loc 1 2824 0
 4020 0042 3A46     		mov	r2, r7
 4021 0044 0021     		movs	r1, #0
 4022 0046 2846     		mov	r0, r5
 4023 0048 FFF7FEFF 		bl	memset
 4024              	.LVL513:
 4025 004c EAE7     		b	.L351
 4026              	.L355:
 4027 004e 00BF     		.align	2
 4028              	.L354:
 4029 0050 00000000 		.word	WiFi_AT_Cmd_Buff
 4030 0054 00000000 		.word	.LC64
 4031 0058 10000000 		.word	.LC65
 4032 005c 0E000000 		.word	WiFi_Counter_Variables+14
 4033              		.cfi_endproc
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 129


 4034              	.LFE314:
 4036              		.section	.text.wifi_get_status_variable_value,"ax",%progbits
 4037              		.align	1
 4038              		.global	wifi_get_status_variable_value
 4039              		.syntax unified
 4040              		.thumb
 4041              		.thumb_func
 4042              		.fpu fpv4-sp-d16
 4044              	wifi_get_status_variable_value:
 4045              	.LFB315:
2828:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2829:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2830:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_get_status_variable_value
2831:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Get the value of any status variable.
2832:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  status_variable_name  : name of the Status Variable whose value needs to be found. 
2833:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  status_variable_value : value of the Status Variable.
2834:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval uint32_t : If successful, the total number of charcters written in user buffer is returne
2835:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @NOTE:  The user should make sure to allocate enough memory to the buffer pointed by status_varia
2836:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2837:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** uint32_t wifi_get_status_variable_value(uint8_t *status_variable_name, uint8_t *status_variable_val
2838:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 4046              		.loc 1 2838 0
 4047              		.cfi_startproc
 4048              		@ args = 0, pretend = 0, frame = 0
 4049              		@ frame_needed = 0, uses_anonymous_args = 0
 4050              	.LVL514:
 4051 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4052              	.LCFI59:
 4053              		.cfi_def_cfa_offset 24
 4054              		.cfi_offset 3, -24
 4055              		.cfi_offset 4, -20
 4056              		.cfi_offset 5, -16
 4057              		.cfi_offset 6, -12
 4058              		.cfi_offset 7, -8
 4059              		.cfi_offset 14, -4
 4060 0002 0546     		mov	r5, r0
 4061 0004 0E46     		mov	r6, r1
 4062              	.LVL515:
2839:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2840:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   uint32_t cfg_value_length = 0;
2841:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2842:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* AT : send AT command */
2843:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer(); 
 4063              		.loc 1 2843 0
 4064 0006 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 4065              	.LVL516:
2844:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)  
2845:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_GET_STATUS_VALUE,status_variable_name);
 4066              		.loc 1 2845 0
 4067 000a 194C     		ldr	r4, .L362
 4068 000c 2A46     		mov	r2, r5
 4069 000e 1949     		ldr	r1, .L362+4
 4070 0010 2046     		mov	r0, r4
 4071 0012 FFF7FEFF 		bl	sprintf
 4072              	.LVL517:
2846:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 4073              		.loc 1 2846 0
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 130


 4074 0016 2046     		mov	r0, r4
 4075 0018 FFF7FEFF 		bl	strlen
 4076              	.LVL518:
 4077 001c 80B2     		uxth	r0, r0
 4078 001e FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 4079              	.LVL519:
2847:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
2848:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.STS=%s", status_variable_name);  
2849:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2850:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_GCFG_EVENT;
2851:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;
2852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
2853:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2854:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 4080              		.loc 1 2854 0
 4081 0022 10B1     		cbz	r0, .L361
2840:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 4082              		.loc 1 2840 0
 4083 0024 0024     		movs	r4, #0
 4084              	.LVL520:
 4085              	.L356:
2855:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
2856:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
2857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
2858:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2859:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* copy user pointer to get_cfg_value */
2860:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy(status_variable_value,WiFi_Counter_Variables.get_cfg_value,cfg_value_length);
2861:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
2862:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if((strstr((const char *)status_variable_name,"free_heap")) != NULL)
2863:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2864:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         uint32_t free_heap_size;
2865:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         free_heap_size = atoi((const char*)WiFi_Counter_Variables.get_cfg_value);
2866:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Update the wifi_socket_write_limit value to 80% of the free heap size Value*/
2867:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Counter_Variables.wifi_socket_write_limit = 80*(free_heap_size/100); //can use upto 80
2868:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2869:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
2870:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
2871:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return cfg_value_length;
2872:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 4086              		.loc 1 2872 0
 4087 0026 2046     		mov	r0, r4
 4088 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4089              	.LVL521:
 4090              	.L361:
2856:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 4091              		.loc 1 2856 0
 4092 002a FFF7FEFF 		bl	USART_Receive_AT_Resp
 4093              	.LVL522:
2857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 4094              		.loc 1 2857 0
 4095 002e 124F     		ldr	r7, .L362+8
 4096 0030 3846     		mov	r0, r7
 4097 0032 FFF7FEFF 		bl	strlen
 4098              	.LVL523:
 4099 0036 0446     		mov	r4, r0
 4100              	.LVL524:
2860:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 131


 4101              		.loc 1 2860 0
 4102 0038 0246     		mov	r2, r0
 4103 003a 3946     		mov	r1, r7
 4104 003c 3046     		mov	r0, r6
 4105              	.LVL525:
 4106 003e FFF7FEFF 		bl	memcpy
 4107              	.LVL526:
2862:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 4108              		.loc 1 2862 0
 4109 0042 0E49     		ldr	r1, .L362+12
 4110 0044 2846     		mov	r0, r5
 4111 0046 FFF7FEFF 		bl	strstr
 4112              	.LVL527:
 4113 004a 58B1     		cbz	r0, .L358
 4114              	.LBB28:
2865:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Update the wifi_socket_write_limit value to 80% of the free heap size Value*/
 4115              		.loc 1 2865 0
 4116 004c 3846     		mov	r0, r7
 4117 004e FFF7FEFF 		bl	atoi
 4118              	.LVL528:
2867:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4119              		.loc 1 2867 0
 4120 0052 0B4B     		ldr	r3, .L362+16
 4121 0054 A3FB0030 		umull	r3, r0, r3, r0
 4122              	.LVL529:
 4123 0058 4009     		lsrs	r0, r0, #5
 4124 005a 00EB8000 		add	r0, r0, r0, lsl #2
 4125 005e 0301     		lsls	r3, r0, #4
 4126 0060 C7F8D630 		str	r3, [r7, #214]
 4127              	.L358:
 4128              	.LBE28:
2869:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 4129              		.loc 1 2869 0
 4130 0064 2246     		mov	r2, r4
 4131 0066 0021     		movs	r1, #0
 4132 0068 0348     		ldr	r0, .L362+8
 4133 006a FFF7FEFF 		bl	memset
 4134              	.LVL530:
 4135 006e DAE7     		b	.L356
 4136              	.L363:
 4137              		.align	2
 4138              	.L362:
 4139 0070 00000000 		.word	WiFi_AT_Cmd_Buff
 4140 0074 00000000 		.word	.LC63
 4141 0078 0E000000 		.word	WiFi_Counter_Variables+14
 4142 007c 00000000 		.word	.LC66
 4143 0080 1F85EB51 		.word	1374389535
 4144              		.cfi_endproc
 4145              	.LFE315:
 4147              		.comm	WAKEUP_InitStruct,20,4
 4148              		.section	.rodata.Socket_Pending_Data.str1.4,"aMS",%progbits,1
 4149              		.align	2
 4150              	.LC8:
 4151 0000 41542B53 		.ascii	"AT+S.SOCKQ=%d\015\000"
 4151      2E534F43 
 4151      4B513D25 
 4151      640D00
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 132


 4152              		.section	.rodata.Socket_Read.str1.4,"aMS",%progbits,1
 4153              		.align	2
 4154              	.LC7:
 4155 0000 41542B53 		.ascii	"AT+S.SOCKR=%d,%d\015\000"
 4155      2E534F43 
 4155      4B523D25 
 4155      642C2564 
 4155      0D00
 4156              		.section	.rodata.wifi_adhoc_create.str1.4,"aMS",%progbits,1
 4157              		.align	2
 4158              	.LC16:
 4159 0000 3139322E 		.ascii	"192.168.2.100\000"
 4159      3136382E 
 4159      322E3130 
 4159      3000
 4160 000e 0000     		.space	2
 4161              	.LC17:
 4162 0010 69705F69 		.ascii	"ip_ipaddr\000"
 4162      70616464 
 4162      7200
 4163 001a 0000     		.space	2
 4164              	.LC18:
 4165 001c 3139322E 		.ascii	"192.168.2.1\000"
 4165      3136382E 
 4165      322E3100 
 4166              	.LC19:
 4167 0028 69705F67 		.ascii	"ip_gw\000"
 4167      7700
 4168 002e 0000     		.space	2
 4169              	.LC20:
 4170 0030 69705F64 		.ascii	"ip_dns\000"
 4170      6E7300
 4171 0037 00       		.space	1
 4172              	.LC21:
 4173 0038 3235352E 		.ascii	"255.255.255.0\000"
 4173      3235352E 
 4173      3235352E 
 4173      3000
 4174 0046 0000     		.space	2
 4175              	.LC22:
 4176 0048 69705F6E 		.ascii	"ip_netmask\000"
 4176      65746D61 
 4176      736B00
 4177 0053 00       		.space	1
 4178              	.LC23:
 4179 0054 69705F75 		.ascii	"ip_use_dhcp\000"
 4179      73655F64 
 4179      68637000 
 4180              		.section	.rodata.wifi_ap_start.str1.4,"aMS",%progbits,1
 4181              		.align	2
 4182              	.LC13:
 4183 0000 77696669 		.ascii	"wifi_priv_mode\000"
 4183      5F707269 
 4183      765F6D6F 
 4183      646500
 4184 000f 00       		.space	1
 4185              	.LC14:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 133


 4186 0010 77696669 		.ascii	"wifi_mode\000"
 4186      5F6D6F64 
 4186      6500
 4187 001a 0000     		.space	2
 4188              	.LC15:
 4189 001c 77696669 		.ascii	"wifi_channelnum\000"
 4189      5F636861 
 4189      6E6E656C 
 4189      6E756D00 
 4190              		.section	.rodata.wifi_enable.str1.4,"aMS",%progbits,1
 4191              		.align	2
 4192              	.LC57:
 4193 0000 41542B53 		.ascii	"AT+S.WIFI=%d\015\000"
 4193      2E574946 
 4193      493D2564 
 4193      0D00
 4194              		.section	.rodata.wifi_file_create.str1.4,"aMS",%progbits,1
 4195              		.align	2
 4196              	.LC9:
 4197 0000 41542B53 		.ascii	"AT+S.FSC=/%s,%d\015\000"
 4197      2E465343 
 4197      3D2F2573 
 4197      2C25640D 
 4197      00
 4198 0011 000000   		.space	3
 4199              	.LC10:
 4200 0014 41542B53 		.ascii	"AT+S.FSA=/%s,%d\015\000"
 4200      2E465341 
 4200      3D2F2573 
 4200      2C25640D 
 4200      00
 4201              		.section	.rodata.wifi_file_erase_external_flash.str1.4,"aMS",%progbits,1
 4202              		.align	2
 4203              	.LC11:
 4204 0000 41542B53 		.ascii	"AT+S.HTTPDFSERASE\015\000"
 4204      2E485454 
 4204      50444653 
 4204      45524153 
 4204      450D00
 4205              		.section	.rodata.wifi_get_IP_address.str1.4,"aMS",%progbits,1
 4206              		.align	2
 4207              	.LC63:
 4208 0000 41542B53 		.ascii	"AT+S.STS=%s\015\000"
 4208      2E535453 
 4208      3D25730D 
 4208      00
 4209              		.section	.rodata.wifi_get_MAC_address.str1.4,"aMS",%progbits,1
 4210              		.align	2
 4211              	.LC64:
 4212 0000 6E765F77 		.ascii	"nv_wifi_macaddr\000"
 4212      6966695F 
 4212      6D616361 
 4212      64647200 
 4213              	.LC65:
 4214 0010 41542B53 		.ascii	"AT+S.GCFG=%s\015\000"
 4214      2E474346 
 4214      473D2573 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 134


 4214      0D00
 4215              		.section	.rodata.wifi_get_status_variable_value.str1.4,"aMS",%progbits,1
 4216              		.align	2
 4217              	.LC66:
 4218 0000 66726565 		.ascii	"free_heap\000"
 4218      5F686561 
 4218      7000
 4219              		.section	.rodata.wifi_gpio_init.str1.4,"aMS",%progbits,1
 4220              		.align	2
 4221              	.LC59:
 4222 0000 41542B53 		.ascii	"AT+S.GPIOC=%d,%s,%c\015\000"
 4222      2E475049 
 4222      4F433D25 
 4222      642C2573 
 4222      2C25630D 
 4223 0015 000000   		.space	3
 4224              	.LC60:
 4225 0018 41542B53 		.ascii	"AT+S.GPIOC=%d,%s\015\000"
 4225      2E475049 
 4225      4F433D25 
 4225      642C2573 
 4225      0D00
 4226              		.section	.rodata.wifi_gpio_read.str1.4,"aMS",%progbits,1
 4227              		.align	2
 4228              	.LC61:
 4229 0000 41542B53 		.ascii	"AT+S.GPIOR=%d\015\000"
 4229      2E475049 
 4229      4F523D25 
 4229      640D00
 4230              		.section	.rodata.wifi_gpio_write.str1.4,"aMS",%progbits,1
 4231              		.align	2
 4232              	.LC62:
 4233 0000 41542B53 		.ascii	"AT+S.GPIOW=%d,%d\015\000"
 4233      2E475049 
 4233      4F573D25 
 4233      642C2564 
 4233      0D00
 4234              		.section	.rodata.wifi_init.str1.4,"aMS",%progbits,1
 4235              		.align	2
 4236              	.LC28:
 4237 0000 0D0A0A42 		.ascii	"\015\012\012Build Configuration:\000"
 4237      75696C64 
 4237      20436F6E 
 4237      66696775 
 4237      72617469 
 4238              	.LC29:
 4239 0018 0D0A4E75 		.ascii	"\015\012Nucleo: NUCLEO-F401RE\015\000"
 4239      636C656F 
 4239      3A204E55 
 4239      434C454F 
 4239      2D463430 
 4240 0031 000000   		.space	3
 4241              	.LC30:
 4242 0034 582D4E75 		.ascii	"X-Nucleo: X-NUCLEO-IDW01M1\015\000"
 4242      636C656F 
 4242      3A20582D 
 4242      4E55434C 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 135


 4242      454F2D49 
 4243              	.LC31:
 4244 0050 496E7465 		.ascii	"Interface: UART\015\000"
 4244      72666163 
 4244      653A2055 
 4244      4152540D 
 4244      00
 4245 0061 000000   		.space	3
 4246              	.LC32:
 4247 0064 49445720 		.ascii	"IDW Module Initialized..\015\000"
 4247      4D6F6475 
 4247      6C652049 
 4247      6E697469 
 4247      616C697A 
 4248 007e 0000     		.space	2
 4249              	.LC33:
 4250 0080 57494649 		.ascii	"WIFI WAKEUP\015\000"
 4250      2057414B 
 4250      4555500D 
 4250      00
 4251 008d 000000   		.space	3
 4252              	.LC34:
 4253 0090 57494649 		.ascii	"WIFI RESET\015\000"
 4253      20524553 
 4253      45540D00 
 4254              	.LC35:
 4255 009c 69662064 		.ascii	"if defined(CONSOLE_UART_ENABLED)\015\000"
 4255      6566696E 
 4255      65642843 
 4255      4F4E534F 
 4255      4C455F55 
 4256 00be 0000     		.space	2
 4257              	.LC36:
 4258 00c0 636F6E73 		.ascii	"console1_speed\000"
 4258      6F6C6531 
 4258      5F737065 
 4258      656400
 4259 00cf 00       		.space	1
 4260              	.LC37:
 4261 00d0 41542657 		.ascii	"AT&W\015\000"
 4261      0D00
 4262 00d6 0000     		.space	2
 4263              	.LC38:
 4264 00d8 636F6E73 		.ascii	"console1_hwfc\000"
 4264      6F6C6531 
 4264      5F687766 
 4264      6300
 4265 00e6 0000     		.space	2
 4266              	.LC39:
 4267 00e8 77696669 		.ascii	"wifi_ht_mode\000"
 4267      5F68745F 
 4267      6D6F6465 
 4267      00
 4268 00f5 000000   		.space	3
 4269              	.LC40:
 4270 00f8 30783030 		.ascii	"0x00003FCF\000"
 4270      30303346 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 136


 4270      434600
 4271 0103 00       		.space	1
 4272              	.LC41:
 4273 0104 77696669 		.ascii	"wifi_opr_rate_mask\000"
 4273      5F6F7072 
 4273      5F726174 
 4273      655F6D61 
 4273      736B00
 4274 0117 00       		.space	1
 4275              	.LC42:
 4276 0118 30783030 		.ascii	"0x003FFFCF\000"
 4276      33464646 
 4276      434600
 4277 0123 00       		.space	1
 4278              	.LC43:
 4279 0124 77696669 		.ascii	"wifi_powersave\000"
 4279      5F706F77 
 4279      65727361 
 4279      766500
 4280 0133 00       		.space	1
 4281              	.LC44:
 4282 0134 77696669 		.ascii	"wifi_operational_mode\000"
 4282      5F6F7065 
 4282      72617469 
 4282      6F6E616C 
 4282      5F6D6F64 
 4283 014a 0000     		.space	2
 4284              	.LC45:
 4285 014c 77696669 		.ascii	"wifi_beacon_wakeup\000"
 4285      5F626561 
 4285      636F6E5F 
 4285      77616B65 
 4285      757000
 4286 015f 00       		.space	1
 4287              	.LC46:
 4288 0160 77696669 		.ascii	"wifi_listen_interval\000"
 4288      5F6C6973 
 4288      74656E5F 
 4288      696E7465 
 4288      7276616C 
 4289 0175 000000   		.space	3
 4290              	.LC47:
 4291 0178 77696669 		.ascii	"wifi_tx_power\000"
 4291      5F74785F 
 4291      706F7765 
 4291      7200
 4292 0186 0000     		.space	2
 4293              	.LC48:
 4294 0188 69705F68 		.ascii	"ip_hostname\000"
 4294      6F73746E 
 4294      616D6500 
 4295              	.LC49:
 4296 0194 69705F61 		.ascii	"ip_apdomainname\000"
 4296      70646F6D 
 4296      61696E6E 
 4296      616D6500 
 4297              	.LC50:
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 137


 4298 01a4 69705F61 		.ascii	"ip_apredirect\000"
 4298      70726564 
 4298      69726563 
 4298      7400
 4299 01b2 0000     		.space	2
 4300              	.LC51:
 4301 01b4 69705F68 		.ascii	"ip_http_get_recv_timeout\000"
 4301      7474705F 
 4301      6765745F 
 4301      72656376 
 4301      5F74696D 
 4302 01cd 000000   		.space	3
 4303              	.LC52:
 4304 01d0 69705F64 		.ascii	"ip_dhcp_timeout\000"
 4304      6863705F 
 4304      74696D65 
 4304      6F757400 
 4305              	.LC53:
 4306 01e0 77696669 		.ascii	"wifi_reg_country\000"
 4306      5F726567 
 4306      5F636F75 
 4306      6E747279 
 4306      00
 4307 01f1 000000   		.space	3
 4308              	.LC54:
 4309 01f4 41542B53 		.ascii	"AT+S.HTTPD=%d\015\000"
 4309      2E485454 
 4309      50443D25 
 4309      640D00
 4310 0203 00       		.space	1
 4311              	.LC55:
 4312 0204 656E6469 		.ascii	"endif defined(CONSOLE_UART_ENABLED)\015\000"
 4312      66206465 
 4312      66696E65 
 4312      6428434F 
 4312      4E534F4C 
 4313 0229 000000   		.space	3
 4314              	.LC56:
 4315 022c 0D0A456E 		.ascii	"\015\012End of Initialization..\015\000"
 4315      64206F66 
 4315      20496E69 
 4315      7469616C 
 4315      697A6174 
 4316              		.section	.rodata.wifi_network_scan.str1.4,"aMS",%progbits,1
 4317              		.align	2
 4318              	.LC12:
 4319 0000 41542B53 		.ascii	"AT+S.SCAN\015\000"
 4319      2E534341 
 4319      4E0D00
 4320              		.section	.rodata.wifi_ping.str1.4,"aMS",%progbits,1
 4321              		.align	2
 4322              	.LC6:
 4323 0000 41542B53 		.ascii	"AT+S.PING=%s\015\000"
 4323      2E50494E 
 4323      473D2573 
 4323      0D00
 4324              		.section	.rodata.wifi_restore.str1.4,"aMS",%progbits,1
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 138


 4325              		.align	2
 4326              	.LC58:
 4327 0000 6C6F6361 		.ascii	"localecho1\000"
 4327      6C656368 
 4327      6F3100
 4328              		.section	.rodata.wifi_set_socket_certificates.str1.4,"aMS",%progbits,1
 4329              		.align	2
 4330              	.LC0:
 4331 0000 41542B53 		.ascii	"AT+S.TLSCERT2=clean,all\015\000"
 4331      2E544C53 
 4331      43455254 
 4331      323D636C 
 4331      65616E2C 
 4332 0019 000000   		.space	3
 4333              	.LC1:
 4334 001c 41542B53 		.ascii	"AT+S.SETTIME=%lu\015\000"
 4334      2E534554 
 4334      54494D45 
 4334      3D256C75 
 4334      0D00
 4335 002e 0000     		.space	2
 4336              	.LC2:
 4337 0030 41542B53 		.ascii	"AT+S.TLSCERT=f_ca,%d\015%s\000"
 4337      2E544C53 
 4337      43455254 
 4337      3D665F63 
 4337      612C2564 
 4338              	.LC3:
 4339 0048 41542B53 		.ascii	"AT+S.TLSDOMAIN=f_domain,%s\015\000"
 4339      2E544C53 
 4339      444F4D41 
 4339      494E3D66 
 4339      5F646F6D 
 4340              	.LC4:
 4341 0064 41542B53 		.ascii	"AT+S.TLSCERT=f_cert,%d\015%s\000"
 4341      2E544C53 
 4341      43455254 
 4341      3D665F63 
 4341      6572742C 
 4342 007e 0000     		.space	2
 4343              	.LC5:
 4344 0080 41542B53 		.ascii	"AT+S.TLSCERT=f_key,%d\015%s\000"
 4344      2E544C53 
 4344      43455254 
 4344      3D665F6B 
 4344      65792C25 
 4345              		.section	.rodata.wifi_standby.str1.4,"aMS",%progbits,1
 4346              		.align	2
 4347              	.LC24:
 4348 0000 736C6565 		.ascii	"sleep_enabled\000"
 4348      705F656E 
 4348      61626C65 
 4348      6400
 4349 000e 0000     		.space	2
 4350              	.LC25:
 4351 0010 7374616E 		.ascii	"standby_enabled\000"
 4351      6462795F 
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 139


 4351      656E6162 
 4351      6C656400 
 4352              	.LC26:
 4353 0020 7374616E 		.ascii	"standby_time\000"
 4353      6462795F 
 4353      74696D65 
 4353      00
 4354 002d 000000   		.space	3
 4355              	.LC27:
 4356 0030 41542B43 		.ascii	"AT+CFUN=%d\015\000"
 4356      46554E3D 
 4356      25640D00 
 4357              		.text
 4358              	.Letext0:
 4359              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 4360              		.file 4 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 4361              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 4362              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 4363              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xe.h"
 4364              		.file 8 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 4365              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 4366              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 4367              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 4368              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 4369              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 4370              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 4371              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 4372              		.file 16 "Middlewares/ST/STM32_SPWF0xSy/Inc/wifi_interface.h"
 4373              		.file 17 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 4374              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 4375              		.file 19 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\lib\\gcc\\arm-none-ea
 4376              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 4377              		.file 21 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 4378              		.file 22 "Middlewares/ST/STM32_SPWF0xSy/Utils/event_buffer.h"
 4379              		.file 23 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 4380              		.file 24 "Middlewares/ST/STM32_SPWF0xSy/Inc/wifi_module.h"
 4381              		.file 25 "Middlewares/ST/STM32_SPWF0xSy/Utils/wifi_globals.h"
 4382              		.file 26 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_ll_dma.h"
 4383              		.file 27 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 4384              		.file 28 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 4385              		.file 29 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_cortex.h"
 4386              		.file 30 "<built-in>"
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 140


DEFINED SYMBOLS
                            *ABS*:00000000 wifi_interface.c
D:\cygwin64\tmp\ccGmGipG.s:18     .text.wifi_set_socket_certificates:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:25     .text.wifi_set_socket_certificates:00000000 wifi_set_socket_certificates
D:\cygwin64\tmp\ccGmGipG.s:280    .text.wifi_set_socket_certificates:00000158 $d
D:\cygwin64\tmp\ccGmGipG.s:293    .text.wifi_ping:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:300    .text.wifi_ping:00000000 wifi_ping
D:\cygwin64\tmp\ccGmGipG.s:347    .text.wifi_ping:0000002c $d
D:\cygwin64\tmp\ccGmGipG.s:353    .text.wifi_websocket_client_open:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:360    .text.wifi_websocket_client_open:00000000 wifi_websocket_client_open
D:\cygwin64\tmp\ccGmGipG.s:393    .text.wifi_websocket_client_open:0000001c $d
D:\cygwin64\tmp\ccGmGipG.s:398    .text.wifi_websocket_client_write:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:405    .text.wifi_websocket_client_write:00000000 wifi_websocket_client_write
D:\cygwin64\tmp\ccGmGipG.s:454    .text.wifi_websocket_client_write:00000028 $d
D:\cygwin64\tmp\ccGmGipG.s:460    .text.wifi_websocket_client_close:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:467    .text.wifi_websocket_client_close:00000000 wifi_websocket_client_close
D:\cygwin64\tmp\ccGmGipG.s:491    .text.wifi_socket_client_open:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:498    .text.wifi_socket_client_open:00000000 wifi_socket_client_open
D:\cygwin64\tmp\ccGmGipG.s:531    .text.wifi_socket_client_open:0000001c $d
D:\cygwin64\tmp\ccGmGipG.s:536    .text.Open_Serial_Port:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:543    .text.Open_Serial_Port:00000000 Open_Serial_Port
D:\cygwin64\tmp\ccGmGipG.s:584    .text.Open_Serial_Port:00000024 $d
D:\cygwin64\tmp\ccGmGipG.s:589    .text.wifi_socket_client_write:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:596    .text.wifi_socket_client_write:00000000 wifi_socket_client_write
D:\cygwin64\tmp\ccGmGipG.s:702    .text.wifi_socket_client_write:00000070 $d
D:\cygwin64\tmp\ccGmGipG.s:707    .text.wifi_socket_client_close:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:714    .text.wifi_socket_client_close:00000000 wifi_socket_client_close
D:\cygwin64\tmp\ccGmGipG.s:753    .text.wifi_socket_client_close:00000020 $d
D:\cygwin64\tmp\ccGmGipG.s:759    .text.wifi_socket_server_open:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:766    .text.wifi_socket_server_open:00000000 wifi_socket_server_open
D:\cygwin64\tmp\ccGmGipG.s:791    .text.wifi_socket_server_close:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:798    .text.wifi_socket_server_close:00000000 wifi_socket_server_close
D:\cygwin64\tmp\ccGmGipG.s:821    .text.wait_for_command_mode:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:828    .text.wait_for_command_mode:00000000 wait_for_command_mode
D:\cygwin64\tmp\ccGmGipG.s:856    .text.wait_for_command_mode:00000010 $d
D:\cygwin64\tmp\ccGmGipG.s:861    .text.Socket_Read:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:868    .text.Socket_Read:00000000 Socket_Read
D:\cygwin64\tmp\ccGmGipG.s:937    .text.Socket_Read:00000058 $d
D:\cygwin64\tmp\ccGmGipG.s:945    .text.Socket_Pending_Data:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:952    .text.Socket_Pending_Data:00000000 Socket_Pending_Data
D:\cygwin64\tmp\ccGmGipG.s:1004   .text.Socket_Pending_Data:00000044 $d
D:\cygwin64\tmp\ccGmGipG.s:1013   .text.wifi_socket_server_write:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1020   .text.wifi_socket_server_write:00000000 wifi_socket_server_write
D:\cygwin64\tmp\ccGmGipG.s:1278   .text.wifi_socket_server_write:000000ec $d
D:\cygwin64\tmp\ccGmGipG.s:1287   .text.wifi_file_delete:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1294   .text.wifi_file_delete:00000000 wifi_file_delete
D:\cygwin64\tmp\ccGmGipG.s:1335   .text.wifi_file_list:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1342   .text.wifi_file_list:00000000 wifi_file_list
D:\cygwin64\tmp\ccGmGipG.s:1377   .text.wifi_file_print_content:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1384   .text.wifi_file_print_content:00000000 wifi_file_print_content
D:\cygwin64\tmp\ccGmGipG.s:1433   .text.wifi_file_create:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1440   .text.wifi_file_create:00000000 wifi_file_create
D:\cygwin64\tmp\ccGmGipG.s:1568   .text.wifi_file_create:000000a4 $d
D:\cygwin64\tmp\ccGmGipG.s:1576   .text.wifi_fill_input_buffer:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1583   .text.wifi_fill_input_buffer:00000000 wifi_fill_input_buffer
D:\cygwin64\tmp\ccGmGipG.s:1637   .text.wifi_fill_input_buffer:00000034 $d
D:\cygwin64\tmp\ccGmGipG.s:1642   .text.wifi_http_get:00000000 $t
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 141


D:\cygwin64\tmp\ccGmGipG.s:1649   .text.wifi_http_get:00000000 wifi_http_get
D:\cygwin64\tmp\ccGmGipG.s:1715   .text.wifi_http_get:00000030 $d
D:\cygwin64\tmp\ccGmGipG.s:1720   .text.wifi_http_post:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1727   .text.wifi_http_post:00000000 wifi_http_post
D:\cygwin64\tmp\ccGmGipG.s:1794   .text.wifi_http_post:00000034 $d
D:\cygwin64\tmp\ccGmGipG.s:1799   .text.wifi_file_image_create:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1806   .text.wifi_file_image_create:00000000 wifi_file_image_create
D:\cygwin64\tmp\ccGmGipG.s:1873   .text.wifi_file_erase_external_flash:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1880   .text.wifi_file_erase_external_flash:00000000 wifi_file_erase_external_flash
D:\cygwin64\tmp\ccGmGipG.s:1932   .text.wifi_file_erase_external_flash:00000038 $d
D:\cygwin64\tmp\ccGmGipG.s:1938   .text.wifi_fw_update:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1945   .text.wifi_fw_update:00000000 wifi_fw_update
D:\cygwin64\tmp\ccGmGipG.s:1984   .text.wifi_network_scan:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:1991   .text.wifi_network_scan:00000000 wifi_network_scan
D:\cygwin64\tmp\ccGmGipG.s:2068   .text.wifi_network_scan:0000005c $d
D:\cygwin64\tmp\ccGmGipG.s:2077   .text.wifi_ap_start:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:2084   .text.wifi_ap_start:00000000 wifi_ap_start
D:\cygwin64\tmp\ccGmGipG.s:2201   .text.wifi_ap_start:00000074 $d
D:\cygwin64\tmp\ccGmGipG.s:2210   .text.wifi_connect:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:2217   .text.wifi_connect:00000000 wifi_connect
D:\cygwin64\tmp\ccGmGipG.s:2339   .text.wifi_connect:00000080 $d
D:\cygwin64\tmp\ccGmGipG.s:2347   .text.wifi_adhoc_create:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:2354   .text.wifi_adhoc_create:00000000 wifi_adhoc_create
D:\cygwin64\tmp\ccGmGipG.s:2474   .text.wifi_adhoc_create:0000007c $d
D:\cygwin64\tmp\ccGmGipG.s:2488   .text.wifi_standby:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:2495   .text.wifi_standby:00000000 wifi_standby
D:\cygwin64\tmp\ccGmGipG.s:2558   .text.wifi_standby:00000050 $d
D:\cygwin64\tmp\ccGmGipG.s:2568   .text.wifi_wakeup:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:2575   .text.wifi_wakeup:00000000 wifi_wakeup
D:\cygwin64\tmp\ccGmGipG.s:2652   .text.wifi_wakeup:00000058 $d
D:\cygwin64\tmp\ccGmGipG.s:2658   .text.wifi_init:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:2665   .text.wifi_init:00000000 wifi_init
D:\cygwin64\tmp\ccGmGipG.s:3157   .text.wifi_init:000002b8 $d
D:\cygwin64\tmp\ccGmGipG.s:3192   .text.wifi_init:0000033c $t
D:\cygwin64\tmp\ccGmGipG.s:3365   .text.wifi_init:00000450 $d
D:\cygwin64\tmp\ccGmGipG.s:3379   .text.wifi_disconnect:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:3386   .text.wifi_disconnect:00000000 wifi_disconnect
D:\cygwin64\tmp\ccGmGipG.s:3432   .text.wifi_disconnect:0000002c $d
D:\cygwin64\tmp\ccGmGipG.s:3438   .text.wifi_enable:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:3445   .text.wifi_enable:00000000 wifi_enable
D:\cygwin64\tmp\ccGmGipG.s:3564   .text.wifi_enable:00000088 $d
D:\cygwin64\tmp\ccGmGipG.s:3572   .text.wifi_restore:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:3579   .text.wifi_restore:00000000 wifi_restore
D:\cygwin64\tmp\ccGmGipG.s:3616   .text.wifi_restore:00000024 $d
D:\cygwin64\tmp\ccGmGipG.s:3622   .text.wifi_gpio_init:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:3629   .text.wifi_gpio_init:00000000 wifi_gpio_init
D:\cygwin64\tmp\ccGmGipG.s:3708   .text.wifi_gpio_init:0000004c $d
D:\cygwin64\tmp\ccGmGipG.s:3715   .text.wifi_gpio_read:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:3722   .text.wifi_gpio_read:00000000 wifi_gpio_read
D:\cygwin64\tmp\ccGmGipG.s:3785   .text.wifi_gpio_read:00000040 $d
D:\cygwin64\tmp\ccGmGipG.s:3792   .text.wifi_gpio_write:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:3799   .text.wifi_gpio_write:00000000 wifi_gpio_write
D:\cygwin64\tmp\ccGmGipG.s:3853   .text.wifi_gpio_write:00000034 $d
D:\cygwin64\tmp\ccGmGipG.s:3859   .text.wifi_get_IP_address:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:3866   .text.wifi_get_IP_address:00000000 wifi_get_IP_address
D:\cygwin64\tmp\ccGmGipG.s:3940   .text.wifi_get_IP_address:00000050 $d
D:\cygwin64\tmp\ccGmGipG.s:3948   .text.wifi_get_MAC_address:00000000 $t
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 142


D:\cygwin64\tmp\ccGmGipG.s:3955   .text.wifi_get_MAC_address:00000000 wifi_get_MAC_address
D:\cygwin64\tmp\ccGmGipG.s:4029   .text.wifi_get_MAC_address:00000050 $d
D:\cygwin64\tmp\ccGmGipG.s:4037   .text.wifi_get_status_variable_value:00000000 $t
D:\cygwin64\tmp\ccGmGipG.s:4044   .text.wifi_get_status_variable_value:00000000 wifi_get_status_variable_value
D:\cygwin64\tmp\ccGmGipG.s:4139   .text.wifi_get_status_variable_value:00000070 $d
                            *COM*:00000014 WAKEUP_InitStruct
D:\cygwin64\tmp\ccGmGipG.s:4149   .rodata.Socket_Pending_Data.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4153   .rodata.Socket_Read.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4157   .rodata.wifi_adhoc_create.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4181   .rodata.wifi_ap_start.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4191   .rodata.wifi_enable.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4195   .rodata.wifi_file_create.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4202   .rodata.wifi_file_erase_external_flash.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4206   .rodata.wifi_get_IP_address.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4210   .rodata.wifi_get_MAC_address.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4216   .rodata.wifi_get_status_variable_value.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4220   .rodata.wifi_gpio_init.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4227   .rodata.wifi_gpio_read.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4231   .rodata.wifi_gpio_write.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4235   .rodata.wifi_init.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4317   .rodata.wifi_network_scan.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4321   .rodata.wifi_ping.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4325   .rodata.wifi_restore.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4329   .rodata.wifi_set_socket_certificates.str1.4:00000000 $d
D:\cygwin64\tmp\ccGmGipG.s:4346   .rodata.wifi_standby.str1.4:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
Reset_AT_CMD_Buffer
strlen
USART_Transmit_AT_Cmd
USART_Receive_AT_Resp
sprintf
WiFi_Counter_Variables
WiFi_AT_Cmd_Buff
Queue_Client_Open_Event
Queue_Client_Write_Event
open_web_socket
Queue_Client_Close_Event
open_sockets
WiFi_Control_Variables
Queue_Server_Open_Event
Queue_Server_Close_Event
IO_status_flag
WiFi_switch_to_data_mode
HAL_UART_Transmit
WiFi_UART_Error_Handler
WiFi_switch_to_command_mode
wifi_client_connected
UartWiFiHandle
Queue_File_Event
Queue_Wifi_File_Event
memset
memcpy
HAL_NVIC_EnableIRQ
Queue_Http_Event
SET_Power_State
ARM GAS  D:\cygwin64\tmp\ccGmGipG.s 			page 143


ResetBuffer
Queue_Wifi_FW_Update_Event
wifi_scanned_list
SET_WiFi_SecKey
SET_SSID
SET_Configuration_Value
Save_Current_Setting
WiFi_Config_Variables
SET_Configuration_Addr
HAL_GPIO_Init
HAL_GPIO_WritePin
printf
puts
WiFi_Module_Init
fflush
wifi_reset
Restore_Default_Setting
UART_Configuration
Receive_Data
_impure_ptr
wifi_connected
strstr
atoi
