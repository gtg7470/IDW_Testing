ARM GAS  /tmp/cc7EC8er.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"wifi_interface.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.wifi_set_socket_certificates.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 41542B53 		.ascii	"AT+S.TLSCERT2=clean,all\015\000"
  20      2E544C53 
  20      43455254 
  20      323D636C 
  20      65616E2C 
  21 0019 000000   		.align	2
  22              	.LC1:
  23 001c 41542B53 		.ascii	"AT+S.SETTIME=%lu\015\000"
  23      2E534554 
  23      54494D45 
  23      3D256C75 
  23      0D00
  24 002e 0000     		.align	2
  25              	.LC2:
  26 0030 41542B53 		.ascii	"AT+S.TLSCERT=f_ca,%d\015%s\000"
  26      2E544C53 
  26      43455254 
  26      3D665F63 
  26      612C2564 
  27              		.align	2
  28              	.LC3:
  29 0048 41542B53 		.ascii	"AT+S.TLSDOMAIN=f_domain,%s\015\000"
  29      2E544C53 
  29      444F4D41 
  29      494E3D66 
  29      5F646F6D 
  30              		.align	2
  31              	.LC4:
  32 0064 41542B53 		.ascii	"AT+S.TLSCERT=f_cert,%d\015%s\000"
  32      2E544C53 
  32      43455254 
  32      3D665F63 
  32      6572742C 
  33 007e 0000     		.align	2
  34              	.LC5:
  35 0080 41542B53 		.ascii	"AT+S.TLSCERT=f_key,%d\015%s\000"
  35      2E544C53 
  35      43455254 
ARM GAS  /tmp/cc7EC8er.s 			page 2


  35      3D665F6B 
  35      65792C25 
  36              		.section	.text.wifi_set_socket_certificates,"ax",%progbits
  37              		.align	1
  38              		.global	wifi_set_socket_certificates
  39              		.arch armv7e-m
  40              		.syntax unified
  41              		.thumb
  42              		.thumb_func
  43              		.fpu fpv4-sp-d16
  45              	wifi_set_socket_certificates:
  46              	.LVL0:
  47              	.LFB280:
  48              		.file 1 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c"
   1:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
   2:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  ******************************************************************************
   3:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @file    wifi_interface.c
   4:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @author  Central LAB
   5:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @version V2.1.0
   6:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @date    17-May-2016
   7:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @brief   User APIs implementation for X-CUBE-WIFI1
   8:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  ******************************************************************************
   9:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * @attention
  10:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *
  11:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * <h2><center>&copy; COPYRIGHT(c) 2015 STMicroelectronics</center></h2>
  12:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *
  13:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * Redistribution and use in source and binary forms, with or without modification,
  14:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * are permitted provided that the following conditions are met:
  15:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *   1. Redistributions of source code must retain the above copyright notice,
  16:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *      this list of conditions and the following disclaimer.
  17:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *   2. Redistributions in binary form must reproduce the above copyright notice,
  18:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *      this list of conditions and the following disclaimer in the documentation
  19:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *      and/or other materials provided with the distribution.
  20:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *   3. Neither the name of STMicroelectronics nor the names of its contributors
  21:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *      may be used to endorse or promote products derived from this software
  22:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *      without specific prior written permission.
  23:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *
  24:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  25:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  26:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  27:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  28:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  29:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  30:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  31:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  32:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  33:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  34:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  *
  35:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  ******************************************************************************
  36:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  */
  37:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  38:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /* Includes ------------------------------------------------------------------*/
  39:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #include "wifi_module.h"
  40:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #include "wifi_globals.h"
  41:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #include "stdarg.h"
  42:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  43:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /** @addtogroup MIDDLEWARES
ARM GAS  /tmp/cc7EC8er.s 			page 3


  44:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @{
  45:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */ 
  46:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  47:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /** @defgroup  NUCLEO_WIFI_INTERFACE
  48:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @brief Wi-Fi User API modules
  49:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @{
  50:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  51:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  52:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /** @defgroup NUCLEO_WIFI_INTERFACE_Private_Defines
  53:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @{
  54:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  55:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  56:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
  57:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @}
  58:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  59:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  60:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /** @addtogroup NUCLEO_WIFI_INTERFACE_Private_Variables
  61:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @{
  62:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  63:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /* Private variables ---------------------------------------------------------*/
  64:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  65:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
  66:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @}
  67:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  68:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
  69:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /** @defgroup NUCLEO_WIFI_INTERFACE_Private_Functions
  70:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @{
  71:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  72:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  73:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** GPIO_InitTypeDef  WAKEUP_InitStruct;
  74:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  75:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
  76:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @brief  wifi_init
  77:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   *         User API for wifi init
  78:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @param  None
  79:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   * @retval None
  80:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
  81:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_init(wifi_config* config)
  82:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
  83:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
  84:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
  85:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined (DEBUG_PRINT) && !defined (WIFI_USE_VCOM)
  86:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     printf("\r\n\nBuild Configuration:");
  87:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32F4XX_NUCLEO)  
  88:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("\r\nNucleo: NUCLEO-F401RE\r\n");
  89:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
  90:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32L4XX_NUCLEO)  
  91:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("\r\nNucleo: NUCLEO-L476RG\r\n");
  92:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
  93:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32L0XX_NUCLEO)  
  94:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("\r\nNucleo: NUCLEO-L053R8\r\n");
  95:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
  96:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32F1xx_NUCLEO)  
  97:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("\r\nNucleo: NUCLEO-F103RB\r\n");
  98:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
  99:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(SPWF04)
 100:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("X-Nucleo: X-NUCLEO-IDW04A1\r\n");
ARM GAS  /tmp/cc7EC8er.s 			page 4


 101:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
 102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("X-Nucleo: X-NUCLEO-IDW01M1\r\n");
 103:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 104:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined (CONSOLE_UART_ENABLED)
 105:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("Interface: UART\r\n");
 106:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
 107:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("Interface: SPI\r\n");
 108:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 109:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif  
 110:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 111:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Module_Init();
 112:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 113:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #ifndef WIFI_USE_VCOM  
 114:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wifi_wakeup(WIFI_TRUE);//Prevent from going to sleep during configuration    
 115:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 116:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* Soft reset the module */
 117:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wifi_reset();
 118:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 119:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(CONSOLE_UART_ENABLED)
 120:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Restore default setting*/    
 121:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = Restore_Default_Setting();
 122:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) 
 123:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return status;
 124:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 125:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #if !defined (USE_STM32L0XX_NUCLEO)
 126:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         
 127:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Restore_Default_Setting, resets the usart baud rate to 115200.
 128:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****            Set it to the value of config->mcu_baud_rate for synchronisation. */
 129:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(CONSOLE1_SPEED, config->mcu_baud_rate);
 130:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 131:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         
 132:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* save current setting in flash */
 133:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         Reset_AT_CMD_Buffer();  
 134:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_SAVE_CURRENT_SETTING);  
 135:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 136:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 137:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 138:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Receive_AT_Resp( );
 139:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 140:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         } 
 141:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 142:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Soft reset the module */
 143:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         wifi_reset();
 144:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 145:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 146:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Switch on HW Flow Control*/  
 147:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF04
 148:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(CONSOLE1_HWFC, 0);
 149:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
 150:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(CONSOLE1_HWFC, 1);
 151:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 152:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 153:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status; 
 154:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->wifi_baud_rate)
 156:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 157:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Set USART Speed*/  
ARM GAS  /tmp/cc7EC8er.s 			page 5


 158:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(CONSOLE1_SPEED, config->wifi_baud_rate);
 159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 160:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 161:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 162:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF04
 163:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           /*AT+S.WIFI=0<cr>*/  
 164:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);  
 165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 166:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 167:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 168:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Receive_AT_Resp( );
 169:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 170:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           else IO_status_flag.radio_off = WIFI_TRUE;
 171:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
 172:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         
 173:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arr
 174:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif  
 175:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 176:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set wifi_mode to idle*/  
 177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_Configuration_Value(WIFI_MODE, WiFi_IDLE_MODE);
 178:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;   
 179:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 180:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       switch(config->ht_mode)
 181:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 182:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case WIFI_FALSE:
 183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_HT_MODE, 0);
 184:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Addr(WIFI_OPR_RATE_MASK, "0x00003FCF");
 186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 188:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case WIFI_TRUE:
 189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_HT_MODE, 1);
 190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 191:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Addr(WIFI_OPR_RATE_MASK, "0x003FFFCF");
 192:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 193:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 194:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         default:
 195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 196:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 197:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       switch(config->power)
 199:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 200:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case wifi_active:
 201:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_POWERSAVE, 0);
 202:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 204:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 207:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 208:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case wifi_reactive:
 209:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_POWERSAVE, 1);
 210:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 211:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_OPERATIONAL_MODE, 11);  
 212:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_BEACON_WAKEUP, 0);
 214:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
ARM GAS  /tmp/cc7EC8er.s 			page 6


 215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_LISTEN_INTERVAL, 0);
 216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 218:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 220:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 221:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 222:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case wifi_sleep:
 223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_POWERSAVE, 1);
 224:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 225:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_OPERATIONAL_MODE, 12);  
 226:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_BEACON_WAKEUP, 10);
 228:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 229:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_LISTEN_INTERVAL, 1);
 230:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 231:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 1);  
 232:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 233:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 234:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 235:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 236:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         default:
 237:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 238:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 239:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 240:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       switch(config->power_level)
 241:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 242:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case low:
 243:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case medium:
 244:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case high:
 245:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case max:
 246:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_TX_POWER, config->power_level*6);
 247:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 248:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 249:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         default:
 250:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 251:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 252:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 253:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       switch(config->dhcp)
 254:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 255:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case off:
 256:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case on:
 257:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         case custom:
 258:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(IP_USE_DHCP_SERVER, config->dhcp);
 259:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 260:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 261:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         default:
 262:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 263:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 264:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 265:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set IP address */
 266:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->ip_addr)
 267:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_ADDRESS, config->ip_addr);
 269:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 270:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 271:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set netmask address */
ARM GAS  /tmp/cc7EC8er.s 			page 7


 272:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->netmask_addr)
 273:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 274:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_NETMASK, config->netmask_addr);
 275:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 276:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 277:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set default gateway address */
 278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->gateway_addr)
 279:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 280:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_DEFAULT_GATEWAY, config->gateway_addr);
 281:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 282:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 283:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set dns address */
 284:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->dns_addr)
 285:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 286:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #ifdef SPWF04
 287:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             status = SET_Configuration_Addr(WIFI_IP_DNS1, config->dns_addr);
 288:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #else
 289:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             status = SET_Configuration_Addr(WIFI_IP_DNS, config->dns_addr);
 290:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #endif
 291:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 292:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 293:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set hostname */
 294:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->host_name)
 295:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 296:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_HOSTNAME, config->host_name);  
 297:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 298:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 299:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 300:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->ap_domain_name)
 301:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 302:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_APDOMAINNAME, config->ap_domain_name);
 303:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 304:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 305:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->ap_config_page_name)
 307:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 308:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Addr(WIFI_IP_APREDIRECT, config->ap_config_page_name);
 309:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 310:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 311:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->http_timeout)
 313:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 314:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(WIFI_IP_HTTP_TIMEOUT, config->http_timeout*1000);
 315:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 316:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 317:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->dhcp_timeout)
 318:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 319:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(WIFI_IP_DHCP_TIMEOUT, config->dhcp_timeout);
 320:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 321:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 322:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->wifi_region)
 323:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 324:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = SET_Configuration_Value(WIFI_REG_COUNTRY, config->wifi_region);
 325:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 326:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }   
 327:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 328:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF01
ARM GAS  /tmp/cc7EC8er.s 			page 8


 329:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         Reset_AT_CMD_Buffer();  
 330:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_HTTPD, config->web_server);  
 331:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 332:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 333:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 334:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Receive_AT_Resp( );
 335:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 336:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }  
 337:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif  
 338:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 339:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF04
 340:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           /*AT+S.TLSCERT2=content,2 */
 341:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           Reset_AT_CMD_Buffer();  
 342:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=content,2\r");        
 343:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 344:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status == WiFi_MODULE_SUCCESS)
 345:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           {
 346:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             status = USART_Receive_AT_Resp( );
 347:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 348:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           }  
 349:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           
 350:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           /* Set verbose to 1 for SPWF04 UART*/
 351:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value("console_verbose", 1);
 352:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 353:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 354:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             /*AT+S.WIFI=1<cr>*/  
 355:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);  
 356:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 357:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status == WiFi_MODULE_SUCCESS)
 358:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           {
 359:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             status = USART_Receive_AT_Resp( );
 360:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 361:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             else IO_status_flag.radio_off = WIFI_FALSE;
 362:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           }
 363:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           
 364:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
 365:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
 366:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           /* AT+S.TLSCERT2=clean,all */
 367:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           Reset_AT_CMD_Buffer();  
 368:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT2=clean,all\r");        
 369:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 370:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status == WiFi_MODULE_SUCCESS)
 371:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           {
 372:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             status = USART_Receive_AT_Resp( );
 373:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 374:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           }
 375:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 376:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 377:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* save current setting in flash */
 378:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 379:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_SAVE_CURRENT_SETTING);  
 380:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 381:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
 382:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 383:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
 384:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 385:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }   
ARM GAS  /tmp/cc7EC8er.s 			page 9


 386:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 387:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(config->wifi_baud_rate)
 388:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 389:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         UART_Configuration(config->wifi_baud_rate); 
 390:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #if defined(SPWF01) 
 391:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           Receive_Data();//Restart data reception
 392:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #else
 393:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Counter_Variables.dma_buffer_count =0;
 394:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Counter_Variables.dma_buffer_previous_index =0;
 395:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           Receive_DMA_Uart_Data();
 396:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #endif
 397:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 398:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 399:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Soft reset the module, Do the second reset after setting all parameters and saving in flas
 400:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       wifi_reset();
 401:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 402:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
 403:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 404:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /*SPI Interface in use*/
 405:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 406:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set localecho to 0*/
 407:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_Configuration_Value(LOCALECHO1, 0);
 408:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 409:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 410:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Restore default setting*/    
 411:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 412:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.FCFG");  
 413:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 414:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 415:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 416:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 417:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* save current setting in flash */
 418:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 419:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WCFG");  
 420:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 421:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 422:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 423:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 424:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Soft reset the module */
 425:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       wifi_reset();
 426:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 427:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /*AT+S.WIFI=0<cr>*/  
 428:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 429:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
 430:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 431:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 432:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 433:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arriv
 434:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 435:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Set wifi_mode to idle*/  
 436:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_Configuration_Value(WIFI_MODE, WiFi_IDLE_MODE);
 437:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;  
 438:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 439:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /*AT+S.WIFI=1<cr>*/  
 440:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 441:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 1);  
 442:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
ARM GAS  /tmp/cc7EC8er.s 			page 10


 443:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 444:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 445:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
 446:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 447:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /*AT+S.TLSCERT2=content,2 -> clean certificates*/
 448:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();  
 449:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=content,2");        
 450:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 451:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 452:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status; 
 453:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 454:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****        /* Set verbose to 0 for SPWF04 SPI */
 455:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_Configuration_Value("console_verbose", 0);
 456:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 457:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 458:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     //No need to reset again in case of new module SPI
 459:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif  //#if defined(CONSOLE_UART_ENABLED)
 460:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 461:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   wifi_wakeup(WIFI_FALSE);//De-assert wakeup signal (PC13) to allow sleep if enabled
 462:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif  //WIFI_USE_VCOM
 463:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 464:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF04)
 465:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* check for compatibility between middleware and firmware versions. */  
 466:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = wifi_firmware_middleware_version_compatibility();
 467:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
 468:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 469:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 470:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined (DEBUG_PRINT) && !defined (WIFI_USE_VCOM)
 471:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     printf("\r\nEnd of Initialization..\r\n");
 472:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     fflush(stdout);
 473:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 474:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 475:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 476:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 477:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 478:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_set_socket_certificates
 479:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Set the security certificates and key for secure socket (TLS)
 480:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  tls_mode : 'o': one way authentication 'm': mutual authentication
 481:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  ca_certificate: Certificate Authority (CA) certificate (rootca_of_server.pem/rootca_of_cl
 482:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  certificate: could be client/server certificate (client_cert.pem/server_cert.pem) and its
 483:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  certificate_key : key corresponding to the certificate stored (client_key.rsa.pem/server_
 484:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  client_domain: common name of the server certificate 'server' for SPWF01 and auth file co
 485:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         rootca_of_server/client.pem for SPWF04 (rootca_of_client.bin/root_ca_of_server.bin) and i
 486:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  tls_epoch_time : epoch time
 487:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status
 488:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 489:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_set_socket_certificates(TLS_Certificate ca_certificate, TLS_Certificate tls_cert
 490:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
  49              		.loc 1 490 1 view -0
  50              		.cfi_startproc
  51              		@ args = 20, pretend = 0, frame = 16
  52              		@ frame_needed = 0, uses_anonymous_args = 0
  53              		.loc 1 490 1 is_stmt 0 view .LVU1
  54 0000 30B5     		push	{r4, r5, lr}
  55              	.LCFI0:
  56              		.cfi_def_cfa_offset 12
  57              		.cfi_offset 4, -12
ARM GAS  /tmp/cc7EC8er.s 			page 11


  58              		.cfi_offset 5, -8
  59              		.cfi_offset 14, -4
  60 0002 85B0     		sub	sp, sp, #20
  61              	.LCFI1:
  62              		.cfi_def_cfa_offset 32
  63 0004 04AC     		add	r4, sp, #16
  64 0006 04E90300 		stmdb	r4, {r0, r1}
  65 000a 6946     		mov	r1, sp
  66 000c 81E80C00 		stm	r1, {r2, r3}
  67 0010 0C9B     		ldr	r3, [sp, #48]
 491:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
  68              		.loc 1 491 3 is_stmt 1 view .LVU2
  69              	.LVL1:
 492:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 493:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(tls_epoch_time==0) 
  70              		.loc 1 493 3 view .LVU3
  71              		.loc 1 493 5 is_stmt 0 view .LVU4
  72 0012 002B     		cmp	r3, #0
  73 0014 40F08180 		bne	.L2
 494:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.epoch_time = EPOCH_TIME;
  74              		.loc 1 494 5 is_stmt 1 view .LVU5
  75              		.loc 1 494 39 is_stmt 0 view .LVU6
  76 0018 504B     		ldr	r3, .L16
  77 001a 514A     		ldr	r2, .L16+4
  78 001c C3F8BC20 		str	r2, [r3, #188]
  79              	.L3:
 495:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else
 496:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.epoch_time = tls_epoch_time;
 497:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 498:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
 499:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 500:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Clean the already stored certificates */
 501:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
  80              		.loc 1 501 3 is_stmt 1 view .LVU7
  81 0020 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
  82              	.LVL2:
 502:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_CLEAN_TLS_CERT);        
  83              		.loc 1 502 3 view .LVU8
  84 0024 4F4D     		ldr	r5, .L16+8
  85 0026 504C     		ldr	r4, .L16+12
  86 0028 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
  87 002a 2860     		str	r0, [r5]	@ unaligned
  88 002c 6960     		str	r1, [r5, #4]	@ unaligned
  89 002e AA60     		str	r2, [r5, #8]	@ unaligned
  90 0030 EB60     		str	r3, [r5, #12]	@ unaligned
  91 0032 03CC     		ldmia	r4!, {r0, r1}
  92 0034 2861     		str	r0, [r5, #16]	@ unaligned
  93 0036 6961     		str	r1, [r5, #20]	@ unaligned
  94 0038 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
  95 003a 2B76     		strb	r3, [r5, #24]
 503:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
  96              		.loc 1 503 3 view .LVU9
  97              		.loc 1 503 34 is_stmt 0 view .LVU10
  98 003c 2846     		mov	r0, r5
  99 003e FFF7FEFF 		bl	strlen
 100              	.LVL3:
 101              		.loc 1 503 12 view .LVU11
ARM GAS  /tmp/cc7EC8er.s 			page 12


 102 0042 80B2     		uxth	r0, r0
 103 0044 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 104              	.LVL4:
 504:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 105              		.loc 1 504 3 is_stmt 1 view .LVU12
 106              		.loc 1 504 5 is_stmt 0 view .LVU13
 107 0048 20B9     		cbnz	r0, .L4
 505:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 506:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 108              		.loc 1 506 5 is_stmt 1 view .LVU14
 109              		.loc 1 506 14 is_stmt 0 view .LVU15
 110 004a FFF7FEFF 		bl	USART_Receive_AT_Resp
 111              	.LVL5:
 507:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
 112              		.loc 1 507 5 is_stmt 1 view .LVU16
 113              		.loc 1 507 7 is_stmt 0 view .LVU17
 114 004e 0346     		mov	r3, r0
 115 0050 0028     		cmp	r0, #0
 116 0052 5FD1     		bne	.L5
 117              	.L4:
 508:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 509:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 510:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the epoch time */  
 511:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
 118              		.loc 1 511 3 is_stmt 1 view .LVU18
 119 0054 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 120              	.LVL6:
 512:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_SETTIME,(unsigned long)WiFi_Counter_Variables.epoch_time);    
 121              		.loc 1 512 3 view .LVU19
 122 0058 424C     		ldr	r4, .L16+8
 123 005a 404B     		ldr	r3, .L16
 124 005c D3F8BC20 		ldr	r2, [r3, #188]
 125 0060 4249     		ldr	r1, .L16+16
 126 0062 2046     		mov	r0, r4
 127 0064 FFF7FEFF 		bl	sprintf
 128              	.LVL7:
 513:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 129              		.loc 1 513 3 view .LVU20
 130              		.loc 1 513 34 is_stmt 0 view .LVU21
 131 0068 2046     		mov	r0, r4
 132 006a FFF7FEFF 		bl	strlen
 133              	.LVL8:
 134              		.loc 1 513 12 view .LVU22
 135 006e 80B2     		uxth	r0, r0
 136 0070 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 137              	.LVL9:
 514:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 138              		.loc 1 514 3 is_stmt 1 view .LVU23
 139              		.loc 1 514 5 is_stmt 0 view .LVU24
 140 0074 0346     		mov	r3, r0
 141 0076 0028     		cmp	r0, #0
 142 0078 53D0     		beq	.L11
 143              	.L6:
 144              	.LVL10:
 515:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 516:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
ARM GAS  /tmp/cc7EC8er.s 			page 13


 518:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 519:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 520:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Store the CA Cert(if specified) */
 521:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ca_certificate.certificate) {
 145              		.loc 1 521 3 is_stmt 1 view .LVU25
 146              		.loc 1 521 20 is_stmt 0 view .LVU26
 147 007a 029C     		ldr	r4, [sp, #8]
 148              		.loc 1 521 5 view .LVU27
 149 007c 8CB1     		cbz	r4, .L7
 522:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 150              		.loc 1 522 5 is_stmt 1 view .LVU28
 151 007e FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 152              	.LVL11:
 523:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_STORE_CA_CERT,(ca_certificate.certificate_size), ca_certific
 153              		.loc 1 523 5 view .LVU29
 154 0082 384D     		ldr	r5, .L16+8
 155 0084 2346     		mov	r3, r4
 156 0086 039A     		ldr	r2, [sp, #12]
 157 0088 3949     		ldr	r1, .L16+20
 158 008a 2846     		mov	r0, r5
 159 008c FFF7FEFF 		bl	sprintf
 160              	.LVL12:
 524:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 525:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 161              		.loc 1 525 5 view .LVU30
 162              		.loc 1 525 36 is_stmt 0 view .LVU31
 163 0090 2846     		mov	r0, r5
 164 0092 FFF7FEFF 		bl	strlen
 165              	.LVL13:
 166              		.loc 1 525 14 view .LVU32
 167 0096 80B2     		uxth	r0, r0
 168 0098 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 169              	.LVL14:
 526:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 170              		.loc 1 526 5 is_stmt 1 view .LVU33
 171              		.loc 1 526 7 is_stmt 0 view .LVU34
 172 009c 0346     		mov	r3, r0
 173 009e 0028     		cmp	r0, #0
 174 00a0 45D0     		beq	.L12
 175              	.LVL15:
 176              	.L7:
 527:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 528:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 529:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 530:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 531:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 532:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 533:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Store the 'CA Authority Key ID' for SPWF04 and 'CA domain name' for SPWF01 module */
 534:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(client_domain.certificate) {
 177              		.loc 1 534 3 is_stmt 1 view .LVU35
 178              		.loc 1 534 19 is_stmt 0 view .LVU36
 179 00a2 0A9C     		ldr	r4, [sp, #40]
 180              		.loc 1 534 5 view .LVU37
 181 00a4 84B1     		cbz	r4, .L8
 535:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 182              		.loc 1 535 5 is_stmt 1 view .LVU38
 183 00a6 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
ARM GAS  /tmp/cc7EC8er.s 			page 14


 184              	.LVL16:
 536:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #ifdef SPWF04
 537:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_STORE_AUTH_KEY, client_domain.certificate_size, client_dom
 538:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
 539:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_SET_CA_DOMAIN_NAME, client_domain.certificate);
 185              		.loc 1 539 7 view .LVU39
 186 00aa 2E4D     		ldr	r5, .L16+8
 187 00ac 2246     		mov	r2, r4
 188 00ae 3149     		ldr	r1, .L16+24
 189 00b0 2846     		mov	r0, r5
 190 00b2 FFF7FEFF 		bl	sprintf
 191              	.LVL17:
 540:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 541:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 542:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 192              		.loc 1 542 5 view .LVU40
 193              		.loc 1 542 36 is_stmt 0 view .LVU41
 194 00b6 2846     		mov	r0, r5
 195 00b8 FFF7FEFF 		bl	strlen
 196              	.LVL18:
 197              		.loc 1 542 14 view .LVU42
 198 00bc 80B2     		uxth	r0, r0
 199 00be FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 200              	.LVL19:
 543:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 201              		.loc 1 543 5 is_stmt 1 view .LVU43
 202              		.loc 1 543 7 is_stmt 0 view .LVU44
 203 00c2 0346     		mov	r3, r0
 204 00c4 0028     		cmp	r0, #0
 205 00c6 38D0     		beq	.L13
 206              	.LVL20:
 207              	.L8:
 544:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 545:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 546:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 547:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }  
 548:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 549:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 550:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Store Certificate */
 551:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(tls_certificate.certificate) {
 208              		.loc 1 551 3 is_stmt 1 view .LVU45
 209              		.loc 1 551 21 is_stmt 0 view .LVU46
 210 00c8 009C     		ldr	r4, [sp]
 211              		.loc 1 551 5 view .LVU47
 212 00ca 84B1     		cbz	r4, .L9
 552:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 213              		.loc 1 552 5 is_stmt 1 view .LVU48
 214 00cc FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 215              	.LVL21:
 553:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_STORE_CERT,(tls_certificate.certificate_size), tls_certifica
 216              		.loc 1 553 5 view .LVU49
 217 00d0 244D     		ldr	r5, .L16+8
 218 00d2 2346     		mov	r3, r4
 219 00d4 019A     		ldr	r2, [sp, #4]
 220 00d6 2849     		ldr	r1, .L16+28
 221 00d8 2846     		mov	r0, r5
 222 00da FFF7FEFF 		bl	sprintf
ARM GAS  /tmp/cc7EC8er.s 			page 15


 223              	.LVL22:
 554:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 224              		.loc 1 555 5 view .LVU50
 225              		.loc 1 555 36 is_stmt 0 view .LVU51
 226 00de 2846     		mov	r0, r5
 227 00e0 FFF7FEFF 		bl	strlen
 228              	.LVL23:
 229              		.loc 1 555 14 view .LVU52
 230 00e4 80B2     		uxth	r0, r0
 231 00e6 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 232              	.LVL24:
 556:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 233              		.loc 1 556 5 is_stmt 1 view .LVU53
 234              		.loc 1 556 7 is_stmt 0 view .LVU54
 235 00ea 0346     		mov	r3, r0
 236 00ec 58B3     		cbz	r0, .L14
 237              	.LVL25:
 238              	.L9:
 557:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 558:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 559:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 560:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 561:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 562:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 563:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Store the key corresponding to the above certificate */
 564:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(certificate_key.certificate) {
 239              		.loc 1 564 3 is_stmt 1 view .LVU55
 240              		.loc 1 564 21 is_stmt 0 view .LVU56
 241 00ee 089C     		ldr	r4, [sp, #32]
 242              		.loc 1 564 5 view .LVU57
 243 00f0 84B1     		cbz	r4, .L5
 565:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 244              		.loc 1 565 5 is_stmt 1 view .LVU58
 245 00f2 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 246              	.LVL26:
 566:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_STORE_KEY,(certificate_key.certificate_size), certificate_ke
 247              		.loc 1 566 5 view .LVU59
 248 00f6 1B4D     		ldr	r5, .L16+8
 249 00f8 2346     		mov	r3, r4
 250 00fa 099A     		ldr	r2, [sp, #36]
 251 00fc 1F49     		ldr	r1, .L16+32
 252 00fe 2846     		mov	r0, r5
 253 0100 FFF7FEFF 		bl	sprintf
 254              	.LVL27:
 567:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 568:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 255              		.loc 1 568 5 view .LVU60
 256              		.loc 1 568 36 is_stmt 0 view .LVU61
 257 0104 2846     		mov	r0, r5
 258 0106 FFF7FEFF 		bl	strlen
 259              	.LVL28:
 260              		.loc 1 568 14 view .LVU62
 261 010a 80B2     		uxth	r0, r0
 262 010c FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 263              	.LVL29:
 569:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
ARM GAS  /tmp/cc7EC8er.s 			page 16


 264              		.loc 1 569 5 is_stmt 1 view .LVU63
 265              		.loc 1 569 7 is_stmt 0 view .LVU64
 266 0110 0346     		mov	r3, r0
 267 0112 F0B1     		cbz	r0, .L15
 268              	.LVL30:
 269              	.L5:
 570:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 571:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
 572:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 573:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 574:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 575:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 576:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
 577:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 578:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.TIME=<seconds> */  
 579:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
 580:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TIME=%lu",(unsigned long)WiFi_Counter_Variables.epoch_time)
 581:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 582:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 583:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status; 
 584:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 585:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.TLSCERT=ca,<size><CR><Peer CA>*/
 586:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ca_certificate.certificate) {
 587:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 588:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_CERT_WRITE_EVENT;
 589:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.send_data = WIFI_TRUE;
 590:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_DataLength = (ca_certificate.certificate_size);
 591:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_data = (char *)ca_certificate.certificate;
 592:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=Ca,%d %s",WiFi_Counter_Variables.curr_DataLength,
 593:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 594:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 595:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_NO_EVENT;
 596:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status; 
 597:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 598:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 599:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /*AT+S.TLSCERT=auth,<Peer CA Authority Key Id>*/
 600:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(client_domain.certificate) {
 601:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 602:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_CERT_WRITE_EVENT;
 603:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.send_data = WIFI_TRUE;
 604:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_DataLength = client_domain.certificate_size;
 605:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_data = (char *)client_domain.certificate;
 606:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=Auth,%d %s", WiFi_Counter_Variables.curr_DataLeng
 607:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 608:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 609:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_NO_EVENT;
 610:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status; 
 611:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 612:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 613:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.TLSCERT=cert,<size><CR><SPWF04S certificate>*/
 614:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(tls_certificate.certificate) {
 615:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 616:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_CERT_WRITE_EVENT;
 617:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.send_data = WIFI_TRUE;
 618:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_DataLength = (tls_certificate.certificate_size);
 619:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_data = (char *)tls_certificate.certificate;
 620:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=cert,%d %s",WiFi_Counter_Variables.curr_DataLengt
ARM GAS  /tmp/cc7EC8er.s 			page 17


 621:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 622:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 623:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_NO_EVENT;
 624:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status; 
 625:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 626:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 627:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.TLSCERT=key,<size><CR><SPWF04S private key>*/
 628:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(certificate_key.certificate) {
 629:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 630:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_CERT_WRITE_EVENT;
 631:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.send_data = WIFI_TRUE;
 632:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_DataLength = (certificate_key.certificate_size);
 633:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_data = (char *)certificate_key.certificate;
 634:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT=key,%d %s",WiFi_Counter_Variables.curr_DataLength
 635:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 636:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 637:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_NO_EVENT;
 638:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status; 
 639:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 640:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 641:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 642:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 270              		.loc 1 642 1 view .LVU65
 271 0114 1846     		mov	r0, r3
 272 0116 05B0     		add	sp, sp, #20
 273              	.LCFI2:
 274              		.cfi_remember_state
 275              		.cfi_def_cfa_offset 12
 276              		@ sp needed
 277 0118 30BD     		pop	{r4, r5, pc}
 278              	.LVL31:
 279              	.L2:
 280              	.LCFI3:
 281              		.cfi_restore_state
 496:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 282              		.loc 1 496 5 is_stmt 1 view .LVU66
 496:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 283              		.loc 1 496 39 is_stmt 0 view .LVU67
 284 011a 104A     		ldr	r2, .L16
 285 011c C2F8BC30 		str	r3, [r2, #188]
 286 0120 7EE7     		b	.L3
 287              	.LVL32:
 288              	.L11:
 516:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
 289              		.loc 1 516 5 is_stmt 1 view .LVU68
 516:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
 290              		.loc 1 516 14 is_stmt 0 view .LVU69
 291 0122 FFF7FEFF 		bl	USART_Receive_AT_Resp
 292              	.LVL33:
 517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 293              		.loc 1 517 5 is_stmt 1 view .LVU70
 517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 294              		.loc 1 517 7 is_stmt 0 view .LVU71
 295 0126 0346     		mov	r3, r0
 296 0128 0028     		cmp	r0, #0
 297 012a A6D0     		beq	.L6
 298 012c F2E7     		b	.L5
ARM GAS  /tmp/cc7EC8er.s 			page 18


 299              	.L12:
 528:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 300              		.loc 1 528 7 is_stmt 1 view .LVU72
 528:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 301              		.loc 1 528 16 is_stmt 0 view .LVU73
 302 012e FFF7FEFF 		bl	USART_Receive_AT_Resp
 303              	.LVL34:
 529:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 304              		.loc 1 529 7 is_stmt 1 view .LVU74
 529:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 305              		.loc 1 529 9 is_stmt 0 view .LVU75
 306 0132 0346     		mov	r3, r0
 307 0134 0028     		cmp	r0, #0
 308 0136 B4D0     		beq	.L7
 309 0138 ECE7     		b	.L5
 310              	.L13:
 545:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 311              		.loc 1 545 7 is_stmt 1 view .LVU76
 545:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 312              		.loc 1 545 16 is_stmt 0 view .LVU77
 313 013a FFF7FEFF 		bl	USART_Receive_AT_Resp
 314              	.LVL35:
 546:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }  
 315              		.loc 1 546 7 is_stmt 1 view .LVU78
 546:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }  
 316              		.loc 1 546 9 is_stmt 0 view .LVU79
 317 013e 0346     		mov	r3, r0
 318 0140 0028     		cmp	r0, #0
 319 0142 C1D0     		beq	.L8
 320 0144 E6E7     		b	.L5
 321              	.L14:
 558:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 322              		.loc 1 558 7 is_stmt 1 view .LVU80
 558:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
 323              		.loc 1 558 16 is_stmt 0 view .LVU81
 324 0146 FFF7FEFF 		bl	USART_Receive_AT_Resp
 325              	.LVL36:
 559:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 326              		.loc 1 559 7 is_stmt 1 view .LVU82
 559:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 327              		.loc 1 559 9 is_stmt 0 view .LVU83
 328 014a 0346     		mov	r3, r0
 329 014c 0028     		cmp	r0, #0
 330 014e CED0     		beq	.L9
 331 0150 E0E7     		b	.L5
 332              	.L15:
 571:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 333              		.loc 1 571 9 is_stmt 1 view .LVU84
 571:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 334              		.loc 1 571 18 is_stmt 0 view .LVU85
 335 0152 FFF7FEFF 		bl	USART_Receive_AT_Resp
 336              	.LVL37:
 571:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 337              		.loc 1 571 18 view .LVU86
 338 0156 0346     		mov	r3, r0
 339              	.LVL38:
 572:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
ARM GAS  /tmp/cc7EC8er.s 			page 19


 340              		.loc 1 572 9 is_stmt 1 view .LVU87
 341 0158 DCE7     		b	.L5
 342              	.L17:
 343 015a 00BF     		.align	2
 344              	.L16:
 345 015c 00000000 		.word	WiFi_Counter_Variables
 346 0160 A91FA656 		.word	1453727657
 347 0164 00000000 		.word	WiFi_AT_Cmd_Buff
 348 0168 00000000 		.word	.LC0
 349 016c 1C000000 		.word	.LC1
 350 0170 30000000 		.word	.LC2
 351 0174 48000000 		.word	.LC3
 352 0178 64000000 		.word	.LC4
 353 017c 80000000 		.word	.LC5
 354              		.cfi_endproc
 355              	.LFE280:
 357              		.section	.rodata.wifi_ping.str1.4,"aMS",%progbits,1
 358              		.align	2
 359              	.LC6:
 360 0000 41542B53 		.ascii	"AT+S.PING=%s\015\000"
 360      2E50494E 
 360      473D2573 
 360      0D00
 361              		.section	.text.wifi_ping,"ax",%progbits
 362              		.align	1
 363              		.global	wifi_ping
 364              		.syntax unified
 365              		.thumb
 366              		.thumb_func
 367              		.fpu fpv4-sp-d16
 369              	wifi_ping:
 370              	.LVL39:
 371              	.LFB281:
 643:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 644:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 645:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 646:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_ping
 647:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         issues a single ICMP ECHO request to the given host.
 648:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
 649:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t: status of PING Command.
 650:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 651:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_ping(uint8_t * hostname)
 652:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 372              		.loc 1 652 1 view -0
 373              		.cfi_startproc
 374              		@ args = 0, pretend = 0, frame = 0
 375              		@ frame_needed = 0, uses_anonymous_args = 0
 376              		.loc 1 652 1 is_stmt 0 view .LVU89
 377 0000 10B5     		push	{r4, lr}
 378              	.LCFI4:
 379              		.cfi_def_cfa_offset 8
 380              		.cfi_offset 4, -8
 381              		.cfi_offset 14, -4
 382 0002 0246     		mov	r2, r0
 653:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    WiFi_Status_t status = WiFi_MODULE_SUCCESS;   
 383              		.loc 1 653 4 is_stmt 1 view .LVU90
 384              	.LVL40:
ARM GAS  /tmp/cc7EC8er.s 			page 20


 654:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 655:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)   
 656:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    sprintf((char*)WiFi_AT_Cmd_Buff,AT_PING,hostname);        
 385              		.loc 1 656 4 view .LVU91
 386 0004 074C     		ldr	r4, .L22
 387 0006 0849     		ldr	r1, .L22+4
 388 0008 2046     		mov	r0, r4
 389              	.LVL41:
 390              		.loc 1 656 4 is_stmt 0 view .LVU92
 391 000a FFF7FEFF 		bl	sprintf
 392              	.LVL42:
 657:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 393              		.loc 1 657 4 is_stmt 1 view .LVU93
 394              		.loc 1 657 35 is_stmt 0 view .LVU94
 395 000e 2046     		mov	r0, r4
 396 0010 FFF7FEFF 		bl	strlen
 397              	.LVL43:
 398              		.loc 1 657 13 view .LVU95
 399 0014 80B2     		uxth	r0, r0
 400 0016 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 401              	.LVL44:
 658:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
 659:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.PING=1,56,%s",hostname);
 660:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
 661:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = WiFi_MODULE_SUCCESS;
 662:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 663:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 402              		.loc 1 663 5 is_stmt 1 view .LVU96
 403              		.loc 1 663 7 is_stmt 0 view .LVU97
 404 001a 00B1     		cbz	r0, .L21
 405              	.L19:
 406              	.LVL45:
 664:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 665:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
 666:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 667:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 668:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
 407              		.loc 1 668 5 is_stmt 1 view .LVU98
 669:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 408              		.loc 1 669 1 is_stmt 0 view .LVU99
 409 001c 10BD     		pop	{r4, pc}
 410              	.LVL46:
 411              	.L21:
 665:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 412              		.loc 1 665 9 is_stmt 1 view .LVU100
 665:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 413              		.loc 1 665 18 is_stmt 0 view .LVU101
 414 001e FFF7FEFF 		bl	USART_Receive_AT_Resp
 415              	.LVL47:
 665:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 416              		.loc 1 665 18 view .LVU102
 417 0022 FBE7     		b	.L19
 418              	.L23:
 419              		.align	2
 420              	.L22:
 421 0024 00000000 		.word	WiFi_AT_Cmd_Buff
 422 0028 00000000 		.word	.LC6
ARM GAS  /tmp/cc7EC8er.s 			page 21


 423              		.cfi_endproc
 424              	.LFE281:
 426              		.section	.text.wifi_websocket_client_open,"ax",%progbits
 427              		.align	1
 428              		.global	wifi_websocket_client_open
 429              		.syntax unified
 430              		.thumb
 431              		.thumb_func
 432              		.fpu fpv4-sp-d16
 434              	wifi_websocket_client_open:
 435              	.LVL48:
 436              	.LFB282:
 670:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 671:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 672:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_websocket_client_open
 673:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Open a network websocket
 674:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Hostname hostname to connect to
 675:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         portnumber portnumber of the Host to connect to
 676:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         protocol tcp or udp protocol
 677:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         sock_id socket id of the opened socket returned to the user
 678:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket open request
 679:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 680:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_websocket_client_open(uint8_t * hostname, uint32_t port_number, uint8_t * protoc
 681:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 437              		.loc 1 681 1 is_stmt 1 view -0
 438              		.cfi_startproc
 439              		@ args = 0, pretend = 0, frame = 0
 440              		@ frame_needed = 0, uses_anonymous_args = 0
 441              		.loc 1 681 1 is_stmt 0 view .LVU104
 442 0000 10B5     		push	{r4, lr}
 443              	.LCFI5:
 444              		.cfi_def_cfa_offset 8
 445              		.cfi_offset 4, -8
 446              		.cfi_offset 14, -4
 447 0002 1C46     		mov	r4, r3
 682:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 448              		.loc 1 682 3 is_stmt 1 view .LVU105
 449              	.LVL49:
 683:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 684:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_Open_Event(hostname,port_number,protocol, WEB_SOCKET);
 450              		.loc 1 684 3 view .LVU106
 451 0004 0123     		movs	r3, #1
 452              	.LVL50:
 453              		.loc 1 684 3 is_stmt 0 view .LVU107
 454 0006 FFF7FEFF 		bl	Queue_Client_Open_Event
 455              	.LVL51:
 685:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 456              		.loc 1 685 3 is_stmt 1 view .LVU108
 457              		.loc 1 685 12 is_stmt 0 view .LVU109
 458 000a FFF7FEFF 		bl	USART_Receive_AT_Resp
 459              	.LVL52:
 686:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 687:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   *sock_id = WiFi_Counter_Variables.Socket_Open_ID; //return the socket id to the user
 460              		.loc 1 687 3 is_stmt 1 view .LVU110
 461              		.loc 1 687 36 is_stmt 0 view .LVU111
 462 000e 034B     		ldr	r3, .L26
 463 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cc7EC8er.s 			page 22


 464 0012 C3F30203 		ubfx	r3, r3, #0, #3
 465              		.loc 1 687 12 view .LVU112
 466 0016 2370     		strb	r3, [r4]
 688:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
 467              		.loc 1 688 3 is_stmt 1 view .LVU113
 689:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 468              		.loc 1 689 1 is_stmt 0 view .LVU114
 469 0018 10BD     		pop	{r4, pc}
 470              	.LVL53:
 471              	.L27:
 472              		.loc 1 689 1 view .LVU115
 473 001a 00BF     		.align	2
 474              	.L26:
 475 001c 00000000 		.word	WiFi_Counter_Variables
 476              		.cfi_endproc
 477              	.LFE282:
 479              		.section	.text.wifi_websocket_client_write,"ax",%progbits
 480              		.align	1
 481              		.global	wifi_websocket_client_write
 482              		.syntax unified
 483              		.thumb
 484              		.thumb_func
 485              		.fpu fpv4-sp-d16
 487              	wifi_websocket_client_write:
 488              	.LVL54:
 489              	.LFB283:
 690:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 691:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 692:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_websocket_client_write
 693:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Write len bytes of data to socket
 694:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sock_id socket ID of the websocket to write to
 695:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         DataLength: data length to send
 696:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         pData : pointer of data buffer to be written
 697:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket write request
 698:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 699:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_websocket_client_write(uint8_t sock_id, uint32_t DataLength, char * pData)
 700:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 490              		.loc 1 700 1 is_stmt 1 view -0
 491              		.cfi_startproc
 492              		@ args = 0, pretend = 0, frame = 0
 493              		@ frame_needed = 0, uses_anonymous_args = 0
 494              		.loc 1 700 1 is_stmt 0 view .LVU117
 495 0000 08B5     		push	{r3, lr}
 496              	.LCFI6:
 497              		.cfi_def_cfa_offset 8
 498              		.cfi_offset 3, -8
 499              		.cfi_offset 14, -4
 701:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKW=00,11<cr> */
 702:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 500              		.loc 1 702 3 is_stmt 1 view .LVU118
 501              	.LVL55:
 703:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 704:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Check if sock_id is open
 705:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!open_web_socket[sock_id])
 502              		.loc 1 705 3 view .LVU119
 503              		.loc 1 705 22 is_stmt 0 view .LVU120
 504 0002 094B     		ldr	r3, .L34
ARM GAS  /tmp/cc7EC8er.s 			page 23


 505 0004 1B5C     		ldrb	r3, [r3, r0]	@ zero_extendqisi2
 506              		.loc 1 705 5 view .LVU121
 507 0006 5BB1     		cbz	r3, .L31
 706:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;
 707:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 708:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength <= 0 && DataLength > WiFi_Counter_Variables.wifi_socket_write_limit)
 508              		.loc 1 708 3 is_stmt 1 view .LVU122
 509              		.loc 1 708 5 is_stmt 0 view .LVU123
 510 0008 21B9     		cbnz	r1, .L30
 511              		.loc 1 708 60 discriminator 1 view .LVU124
 512 000a 084B     		ldr	r3, .L34+4
 513 000c D3F8E430 		ldr	r3, [r3, #228]
 514              		.loc 1 708 22 discriminator 1 view .LVU125
 515 0010 8B42     		cmp	r3, r1
 516 0012 07D3     		bcc	.L32
 517              	.L30:
 709:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
 710:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 711:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_Write_Event(sock_id,DataLength,pData,WEB_SOCKET);
 518              		.loc 1 711 3 is_stmt 1 view .LVU126
 519 0014 0123     		movs	r3, #1
 520 0016 FFF7FEFF 		bl	Queue_Client_Write_Event
 521              	.LVL56:
 712:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 522              		.loc 1 712 3 view .LVU127
 523              		.loc 1 712 12 is_stmt 0 view .LVU128
 524 001a FFF7FEFF 		bl	USART_Receive_AT_Resp
 525              	.LVL57:
 713:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 526              		.loc 1 713 3 is_stmt 1 view .LVU129
 527              	.L29:
 714:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 528              		.loc 1 714 1 is_stmt 0 view .LVU130
 529 001e 08BD     		pop	{r3, pc}
 530              	.LVL58:
 531              	.L31:
 706:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 532              		.loc 1 706 12 view .LVU131
 533 0020 0520     		movs	r0, #5
 534              	.LVL59:
 706:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 535              		.loc 1 706 12 view .LVU132
 536 0022 FCE7     		b	.L29
 537              	.LVL60:
 538              	.L32:
 709:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 539              		.loc 1 709 12 view .LVU133
 540 0024 0420     		movs	r0, #4
 541              	.LVL61:
 709:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 542              		.loc 1 709 12 view .LVU134
 543 0026 FAE7     		b	.L29
 544              	.L35:
 545              		.align	2
 546              	.L34:
 547 0028 00000000 		.word	open_web_socket
 548 002c 00000000 		.word	WiFi_Counter_Variables
ARM GAS  /tmp/cc7EC8er.s 			page 24


 549              		.cfi_endproc
 550              	.LFE283:
 552              		.section	.text.wifi_websocket_client_close,"ax",%progbits
 553              		.align	1
 554              		.global	wifi_websocket_client_close
 555              		.syntax unified
 556              		.thumb
 557              		.thumb_func
 558              		.fpu fpv4-sp-d16
 560              	wifi_websocket_client_close:
 561              	.LVL62:
 562              	.LFB284:
 715:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 716:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 717:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_websocket_client_close
 718:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         The WSOCKC command allows to close the websocket
 719:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sock_close_id the socket ID of the socket which needs to be closed.
 720:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket close request
 721:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 722:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_websocket_client_close(uint8_t sock_close_id)
 723:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 563              		.loc 1 723 1 is_stmt 1 view -0
 564              		.cfi_startproc
 565              		@ args = 0, pretend = 0, frame = 0
 566              		@ frame_needed = 0, uses_anonymous_args = 0
 567              		.loc 1 723 1 is_stmt 0 view .LVU136
 568 0000 08B5     		push	{r3, lr}
 569              	.LCFI7:
 570              		.cfi_def_cfa_offset 8
 571              		.cfi_offset 3, -8
 572              		.cfi_offset 14, -4
 724:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
 573              		.loc 1 724 3 is_stmt 1 view .LVU137
 574              	.LVL63:
 725:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_Close_Event(sock_close_id, WEB_SOCKET);
 575              		.loc 1 725 3 view .LVU138
 576 0002 0121     		movs	r1, #1
 577 0004 FFF7FEFF 		bl	Queue_Client_Close_Event
 578              	.LVL64:
 726:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 579              		.loc 1 726 3 view .LVU139
 727:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 728:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 580              		.loc 1 728 1 is_stmt 0 view .LVU140
 581 0008 0020     		movs	r0, #0
 582 000a 08BD     		pop	{r3, pc}
 583              		.cfi_endproc
 584              	.LFE284:
 586              		.section	.text.wifi_socket_client_open,"ax",%progbits
 587              		.align	1
 588              		.global	wifi_socket_client_open
 589              		.syntax unified
 590              		.thumb
 591              		.thumb_func
 592              		.fpu fpv4-sp-d16
 594              	wifi_socket_client_open:
 595              	.LVL65:
ARM GAS  /tmp/cc7EC8er.s 			page 25


 596              	.LFB285:
 729:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 730:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 731:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_socket_client_open
 732:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Open a network socket
 733:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Hostname hostname to connect to
 734:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         portnumber portnumber of the Host to connect to
 735:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         protocol tcp or udp protocol
 736:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         sock_id socket id of the opened socket returned to the user
 737:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket open request
 738:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 739:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_client_open(uint8_t * hostname, uint32_t port_number, uint8_t * protocol,
 740:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 597              		.loc 1 740 1 is_stmt 1 view -0
 598              		.cfi_startproc
 599              		@ args = 0, pretend = 0, frame = 0
 600              		@ frame_needed = 0, uses_anonymous_args = 0
 601              		.loc 1 740 1 is_stmt 0 view .LVU142
 602 0000 10B5     		push	{r4, lr}
 603              	.LCFI8:
 604              		.cfi_def_cfa_offset 8
 605              		.cfi_offset 4, -8
 606              		.cfi_offset 14, -4
 607 0002 1C46     		mov	r4, r3
 741:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 608              		.loc 1 741 3 is_stmt 1 view .LVU143
 609              	.LVL66:
 742:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 743:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_Open_Event(hostname,port_number,protocol, NET_SOCKET);
 610              		.loc 1 743 3 view .LVU144
 611 0004 0223     		movs	r3, #2
 612              	.LVL67:
 613              		.loc 1 743 3 is_stmt 0 view .LVU145
 614 0006 FFF7FEFF 		bl	Queue_Client_Open_Event
 615              	.LVL68:
 744:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 616              		.loc 1 744 3 is_stmt 1 view .LVU146
 617              		.loc 1 744 12 is_stmt 0 view .LVU147
 618 000a FFF7FEFF 		bl	USART_Receive_AT_Resp
 619              	.LVL69:
 745:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 746:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   *sock_id = WiFi_Counter_Variables.Socket_Open_ID; //return the socket id to the user
 620              		.loc 1 746 3 is_stmt 1 view .LVU148
 621              		.loc 1 746 36 is_stmt 0 view .LVU149
 622 000e 034B     		ldr	r3, .L40
 623 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 624 0012 C3F30203 		ubfx	r3, r3, #0, #3
 625              		.loc 1 746 12 view .LVU150
 626 0016 2370     		strb	r3, [r4]
 747:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
 627              		.loc 1 747 3 is_stmt 1 view .LVU151
 748:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 628              		.loc 1 748 1 is_stmt 0 view .LVU152
 629 0018 10BD     		pop	{r4, pc}
 630              	.LVL70:
 631              	.L41:
 632              		.loc 1 748 1 view .LVU153
ARM GAS  /tmp/cc7EC8er.s 			page 26


 633 001a 00BF     		.align	2
 634              	.L40:
 635 001c 00000000 		.word	WiFi_Counter_Variables
 636              		.cfi_endproc
 637              	.LFE285:
 639              		.section	.text.Open_Serial_Port,"ax",%progbits
 640              		.align	1
 641              		.global	Open_Serial_Port
 642              		.syntax unified
 643              		.thumb
 644              		.thumb_func
 645              		.fpu fpv4-sp-d16
 647              	Open_Serial_Port:
 648              	.LFB286:
 749:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 750:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 751:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 752:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Open_Serial_Port
 753:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Open a network socket
 754:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
 755:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : Wifi status
 756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 757:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t Open_Serial_Port()
 758:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 649              		.loc 1 758 1 is_stmt 1 view -0
 650              		.cfi_startproc
 651              		@ args = 0, pretend = 0, frame = 0
 652              		@ frame_needed = 0, uses_anonymous_args = 0
 653 0000 08B5     		push	{r3, lr}
 654              	.LCFI9:
 655              		.cfi_def_cfa_offset 8
 656              		.cfi_offset 3, -8
 657              		.cfi_offset 14, -4
 759:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 658              		.loc 1 759 3 view .LVU155
 659              	.LVL71:
 760:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKOS=2<cr> */
 761:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
 660              		.loc 1 761 3 view .LVU156
 661 0002 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 662              	.LVL72:
 762:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //sprintf((char*)WiFi_AT_Cmd_Buff,"\rAT+S.SOCKOS=%d\r",SerialPortNo);        
 763:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 663              		.loc 1 763 3 view .LVU157
 664              		.loc 1 763 34 is_stmt 0 view .LVU158
 665 0006 0548     		ldr	r0, .L46
 666 0008 FFF7FEFF 		bl	strlen
 667              	.LVL73:
 668              		.loc 1 763 12 view .LVU159
 669 000c 80B2     		uxth	r0, r0
 670 000e FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 671              	.LVL74:
 764:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 765:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status==WiFi_MODULE_SUCCESS)
 672              		.loc 1 765 3 is_stmt 1 view .LVU160
 673              		.loc 1 765 5 is_stmt 0 view .LVU161
 674 0012 00B1     		cbz	r0, .L45
ARM GAS  /tmp/cc7EC8er.s 			page 27


 675              	.L43:
 676              	.LVL75:
 766:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 767:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( ); 
 768:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 769:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 677              		.loc 1 769 3 is_stmt 1 view .LVU162
 770:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 678              		.loc 1 770 1 is_stmt 0 view .LVU163
 679 0014 08BD     		pop	{r3, pc}
 680              	.LVL76:
 681              	.L45:
 767:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 682              		.loc 1 767 5 is_stmt 1 view .LVU164
 767:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 683              		.loc 1 767 14 is_stmt 0 view .LVU165
 684 0016 FFF7FEFF 		bl	USART_Receive_AT_Resp
 685              	.LVL77:
 767:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 686              		.loc 1 767 14 view .LVU166
 687 001a FBE7     		b	.L43
 688              	.L47:
 689              		.align	2
 690              	.L46:
 691 001c 00000000 		.word	WiFi_AT_Cmd_Buff
 692              		.cfi_endproc
 693              	.LFE286:
 695              		.section	.text.wifi_socket_client_write,"ax",%progbits
 696              		.align	1
 697              		.global	wifi_socket_client_write
 698              		.syntax unified
 699              		.thumb
 700              		.thumb_func
 701              		.fpu fpv4-sp-d16
 703              	wifi_socket_client_write:
 704              	.LVL78:
 705              	.LFB287:
 771:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 772:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 773:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_socket_client_write
 774:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Write len bytes of data to socket
 775:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sock_id socket ID of the socket to write to
 776:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         DataLength: data length to send
 777:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         pData : pointer of data buffer to be written
 778:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket write request
 779:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 780:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_client_write(uint8_t sock_id, uint32_t DataLength, char * pData)
 781:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 706              		.loc 1 781 1 is_stmt 1 view -0
 707              		.cfi_startproc
 708              		@ args = 0, pretend = 0, frame = 0
 709              		@ frame_needed = 0, uses_anonymous_args = 0
 782:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKW=00,11<cr> */
 783:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 710              		.loc 1 783 3 view .LVU168
 784:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 785:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Check if sock_id is open
ARM GAS  /tmp/cc7EC8er.s 			page 28


 786:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!open_sockets[sock_id])
 711              		.loc 1 786 3 view .LVU169
 712              		.loc 1 786 19 is_stmt 0 view .LVU170
 713 0000 1A4B     		ldr	r3, .L59
 714 0002 1B5C     		ldrb	r3, [r3, r0]	@ zero_extendqisi2
 715              		.loc 1 786 5 view .LVU171
 716 0004 5BB3     		cbz	r3, .L53
 781:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKW=00,11<cr> */
 717              		.loc 1 781 1 view .LVU172
 718 0006 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 719              	.LCFI10:
 720              		.cfi_def_cfa_offset 24
 721              		.cfi_offset 4, -24
 722              		.cfi_offset 5, -20
 723              		.cfi_offset 6, -16
 724              		.cfi_offset 7, -12
 725              		.cfi_offset 8, -8
 726              		.cfi_offset 14, -4
 727 000a 0546     		mov	r5, r0
 728 000c 8846     		mov	r8, r1
 729 000e 1646     		mov	r6, r2
 787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;  
 788:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 789:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength <= 0)
 730              		.loc 1 789 3 is_stmt 1 view .LVU173
 731              		.loc 1 789 5 is_stmt 0 view .LVU174
 732 0010 41B3     		cbz	r1, .L54
 790:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
 791:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 792:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01)
 793:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     uint16_t chunk_count = 0, chunk_index;
 733              		.loc 1 793 5 is_stmt 1 view .LVU175
 734              	.LVL79:
 794:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     uint32_t chunk_size = 0;
 735              		.loc 1 794 5 view .LVU176
 795:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     chunk_count = DataLength/MAX_CLIENT_WRITE_SIZE;
 736              		.loc 1 795 5 view .LVU177
 737              		.loc 1 795 17 is_stmt 0 view .LVU178
 738 0012 C1F30F37 		ubfx	r7, r1, #12, #16
 739              	.LVL80:
 796:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     chunk_count = (DataLength % MAX_CLIENT_WRITE_SIZE == 0)? chunk_count: chunk_count+1;
 740              		.loc 1 796 5 is_stmt 1 view .LVU179
 741              		.loc 1 796 31 is_stmt 0 view .LVU180
 742 0016 C1F30B03 		ubfx	r3, r1, #0, #12
 743              		.loc 1 796 17 view .LVU181
 744 001a 0BB1     		cbz	r3, .L50
 745              		.loc 1 796 17 discriminator 1 view .LVU182
 746 001c 0137     		adds	r7, r7, #1
 747              	.LVL81:
 748              		.loc 1 796 17 discriminator 1 view .LVU183
 749 001e BFB2     		uxth	r7, r7
 750              	.LVL82:
 751              	.L50:
 797:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     chunk_index = 0;
 752              		.loc 1 797 5 is_stmt 1 discriminator 4 view .LVU184
 798:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 799:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(chunk_index < chunk_count)
ARM GAS  /tmp/cc7EC8er.s 			page 29


 753              		.loc 1 799 5 discriminator 4 view .LVU185
 797:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     chunk_index = 0;
 754              		.loc 1 797 17 is_stmt 0 discriminator 4 view .LVU186
 755 0020 0024     		movs	r4, #0
 783:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 756              		.loc 1 783 17 discriminator 4 view .LVU187
 757 0022 2346     		mov	r3, r4
 758              	.LVL83:
 759              	.L51:
 760              		.loc 1 799 10 is_stmt 1 view .LVU188
 761 0024 BC42     		cmp	r4, r7
 762 0026 1ED2     		bcs	.L49
 800:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 801:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       chunk_size = (DataLength > MAX_CLIENT_WRITE_SIZE)? MAX_CLIENT_WRITE_SIZE: DataLength;
 763              		.loc 1 801 7 view .LVU189
 764              		.loc 1 801 18 is_stmt 0 view .LVU190
 765 0028 4146     		mov	r1, r8
 766 002a B8F5805F 		cmp	r8, #4096
 767 002e 28BF     		it	cs
 768 0030 4FF48051 		movcs	r1, #4096
 769              	.LVL84:
 802:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       DataLength = (DataLength > MAX_CLIENT_WRITE_SIZE)? (DataLength-MAX_CLIENT_WRITE_SIZE): 0;
 770              		.loc 1 802 7 is_stmt 1 view .LVU191
 771              		.loc 1 802 92 is_stmt 0 view .LVU192
 772 0034 4346     		mov	r3, r8
 773              	.LVL85:
 774              		.loc 1 802 92 view .LVU193
 775 0036 B8F5805F 		cmp	r8, #4096
 776 003a 38BF     		it	cc
 777 003c 4FF48053 		movcc	r3, #4096
 778              		.loc 1 802 18 view .LVU194
 779 0040 A3F58058 		sub	r8, r3, #4096
 780              	.LVL86:
 803:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Queue_Client_Write_Event(sock_id,chunk_size,pData+(chunk_index*MAX_CLIENT_WRITE_SIZE), NET_SO
 781              		.loc 1 803 7 is_stmt 1 view .LVU195
 782 0044 0223     		movs	r3, #2
 783 0046 06EB0432 		add	r2, r6, r4, lsl #12
 784 004a 2846     		mov	r0, r5
 785 004c FFF7FEFF 		bl	Queue_Client_Write_Event
 786              	.LVL87:
 804:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
 787              		.loc 1 804 7 view .LVU196
 788              		.loc 1 804 16 is_stmt 0 view .LVU197
 789 0050 FFF7FEFF 		bl	USART_Receive_AT_Resp
 790              	.LVL88:
 805:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS)
 791              		.loc 1 805 7 is_stmt 1 view .LVU198
 792              		.loc 1 805 9 is_stmt 0 view .LVU199
 793 0054 0346     		mov	r3, r0
 794 0056 30B9     		cbnz	r0, .L49
 806:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         break;
 807:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       chunk_index++;
 795              		.loc 1 807 7 is_stmt 1 view .LVU200
 796              		.loc 1 807 18 is_stmt 0 view .LVU201
 797 0058 0134     		adds	r4, r4, #1
 798              	.LVL89:
 799              		.loc 1 807 18 view .LVU202
ARM GAS  /tmp/cc7EC8er.s 			page 30


 800 005a A4B2     		uxth	r4, r4
 801              	.LVL90:
 802              		.loc 1 807 18 view .LVU203
 803 005c E2E7     		b	.L51
 804              	.LVL91:
 805              	.L53:
 806              	.LCFI11:
 807              		.cfi_def_cfa_offset 0
 808              		.cfi_restore 4
 809              		.cfi_restore 5
 810              		.cfi_restore 6
 811              		.cfi_restore 7
 812              		.cfi_restore 8
 813              		.cfi_restore 14
 787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 814              		.loc 1 787 12 view .LVU204
 815 005e 0523     		movs	r3, #5
 816              	.LVL92:
 808:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else //free to use max proportional to free heap size
 810:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(DataLength > WiFi_Counter_Variables.wifi_socket_write_limit)
 811:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       return WiFi_NOT_SUPPORTED;
 812:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 813:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Queue_Client_Write_Event(sock_id,DataLength,pData, NET_SOCKET);
 814:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 815:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 816:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 817:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 818:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 817              		.loc 1 818 1 view .LVU205
 818 0060 1846     		mov	r0, r3
 819              	.LVL93:
 820              		.loc 1 818 1 view .LVU206
 821 0062 7047     		bx	lr
 822              	.LVL94:
 823              	.L54:
 824              	.LCFI12:
 825              		.cfi_def_cfa_offset 24
 826              		.cfi_offset 4, -24
 827              		.cfi_offset 5, -20
 828              		.cfi_offset 6, -16
 829              		.cfi_offset 7, -12
 830              		.cfi_offset 8, -8
 831              		.cfi_offset 14, -4
 790:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 832              		.loc 1 790 12 view .LVU207
 833 0064 0423     		movs	r3, #4
 834              	.LVL95:
 835              	.L49:
 836              		.loc 1 818 1 view .LVU208
 837 0066 1846     		mov	r0, r3
 838 0068 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 839              	.LVL96:
 840              	.L60:
 841              		.loc 1 818 1 view .LVU209
 842              		.align	2
 843              	.L59:
ARM GAS  /tmp/cc7EC8er.s 			page 31


 844 006c 00000000 		.word	open_sockets
 845              		.cfi_endproc
 846              	.LFE287:
 848              		.section	.text.wifi_socket_client_close,"ax",%progbits
 849              		.align	1
 850              		.global	wifi_socket_client_close
 851              		.syntax unified
 852              		.thumb
 853              		.thumb_func
 854              		.fpu fpv4-sp-d16
 856              	wifi_socket_client_close:
 857              	.LVL97:
 858              	.LFB289:
 819:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 820:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 821:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Socket_Read
 822:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Return len bytes of data from socket
 823:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: data length to read
 824:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket read request
 825:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 826:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t Socket_Read(uint16_t DataLength)
 827:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 828:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKR=01,12<cr> */
 829:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 830:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01) && defined(CONSOLE_UART_ENABLED)
 831:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wait_for_command_mode();
 832:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 833:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 834:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKON=myserver,1234,t<cr> */
 835:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)
 836:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_SOCKET_READ,WiFi_Counter_Variables.sockon_query_id,DataLengt
 837:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 838:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 839:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
 840:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     //printf("\r\nAT+S.SOCKR");
 841:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.SOCKR=%d,%d",WiFi_Counter_Variables.sockon_query_id,DataL
 842:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 843:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
 844:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
 845:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_CLIENT_SOCKET_READ_DATA;
 846:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Start_AT_CMD_Timer();
 847:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
 848:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 849:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 850:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 851:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(WiFi_Control_Variables.stop_event_dequeue == WIFI_FALSE)
 853:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 854:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 855:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* enable the data receive in chunk mode only in spwfsa01 *///--------> TBD->Enable chunk mode 
 856:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #ifdef SPWF01
 857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Counter_Variables.last_process_buffer_index = 5;
 858:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_receive_data_chunk = WIFI_TRUE;
 859:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
 860:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #elif defined(SPWF04) && !defined(CONSOLE_UART_ENABLED)
 861:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
 862:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
ARM GAS  /tmp/cc7EC8er.s 			page 32


 863:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 864:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 865:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 866:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 867:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 868:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
 869:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 870:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Socket_Server_Read
 871:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Return len bytes of data from socket
 872:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: data length to read
 873:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket read request
 874:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 875:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t Socket_Server_Read(uint16_t DataLength)
 876:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 877:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKR=01,12<cr> */
 878:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 879:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01) && defined(CONSOLE_UART_ENABLED)
 880:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wait_for_command_mode();
 881:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 882:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 883:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKDR=%d,%d,%d<cr> */
 884:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_SERVER_SOCKET_READ,WiFi_Counter_Variables.sockdon_query_id, Wi
 885:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 886:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)
 887:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 888:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
 889:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
 890:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
 891:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_SERVER_SOCKET_READ_DATA;
 892:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Start_AT_CMD_Timer();
 893:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
 894:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 895:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 896:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 897:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 898:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.stop_event_dequeue = (WiFi_Control_Variables.stop_event_dequeue == WIFI_
 899:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 900:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(SPWF04) && !defined(CONSOLE_UART_ENABLED)
 901:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
 902:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 903:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 904:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 905:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 906:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 907:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 908:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Websocket_Read
 909:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Return len bytes of data from socket
 910:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: data length to read
 911:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket read request
 912:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 913:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t Websocket_Read(uint16_t DataLength)
 914:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 915:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.WSOCKR=01,12<cr> */
 916:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 917:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 918:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
 919:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WEB_SOCKET_READ,WiFi_Counter_Variables.sockon_query_id,DataLen
ARM GAS  /tmp/cc7EC8er.s 			page 33


 920:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 921:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
 922:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //printf("\r\nAT+S.SOCKR");
 923:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WSOCKR=%d,%d",WiFi_Counter_Variables.sockon_query_id,DataLe
 924:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
 925:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
 926:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   IO_status_flag.AT_event_processing = WIFI_CLIENT_WEB_SOCKET_READ_DATA;
 927:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Start_AT_CMD_Timer();
 928:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
 929:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 930:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 931:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 932:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(WiFi_Control_Variables.stop_event_dequeue == WIFI_FALSE)
 933:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 934:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 935:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 936:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* enable sock_read for SPI only */
 937:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(SPWF04) && !defined(CONSOLE_UART_ENABLED)
 938:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
 939:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 940:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 941:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* enable the data receive in chunk mode only in spwfsa01 *///--------> TBD->Enable chunk mode 
 942:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF01
 943:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.last_process_buffer_index = 5;
 944:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.enable_receive_data_chunk = WIFI_TRUE;
 945:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
 946:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.last_process_buffer_index = 10;
 947:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 948:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 949:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 950:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 951:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 952:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 953:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 954:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 955:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_socket_client_close
 956:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         The SOCKC command allows to close socket
 957:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sock_close_id the socket ID of the socket which needs to be closed.
 958:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of socket close request
 959:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 960:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_client_close(uint8_t sock_close_id)
 961:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 859              		.loc 1 961 1 is_stmt 1 view -0
 860              		.cfi_startproc
 861              		@ args = 0, pretend = 0, frame = 0
 862              		@ frame_needed = 0, uses_anonymous_args = 0
 863              		.loc 1 961 1 is_stmt 0 view .LVU211
 864 0000 08B5     		push	{r3, lr}
 865              	.LCFI13:
 866              		.cfi_def_cfa_offset 8
 867              		.cfi_offset 3, -8
 868              		.cfi_offset 14, -4
 962:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 869              		.loc 1 962 3 is_stmt 1 view .LVU212
 870              	.LVL98:
 963:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* User is asking for a socket close, no need for callback. */
 964:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
ARM GAS  /tmp/cc7EC8er.s 			page 34


 965:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01)
 966:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.enable_SockON_Server_Closed_Callback = WIFI_FALSE;
 871              		.loc 1 966 5 view .LVU213
 872              		.loc 1 966 65 is_stmt 0 view .LVU214
 873 0002 074B     		ldr	r3, .L66
 874 0004 9A79     		ldrb	r2, [r3, #6]	@ zero_extendqisi2
 875 0006 6FF38202 		bfc	r2, #2, #1
 876 000a 9A71     		strb	r2, [r3, #6]
 967:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
 968:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Client_Socket_Close_Callback[sock_close_id] = WIFI_FALSE;
 969:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 970:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(open_sockets[sock_close_id])
 877              		.loc 1 970 3 is_stmt 1 view .LVU215
 878              		.loc 1 970 18 is_stmt 0 view .LVU216
 879 000c 054B     		ldr	r3, .L66+4
 880 000e 1B5C     		ldrb	r3, [r3, r0]	@ zero_extendqisi2
 881              		.loc 1 970 5 view .LVU217
 882 0010 0BB9     		cbnz	r3, .L65
 971:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 972:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Queue_Client_Close_Event(sock_close_id, NET_SOCKET);
 973:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
 974:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 975:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else
 976:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 883              		.loc 1 976 12 view .LVU218
 884 0012 0220     		movs	r0, #2
 885              	.LVL99:
 886              	.L62:
 977:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 887              		.loc 1 977 1 view .LVU219
 888 0014 08BD     		pop	{r3, pc}
 889              	.LVL100:
 890              	.L65:
 972:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
 891              		.loc 1 972 5 is_stmt 1 view .LVU220
 892 0016 0221     		movs	r1, #2
 893 0018 FFF7FEFF 		bl	Queue_Client_Close_Event
 894              	.LVL101:
 973:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 895              		.loc 1 973 5 view .LVU221
 973:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 896              		.loc 1 973 12 is_stmt 0 view .LVU222
 897 001c 0020     		movs	r0, #0
 898 001e F9E7     		b	.L62
 899              	.L67:
 900              		.align	2
 901              	.L66:
 902 0020 00000000 		.word	WiFi_Control_Variables
 903 0024 00000000 		.word	open_sockets
 904              		.cfi_endproc
 905              	.LFE289:
 907              		.section	.text.wifi_socket_server_open,"ax",%progbits
 908              		.align	1
 909              		.global	wifi_socket_server_open
 910              		.syntax unified
 911              		.thumb
 912              		.thumb_func
ARM GAS  /tmp/cc7EC8er.s 			page 35


 913              		.fpu fpv4-sp-d16
 915              	wifi_socket_server_open:
 916              	.LVL102:
 917              	.LFB291:
 978:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 979:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
 980:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Socket_Pending_Data
 981:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Query pending data.It will returns the number of bytes of data waiting on socket
 982:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param None
 983:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval uint8_t :number of bytes of data waiting on socket
 984:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
 985:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** void Socket_Pending_Data()
 986:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 987:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKQ=01<cr> */
 988:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
 989:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 990:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01)
 991:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wait_for_command_mode();
 992:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 993:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 994:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(open_sockets[WiFi_Counter_Variables.sockon_query_id])
 995:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 996:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(WiFi_Control_Variables.stop_event_dequeue == WIFI_FALSE)
 997:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 998:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 999:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #if defined(CONSOLE_UART_ENABLED)
1000:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_QUERY_PENDING_DATA,WiFi_Counter_Variables.sockon_query_i
1001:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1002:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
1003:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //printf("\r\nAT+S.SOCKQ");
1004:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.SOCKQ=%d",WiFi_Counter_Variables.sockon_query_id);   
1005:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
1006:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
1007:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         IO_status_flag.AT_event_processing = WIFI_CLIENT_SOCKET_QUERY_EVENT;
1008:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         Start_AT_CMD_Timer();
1009:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
1010:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
1011:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
1012:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifndef CONSOLE_UART_ENABLED
1013:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //prevent the OK received after socket close command to be Q'ed
1014:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         IO_status_flag.prevent_push_OK_event       = WIFI_TRUE;
1015:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
1016:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1017:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1018:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1019:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1020:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1021:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Server_Pending_Data
1022:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Query pending data.It will returns the number of bytes of data waiting on socket
1023:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1024:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval void
1025:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1026:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** void Server_Pending_Data()
1027:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1028:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* "AT+S.SOCKDQ=%d,%d\r" */
1029:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1030:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
ARM GAS  /tmp/cc7EC8er.s 			page 36


1031:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01) && defined(CONSOLE_UART_ENABLED)
1032:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     wait_for_command_mode();
1033:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
1034:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1035:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(open_server_sockets[WiFi_Counter_Variables.sockdon_query_id])
1036:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1037:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(WiFi_Control_Variables.stop_event_dequeue == WIFI_FALSE)
1038:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
1039:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(CONSOLE_UART_ENABLED)
1040:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_SERVER_SOCKET_QUERY,WiFi_Counter_Variables.sockdon_query_i
1041:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1042:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
1043:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.SOCKDQ=%d,%d",WiFi_Counter_Variables.sockdon_query_id, 
1044:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
1045:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
1046:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       IO_status_flag.AT_event_processing = WIFI_SERVER_SOCKET_QUERY_EVENT;
1047:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Start_AT_CMD_Timer();
1048:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
1049:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
1050:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #ifndef CONSOLE_UART_ENABLED
1051:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //prevent the OK received after socket close command to be Q'ed
1052:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       IO_status_flag.prevent_push_OK_event       = WIFI_TRUE;
1053:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
1054:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1055:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1056:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1057:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1058:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Websocket_Pending_Data
1059:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Query pending data.It will returns the number of bytes of data waiting on websocket
1060:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1061:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval void
1062:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1063:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** void Websocket_Pending_Data()
1064:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1065:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* "AT+S.WSOCKDQ=%d,%d\r" */
1066:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1067:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1068:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //if(open_server_sockets[WiFi_Counter_Variables.sockdon_query_id])
1069:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1070:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(WiFi_Control_Variables.stop_event_dequeue == WIFI_FALSE)
1071:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
1072:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #if defined(CONSOLE_UART_ENABLED)
1073:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_WEB_SOCKET_QUERY,WiFi_Counter_Variables.sockon_query_id); 
1074:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1075:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
1076:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WSOCKQ=%d",WiFi_Counter_Variables.sockon_query_id);    
1077:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
1078:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //@CHECK-TBD!!: Changing AT_event_processing state without checking status flag
1079:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       IO_status_flag.AT_event_processing = WIFI_CLIENT_WEB_SOCKET_QUERY_EVENT;
1080:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Start_AT_CMD_Timer();
1081:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code from run_spi_cmd
1082:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
1083:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifndef CONSOLE_UART_ENABLED
1084:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //prevent the OK received after socket close command to be Q'ed
1085:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         IO_status_flag.prevent_push_OK_event       = WIFI_TRUE;
1086:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1087:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
ARM GAS  /tmp/cc7EC8er.s 			page 37


1088:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1089:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1090:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1091:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1092:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_socket_server_open
1093:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Open a Server socket
1094:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1095:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of server socket request
1096:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1097:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1098:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_server_open(uint32_t port_number, uint8_t *protocol, uint8_t *sock_id)
1099:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1100:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1101:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_Open_Event(port_number,protocol);
1103:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1104:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   *sock_id = WiFi_Counter_Variables.Server_Socket_Open_ID; //return the socket id to the user
1105:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1106:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1107:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1108:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_server_open(uint32_t port_number, uint8_t * protocol)
1109:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 918              		.loc 1 1109 1 is_stmt 1 view -0
 919              		.cfi_startproc
 920              		@ args = 0, pretend = 0, frame = 0
 921              		@ frame_needed = 0, uses_anonymous_args = 0
 922              		.loc 1 1109 1 is_stmt 0 view .LVU224
 923 0000 08B5     		push	{r3, lr}
 924              	.LCFI14:
 925              		.cfi_def_cfa_offset 8
 926              		.cfi_offset 3, -8
 927              		.cfi_offset 14, -4
1110:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 928              		.loc 1 1110 3 is_stmt 1 view .LVU225
 929              	.LVL103:
1111:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1112:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_Open_Event(port_number,protocol);
 930              		.loc 1 1112 3 view .LVU226
 931 0002 FFF7FEFF 		bl	Queue_Server_Open_Event
 932              	.LVL104:
1113:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 933              		.loc 1 1113 3 view .LVU227
 934              		.loc 1 1113 12 is_stmt 0 view .LVU228
 935 0006 FFF7FEFF 		bl	USART_Receive_AT_Resp
 936              	.LVL105:
1114:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1115:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 937              		.loc 1 1115 3 is_stmt 1 view .LVU229
1116:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 938              		.loc 1 1116 1 is_stmt 0 view .LVU230
 939 000a 08BD     		pop	{r3, pc}
 940              		.cfi_endproc
 941              	.LFE291:
 943              		.section	.text.wifi_socket_server_close,"ax",%progbits
 944              		.align	1
 945              		.global	wifi_socket_server_close
 946              		.syntax unified
ARM GAS  /tmp/cc7EC8er.s 			page 38


 947              		.thumb
 948              		.thumb_func
 949              		.fpu fpv4-sp-d16
 951              	wifi_socket_server_close:
 952              	.LFB293:
1117:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1118:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1119:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1120:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1121:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_socket_server_write
1122:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Write to a Server socket
1123:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  server_id 
1124:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         client_id
1125:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Datalength
1126:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of server socket request
1127:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1128:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1129:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_server_write(uint8_t server_id, uint8_t client_id, uint32_t DataLength,ch
1130:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1131:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKW=00,11<cr> */
1132:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1133:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1134:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Check if sock_id is open
1135:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!open_server_sockets[server_id])
1136:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;
1137:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1138:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength<=0 && DataLength > WiFi_Counter_Variables.wifi_socket_write_limit)
1139:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
1140:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1141:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_Write_Event(server_id, client_id, DataLength,Data);
1142:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1143:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1144:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1145:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1146:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1147:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_server_write(uint32_t DataLength,char * Data) 
1148:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1149:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1150:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Can only write if there is a client connected */
1151:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!wifi_client_connected)
1152:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;
1153:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1154:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength <= 0 && DataLength > WiFi_Counter_Variables.wifi_socket_write_limit)
1155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1156:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1157:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   wait_for_command_mode(); 
1158:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
1159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __disable_irq();
1160:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1161:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_TRUE;
1162:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_TRUE;
1163:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __enable_irq();
1164:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.sock_read_ongoing || IO_status_flag.WIND64_count!= 0)//wait till any pending
1166:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1167:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       __NOP(); //nothing to do
1168:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
ARM GAS  /tmp/cc7EC8er.s 			page 39


1169:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1170:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*to make sure that by default the mode is not switched to command mode from data mode*/
1171:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.switch_by_default_to_command_mode = WIFI_FALSE;
1172:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1173:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*Switch to Data Mode first*/
1174:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!IO_status_flag.data_mode)
1175:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1176:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_switch_to_data_mode();//switch by default
1177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(!IO_status_flag.data_mode && wifi_client_connected)
1178:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
1179:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           //Wait till data_mode is active
1180:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __NOP(); //nothing to do
1181:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
1182:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       // if client got disconnected
1183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(!wifi_client_connected)
1184:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
1185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Control_Variables.switch_by_default_to_command_mode = WIFI_TRUE;  /*back to default 
1186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __disable_irq();
1187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_FALSE;
1188:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_FALSE;
1189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __enable_irq();
1190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           return WiFi_MODULE_ERROR;
1191:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
1192:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1193:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1194:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*Write the data on the uart*/
1195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(HAL_UART_Transmit(&UartWiFiHandle, (uint8_t *)Data, DataLength,1000)!= HAL_OK)
1196:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1197:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_UART_Error_Handler();
1198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = WiFi_HAL_UART_ERROR;
1199:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1200:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //HAL_Delay(100);//Wait for tx before switching back to command mode
1201:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1202:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*Switch back to Command Mode*/
1203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(!IO_status_flag.command_mode)
1204:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_switch_to_command_mode();//switch by default
1206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(!IO_status_flag.command_mode)
1207:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
1208:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           //Wait till command_mode is active
1209:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __NOP(); //nothing to do
1210:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
1211:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1212:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.switch_by_default_to_command_mode = WIFI_TRUE;  /*back to default behaviou
1214:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __disable_irq();
1216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_FALSE;
1217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_FALSE;
1218:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __enable_irq();
1219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1220:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1221:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1222:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1224:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1225:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Server Socket Close
ARM GAS  /tmp/cc7EC8er.s 			page 40


1226:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Queue the server socket close command
1227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  count: the number of arguments 
1228:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of server socket request
1229:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1230:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1231:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t socket_server_close(int count,...)
1232:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1233:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   va_list v;
1234:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   va_start(v,count);
1235:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   int sid = va_arg(v,int);
1236:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   int cid;
1237:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   (count == 2) ? (cid = va_arg(v,int)): (cid = 9);
1238:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_Close_Event(sid,cid);
1239:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   va_end(v);
1240:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return WiFi_MODULE_SUCCESS;
1241:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1242:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1243:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1244:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Server Socket Close
1245:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Close a Server socket
1246:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1247:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of server socket request
1248:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1249:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_socket_server_close() 
1250:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 953              		.loc 1 1250 1 is_stmt 1 view -0
 954              		.cfi_startproc
 955              		@ args = 0, pretend = 0, frame = 0
 956              		@ frame_needed = 0, uses_anonymous_args = 0
 957 0000 08B5     		push	{r3, lr}
 958              	.LCFI15:
 959              		.cfi_def_cfa_offset 8
 960              		.cfi_offset 3, -8
 961              		.cfi_offset 14, -4
1251:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_Close_Event(-1,-1);
 962              		.loc 1 1251 3 view .LVU232
 963 0002 4FF0FF31 		mov	r1, #-1
 964 0006 0846     		mov	r0, r1
 965 0008 FFF7FEFF 		bl	Queue_Server_Close_Event
 966              	.LVL106:
1252:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return WiFi_MODULE_SUCCESS; 
 967              		.loc 1 1252 3 view .LVU233
1253:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 968              		.loc 1 1253 1 is_stmt 0 view .LVU234
 969 000c 0020     		movs	r0, #0
 970 000e 08BD     		pop	{r3, pc}
 971              		.cfi_endproc
 972              	.LFE293:
 974              		.section	.text.wait_for_command_mode,"ax",%progbits
 975              		.align	1
 976              		.global	wait_for_command_mode
 977              		.syntax unified
 978              		.thumb
 979              		.thumb_func
 980              		.fpu fpv4-sp-d16
 982              	wait_for_command_mode:
 983              	.LFB294:
ARM GAS  /tmp/cc7EC8er.s 			page 41


1254:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1255:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1256:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef CONSOLE_UART_ENABLED
1257:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1258:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wait_for_command_mode
1259:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Waits till we are in command mode
1260:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1261:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval None
1262:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1263:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** void wait_for_command_mode(void)
1264:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 984              		.loc 1 1264 1 is_stmt 1 view -0
 985              		.cfi_startproc
 986              		@ args = 0, pretend = 0, frame = 0
 987              		@ frame_needed = 0, uses_anonymous_args = 0
 988              		@ link register save eliminated.
1265:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(!IO_status_flag.command_mode)
 989              		.loc 1 1265 5 view .LVU236
 990              	.L73:
 991              		.loc 1 1265 10 view .LVU237
 992              		.loc 1 1265 26 is_stmt 0 view .LVU238
 993 0000 034B     		ldr	r3, .L76
 994 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 995              		.loc 1 1265 10 view .LVU239
 996 0004 DB09     		lsrs	r3, r3, #7
 997 0006 01D1     		bne	.L75
1266:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
1267:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //Make sure we are in command mode, ideally we should do this in every User API?
1268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
 998              		.loc 1 1268 9 is_stmt 1 view .LVU240
 999              		.syntax unified
 1000              	@ 1268 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 1001 0008 00BF     		nop
 1002              	@ 0 "" 2
 1003              		.thumb
 1004              		.syntax unified
 1005 000a F9E7     		b	.L73
 1006              	.L75:
1269:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
1270:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1007              		.loc 1 1270 1 is_stmt 0 view .LVU241
 1008 000c 7047     		bx	lr
 1009              	.L77:
 1010 000e 00BF     		.align	2
 1011              	.L76:
 1012 0010 00000000 		.word	IO_status_flag
 1013              		.cfi_endproc
 1014              	.LFE294:
 1016              		.section	.rodata.Socket_Read.str1.4,"aMS",%progbits,1
 1017              		.align	2
 1018              	.LC7:
 1019 0000 41542B53 		.ascii	"AT+S.SOCKR=%d,%d\015\000"
 1019      2E534F43 
 1019      4B523D25 
 1019      642C2564 
 1019      0D00
 1020              		.section	.text.Socket_Read,"ax",%progbits
ARM GAS  /tmp/cc7EC8er.s 			page 42


 1021              		.align	1
 1022              		.global	Socket_Read
 1023              		.syntax unified
 1024              		.thumb
 1025              		.thumb_func
 1026              		.fpu fpv4-sp-d16
 1028              	Socket_Read:
 1029              	.LVL107:
 1030              	.LFB288:
 827:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKR=01,12<cr> */
 1031              		.loc 1 827 1 is_stmt 1 view -0
 1032              		.cfi_startproc
 1033              		@ args = 0, pretend = 0, frame = 0
 1034              		@ frame_needed = 0, uses_anonymous_args = 0
 827:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKR=01,12<cr> */
 1035              		.loc 1 827 1 is_stmt 0 view .LVU243
 1036 0000 70B5     		push	{r4, r5, r6, lr}
 1037              	.LCFI16:
 1038              		.cfi_def_cfa_offset 16
 1039              		.cfi_offset 4, -16
 1040              		.cfi_offset 5, -12
 1041              		.cfi_offset 6, -8
 1042              		.cfi_offset 14, -4
 1043 0002 0446     		mov	r4, r0
 829:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(SPWF01) && defined(CONSOLE_UART_ENABLED)
 1044              		.loc 1 829 3 is_stmt 1 view .LVU244
 1045              	.LVL108:
 831:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 1046              		.loc 1 831 5 view .LVU245
 1047 0004 FFF7FEFF 		bl	wait_for_command_mode
 1048              	.LVL109:
 836:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 1049              		.loc 1 836 5 view .LVU246
 836:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 1050              		.loc 1 836 74 is_stmt 0 view .LVU247
 1051 0008 124E     		ldr	r6, .L82
 1052 000a 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 836:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.SockON_Data_Length = DataLength;
 1053              		.loc 1 836 5 view .LVU248
 1054 000c 124D     		ldr	r5, .L82+4
 1055 000e 2346     		mov	r3, r4
 1056 0010 C2F3C202 		ubfx	r2, r2, #3, #3
 1057 0014 1149     		ldr	r1, .L82+8
 1058 0016 2846     		mov	r0, r5
 1059 0018 FFF7FEFF 		bl	sprintf
 1060              	.LVL110:
 837:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 1061              		.loc 1 837 5 is_stmt 1 view .LVU249
 837:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 1062              		.loc 1 837 47 is_stmt 0 view .LVU250
 1063 001c C6F8A440 		str	r4, [r6, #164]
 838:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
 1064              		.loc 1 838 5 is_stmt 1 view .LVU251
 838:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
 1065              		.loc 1 838 36 is_stmt 0 view .LVU252
 1066 0020 2846     		mov	r0, r5
 1067 0022 FFF7FEFF 		bl	strlen
ARM GAS  /tmp/cc7EC8er.s 			page 43


 1068              	.LVL111:
 838:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
 1069              		.loc 1 838 14 view .LVU253
 1070 0026 80B2     		uxth	r0, r0
 1071 0028 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 1072              	.LVL112:
 850:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 1073              		.loc 1 850 3 is_stmt 1 view .LVU254
 850:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
 1074              		.loc 1 850 5 is_stmt 0 view .LVU255
 1075 002c 88B9     		cbnz	r0, .L79
 852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 1076              		.loc 1 852 5 is_stmt 1 view .LVU256
 852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 1077              		.loc 1 852 50 is_stmt 0 view .LVU257
 1078 002e 0C4B     		ldr	r3, .L82+12
 1079 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 1080              		.loc 1 852 7 view .LVU258
 1081 0032 13F0080F 		tst	r3, #8
 1082 0036 03D1     		bne	.L80
 853:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 1083              		.loc 1 853 9 is_stmt 1 view .LVU259
 853:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 1084              		.loc 1 853 51 is_stmt 0 view .LVU260
 1085 0038 094A     		ldr	r2, .L82+12
 1086 003a 43F00803 		orr	r3, r3, #8
 1087 003e 1370     		strb	r3, [r2]
 1088              	.L80:
 857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_receive_data_chunk = WIFI_TRUE;
 1089              		.loc 1 857 9 is_stmt 1 view .LVU261
 857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_receive_data_chunk = WIFI_TRUE;
 1090              		.loc 1 857 58 is_stmt 0 view .LVU262
 1091 0040 044B     		ldr	r3, .L82
 1092 0042 0522     		movs	r2, #5
 1093 0044 A3F89A20 		strh	r2, [r3, #154]	@ movhi
 858:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
 1094              		.loc 1 858 9 is_stmt 1 view .LVU263
 858:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.enable_sock_read = WIFI_TRUE;
 1095              		.loc 1 858 58 is_stmt 0 view .LVU264
 1096 0048 054A     		ldr	r2, .L82+12
 1097 004a 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 859:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #elif defined(SPWF04) && !defined(CONSOLE_UART_ENABLED)
 1098              		.loc 1 859 9 is_stmt 1 view .LVU265
 859:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #elif defined(SPWF04) && !defined(CONSOLE_UART_ENABLED)
 1099              		.loc 1 859 49 is_stmt 0 view .LVU266
 1100 004c 43F02403 		orr	r3, r3, #36
 1101 0050 9370     		strb	r3, [r2, #2]
 1102              	.L79:
 865:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1103              		.loc 1 865 3 is_stmt 1 view .LVU267
 866:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1104              		.loc 1 866 1 is_stmt 0 view .LVU268
 1105 0052 70BD     		pop	{r4, r5, r6, pc}
 1106              	.L83:
 1107              		.align	2
 1108              	.L82:
ARM GAS  /tmp/cc7EC8er.s 			page 44


 1109 0054 00000000 		.word	WiFi_Counter_Variables
 1110 0058 00000000 		.word	WiFi_AT_Cmd_Buff
 1111 005c 00000000 		.word	.LC7
 1112 0060 00000000 		.word	WiFi_Control_Variables
 1113              		.cfi_endproc
 1114              	.LFE288:
 1116              		.section	.rodata.Socket_Pending_Data.str1.4,"aMS",%progbits,1
 1117              		.align	2
 1118              	.LC8:
 1119 0000 41542B53 		.ascii	"AT+S.SOCKQ=%d\015\000"
 1119      2E534F43 
 1119      4B513D25 
 1119      640D00
 1120              		.section	.text.Socket_Pending_Data,"ax",%progbits
 1121              		.align	1
 1122              		.global	Socket_Pending_Data
 1123              		.syntax unified
 1124              		.thumb
 1125              		.thumb_func
 1126              		.fpu fpv4-sp-d16
 1128              	Socket_Pending_Data:
 1129              	.LFB290:
 986:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKQ=01<cr> */
 1130              		.loc 1 986 1 is_stmt 1 view -0
 1131              		.cfi_startproc
 1132              		@ args = 0, pretend = 0, frame = 0
 1133              		@ frame_needed = 0, uses_anonymous_args = 0
 1134 0000 10B5     		push	{r4, lr}
 1135              	.LCFI17:
 1136              		.cfi_def_cfa_offset 8
 1137              		.cfi_offset 4, -8
 1138              		.cfi_offset 14, -4
 988:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 1139              		.loc 1 988 3 view .LVU270
 1140 0002 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 1141              	.LVL113:
 991:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 1142              		.loc 1 991 5 view .LVU271
 1143 0006 FFF7FEFF 		bl	wait_for_command_mode
 1144              	.LVL114:
 994:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1145              		.loc 1 994 3 view .LVU272
 994:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1146              		.loc 1 994 41 is_stmt 0 view .LVU273
 1147 000a 0E4B     		ldr	r3, .L88
 1148 000c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1149 000e C2F3C202 		ubfx	r2, r2, #3, #3
 994:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1150              		.loc 1 994 18 view .LVU274
 1151 0012 0D4B     		ldr	r3, .L88+4
 1152 0014 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 994:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1153              		.loc 1 994 5 view .LVU275
 1154 0016 9BB1     		cbz	r3, .L84
 996:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 1155              		.loc 1 996 7 is_stmt 1 view .LVU276
 996:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
ARM GAS  /tmp/cc7EC8er.s 			page 45


 1156              		.loc 1 996 52 is_stmt 0 view .LVU277
 1157 0018 0C4B     		ldr	r3, .L88+8
 1158 001a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 996:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Control_Variables.stop_event_dequeue = WIFI_TRUE;
 1159              		.loc 1 996 9 view .LVU278
 1160 001c 13F0080F 		tst	r3, #8
 1161 0020 03D1     		bne	.L86
 997:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 1162              		.loc 1 997 9 is_stmt 1 view .LVU279
 997:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 1163              		.loc 1 997 51 is_stmt 0 view .LVU280
 1164 0022 0A49     		ldr	r1, .L88+8
 1165 0024 43F00803 		orr	r3, r3, #8
 1166 0028 0B70     		strb	r3, [r1]
 1167              	.L86:
1000:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 1168              		.loc 1 1000 9 is_stmt 1 view .LVU281
 1169 002a 094C     		ldr	r4, .L88+12
 1170 002c 0949     		ldr	r1, .L88+16
 1171 002e 2046     		mov	r0, r4
 1172 0030 FFF7FEFF 		bl	sprintf
 1173              	.LVL115:
1001:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
 1174              		.loc 1 1001 9 view .LVU282
1001:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
 1175              		.loc 1 1001 31 is_stmt 0 view .LVU283
 1176 0034 2046     		mov	r0, r4
 1177 0036 FFF7FEFF 		bl	strlen
 1178              	.LVL116:
1001:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
 1179              		.loc 1 1001 9 view .LVU284
 1180 003a 80B2     		uxth	r0, r0
 1181 003c FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 1182              	.LVL117:
 1183              	.L84:
1017:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1184              		.loc 1 1017 1 view .LVU285
 1185 0040 10BD     		pop	{r4, pc}
 1186              	.L89:
 1187 0042 00BF     		.align	2
 1188              	.L88:
 1189 0044 00000000 		.word	WiFi_Counter_Variables
 1190 0048 00000000 		.word	open_sockets
 1191 004c 00000000 		.word	WiFi_Control_Variables
 1192 0050 00000000 		.word	WiFi_AT_Cmd_Buff
 1193 0054 00000000 		.word	.LC8
 1194              		.cfi_endproc
 1195              	.LFE290:
 1197              		.section	.text.wifi_socket_server_write,"ax",%progbits
 1198              		.align	1
 1199              		.global	wifi_socket_server_write
 1200              		.syntax unified
 1201              		.thumb
 1202              		.thumb_func
 1203              		.fpu fpv4-sp-d16
 1205              	wifi_socket_server_write:
 1206              	.LVL118:
ARM GAS  /tmp/cc7EC8er.s 			page 46


 1207              	.LFB292:
1148:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 1208              		.loc 1 1148 1 is_stmt 1 view -0
 1209              		.cfi_startproc
 1210              		@ args = 0, pretend = 0, frame = 0
 1211              		@ frame_needed = 0, uses_anonymous_args = 0
1148:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 1212              		.loc 1 1148 1 is_stmt 0 view .LVU287
 1213 0000 38B5     		push	{r3, r4, r5, lr}
 1214              	.LCFI18:
 1215              		.cfi_def_cfa_offset 16
 1216              		.cfi_offset 3, -16
 1217              		.cfi_offset 4, -12
 1218              		.cfi_offset 5, -8
 1219              		.cfi_offset 14, -4
1149:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Can only write if there is a client connected */
 1220              		.loc 1 1149 3 is_stmt 1 view .LVU288
 1221              	.LVL119:
1151:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;
 1222              		.loc 1 1151 3 view .LVU289
1151:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;
 1223              		.loc 1 1151 6 is_stmt 0 view .LVU290
 1224 0002 3A4B     		ldr	r3, .L109
 1225 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1151:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_READY;
 1226              		.loc 1 1151 5 view .LVU291
 1227 0006 002B     		cmp	r3, #0
 1228 0008 6CD0     		beq	.L103
 1229 000a 0446     		mov	r4, r0
 1230 000c 0D46     		mov	r5, r1
1154:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 1231              		.loc 1 1154 3 is_stmt 1 view .LVU292
1154:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 1232              		.loc 1 1154 5 is_stmt 0 view .LVU293
 1233 000e 20B9     		cbnz	r0, .L92
1154:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 1234              		.loc 1 1154 60 discriminator 1 view .LVU294
 1235 0010 374B     		ldr	r3, .L109+4
 1236 0012 D3F8E430 		ldr	r3, [r3, #228]
1154:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 1237              		.loc 1 1154 22 discriminator 1 view .LVU295
 1238 0016 8342     		cmp	r3, r0
 1239 0018 66D3     		bcc	.L104
 1240              	.L92:
1157:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 1241              		.loc 1 1157 3 is_stmt 1 view .LVU296
 1242 001a FFF7FEFF 		bl	wait_for_command_mode
 1243              	.LVL120:
1159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1244              		.loc 1 1159 3 view .LVU297
 1245              	.LBB14:
 1246              	.LBI14:
 1247              		.file 2 "Drivers/CMSIS/Include/cmsis_gcc.h"
   1:Drivers/CMSIS/Include/cmsis_gcc.h **** /**************************************************************************//**
   2:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @version  V5.0.4
ARM GAS  /tmp/cc7EC8er.s 			page 47


   5:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @date     09. April 2018
   6:Drivers/CMSIS/Include/cmsis_gcc.h ****  ******************************************************************************/
   7:Drivers/CMSIS/Include/cmsis_gcc.h **** /*
   8:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Copyright (c) 2009-2018 Arm Limited. All rights reserved.
   9:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  10:Drivers/CMSIS/Include/cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  12:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:Drivers/CMSIS/Include/cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:Drivers/CMSIS/Include/cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  16:Drivers/CMSIS/Include/cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  18:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:Drivers/CMSIS/Include/cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:Drivers/CMSIS/Include/cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:Drivers/CMSIS/Include/cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:Drivers/CMSIS/Include/cmsis_gcc.h ****  * limitations under the License.
  23:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  24:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  25:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  28:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ignore some GCC warnings */
  29:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic push
  30:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  34:Drivers/CMSIS/Include/cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __has_builtin
  36:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  38:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  39:Drivers/CMSIS/Include/cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ASM
  41:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ASM                                  __asm
  42:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  43:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __INLINE
  44:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __INLINE                               inline
  45:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  46:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  49:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif                                           
  52:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  55:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __USED
  56:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  58:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __WEAK
  59:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  61:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED
ARM GAS  /tmp/cc7EC8er.s 			page 48


  62:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  64:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  67:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  70:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:Drivers/CMSIS/Include/cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  78:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  86:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  94:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 102:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 110:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ALIGNED
 111:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 113:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __RESTRICT
 114:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 116:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 117:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 118:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
ARM GAS  /tmp/cc7EC8er.s 			page 49


 119:Drivers/CMSIS/Include/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 120:Drivers/CMSIS/Include/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 121:Drivers/CMSIS/Include/cmsis_gcc.h ****   @{
 122:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 123:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 124:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 125:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 126:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 127:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 128:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 129:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 130:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 131:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 132:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 133:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 134:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 135:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 136:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 137:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 138:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 139:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 140:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 1248              		.loc 2 140 27 view .LVU298
 1249              	.LBB15:
 141:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 142:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 1250              		.loc 2 142 3 view .LVU299
 1251              		.syntax unified
 1252              	@ 142 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1253 001e 72B6     		cpsid i
 1254              	@ 0 "" 2
 1255              		.thumb
 1256              		.syntax unified
 1257              	.LBE15:
 1258              	.LBE14:
1161:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_TRUE;
 1259              		.loc 1 1161 3 view .LVU300
1161:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_TRUE;
 1260              		.loc 1 1161 55 is_stmt 0 view .LVU301
 1261 0020 344A     		ldr	r2, .L109+8
 1262 0022 1379     		ldrb	r3, [r2, #4]	@ zero_extendqisi2
1162:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __enable_irq();
 1263              		.loc 1 1162 3 is_stmt 1 view .LVU302
1162:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __enable_irq();
 1264              		.loc 1 1162 50 is_stmt 0 view .LVU303
 1265 0024 43F00503 		orr	r3, r3, #5
 1266 0028 1371     		strb	r3, [r2, #4]
1163:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1267              		.loc 1 1163 3 is_stmt 1 view .LVU304
 1268              	.LBB16:
 1269              	.LBI16:
 129:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 1270              		.loc 2 129 27 view .LVU305
 1271              	.LBB17:
 131:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 1272              		.loc 2 131 3 view .LVU306
 1273              		.syntax unified
ARM GAS  /tmp/cc7EC8er.s 			page 50


 1274              	@ 131 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1275 002a 62B6     		cpsie i
 1276              	@ 0 "" 2
 132:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 1277              		.loc 2 132 1 is_stmt 0 view .LVU307
 1278              		.thumb
 1279              		.syntax unified
 1280 002c 00E0     		b	.L93
 1281              	.L94:
 1282              	.LBE17:
 1283              	.LBE16:
1167:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 1284              		.loc 1 1167 7 is_stmt 1 view .LVU308
 1285              		.syntax unified
 1286              	@ 1167 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 1287 002e 00BF     		nop
 1288              	@ 0 "" 2
 1289              		.thumb
 1290              		.syntax unified
 1291              	.L93:
1165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1292              		.loc 1 1165 8 view .LVU309
1165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1293              		.loc 1 1165 23 is_stmt 0 view .LVU310
 1294 0030 314B     		ldr	r3, .L109+12
 1295 0032 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1296              		.loc 1 1165 8 view .LVU311
 1297 0034 13F0010F 		tst	r3, #1
 1298 0038 F9D1     		bne	.L94
1165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1299              		.loc 1 1165 59 discriminator 1 view .LVU312
 1300 003a 2F4B     		ldr	r3, .L109+12
 1301 003c 5B68     		ldr	r3, [r3, #4]
1165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1302              		.loc 1 1165 42 discriminator 1 view .LVU313
 1303 003e 002B     		cmp	r3, #0
 1304 0040 F5D1     		bne	.L94
1171:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1305              		.loc 1 1171 3 is_stmt 1 view .LVU314
1171:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1306              		.loc 1 1171 60 is_stmt 0 view .LVU315
 1307 0042 2C4B     		ldr	r3, .L109+8
 1308 0044 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1309 0046 6FF30002 		bfc	r2, #0, #1
 1310 004a 1A70     		strb	r2, [r3]
1174:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1311              		.loc 1 1174 3 is_stmt 1 view .LVU316
1174:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1312              		.loc 1 1174 21 is_stmt 0 view .LVU317
 1313 004c 2A4B     		ldr	r3, .L109+12
 1314 004e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1174:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1315              		.loc 1 1174 5 view .LVU318
 1316 0050 13F0200F 		tst	r3, #32
 1317 0054 0ED1     		bne	.L95
1176:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(!IO_status_flag.data_mode && wifi_client_connected)
ARM GAS  /tmp/cc7EC8er.s 			page 51


 1318              		.loc 1 1176 7 is_stmt 1 view .LVU319
 1319 0056 FFF7FEFF 		bl	WiFi_switch_to_data_mode
 1320              	.LVL121:
1177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1321              		.loc 1 1177 7 view .LVU320
 1322              	.L96:
1177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1323              		.loc 1 1177 12 view .LVU321
1177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1324              		.loc 1 1177 28 is_stmt 0 view .LVU322
 1325 005a 274B     		ldr	r3, .L109+12
 1326 005c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1327              		.loc 1 1177 12 view .LVU323
 1328 005e 13F0200F 		tst	r3, #32
 1329 0062 04D1     		bne	.L97
1177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1330              		.loc 1 1177 39 discriminator 1 view .LVU324
 1331 0064 214B     		ldr	r3, .L109
 1332 0066 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1333 0068 0BB1     		cbz	r3, .L97
1180:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
 1334              		.loc 1 1180 11 is_stmt 1 view .LVU325
 1335              		.syntax unified
 1336              	@ 1180 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 1337 006a 00BF     		nop
 1338              	@ 0 "" 2
 1339              		.thumb
 1340              		.syntax unified
 1341 006c F5E7     		b	.L96
 1342              	.L97:
1183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1343              		.loc 1 1183 7 view .LVU326
1183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1344              		.loc 1 1183 10 is_stmt 0 view .LVU327
 1345 006e 1F4B     		ldr	r3, .L109
 1346 0070 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1347              		.loc 1 1183 9 view .LVU328
 1348 0072 DBB1     		cbz	r3, .L106
 1349              	.L95:
1195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1350              		.loc 1 1195 3 is_stmt 1 view .LVU329
1195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1351              		.loc 1 1195 6 is_stmt 0 view .LVU330
 1352 0074 4FF47A73 		mov	r3, #1000
 1353 0078 A2B2     		uxth	r2, r4
 1354 007a 2946     		mov	r1, r5
 1355 007c 1F48     		ldr	r0, .L109+16
 1356 007e FFF7FEFF 		bl	HAL_UART_Transmit
 1357              	.LVL122:
1195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1358              		.loc 1 1195 5 view .LVU331
 1359 0082 0446     		mov	r4, r0
 1360              	.LVL123:
1195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1361              		.loc 1 1195 5 view .LVU332
ARM GAS  /tmp/cc7EC8er.s 			page 52


 1362 0084 08BB     		cbnz	r0, .L107
 1363              	.LVL124:
 1364              	.L99:
1203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1365              		.loc 1 1203 3 is_stmt 1 view .LVU333
1203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1366              		.loc 1 1203 21 is_stmt 0 view .LVU334
 1367 0086 1C4B     		ldr	r3, .L109+12
 1368 0088 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1369              		.loc 1 1203 5 view .LVU335
 1370 008a DB09     		lsrs	r3, r3, #7
 1371 008c 21D0     		beq	.L108
 1372              	.L100:
1213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1373              		.loc 1 1213 3 is_stmt 1 view .LVU336
1213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1374              		.loc 1 1213 60 is_stmt 0 view .LVU337
 1375 008e 194B     		ldr	r3, .L109+8
 1376 0090 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1377 0092 42F00102 		orr	r2, r2, #1
 1378 0096 1A70     		strb	r2, [r3]
1215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_FALSE;
 1379              		.loc 1 1215 3 is_stmt 1 view .LVU338
 1380              	.LBB18:
 1381              	.LBI18:
 140:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 1382              		.loc 2 140 27 view .LVU339
 1383              	.LBB19:
 1384              		.loc 2 142 3 view .LVU340
 1385              		.syntax unified
 1386              	@ 142 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1387 0098 72B6     		cpsid i
 1388              	@ 0 "" 2
 1389              		.thumb
 1390              		.syntax unified
 1391              	.LBE19:
 1392              	.LBE18:
1216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_FALSE;
 1393              		.loc 1 1216 3 view .LVU341
1216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_FALSE;
 1394              		.loc 1 1216 50 is_stmt 0 view .LVU342
 1395 009a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
1217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __enable_irq();
 1396              		.loc 1 1217 3 is_stmt 1 view .LVU343
1217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   __enable_irq();
 1397              		.loc 1 1217 55 is_stmt 0 view .LVU344
 1398 009c 02F0FE02 		and	r2, r2, #254
 1399 00a0 6FF38202 		bfc	r2, #2, #1
 1400 00a4 1A71     		strb	r2, [r3, #4]
1218:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 1401              		.loc 1 1218 3 is_stmt 1 view .LVU345
 1402              	.LBB20:
 1403              	.LBI20:
 129:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 1404              		.loc 2 129 27 view .LVU346
 1405              	.LBB21:
ARM GAS  /tmp/cc7EC8er.s 			page 53


 131:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 1406              		.loc 2 131 3 view .LVU347
 1407              		.syntax unified
 1408              	@ 131 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1409 00a6 62B6     		cpsie i
 1410              	@ 0 "" 2
 1411              		.thumb
 1412              		.syntax unified
 1413              	.LBE21:
 1414              	.LBE20:
1220:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1415              		.loc 1 1220 3 view .LVU348
 1416              	.LVL125:
 1417              	.L91:
1221:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
 1418              		.loc 1 1221 1 is_stmt 0 view .LVU349
 1419 00a8 2046     		mov	r0, r4
 1420 00aa 38BD     		pop	{r3, r4, r5, pc}
 1421              	.LVL126:
 1422              	.L106:
1185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __disable_irq();
 1423              		.loc 1 1185 11 is_stmt 1 view .LVU350
1185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __disable_irq();
 1424              		.loc 1 1185 68 is_stmt 0 view .LVU351
 1425 00ac 114B     		ldr	r3, .L109+8
 1426 00ae 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1427 00b0 42F00102 		orr	r2, r2, #1
 1428 00b4 1A70     		strb	r2, [r3]
1186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Control_Variables.prevent_push_WIFI_event = WIFI_FALSE;
 1429              		.loc 1 1186 11 is_stmt 1 view .LVU352
 1430              	.LBB22:
 1431              	.LBI22:
 140:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 1432              		.loc 2 140 27 view .LVU353
 1433              	.LBB23:
 1434              		.loc 2 142 3 view .LVU354
 1435              		.syntax unified
 1436              	@ 142 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1437 00b6 72B6     		cpsid i
 1438              	@ 0 "" 2
 1439              		.thumb
 1440              		.syntax unified
 1441              	.LBE23:
 1442              	.LBE22:
1187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_FALSE;
 1443              		.loc 1 1187 11 view .LVU355
1187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           WiFi_Control_Variables.do_not_reset_push_WIFI_event = WIFI_FALSE;
 1444              		.loc 1 1187 58 is_stmt 0 view .LVU356
 1445 00b8 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
1188:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __enable_irq();
 1446              		.loc 1 1188 11 is_stmt 1 view .LVU357
1188:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           __enable_irq();
 1447              		.loc 1 1188 63 is_stmt 0 view .LVU358
 1448 00ba 02F0FE02 		and	r2, r2, #254
 1449 00be 6FF38202 		bfc	r2, #2, #1
 1450 00c2 1A71     		strb	r2, [r3, #4]
1189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           return WiFi_MODULE_ERROR;
ARM GAS  /tmp/cc7EC8er.s 			page 54


 1451              		.loc 1 1189 11 is_stmt 1 view .LVU359
 1452              	.LBB24:
 1453              	.LBI24:
 129:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 1454              		.loc 2 129 27 view .LVU360
 1455              	.LBB25:
 131:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 1456              		.loc 2 131 3 view .LVU361
 1457              		.syntax unified
 1458              	@ 131 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1459 00c4 62B6     		cpsie i
 1460              	@ 0 "" 2
 1461              		.thumb
 1462              		.syntax unified
 1463              	.LBE25:
 1464              	.LBE24:
1190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
 1465              		.loc 1 1190 11 view .LVU362
1190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
 1466              		.loc 1 1190 18 is_stmt 0 view .LVU363
 1467 00c6 0224     		movs	r4, #2
 1468              	.LVL127:
1190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
 1469              		.loc 1 1190 18 view .LVU364
 1470 00c8 EEE7     		b	.L91
 1471              	.L107:
1197:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = WiFi_HAL_UART_ERROR;
 1472              		.loc 1 1197 7 is_stmt 1 view .LVU365
 1473 00ca FFF7FEFF 		bl	WiFi_UART_Error_Handler
 1474              	.LVL128:
1198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 1475              		.loc 1 1198 7 view .LVU366
1198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 1476              		.loc 1 1198 14 is_stmt 0 view .LVU367
 1477 00ce 0F24     		movs	r4, #15
 1478 00d0 D9E7     		b	.L99
 1479              	.LVL129:
 1480              	.L108:
1205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(!IO_status_flag.command_mode)
 1481              		.loc 1 1205 7 is_stmt 1 view .LVU368
 1482 00d2 FFF7FEFF 		bl	WiFi_switch_to_command_mode
 1483              	.LVL130:
1206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1484              		.loc 1 1206 7 view .LVU369
1206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1485              		.loc 1 1206 12 is_stmt 0 view .LVU370
 1486 00d6 00E0     		b	.L101
 1487              	.L102:
1209:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }
 1488              		.loc 1 1209 11 is_stmt 1 view .LVU371
 1489              		.syntax unified
 1490              	@ 1209 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 1491 00d8 00BF     		nop
 1492              	@ 0 "" 2
 1493              		.thumb
 1494              		.syntax unified
 1495              	.L101:
ARM GAS  /tmp/cc7EC8er.s 			page 55


1206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1496              		.loc 1 1206 12 view .LVU372
1206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1497              		.loc 1 1206 28 is_stmt 0 view .LVU373
 1498 00da 074B     		ldr	r3, .L109+12
 1499 00dc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 1500              		.loc 1 1206 12 view .LVU374
 1501 00de DB09     		lsrs	r3, r3, #7
 1502 00e0 FAD0     		beq	.L102
 1503 00e2 D4E7     		b	.L100
 1504              	.LVL131:
 1505              	.L103:
1152:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 1506              		.loc 1 1152 12 view .LVU375
 1507 00e4 0524     		movs	r4, #5
 1508 00e6 DFE7     		b	.L91
 1509              	.L104:
1155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1510              		.loc 1 1155 12 view .LVU376
 1511 00e8 0224     		movs	r4, #2
 1512 00ea DDE7     		b	.L91
 1513              	.L110:
 1514              		.align	2
 1515              	.L109:
 1516 00ec 00000000 		.word	wifi_client_connected
 1517 00f0 00000000 		.word	WiFi_Counter_Variables
 1518 00f4 00000000 		.word	WiFi_Control_Variables
 1519 00f8 00000000 		.word	IO_status_flag
 1520 00fc 00000000 		.word	UartWiFiHandle
 1521              		.cfi_endproc
 1522              	.LFE292:
 1524              		.section	.text.wifi_file_delete,"ax",%progbits
 1525              		.align	1
 1526              		.global	wifi_file_delete
 1527              		.syntax unified
 1528              		.thumb
 1529              		.thumb_func
 1530              		.fpu fpv4-sp-d16
 1532              	wifi_file_delete:
 1533              	.LVL132:
 1534              	.LFB295:
1271:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1272:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1273:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1274:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1275:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_rename
1276:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Rename an existing file
1277:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName : Filename to be renamed
1278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Mod_FileName : New File Name
1279:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1280:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1281:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_rename(char *FileName, char *Mod_FileName)
1282:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1283:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1284:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1285:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName ==NULL || Mod_FileName == NULL)
ARM GAS  /tmp/cc7EC8er.s 			page 56


1286:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1287:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1288:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_File_Event(FileName,Mod_FileName,-1,-1);
1289:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1290:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1291:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1292:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1293:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1294:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1295:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifndef WIFI_USE_VCOM  
1296:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1297:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_unmount_user_memory
1298:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Unmount/erase user memory volumes
1299:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Volume : Indicates the memory volume. Default: 0.  <1:User Flash 0:SD Card>
1300:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Erase  : Default: 0. when 1, the specified volume is erased.
1301:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1302:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1303:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_unmount_user_memory(int8_t volume, int8_t erase)
1304:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1305:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1307:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   volume = (volume==-1)?0:volume;
1308:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   erase = (erase==-1)?0:erase;
1309:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_File_Event(NULL,NULL,volume,erase);
1310:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1311:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1313:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1314:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1315:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1316:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1317:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_delete
1318:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Delete a file
1319:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName : File Name to be deleted
1320:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of delete file request
1321:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1322:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_delete(char *FileName)
1323:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1535              		.loc 1 1323 1 is_stmt 1 view -0
 1536              		.cfi_startproc
 1537              		@ args = 0, pretend = 0, frame = 0
 1538              		@ frame_needed = 0, uses_anonymous_args = 0
1324:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName==NULL)
 1539              		.loc 1 1324 3 view .LVU378
 1540              		.loc 1 1324 5 is_stmt 0 view .LVU379
 1541 0000 48B1     		cbz	r0, .L113
1323:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName==NULL)
 1542              		.loc 1 1323 1 view .LVU380
 1543 0002 10B5     		push	{r4, lr}
 1544              	.LCFI19:
 1545              		.cfi_def_cfa_offset 8
 1546              		.cfi_offset 4, -8
 1547              		.cfi_offset 14, -4
1325:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1326:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1327:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
 1548              		.loc 1 1327 3 is_stmt 1 view .LVU381
ARM GAS  /tmp/cc7EC8er.s 			page 57


 1549              	.LVL133:
1328:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_File_Event(FileName,NULL,-1,-1);
 1550              		.loc 1 1328 3 view .LVU382
 1551 0004 4FF0FF33 		mov	r3, #-1
 1552 0008 1A46     		mov	r2, r3
 1553 000a 0021     		movs	r1, #0
 1554 000c FFF7FEFF 		bl	Queue_File_Event
 1555              	.LVL134:
1329:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1330:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 1556              		.loc 1 1330 3 view .LVU383
 1557              		.loc 1 1330 12 is_stmt 0 view .LVU384
 1558 0010 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1559              	.LVL135:
1331:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1332:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
 1560              		.loc 1 1332 3 is_stmt 1 view .LVU385
1333:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1561              		.loc 1 1333 1 is_stmt 0 view .LVU386
 1562 0014 10BD     		pop	{r4, pc}
 1563              	.LVL136:
 1564              	.L113:
 1565              	.LCFI20:
 1566              		.cfi_def_cfa_offset 0
 1567              		.cfi_restore 4
 1568              		.cfi_restore 14
1325:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1569              		.loc 1 1325 12 view .LVU387
 1570 0016 0220     		movs	r0, #2
 1571              	.LVL137:
 1572              		.loc 1 1333 1 view .LVU388
 1573 0018 7047     		bx	lr
 1574              		.cfi_endproc
 1575              	.LFE295:
 1577              		.section	.text.wifi_file_list,"ax",%progbits
 1578              		.align	1
 1579              		.global	wifi_file_list
 1580              		.syntax unified
 1581              		.thumb
 1582              		.thumb_func
 1583              		.fpu fpv4-sp-d16
 1585              	wifi_file_list:
 1586              	.LFB296:
1334:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1335:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1336:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1337:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_list
1338:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         List existing filename
1339:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1340:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1341:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1342:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1343:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_list()
1344:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1587              		.loc 1 1344 1 is_stmt 1 view -0
 1588              		.cfi_startproc
 1589              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/cc7EC8er.s 			page 58


 1590              		@ frame_needed = 0, uses_anonymous_args = 0
 1591 0000 00B5     		push	{lr}
 1592              	.LCFI21:
 1593              		.cfi_def_cfa_offset 4
 1594              		.cfi_offset 14, -4
 1595 0002 83B0     		sub	sp, sp, #12
 1596              	.LCFI22:
 1597              		.cfi_def_cfa_offset 16
1345:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
 1598              		.loc 1 1345 3 view .LVU390
 1599              	.LVL138:
1346:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Wifi_File_Event(NULL,NULL,0,-1,-1);
 1600              		.loc 1 1346 3 view .LVU391
 1601 0004 4FF0FF33 		mov	r3, #-1
 1602 0008 0093     		str	r3, [sp]
 1603 000a 0022     		movs	r2, #0
 1604 000c 1146     		mov	r1, r2
 1605 000e 1046     		mov	r0, r2
 1606 0010 FFF7FEFF 		bl	Queue_Wifi_File_Event
 1607              	.LVL139:
1347:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 1608              		.loc 1 1347 3 view .LVU392
 1609              		.loc 1 1347 12 is_stmt 0 view .LVU393
 1610 0014 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1611              	.LVL140:
1348:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 1612              		.loc 1 1348 3 is_stmt 1 view .LVU394
1349:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1613              		.loc 1 1349 1 is_stmt 0 view .LVU395
 1614 0018 03B0     		add	sp, sp, #12
 1615              	.LCFI23:
 1616              		.cfi_def_cfa_offset 4
 1617              		@ sp needed
 1618 001a 5DF804FB 		ldr	pc, [sp], #4
 1619              		.cfi_endproc
 1620              	.LFE296:
 1622              		.section	.text.wifi_file_print_content,"ax",%progbits
 1623              		.align	1
 1624              		.global	wifi_file_print_content
 1625              		.syntax unified
 1626              		.thumb
 1627              		.thumb_func
 1628              		.fpu fpv4-sp-d16
 1630              	wifi_file_print_content:
 1631              	.LVL141:
 1632              	.LFB297:
1350:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1351:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1352:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_print_content
1353:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Print the contents of an existing file
1354:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName : Name of the File whose content is to be printed.
1355:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1356:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1357:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_print_content(uint8_t * FileName)
1358:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1633              		.loc 1 1358 1 is_stmt 1 view -0
 1634              		.cfi_startproc
ARM GAS  /tmp/cc7EC8er.s 			page 59


 1635              		@ args = 0, pretend = 0, frame = 0
 1636              		@ frame_needed = 0, uses_anonymous_args = 0
1359:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName==NULL)
 1637              		.loc 1 1359 3 view .LVU397
 1638              		.loc 1 1359 5 is_stmt 0 view .LVU398
 1639 0000 70B1     		cbz	r0, .L122
1358:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName==NULL)
 1640              		.loc 1 1358 1 view .LVU399
 1641 0002 00B5     		push	{lr}
 1642              	.LCFI24:
 1643              		.cfi_def_cfa_offset 4
 1644              		.cfi_offset 14, -4
 1645 0004 83B0     		sub	sp, sp, #12
 1646              	.LCFI25:
 1647              		.cfi_def_cfa_offset 16
 1648 0006 0146     		mov	r1, r0
1360:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       return WiFi_MODULE_ERROR;
1361:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1362:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
 1649              		.loc 1 1362 3 is_stmt 1 view .LVU400
 1650              	.LVL142:
1363:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Wifi_File_Event(NULL,FileName,0,-1,-1);
 1651              		.loc 1 1363 3 view .LVU401
 1652 0008 4FF0FF33 		mov	r3, #-1
 1653 000c 0093     		str	r3, [sp]
 1654 000e 0022     		movs	r2, #0
 1655 0010 1046     		mov	r0, r2
 1656              	.LVL143:
 1657              		.loc 1 1363 3 is_stmt 0 view .LVU402
 1658 0012 FFF7FEFF 		bl	Queue_Wifi_File_Event
 1659              	.LVL144:
1364:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 1660              		.loc 1 1364 3 is_stmt 1 view .LVU403
 1661              		.loc 1 1364 12 is_stmt 0 view .LVU404
 1662 0016 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1663              	.LVL145:
1365:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
 1664              		.loc 1 1365 3 is_stmt 1 view .LVU405
1366:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1665              		.loc 1 1366 1 is_stmt 0 view .LVU406
 1666 001a 03B0     		add	sp, sp, #12
 1667              	.LCFI26:
 1668              		.cfi_def_cfa_offset 4
 1669              		@ sp needed
 1670 001c 5DF804FB 		ldr	pc, [sp], #4
 1671              	.LVL146:
 1672              	.L122:
 1673              	.LCFI27:
 1674              		.cfi_def_cfa_offset 0
 1675              		.cfi_restore 14
1360:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1676              		.loc 1 1360 14 view .LVU407
 1677 0020 0220     		movs	r0, #2
 1678              	.LVL147:
 1679              		.loc 1 1366 1 view .LVU408
 1680 0022 7047     		bx	lr
 1681              		.cfi_endproc
ARM GAS  /tmp/cc7EC8er.s 			page 60


 1682              	.LFE297:
 1684              		.section	.rodata.wifi_file_create.str1.4,"aMS",%progbits,1
 1685              		.align	2
 1686              	.LC9:
 1687 0000 41542B53 		.ascii	"AT+S.FSC=/%s,%d\015\000"
 1687      2E465343 
 1687      3D2F2573 
 1687      2C25640D 
 1687      00
 1688 0011 000000   		.align	2
 1689              	.LC10:
 1690 0014 41542B53 		.ascii	"AT+S.FSA=/%s,%d\015\000"
 1690      2E465341 
 1690      3D2F2573 
 1690      2C25640D 
 1690      00
 1691              		.section	.text.wifi_file_create,"ax",%progbits
 1692              		.align	1
 1693              		.global	wifi_file_create
 1694              		.syntax unified
 1695              		.thumb
 1696              		.thumb_func
 1697              		.fpu fpv4-sp-d16
 1699              	wifi_file_create:
 1700              	.LVL148:
 1701              	.LFB298:
1367:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1368:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(SPWF01) && defined(CONSOLE_UART_ENABLED)
1369:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1370:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_create
1371:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Create file for HTTP server
1372:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName : Name of the file to be created
1373:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         length   : length of file
1374:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         UserFileBuff : pointer to the buffer
1375:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1376:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1377:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_create(char *FileName, uint16_t length, char *UserFileBuff)
1378:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1702              		.loc 1 1378 1 is_stmt 1 view -0
 1703              		.cfi_startproc
 1704              		@ args = 0, pretend = 0, frame = 0
 1705              		@ frame_needed = 0, uses_anonymous_args = 0
1379:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 1706              		.loc 1 1379 3 view .LVU410
1380:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1381:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(length >1024)
 1707              		.loc 1 1381 3 view .LVU411
 1708              		.loc 1 1381 5 is_stmt 0 view .LVU412
 1709 0000 B1F5806F 		cmp	r1, #1024
 1710 0004 44D8     		bhi	.L129
1378:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 1711              		.loc 1 1378 1 view .LVU413
 1712 0006 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1713              	.LCFI28:
 1714              		.cfi_def_cfa_offset 24
 1715              		.cfi_offset 3, -24
 1716              		.cfi_offset 4, -20
ARM GAS  /tmp/cc7EC8er.s 			page 61


 1717              		.cfi_offset 5, -16
 1718              		.cfi_offset 6, -12
 1719              		.cfi_offset 7, -8
 1720              		.cfi_offset 14, -4
 1721 0008 0646     		mov	r6, r0
 1722 000a 0C46     		mov	r4, r1
 1723 000c 1546     		mov	r5, r2
1382:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_AT_FILE_LENGTH_ERROR;
1383:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1384:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
 1724              		.loc 1 1384 3 is_stmt 1 view .LVU414
 1725 000e FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 1726              	.LVL149:
1385:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1386:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.FSC=/index.html  */
1387:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff, AT_CREATE_FILE, FileName, length);
 1727              		.loc 1 1387 3 view .LVU415
 1728 0012 214F     		ldr	r7, .L136
 1729 0014 2346     		mov	r3, r4
 1730 0016 3246     		mov	r2, r6
 1731 0018 2049     		ldr	r1, .L136+4
 1732 001a 3846     		mov	r0, r7
 1733 001c FFF7FEFF 		bl	sprintf
 1734              	.LVL150:
1388:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1389:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 1735              		.loc 1 1389 3 view .LVU416
 1736              		.loc 1 1389 34 is_stmt 0 view .LVU417
 1737 0020 3846     		mov	r0, r7
 1738 0022 FFF7FEFF 		bl	strlen
 1739              	.LVL151:
 1740              		.loc 1 1389 12 view .LVU418
 1741 0026 80B2     		uxth	r0, r0
 1742 0028 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 1743              	.LVL152:
1390:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 1744              		.loc 1 1390 3 is_stmt 1 view .LVU419
 1745              		.loc 1 1390 5 is_stmt 0 view .LVU420
 1746 002c 00B1     		cbz	r0, .L135
 1747              	.LVL153:
 1748              	.L128:
1391:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1392:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
1393:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     int len = strlen(UserFileBuff);
1394:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1395:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(len >= 1024)
1396:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****        return WiFi_AT_FILE_LENGTH_ERROR;
1397:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1398:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* AT+S.FSA=/index.html  */
1399:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_APPEND_FILE,FileName,len);
1400:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1401:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1402:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
1403:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1404:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_AT_Cmd_Buff, 0x00, sizeof WiFi_AT_Cmd_Buff);
1405:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy((char*)WiFi_AT_Cmd_Buff, (char*) UserFileBuff,len);
1406:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_AT_Cmd_Buff[len+1]='\r';
ARM GAS  /tmp/cc7EC8er.s 			page 62


1407:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1408:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
1409:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
1410:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
1411:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
1412:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1413:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1414:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1415:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1749              		.loc 1 1415 1 view .LVU421
 1750 002e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1751              	.LVL154:
 1752              	.L135:
 1753              	.LBB26:
1392:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     int len = strlen(UserFileBuff);
 1754              		.loc 1 1392 5 is_stmt 1 view .LVU422
1392:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     int len = strlen(UserFileBuff);
 1755              		.loc 1 1392 14 is_stmt 0 view .LVU423
 1756 0030 FFF7FEFF 		bl	USART_Receive_AT_Resp
 1757              	.LVL155:
1393:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1758              		.loc 1 1393 5 is_stmt 1 view .LVU424
1393:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1759              		.loc 1 1393 15 is_stmt 0 view .LVU425
 1760 0034 2846     		mov	r0, r5
 1761 0036 FFF7FEFF 		bl	strlen
 1762              	.LVL156:
 1763 003a 0446     		mov	r4, r0
 1764              	.LVL157:
1395:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****        return WiFi_AT_FILE_LENGTH_ERROR;
 1765              		.loc 1 1395 5 is_stmt 1 view .LVU426
1395:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****        return WiFi_AT_FILE_LENGTH_ERROR;
 1766              		.loc 1 1395 7 is_stmt 0 view .LVU427
 1767 003c B0F5806F 		cmp	r0, #1024
 1768 0040 28DA     		bge	.L130
1399:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1769              		.loc 1 1399 5 is_stmt 1 view .LVU428
 1770 0042 0346     		mov	r3, r0
 1771 0044 3246     		mov	r2, r6
 1772 0046 1649     		ldr	r1, .L136+8
 1773 0048 3846     		mov	r0, r7
 1774              	.LVL158:
1399:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1775              		.loc 1 1399 5 is_stmt 0 view .LVU429
 1776 004a FFF7FEFF 		bl	sprintf
 1777              	.LVL159:
1401:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 1778              		.loc 1 1401 5 is_stmt 1 view .LVU430
1401:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 1779              		.loc 1 1401 36 is_stmt 0 view .LVU431
 1780 004e 3846     		mov	r0, r7
 1781 0050 FFF7FEFF 		bl	strlen
 1782              	.LVL160:
1401:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 1783              		.loc 1 1401 14 view .LVU432
 1784 0054 80B2     		uxth	r0, r0
 1785 0056 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
ARM GAS  /tmp/cc7EC8er.s 			page 63


 1786              	.LVL161:
1402:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1787              		.loc 1 1402 5 is_stmt 1 view .LVU433
1402:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1788              		.loc 1 1402 7 is_stmt 0 view .LVU434
 1789 005a 0028     		cmp	r0, #0
 1790 005c E7D1     		bne	.L128
1404:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy((char*)WiFi_AT_Cmd_Buff, (char*) UserFileBuff,len);
 1791              		.loc 1 1404 7 is_stmt 1 view .LVU435
 1792 005e 4FF40062 		mov	r2, #2048
 1793 0062 0021     		movs	r1, #0
 1794 0064 3846     		mov	r0, r7
 1795              	.LVL162:
1404:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy((char*)WiFi_AT_Cmd_Buff, (char*) UserFileBuff,len);
 1796              		.loc 1 1404 7 is_stmt 0 view .LVU436
 1797 0066 FFF7FEFF 		bl	memset
 1798              	.LVL163:
1405:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       WiFi_AT_Cmd_Buff[len+1]='\r';
 1799              		.loc 1 1405 7 is_stmt 1 view .LVU437
 1800 006a 2246     		mov	r2, r4
 1801 006c 2946     		mov	r1, r5
 1802 006e 3846     		mov	r0, r7
 1803 0070 FFF7FEFF 		bl	memcpy
 1804              	.LVL164:
1406:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 1805              		.loc 1 1406 7 view .LVU438
1406:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 1806              		.loc 1 1406 27 is_stmt 0 view .LVU439
 1807 0074 0134     		adds	r4, r4, #1
 1808              	.LVL165:
1406:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 1809              		.loc 1 1406 30 view .LVU440
 1810 0076 0D23     		movs	r3, #13
 1811 0078 3B55     		strb	r3, [r7, r4]
1407:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
 1812              		.loc 1 1407 7 is_stmt 1 view .LVU441
1407:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
 1813              		.loc 1 1407 38 is_stmt 0 view .LVU442
 1814 007a 3846     		mov	r0, r7
 1815 007c FFF7FEFF 		bl	strlen
 1816              	.LVL166:
1407:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
 1817              		.loc 1 1407 16 view .LVU443
 1818 0080 80B2     		uxth	r0, r0
 1819 0082 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 1820              	.LVL167:
1408:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 1821              		.loc 1 1408 7 is_stmt 1 view .LVU444
1408:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 1822              		.loc 1 1408 9 is_stmt 0 view .LVU445
 1823 0086 0028     		cmp	r0, #0
 1824 0088 D1D1     		bne	.L128
1410:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 1825              		.loc 1 1410 9 is_stmt 1 view .LVU446
1410:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 1826              		.loc 1 1410 18 is_stmt 0 view .LVU447
 1827 008a FFF7FEFF 		bl	USART_Receive_AT_Resp
ARM GAS  /tmp/cc7EC8er.s 			page 64


 1828              	.LVL168:
1410:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 1829              		.loc 1 1410 18 view .LVU448
 1830 008e CEE7     		b	.L128
 1831              	.LVL169:
 1832              	.L129:
 1833              	.LCFI29:
 1834              		.cfi_def_cfa_offset 0
 1835              		.cfi_restore 3
 1836              		.cfi_restore 4
 1837              		.cfi_restore 5
 1838              		.cfi_restore 6
 1839              		.cfi_restore 7
 1840              		.cfi_restore 14
1410:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 1841              		.loc 1 1410 18 view .LVU449
 1842              	.LBE26:
1382:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1843              		.loc 1 1382 12 view .LVU450
 1844 0090 0E20     		movs	r0, #14
 1845              	.LVL170:
 1846              		.loc 1 1415 1 view .LVU451
 1847 0092 7047     		bx	lr
 1848              	.LVL171:
 1849              	.L130:
 1850              	.LCFI30:
 1851              		.cfi_def_cfa_offset 24
 1852              		.cfi_offset 3, -24
 1853              		.cfi_offset 4, -20
 1854              		.cfi_offset 5, -16
 1855              		.cfi_offset 6, -12
 1856              		.cfi_offset 7, -8
 1857              		.cfi_offset 14, -4
 1858              	.LBB27:
1396:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1859              		.loc 1 1396 15 view .LVU452
 1860 0094 0E20     		movs	r0, #14
 1861              	.LVL172:
1396:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
 1862              		.loc 1 1396 15 view .LVU453
 1863 0096 CAE7     		b	.L128
 1864              	.L137:
 1865              		.align	2
 1866              	.L136:
 1867 0098 00000000 		.word	WiFi_AT_Cmd_Buff
 1868 009c 00000000 		.word	.LC9
 1869 00a0 14000000 		.word	.LC10
 1870              	.LBE27:
 1871              		.cfi_endproc
 1872              	.LFE298:
 1874              		.section	.text.wifi_fill_input_buffer,"ax",%progbits
 1875              		.align	1
 1876              		.global	wifi_fill_input_buffer
 1877              		.syntax unified
 1878              		.thumb
 1879              		.thumb_func
 1880              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cc7EC8er.s 			page 65


 1882              	wifi_fill_input_buffer:
 1883              	.LVL173:
 1884              	.LFB299:
1416:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1417:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1418:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_create
1419:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Create file for HTTP server
1420:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName : Name of the file to be created
1421:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         length   : length of file
1422:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         UserFileBuff : pointer to the buffer
1423:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd request
1424:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1425:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1426:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_create(char *FileName, uint16_t length, char *UserFileBuff)
1427:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1428:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1429:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1430:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
1431:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(FileName==NULL || UserFileBuff==NULL)
1432:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1433:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1434:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(length > 1024)
1435:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_AT_FILE_LENGTH_ERROR;
1436:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1437:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Wifi_File_Create_Event((uint8_t *)FileName,length,UserFileBuff);
1438:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1439:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1440:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1441:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1442:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1443:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(SPWF04)
1444:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1445:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_mqtt_connect
1446:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Open a connection with MQTT broker
1447:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Hostname hostname to connect to
1448:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         portnumber portnumber of the Host to connect to
1449:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of mqtt connect request
1450:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1451:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_mqtt_connect(uint8_t * hostname, uint32_t port_num)
1452:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1453:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1454:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1455:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   mqtt_type = CONNECT;
1456:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Mqtt_Connect_Event(hostname, port_num);
1457:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1458:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1459:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1460:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1461:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1462:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1463:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_mqtt_subscribe
1464:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Subscribe topic to an mqtt broker
1465:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  topic: topic to subscribe to
1466:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of mqtt subscribe request
1467:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1468:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_mqtt_subscribe(uint8_t *topic)
1469:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
ARM GAS  /tmp/cc7EC8er.s 			page 66


1470:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1471:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1472:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   mqtt_type = SUBSCRIBE;
1473:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Mqtt_Event(topic);
1474:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1475:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1476:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1477:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1478:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1479:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1480:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_mqtt_publish
1481:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Publish message to an mqtt broker
1482:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  topic: topic to publish to
1483:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: MQTT message length
1484:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Data: data to publish 
1485:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of mqtt publish request
1486:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1487:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_mqtt_publish(uint8_t *topic, uint32_t DataLength, char *Data)
1488:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1489:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1490:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
1491:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   mqtt_type = PUBLISH;
1492:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Mqtt_Publish_Event(topic, DataLength, Data);
1493:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1494:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1495:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1496:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1497:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1498:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1499:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_mqtt_disconnect
1500:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         disconnect from an mqtt broker
1501:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of mqtt disconnect request
1502:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1503:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_mqtt_disconnect(void)
1504:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1505:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1506:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1507:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   mqtt_type = DISCONNECT;
1508:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Mqtt_Event(NULL);
1509:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1510:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1511:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1512:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1513:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1514:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1515:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_mqtt_unsubscribe
1516:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Unsubscribe topic from an mqtt broker
1517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  topic: topic to unsubscribe from 
1518:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of mqtt unsubscribe request
1519:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1520:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_mqtt_unsubscribe(uint8_t *topic)
1521:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1522:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1523:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1524:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   mqtt_type = UNSUBSCRIBE;
1525:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Mqtt_Event(topic);
1526:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
ARM GAS  /tmp/cc7EC8er.s 			page 67


1527:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1528:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1529:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1530:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1531:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1532:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1533:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_list_open_client_socket
1534:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         list opened client sockets
1535:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1536:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status
1537:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1538:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_list_open_client_socket(void)
1539:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1540:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1541:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_List_Event(NET_SOCKET);
1542:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1543:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1544:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1545:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1546:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1547:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_list_open_web_client_socket
1548:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         list opened web client sockets
1549:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1550:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status
1551:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1552:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_list_open_web_client_socket(void)
1553:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1554:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Client_List_Event(WEB_SOCKET);
1556:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1557:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1558:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1559:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1560:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1561:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_list_bound_client_socket
1562:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         list all bounded client sockets
1563:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1564:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status
1565:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1566:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_list_bound_client_socket(void)
1567:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1568:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1569:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Server_List_Event();
1570:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1571:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1572:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1573:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1574:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1575:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1576:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_send_mail
1577:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         SMTP protocol to send a secure mail
1578:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param hostname: DMA resolvable name or IP address of the remote host
1579:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param port:     Server port.
1580:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param From:     Email address on the SMTP server
1581:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param To:       Destinator Email. Multiple email are seperated by semicolon  
1582:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param subject:  Email subject. String message.
1583:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param length:   length of body message
ARM GAS  /tmp/cc7EC8er.s 			page 68


1584:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param Data:     Body of the Mail
1585:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of send mail
1586:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1587:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_send_mail(uint8_t *hostname,
1588:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              uint32_t port_num,
1589:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              uint8_t *from, 
1590:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              uint8_t *to, 
1591:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              uint8_t *subject, 
1592:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              uint32_t length, 
1593:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****                              char *Data)
1594:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1595:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(length >= 1021 || length <= 0)
1596:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
1597:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1598:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1599:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Wifi_Send_Mail_Event(hostname,port_num,from,to,subject,length,Data);
1600:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1601:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1602:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1603:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1604:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1605:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_tftp_get
1606:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Issue an TFTP GET of the given filename to the specified host
1607:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
1608:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  filename: Document path/name
1609:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1610:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd response
1611:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1612:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_tftp_get(uint8_t * hostname, uint32_t port_number, uint8_t * filename)
1613:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1614:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || filename == NULL)
1615:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1616:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1617:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1618:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1619:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.sock_read_ongoing || IO_status_flag.WIND64_count!= 0) //wait till any pendin
1620:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1621:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       __NOP(); //nothing to do
1622:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1623:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1624:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   // AT+S.TFTPGET=host.example.com,port_number,filename,NULL<cr>
1625:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Queue the ftp-get command
1626:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Tftp_Event(hostname, port_number, filename, 0);
1627:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1628:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Make the user wait anyway
1629:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1630:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1631:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1632:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1633:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1634:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_tftp_put
1635:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Issue an TFTP PUT of the given filename from the specified host
1636:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
1637:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  filename: Document path/name
1638:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1639:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd response
1640:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
ARM GAS  /tmp/cc7EC8er.s 			page 69


1641:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_tftp_put(uint8_t * hostname, uint32_t port_number, uint8_t * filename)
1642:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1643:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || filename == NULL)
1644:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1645:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1646:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1647:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1648:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.sock_read_ongoing || IO_status_flag.WIND64_count!= 0) //wait till any pendin
1649:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1650:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       __NOP(); //nothing to do
1651:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1652:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1653:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   // AT+S.TFTPPUT=host.example.com,port_number, filename<cr>
1654:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Queue the ftp-get command
1655:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Tftp_Event(hostname, port_number, filename, 1);
1656:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1657:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Make the user wait anyway
1658:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
1659:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1660:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
1661:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1662:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1663:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1664:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_fill_input_buffer
1665:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Fill buffer for raw text input ssi.
1666:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: Length of the data. (maximum internal buffer size is 128 bytes)
1667:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Data:       Data to save in buffer.
1668:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         NOTE:       {data} used to fill the buffer must be properly set. The first byte is used a
1669:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *                     splitter; so use this special character to fill the buffer with multiple toke
1670:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *                     be directly referred remotely by SSI indexes contained inside the HTML page. 
1671:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *                     example: |hello|world| will create 2 tokens: "hello accessed by <!--|06|In
1672:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *                     world accessed by <!--|06|Input|1|-->. 
1673:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd response
1674:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1675:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1676:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_fill_input_buffer(uint32_t DataLength, char * Data)
1677:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
1678:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SOCKW=00,11<cr> */
1679:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1680:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1681:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength >= 128 || DataLength<=0)
1682:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
1683:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1684:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
1685:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1686:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.INPUTSSI=<length><cr>{data} */
1687:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* should not queue, we have a minimal window of 30sec to write the data*/
1688:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)
1689:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_FILL_INTERNAL_BUFFER,DataLength);
1690:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1691:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
1692:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1693:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();
1694:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy((char*)WiFi_AT_Cmd_Buff, (char*)Data, DataLength);
1695:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(DataLength);
1696:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1697:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
ARM GAS  /tmp/cc7EC8er.s 			page 70


1698:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.INPUTSSI=%d %s", DataLength, "DATA");
1699:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_DataLength = DataLength;
1700:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Counter_Variables.curr_data = Data;
1701:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_POLL);
1702:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;//@TBD: Check return error code
1703:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
1704:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
1705:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1706:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.send_data = WIFI_TRUE;
1707:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.fill_buffer_command_ongoing = WIFI_TRUE;
1708:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
1709:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1710:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   HAL_NVIC_EnableIRQ(TIMx_IRQn);
1711:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1712:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
1713:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1714:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1715:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1716:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(SPWF01)
1717:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /* @brief  wifi_fill_input_buffer
1718:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Fill buffer for raw text input ssi.
1719:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  DataLength: Length of the data. (maximum internal buffer size is 128 bytes)
1720:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  Data:       Data to save in buffer.
1721:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd response
1722:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1723:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1724:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_fill_input_buffer(uint32_t DataLength, char * Data)
1725:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1885              		.loc 1 1725 1 is_stmt 1 view -0
 1886              		.cfi_startproc
 1887              		@ args = 0, pretend = 0, frame = 0
 1888              		@ frame_needed = 0, uses_anonymous_args = 0
 1889              		.loc 1 1725 1 is_stmt 0 view .LVU455
 1890 0000 38B5     		push	{r3, r4, r5, lr}
 1891              	.LCFI31:
 1892              		.cfi_def_cfa_offset 16
 1893              		.cfi_offset 3, -16
 1894              		.cfi_offset 4, -12
 1895              		.cfi_offset 5, -8
 1896              		.cfi_offset 14, -4
1726:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(DataLength >1024 || DataLength <=0)
 1897              		.loc 1 1726 3 is_stmt 1 view .LVU456
 1898              		.loc 1 1726 23 is_stmt 0 view .LVU457
 1899 0002 431E     		subs	r3, r0, #1
 1900              		.loc 1 1726 5 view .LVU458
 1901 0004 B3F5806F 		cmp	r3, #1024
 1902 0008 11D2     		bcs	.L140
 1903 000a 0446     		mov	r4, r0
 1904 000c 0D46     		mov	r5, r1
1727:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
1728:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1729:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 1905              		.loc 1 1729 3 is_stmt 1 view .LVU459
 1906              	.LVL174:
1730:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
 1907              		.loc 1 1730 3 view .LVU460
 1908 000e FFF7FEFF 		bl	Reset_AT_CMD_Buffer
ARM GAS  /tmp/cc7EC8er.s 			page 71


 1909              	.LVL175:
1731:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1732:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   memcpy((char*)WiFi_AT_Cmd_Buff,Data,DataLength);
 1910              		.loc 1 1732 3 view .LVU461
 1911 0012 2246     		mov	r2, r4
 1912 0014 2946     		mov	r1, r5
 1913 0016 0748     		ldr	r0, .L142
 1914 0018 FFF7FEFF 		bl	memcpy
 1915              	.LVL176:
1733:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(DataLength);
 1916              		.loc 1 1733 3 view .LVU462
 1917              		.loc 1 1733 12 is_stmt 0 view .LVU463
 1918 001c A0B2     		uxth	r0, r4
 1919 001e FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 1920              	.LVL177:
 1921 0022 0446     		mov	r4, r0
 1922              	.LVL178:
1734:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1735:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   HAL_NVIC_EnableIRQ(TIMx_IRQn);
 1923              		.loc 1 1735 3 is_stmt 1 view .LVU464
 1924 0024 1D20     		movs	r0, #29
 1925 0026 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 1926              	.LVL179:
1736:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 1927              		.loc 1 1736 3 view .LVU465
 1928              	.L139:
1737:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 1929              		.loc 1 1737 1 is_stmt 0 view .LVU466
 1930 002a 2046     		mov	r0, r4
 1931 002c 38BD     		pop	{r3, r4, r5, pc}
 1932              	.LVL180:
 1933              	.L140:
1727:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 1934              		.loc 1 1727 12 view .LVU467
 1935 002e 0424     		movs	r4, #4
 1936 0030 FBE7     		b	.L139
 1937              	.L143:
 1938 0032 00BF     		.align	2
 1939              	.L142:
 1940 0034 00000000 		.word	WiFi_AT_Cmd_Buff
 1941              		.cfi_endproc
 1942              	.LFE299:
 1944              		.section	.text.wifi_http_get,"ax",%progbits
 1945              		.align	1
 1946              		.global	wifi_http_get
 1947              		.syntax unified
 1948              		.thumb
 1949              		.thumb_func
 1950              		.fpu fpv4-sp-d16
 1952              	wifi_http_get:
 1953              	.LVL181:
 1954              	.LFB300:
1738:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1739:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1740:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1741:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_http_get
1742:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Issue an HTTP GET of the given path to the specified host
ARM GAS  /tmp/cc7EC8er.s 			page 72


1743:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
1744:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  path : Document path
1745:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1746:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : return status of AT cmd response
1747:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1748:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1749:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_http_get(uint8_t * hostname, uint8_t * path, uint32_t port_number)
1750:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 1955              		.loc 1 1750 1 is_stmt 1 view -0
 1956              		.cfi_startproc
 1957              		@ args = 0, pretend = 0, frame = 0
 1958              		@ frame_needed = 0, uses_anonymous_args = 0
1751:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || path == NULL)
 1959              		.loc 1 1751 3 view .LVU469
 1960              		.loc 1 1751 5 is_stmt 0 view .LVU470
 1961 0000 A0B1     		cbz	r0, .L148
1750:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || path == NULL)
 1962              		.loc 1 1750 1 discriminator 1 view .LVU471
 1963 0002 10B5     		push	{r4, lr}
 1964              	.LCFI32:
 1965              		.cfi_def_cfa_offset 8
 1966              		.cfi_offset 4, -8
 1967              		.cfi_offset 14, -4
 1968 0004 0446     		mov	r4, r0
 1969              		.loc 1 1751 23 discriminator 1 view .LVU472
 1970 0006 11B9     		cbnz	r1, .L146
1752:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 1971              		.loc 1 1752 12 view .LVU473
 1972 0008 0220     		movs	r0, #2
 1973              	.LVL182:
 1974              		.loc 1 1752 12 view .LVU474
 1975 000a 0EE0     		b	.L145
 1976              	.LVL183:
 1977              	.L147:
1753:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1754:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1755:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.sock_read_ongoing || IO_status_flag.WIND64_count!= 0) //wait till any pendin
1757:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1758:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       __NOP(); //nothing to do
 1978              		.loc 1 1758 7 is_stmt 1 view .LVU475
 1979              		.syntax unified
 1980              	@ 1758 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 1981 000c 00BF     		nop
 1982              	@ 0 "" 2
 1983              		.thumb
 1984              		.syntax unified
 1985              	.L146:
1756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1986              		.loc 1 1756 8 view .LVU476
1756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1987              		.loc 1 1756 23 is_stmt 0 view .LVU477
 1988 000e 084B     		ldr	r3, .L154
 1989 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1990              		.loc 1 1756 8 view .LVU478
 1991 0012 13F0010F 		tst	r3, #1
ARM GAS  /tmp/cc7EC8er.s 			page 73


 1992 0016 F9D1     		bne	.L147
1756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1993              		.loc 1 1756 59 discriminator 1 view .LVU479
 1994 0018 054B     		ldr	r3, .L154
 1995 001a 5B68     		ldr	r3, [r3, #4]
1756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 1996              		.loc 1 1756 42 discriminator 1 view .LVU480
 1997 001c 002B     		cmp	r3, #0
 1998 001e F5D1     		bne	.L147
1759:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1760:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1761:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   // AT+S.HTTPGET=host.example.com,/index.html, port_number<cr>
1762:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Queue the http-get command
1763:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Http_Event(hostname, path, port_number,0);
 1999              		.loc 1 1763 3 is_stmt 1 view .LVU481
 2000 0020 2046     		mov	r0, r4
 2001              	.LVL184:
 2002              		.loc 1 1763 3 is_stmt 0 view .LVU482
 2003 0022 FFF7FEFF 		bl	Queue_Http_Event
 2004              	.LVL185:
1764:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1765:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Make the user wait anyway
1766:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 2005              		.loc 1 1766 3 is_stmt 1 view .LVU483
 2006              		.loc 1 1766 12 is_stmt 0 view .LVU484
 2007 0026 FFF7FEFF 		bl	USART_Receive_AT_Resp
 2008              	.LVL186:
1767:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1768:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
 2009              		.loc 1 1768 3 is_stmt 1 view .LVU485
 2010              	.L145:
1769:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2011              		.loc 1 1769 1 is_stmt 0 view .LVU486
 2012 002a 10BD     		pop	{r4, pc}
 2013              	.LVL187:
 2014              	.L148:
 2015              	.LCFI33:
 2016              		.cfi_def_cfa_offset 0
 2017              		.cfi_restore 4
 2018              		.cfi_restore 14
1752:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2019              		.loc 1 1752 12 view .LVU487
 2020 002c 0220     		movs	r0, #2
 2021              	.LVL188:
 2022              		.loc 1 1769 1 view .LVU488
 2023 002e 7047     		bx	lr
 2024              	.L155:
 2025              		.align	2
 2026              	.L154:
 2027 0030 00000000 		.word	IO_status_flag
 2028              		.cfi_endproc
 2029              	.LFE300:
 2031              		.section	.text.wifi_http_post,"ax",%progbits
 2032              		.align	1
 2033              		.global	wifi_http_post
 2034              		.syntax unified
 2035              		.thumb
ARM GAS  /tmp/cc7EC8er.s 			page 74


 2036              		.thumb_func
 2037              		.fpu fpv4-sp-d16
 2039              	wifi_http_post:
 2040              	.LVL189:
 2041              	.LFB301:
1770:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1771:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1772:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_http_post
1773:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Issue an HTTP GET of the given path to the specified host
1774:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
1775:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  path: Document path
1776:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1777:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of Http Post Request
1778:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1779:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1780:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_http_post(uint8_t * hostname, uint8_t * path, uint32_t port_number)
1781:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2042              		.loc 1 1781 1 is_stmt 1 view -0
 2043              		.cfi_startproc
 2044              		@ args = 0, pretend = 0, frame = 0
 2045              		@ frame_needed = 0, uses_anonymous_args = 0
1782:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || path == NULL)
 2046              		.loc 1 1782 3 view .LVU490
 2047              		.loc 1 1782 5 is_stmt 0 view .LVU491
 2048 0000 A8B1     		cbz	r0, .L160
1781:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(hostname == NULL || path == NULL)
 2049              		.loc 1 1781 1 discriminator 1 view .LVU492
 2050 0002 10B5     		push	{r4, lr}
 2051              	.LCFI34:
 2052              		.cfi_def_cfa_offset 8
 2053              		.cfi_offset 4, -8
 2054              		.cfi_offset 14, -4
 2055 0004 0446     		mov	r4, r0
 2056              		.loc 1 1782 23 discriminator 1 view .LVU493
 2057 0006 11B9     		cbnz	r1, .L158
1783:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
 2058              		.loc 1 1783 12 view .LVU494
 2059 0008 0220     		movs	r0, #2
 2060              	.LVL190:
 2061              		.loc 1 1783 12 view .LVU495
 2062 000a 0FE0     		b	.L157
 2063              	.LVL191:
 2064              	.L159:
1784:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1785:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
1786:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.sock_read_ongoing || IO_status_flag.WIND64_count!= 0)//wait till any pending
1788:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1789:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       __NOP(); //nothing to do
 2065              		.loc 1 1789 7 is_stmt 1 view .LVU496
 2066              		.syntax unified
 2067              	@ 1789 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 2068 000c 00BF     		nop
 2069              	@ 0 "" 2
 2070              		.thumb
 2071              		.syntax unified
 2072              	.L158:
ARM GAS  /tmp/cc7EC8er.s 			page 75


1787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 2073              		.loc 1 1787 8 view .LVU497
1787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 2074              		.loc 1 1787 23 is_stmt 0 view .LVU498
 2075 000e 094B     		ldr	r3, .L166
 2076 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 2077              		.loc 1 1787 8 view .LVU499
 2078 0012 13F0010F 		tst	r3, #1
 2079 0016 F9D1     		bne	.L159
1787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 2080              		.loc 1 1787 59 discriminator 1 view .LVU500
 2081 0018 064B     		ldr	r3, .L166
 2082 001a 5B68     		ldr	r3, [r3, #4]
1787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
 2083              		.loc 1 1787 42 discriminator 1 view .LVU501
 2084 001c 002B     		cmp	r3, #0
 2085 001e F5D1     		bne	.L159
1790:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1791:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1792:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   // AT+S.HTTPPOST = posttestserver.com,/post.php,name=demo&email=mymail&subject=subj&body=message<
1793:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Http_Event(hostname, path, port_number,1);
 2086              		.loc 1 1793 3 is_stmt 1 view .LVU502
 2087 0020 0123     		movs	r3, #1
 2088 0022 2046     		mov	r0, r4
 2089              	.LVL192:
 2090              		.loc 1 1793 3 is_stmt 0 view .LVU503
 2091 0024 FFF7FEFF 		bl	Queue_Http_Event
 2092              	.LVL193:
1794:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1795:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //Make the user wait anyway
1796:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 2093              		.loc 1 1796 3 is_stmt 1 view .LVU504
 2094              		.loc 1 1796 12 is_stmt 0 view .LVU505
 2095 0028 FFF7FEFF 		bl	USART_Receive_AT_Resp
 2096              	.LVL194:
1797:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 2097              		.loc 1 1797 3 is_stmt 1 view .LVU506
 2098              	.L157:
1798:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2099              		.loc 1 1798 1 is_stmt 0 view .LVU507
 2100 002c 10BD     		pop	{r4, pc}
 2101              	.LVL195:
 2102              	.L160:
 2103              	.LCFI35:
 2104              		.cfi_def_cfa_offset 0
 2105              		.cfi_restore 4
 2106              		.cfi_restore 14
1783:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2107              		.loc 1 1783 12 view .LVU508
 2108 002e 0220     		movs	r0, #2
 2109              	.LVL196:
 2110              		.loc 1 1798 1 view .LVU509
 2111 0030 7047     		bx	lr
 2112              	.L167:
 2113 0032 00BF     		.align	2
 2114              	.L166:
ARM GAS  /tmp/cc7EC8er.s 			page 76


 2115 0034 00000000 		.word	IO_status_flag
 2116              		.cfi_endproc
 2117              	.LFE301:
 2119              		.section	.text.wifi_file_image_create,"ax",%progbits
 2120              		.align	1
 2121              		.global	wifi_file_image_create
 2122              		.syntax unified
 2123              		.thumb
 2124              		.thumb_func
 2125              		.fpu fpv4-sp-d16
 2127              	wifi_file_image_create:
 2128              	.LVL197:
 2129              	.LFB302:
1799:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1800:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1801:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_image_create
1802:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Downloads an updated file system via a single HTTP GET request to the
1803:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         named host and path.
1804:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  HostName: Target host. DNS resolvable name or IP address.
1805:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName: Document path/name
1806:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1807:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t
1808:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_image_create(uint8_t * HostName, uint8_t * FileName, uint32_t port_number)
1810:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2130              		.loc 1 1810 1 is_stmt 1 view -0
 2131              		.cfi_startproc
 2132              		@ args = 0, pretend = 0, frame = 0
 2133              		@ frame_needed = 0, uses_anonymous_args = 0
 2134              		.loc 1 1810 1 is_stmt 0 view .LVU511
 2135 0000 10B5     		push	{r4, lr}
 2136              	.LCFI36:
 2137              		.cfi_def_cfa_offset 8
 2138              		.cfi_offset 4, -8
 2139              		.cfi_offset 14, -4
 2140 0002 82B0     		sub	sp, sp, #8
 2141              	.LCFI37:
 2142              		.cfi_def_cfa_offset 16
1811:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(HostName == NULL || FileName == NULL ||  port_number ==0)
 2143              		.loc 1 1811 3 is_stmt 1 view .LVU512
 2144              		.loc 1 1811 5 is_stmt 0 view .LVU513
 2145 0004 88B1     		cbz	r0, .L170
 2146              		.loc 1 1811 23 discriminator 1 view .LVU514
 2147 0006 91B1     		cbz	r1, .L171
 2148              		.loc 1 1811 43 discriminator 2 view .LVU515
 2149 0008 9AB1     		cbz	r2, .L172
1812:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_MODULE_ERROR;
1813:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1814:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 2150              		.loc 1 1814 5 is_stmt 1 view .LVU516
 2151              	.LVL198:
1815:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Queue_Wifi_File_Event(HostName,FileName,port_number,-1,-1);
 2152              		.loc 1 1815 5 view .LVU517
 2153 000a 4FF0FF33 		mov	r3, #-1
 2154 000e 0093     		str	r3, [sp]
 2155 0010 FFF7FEFF 		bl	Queue_Wifi_File_Event
 2156              	.LVL199:
ARM GAS  /tmp/cc7EC8er.s 			page 77


1816:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 2157              		.loc 1 1816 5 view .LVU518
 2158              		.loc 1 1816 14 is_stmt 0 view .LVU519
 2159 0014 FFF7FEFF 		bl	USART_Receive_AT_Resp
 2160              	.LVL200:
1817:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
1818:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****      if(status == WiFi_MODULE_SUCCESS) 
 2161              		.loc 1 1818 6 is_stmt 1 view .LVU520
 2162              		.loc 1 1818 8 is_stmt 0 view .LVU521
 2163 0018 0446     		mov	r4, r0
 2164 001a 10B1     		cbz	r0, .L174
 2165              	.LVL201:
 2166              	.L169:
1819:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
1820:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Soft reset the module */
1821:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF04
1822:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         Soft_Reset();
1823:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
1824:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         SET_Power_State(PowerSave_State); 
1825:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
1826:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1827:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
1828:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2167              		.loc 1 1828 1 view .LVU522
 2168 001c 2046     		mov	r0, r4
 2169 001e 02B0     		add	sp, sp, #8
 2170              	.LCFI38:
 2171              		.cfi_remember_state
 2172              		.cfi_def_cfa_offset 8
 2173              		@ sp needed
 2174 0020 10BD     		pop	{r4, pc}
 2175              	.LVL202:
 2176              	.L174:
 2177              	.LCFI39:
 2178              		.cfi_restore_state
1824:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 2179              		.loc 1 1824 9 is_stmt 1 view .LVU523
 2180 0022 0120     		movs	r0, #1
 2181              	.LVL203:
1824:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 2182              		.loc 1 1824 9 is_stmt 0 view .LVU524
 2183 0024 FFF7FEFF 		bl	SET_Power_State
 2184              	.LVL204:
 2185 0028 F8E7     		b	.L169
 2186              	.LVL205:
 2187              	.L170:
1812:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2188              		.loc 1 1812 12 view .LVU525
 2189 002a 0224     		movs	r4, #2
 2190 002c F6E7     		b	.L169
 2191              	.L171:
 2192 002e 0224     		movs	r4, #2
 2193 0030 F4E7     		b	.L169
 2194              	.L172:
 2195 0032 0224     		movs	r4, #2
 2196 0034 F2E7     		b	.L169
 2197              		.cfi_endproc
ARM GAS  /tmp/cc7EC8er.s 			page 78


 2198              	.LFE302:
 2200              		.section	.rodata.wifi_file_erase_external_flash.str1.4,"aMS",%progbits,1
 2201              		.align	2
 2202              	.LC11:
 2203 0000 41542B53 		.ascii	"AT+S.HTTPDFSERASE\015\000"
 2203      2E485454 
 2203      50444653 
 2203      45524153 
 2203      450D00
 2204              		.section	.text.wifi_file_erase_external_flash,"ax",%progbits
 2205              		.align	1
 2206              		.global	wifi_file_erase_external_flash
 2207              		.syntax unified
 2208              		.thumb
 2209              		.thumb_func
 2210              		.fpu fpv4-sp-d16
 2212              	wifi_file_erase_external_flash:
 2213              	.LFB303:
1829:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1830:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1831:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_file_erase_external_flash
1832:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         This API allows to erase the content of the external flash
1833:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1834:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t
1835:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1836:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_file_erase_external_flash()
1837:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2214              		.loc 1 1837 1 is_stmt 1 view -0
 2215              		.cfi_startproc
 2216              		@ args = 0, pretend = 0, frame = 0
 2217              		@ frame_needed = 0, uses_anonymous_args = 0
 2218 0000 38B5     		push	{r3, r4, r5, lr}
 2219              	.LCFI40:
 2220              		.cfi_def_cfa_offset 16
 2221              		.cfi_offset 3, -16
 2222              		.cfi_offset 4, -12
 2223              		.cfi_offset 5, -8
 2224              		.cfi_offset 14, -4
1838:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
 2225              		.loc 1 1838 3 view .LVU527
 2226              	.LVL206:
1839:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1840:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
 2227              		.loc 1 1840 3 view .LVU528
 2228 0002 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 2229              	.LVL207:
1841:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   ResetBuffer();
 2230              		.loc 1 1841 3 view .LVU529
 2231 0006 FFF7FEFF 		bl	ResetBuffer
 2232              	.LVL208:
1842:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1843:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.HTTPDFSERASE */
1844:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_ERASE_FLASH_MEMORY);  
 2233              		.loc 1 1844 3 view .LVU530
 2234 000a 0B4D     		ldr	r5, .L177
 2235 000c 0B4C     		ldr	r4, .L177+4
 2236 000e 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
ARM GAS  /tmp/cc7EC8er.s 			page 79


 2237 0010 2860     		str	r0, [r5]	@ unaligned
 2238 0012 6960     		str	r1, [r5, #4]	@ unaligned
 2239 0014 AA60     		str	r2, [r5, #8]	@ unaligned
 2240 0016 EB60     		str	r3, [r5, #12]	@ unaligned
 2241 0018 2288     		ldrh	r2, [r4]	@ unaligned
 2242 001a A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 2243 001c 2A82     		strh	r2, [r5, #16]	@ unaligned
 2244 001e AB74     		strb	r3, [r5, #18]
1845:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 2245              		.loc 1 1845 3 view .LVU531
 2246              		.loc 1 1845 34 is_stmt 0 view .LVU532
 2247 0020 2846     		mov	r0, r5
 2248 0022 FFF7FEFF 		bl	strlen
 2249              	.LVL209:
 2250              		.loc 1 1845 12 view .LVU533
 2251 0026 80B2     		uxth	r0, r0
 2252 0028 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 2253              	.LVL210:
 2254 002c 0446     		mov	r4, r0
 2255              	.LVL211:
1846:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1847:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
1848:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1849:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
1850:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    Soft_Reset();
1851:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
1853:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    SET_Power_State(PowerSave_State); 
 2256              		.loc 1 1853 4 is_stmt 1 view .LVU534
 2257 002e 0120     		movs	r0, #1
 2258 0030 FFF7FEFF 		bl	SET_Power_State
 2259              	.LVL212:
1854:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1855:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1856:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    return status;
 2260              		.loc 1 1856 4 view .LVU535
1857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2261              		.loc 1 1857 1 is_stmt 0 view .LVU536
 2262 0034 2046     		mov	r0, r4
 2263 0036 38BD     		pop	{r3, r4, r5, pc}
 2264              	.LVL213:
 2265              	.L178:
 2266              		.loc 1 1857 1 view .LVU537
 2267              		.align	2
 2268              	.L177:
 2269 0038 00000000 		.word	WiFi_AT_Cmd_Buff
 2270 003c 00000000 		.word	.LC11
 2271              		.cfi_endproc
 2272              	.LFE303:
 2274              		.section	.text.wifi_fw_update,"ax",%progbits
 2275              		.align	1
 2276              		.global	wifi_fw_update
 2277              		.syntax unified
 2278              		.thumb
 2279              		.thumb_func
 2280              		.fpu fpv4-sp-d16
 2282              	wifi_fw_update:
ARM GAS  /tmp/cc7EC8er.s 			page 80


 2283              	.LVL214:
 2284              	.LFB304:
1858:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1859:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1860:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_fw_update
1861:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Issue an HTTP GET of the given path to the specified host and get the firmware updated
1862:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  hostname: Target host. DNS resolvable name or IP address.
1863:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  FileName: Document path/name
1864:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  port_number: port number to connect to
1865:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval None
1866:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1867:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_fw_update(uint8_t * hostname, uint8_t * filename_path, uint32_t port_number)
1868:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2285              		.loc 1 1868 1 is_stmt 1 view -0
 2286              		.cfi_startproc
 2287              		@ args = 0, pretend = 0, frame = 0
 2288              		@ frame_needed = 0, uses_anonymous_args = 0
 2289              		.loc 1 1868 1 is_stmt 0 view .LVU539
 2290 0000 10B5     		push	{r4, lr}
 2291              	.LCFI41:
 2292              		.cfi_def_cfa_offset 8
 2293              		.cfi_offset 4, -8
 2294              		.cfi_offset 14, -4
1869:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 2295              		.loc 1 1869 3 is_stmt 1 view .LVU540
 2296              	.LVL215:
1870:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Queue_Wifi_FW_Update_Event(hostname,filename_path,port_number);
 2297              		.loc 1 1870 3 view .LVU541
 2298 0002 FFF7FEFF 		bl	Queue_Wifi_FW_Update_Event
 2299              	.LVL216:
1871:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
 2300              		.loc 1 1871 3 view .LVU542
 2301              		.loc 1 1871 12 is_stmt 0 view .LVU543
 2302 0006 FFF7FEFF 		bl	USART_Receive_AT_Resp
 2303              	.LVL217:
1872:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1873:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS) {
 2304              		.loc 1 1873 3 is_stmt 1 view .LVU544
 2305              		.loc 1 1873 5 is_stmt 0 view .LVU545
 2306 000a 0446     		mov	r4, r0
 2307 000c 08B1     		cbz	r0, .L182
 2308              	.LVL218:
 2309              	.L180:
1874:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
1875:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* Soft reset the module */
1876:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #ifdef SPWF04
1877:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****          Soft_Reset();
1878:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #else
1879:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****          SET_Power_State(PowerSave_State); 
1880:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
1881:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
1882:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       printf("\r\nFW Updated...\r\nResetting module...");
1883:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       Reset_AT_CMD_Buffer();
1884:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.RESET");
1885:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);     
1886:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //status = USART_Receive_AT_Resp( );//there is no OK after this?
1887:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       //wifi_connected = 0; //reset wifi_connected to get user callback
ARM GAS  /tmp/cc7EC8er.s 			page 81


1888:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       IO_status_flag.WiFi_WIND_State = Undefine_state;
1889:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       while(IO_status_flag.WiFi_WIND_State != WiFiHWStarted)
1890:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
1891:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         //__NOP(); //nothing to do
1892:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
1893:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1894:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
1895:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 2310              		.loc 1 1895 3 is_stmt 1 view .LVU546
1896:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2311              		.loc 1 1896 1 is_stmt 0 view .LVU547
 2312 000e 2046     		mov	r0, r4
 2313 0010 10BD     		pop	{r4, pc}
 2314              	.LVL219:
 2315              	.L182:
1879:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 2316              		.loc 1 1879 10 is_stmt 1 view .LVU548
 2317 0012 0120     		movs	r0, #1
 2318              	.LVL220:
1879:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 2319              		.loc 1 1879 10 is_stmt 0 view .LVU549
 2320 0014 FFF7FEFF 		bl	SET_Power_State
 2321              	.LVL221:
 2322 0018 F9E7     		b	.L180
 2323              		.cfi_endproc
 2324              	.LFE304:
 2326              		.section	.rodata.wifi_network_scan.str1.4,"aMS",%progbits,1
 2327              		.align	2
 2328              	.LC12:
 2329 0000 41542B53 		.ascii	"AT+S.SCAN\015\000"
 2329      2E534341 
 2329      4E0D00
 2330              		.section	.text.wifi_network_scan,"ax",%progbits
 2331              		.align	1
 2332              		.global	wifi_network_scan
 2333              		.syntax unified
 2334              		.thumb
 2335              		.thumb_func
 2336              		.fpu fpv4-sp-d16
 2338              	wifi_network_scan:
 2339              	.LVL222:
 2340              	.LFB305:
1897:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1898:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1899:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_network_scan
1900:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Performs an immediate scan for available network
1901:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
1902:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : WiFi status error
1903:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1904:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_network_scan(wifi_scan *scan_result, uint16_t max_scan_number)
1905:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2341              		.loc 1 1905 1 is_stmt 1 view -0
 2342              		.cfi_startproc
 2343              		@ args = 0, pretend = 0, frame = 0
 2344              		@ frame_needed = 0, uses_anonymous_args = 0
 2345              		.loc 1 1905 1 is_stmt 0 view .LVU551
 2346 0000 08B5     		push	{r3, lr}
ARM GAS  /tmp/cc7EC8er.s 			page 82


 2347              	.LCFI42:
 2348              		.cfi_def_cfa_offset 8
 2349              		.cfi_offset 3, -8
 2350              		.cfi_offset 14, -4
1906:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 2351              		.loc 1 1906 3 is_stmt 1 view .LVU552
 2352              	.LVL223:
1907:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   wifi_scanned_list = scan_result;
 2353              		.loc 1 1907 3 view .LVU553
 2354              		.loc 1 1907 21 is_stmt 0 view .LVU554
 2355 0002 154B     		ldr	r3, .L189
 2356 0004 1860     		str	r0, [r3]
1908:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(max_scan_number>MAX_WIFI_SCAN_NETWORK)
 2357              		.loc 1 1908 3 is_stmt 1 view .LVU555
 2358              		.loc 1 1908 5 is_stmt 0 view .LVU556
 2359 0006 B1F5807F 		cmp	r1, #256
 2360 000a 20D8     		bhi	.L185
1909:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;
1910:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Counter_Variables.user_scan_number = max_scan_number;
 2361              		.loc 1 1910 3 is_stmt 1 view .LVU557
 2362              		.loc 1 1910 43 is_stmt 0 view .LVU558
 2363 000c 134B     		ldr	r3, .L189+4
 2364 000e 1973     		strb	r1, [r3, #12]
1911:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1912:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(WiFi_Control_Variables.Scan_Ongoing)
 2365              		.loc 1 1912 3 is_stmt 1 view .LVU559
 2366              		.loc 1 1912 6 is_stmt 0 view .LVU560
 2367 0010 134B     		ldr	r3, .L189+8
 2368 0012 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2369              		.loc 1 1912 5 view .LVU561
 2370 0014 13F0020F 		tst	r3, #2
 2371 0018 1BD1     		bne	.L186
1913:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1914:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_AT_CMD_BUSY;
1915:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1916:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1917:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.Scan_Ongoing = WIFI_TRUE;
 2372              		.loc 1 1917 3 is_stmt 1 view .LVU562
 2373              		.loc 1 1917 39 is_stmt 0 view .LVU563
 2374 001a 114A     		ldr	r2, .L189+8
 2375 001c 43F00203 		orr	r3, r3, #2
 2376 0020 5370     		strb	r3, [r2, #1]
1918:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1919:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT+S.SCAN: performs an immediate scan for available networks */
1920:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();
 2377              		.loc 1 1920 3 is_stmt 1 view .LVU564
 2378 0022 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 2379              	.LVL224:
1921:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
1922:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WiFi_SCAN);  
 2380              		.loc 1 1922 3 view .LVU565
 2381 0026 0F4A     		ldr	r2, .L189+12
 2382 0028 0F4B     		ldr	r3, .L189+16
 2383 002a 03CB     		ldmia	r3!, {r0, r1}
 2384 002c 1060     		str	r0, [r2]	@ unaligned
 2385 002e 5160     		str	r1, [r2, #4]	@ unaligned
 2386 0030 1988     		ldrh	r1, [r3]	@ unaligned
ARM GAS  /tmp/cc7EC8er.s 			page 83


 2387 0032 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 2388 0034 1181     		strh	r1, [r2, #8]	@ unaligned
 2389 0036 9372     		strb	r3, [r2, #10]
1923:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 2390              		.loc 1 1923 3 view .LVU566
 2391              		.loc 1 1923 34 is_stmt 0 view .LVU567
 2392 0038 1046     		mov	r0, r2
 2393 003a FFF7FEFF 		bl	strlen
 2394              	.LVL225:
 2395              		.loc 1 1923 12 view .LVU568
 2396 003e 80B2     		uxth	r0, r0
 2397 0040 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 2398              	.LVL226:
1924:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else  
1925:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.SCAN=s,NULL");
1926:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
1927:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   IO_status_flag.AT_event_processing = WIFI_SCAN_EVENT;
1928:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;
1929:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
1930:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1931:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 2399              		.loc 1 1931 3 is_stmt 1 view .LVU569
 2400              		.loc 1 1931 5 is_stmt 0 view .LVU570
 2401 0044 00B1     		cbz	r0, .L188
 2402              	.LVL227:
 2403              	.L184:
1932:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1933:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
1934:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1935:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1936:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*At this point we have WiFi_Scan_Buffer filled with RSSI and SSID values*/
1937:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
1938:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2404              		.loc 1 1938 1 view .LVU571
 2405 0046 08BD     		pop	{r3, pc}
 2406              	.LVL228:
 2407              	.L188:
1933:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2408              		.loc 1 1933 5 is_stmt 1 view .LVU572
1933:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2409              		.loc 1 1933 14 is_stmt 0 view .LVU573
 2410 0048 FFF7FEFF 		bl	USART_Receive_AT_Resp
 2411              	.LVL229:
1933:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2412              		.loc 1 1933 14 view .LVU574
 2413 004c FBE7     		b	.L184
 2414              	.LVL230:
 2415              	.L185:
1909:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Counter_Variables.user_scan_number = max_scan_number;
 2416              		.loc 1 1909 12 view .LVU575
 2417 004e 0420     		movs	r0, #4
 2418              	.LVL231:
1909:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Counter_Variables.user_scan_number = max_scan_number;
 2419              		.loc 1 1909 12 view .LVU576
 2420 0050 F9E7     		b	.L184
 2421              	.LVL232:
 2422              	.L186:
ARM GAS  /tmp/cc7EC8er.s 			page 84


1914:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2423              		.loc 1 1914 12 view .LVU577
 2424 0052 0720     		movs	r0, #7
 2425              	.LVL233:
1914:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2426              		.loc 1 1914 12 view .LVU578
 2427 0054 F7E7     		b	.L184
 2428              	.L190:
 2429 0056 00BF     		.align	2
 2430              	.L189:
 2431 0058 00000000 		.word	wifi_scanned_list
 2432 005c 00000000 		.word	WiFi_Counter_Variables
 2433 0060 00000000 		.word	WiFi_Control_Variables
 2434 0064 00000000 		.word	WiFi_AT_Cmd_Buff
 2435 0068 00000000 		.word	.LC12
 2436              		.cfi_endproc
 2437              	.LFE305:
 2439              		.section	.rodata.wifi_ap_start.str1.4,"aMS",%progbits,1
 2440              		.align	2
 2441              	.LC13:
 2442 0000 77696669 		.ascii	"wifi_priv_mode\000"
 2442      5F707269 
 2442      765F6D6F 
 2442      646500
 2443 000f 00       		.align	2
 2444              	.LC14:
 2445 0010 77696669 		.ascii	"wifi_mode\000"
 2445      5F6D6F64 
 2445      6500
 2446 001a 0000     		.align	2
 2447              	.LC15:
 2448 001c 77696669 		.ascii	"wifi_channelnum\000"
 2448      5F636861 
 2448      6E6E656C 
 2448      6E756D00 
 2449              		.section	.text.wifi_ap_start,"ax",%progbits
 2450              		.align	1
 2451              		.global	wifi_ap_start
 2452              		.syntax unified
 2453              		.thumb
 2454              		.thumb_func
 2455              		.fpu fpv4-sp-d16
 2457              	wifi_ap_start:
 2458              	.LVL234:
 2459              	.LFB306:
1939:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
1940:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
1941:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  Set_MiniAP_Mode
1942:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configure Wi-Fi module in AP mode.
1943:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           MiniAP is always configured in open mode (WEP not supported)
1944:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  SSID      : SSID name of the AP
1945:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sec_key   : security key
1946:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  channel_num   : channel number
1947:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  priv_mode : privacy mode
1948:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd 
1949:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
1950:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_ap_start(uint8_t * ssid, char * sec_key, uint8_t channel_num, WiFi_Priv_Mode pri
ARM GAS  /tmp/cc7EC8er.s 			page 85


1951:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2460              		.loc 1 1951 1 is_stmt 1 view -0
 2461              		.cfi_startproc
 2462              		@ args = 0, pretend = 0, frame = 0
 2463              		@ frame_needed = 0, uses_anonymous_args = 0
 2464              		.loc 1 1951 1 is_stmt 0 view .LVU580
 2465 0000 70B5     		push	{r4, r5, r6, lr}
 2466              	.LCFI43:
 2467              		.cfi_def_cfa_offset 16
 2468              		.cfi_offset 4, -16
 2469              		.cfi_offset 5, -12
 2470              		.cfi_offset 6, -8
 2471              		.cfi_offset 14, -4
 2472 0002 0446     		mov	r4, r0
 2473 0004 1646     		mov	r6, r2
 2474 0006 1D46     		mov	r5, r3
1952:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
 2475              		.loc 1 1952 3 is_stmt 1 view .LVU581
 2476              	.LVL235:
1953:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1954:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(sec_key) {
 2477              		.loc 1 1954 3 view .LVU582
 2478              		.loc 1 1954 5 is_stmt 0 view .LVU583
 2479 0008 19B1     		cbz	r1, .L192
 2480 000a 0846     		mov	r0, r1
 2481              	.LVL236:
1955:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_WiFi_SecKey((char*)sec_key);
 2482              		.loc 1 1955 5 is_stmt 1 view .LVU584
 2483              		.loc 1 1955 14 is_stmt 0 view .LVU585
 2484 000c FFF7FEFF 		bl	SET_WiFi_SecKey
 2485              	.LVL237:
1956:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS)
 2486              		.loc 1 1956 5 is_stmt 1 view .LVU586
 2487              		.loc 1 1956 7 is_stmt 0 view .LVU587
 2488 0010 20BB     		cbnz	r0, .L196
 2489              	.LVL238:
 2490              	.L192:
1957:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return WiFi_SecKey_ERROR;
1958:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1959:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1960:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the SSID : AT+S.SSIDTXT=<SSID>*/    
1961:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ssid)
 2491              		.loc 1 1961 3 is_stmt 1 view .LVU588
 2492              		.loc 1 1961 5 is_stmt 0 view .LVU589
 2493 0012 F4B1     		cbz	r4, .L194
1962:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_SSID((char*)ssid);
 2494              		.loc 1 1962 7 is_stmt 1 view .LVU590
 2495              		.loc 1 1962 16 is_stmt 0 view .LVU591
 2496 0014 2046     		mov	r0, r4
 2497 0016 FFF7FEFF 		bl	SET_SSID
 2498              	.LVL239:
 2499              	.L195:
1963:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
1964:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* default SSID : AT+S.SSIDTXT=SPWF_AP*/
1965:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_SSID(WiFi_Config_Variables.wifi_ssid);
1966:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1967:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
ARM GAS  /tmp/cc7EC8er.s 			page 86


 2500              		.loc 1 1967 3 is_stmt 1 view .LVU592
 2501              		.loc 1 1967 5 is_stmt 0 view .LVU593
 2502 001a 08BB     		cbnz	r0, .L197
1968:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_SSID_ERROR;
1969:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
1970:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
1971:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1972:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
1973:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /*AT+S.WIFI=0<cr>*/  
1974:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);  
1975:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
1976:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
1977:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
1978:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
1979:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
1980:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
1981:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
1982:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1983:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
1984:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif    
1985:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1986:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the network privacy mode : AT+S.SCFG=wifi_priv_mode,mode*/ 
1987:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_PRIV_MODE, priv_mode); 
 2503              		.loc 1 1987 4 is_stmt 1 view .LVU594
 2504              		.loc 1 1987 13 is_stmt 0 view .LVU595
 2505 001c 2946     		mov	r1, r5
 2506 001e 1548     		ldr	r0, .L202
 2507              	.LVL240:
 2508              		.loc 1 1987 13 view .LVU596
 2509 0020 FFF7FEFF 		bl	SET_Configuration_Value
 2510              	.LVL241:
1988:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2511              		.loc 1 1988 3 is_stmt 1 view .LVU597
 2512              		.loc 1 1988 5 is_stmt 0 view .LVU598
 2513 0024 F8B9     		cbnz	r0, .L198
1989:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
1990:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
1991:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the network mode (1 = STA, 2 = IBSS, 3 = MiniAP) :: AT+S.SCFG=wifi_mode,3*/  
1992:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_MODE, WiFi_MiniAP_MODE);
 2514              		.loc 1 1992 4 is_stmt 1 view .LVU599
 2515              		.loc 1 1992 13 is_stmt 0 view .LVU600
 2516 0026 0321     		movs	r1, #3
 2517 0028 1348     		ldr	r0, .L202+4
 2518              	.LVL242:
 2519              		.loc 1 1992 13 view .LVU601
 2520 002a FFF7FEFF 		bl	SET_Configuration_Value
 2521              	.LVL243:
1993:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
 2522              		.loc 1 1993 4 is_stmt 1 view .LVU602
 2523              		.loc 1 1993 6 is_stmt 0 view .LVU603
 2524 002e E0B9     		cbnz	r0, .L199
1994:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
1995:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
1996:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the channel number */  
1997:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_CHANNEL_NUMBER, channel_num);
 2525              		.loc 1 1997 4 is_stmt 1 view .LVU604
 2526              		.loc 1 1997 13 is_stmt 0 view .LVU605
ARM GAS  /tmp/cc7EC8er.s 			page 87


 2527 0030 3146     		mov	r1, r6
 2528 0032 1248     		ldr	r0, .L202+8
 2529              	.LVL244:
 2530              		.loc 1 1997 13 view .LVU606
 2531 0034 FFF7FEFF 		bl	SET_Configuration_Value
 2532              	.LVL245:
1998:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
 2533              		.loc 1 1998 4 is_stmt 1 view .LVU607
 2534              		.loc 1 1998 6 is_stmt 0 view .LVU608
 2535 0038 0446     		mov	r4, r0
 2536              	.LVL246:
 2537              		.loc 1 1998 6 view .LVU609
 2538 003a C0B9     		cbnz	r0, .L200
1999:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;    
2000:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
2001:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04  
2002:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /*AT+S.WIFI=1<cr>*/  
2003:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);  
2004:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2005:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2006:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2007:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2008:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2009:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_FALSE;
2010:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2011:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2012:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2013:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif    
2014:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
2015:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF01
2016:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Save the settings on the flash memory : AT&W*/ 
2017:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    Save_Current_Setting();
 2539              		.loc 1 2017 4 is_stmt 1 view .LVU610
 2540 003c FFF7FEFF 		bl	Save_Current_Setting
 2541              	.LVL247:
2018:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    WiFi_Control_Variables.WiFi_Configuration_Done = WIFI_TRUE;
 2542              		.loc 1 2018 4 view .LVU611
 2543              		.loc 1 2018 51 is_stmt 0 view .LVU612
 2544 0040 0F4A     		ldr	r2, .L202+12
 2545 0042 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2546 0044 43F00403 		orr	r3, r3, #4
 2547 0048 1370     		strb	r3, [r2]
2019:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2020:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
2021:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    SET_Power_State(PowerSave_State); 
 2548              		.loc 1 2021 4 is_stmt 1 view .LVU613
 2549 004a 0120     		movs	r0, #1
 2550 004c FFF7FEFF 		bl	SET_Power_State
 2551              	.LVL248:
2022:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2023:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2024:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2025:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set radio OFF */
2026:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2027:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
2028:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2029:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
ARM GAS  /tmp/cc7EC8er.s 			page 88


2030:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2031:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2032:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2033:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set the network privacy mode : AT+S.SCFG=wifi_priv_mode,mode*/ 
2034:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_PRIV_MODE, priv_mode);
2035:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2036:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2037:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2038:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the network mode (1 = STA, 2 = IBSS, 3 = MiniAP) :: AT+S.SCFG=wifi_mode,3*/  
2039:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_MODE, WiFi_MiniAP_MODE);
2040:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
2041:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2042:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2043:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the SSID : AT+S.SSIDTXT=<SSID>*/    
2044:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ssid)
2045:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_SSID((char*)ssid);
2046:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
2047:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* default SSID : AT+S.SSIDTXT=SPWF_AP*/
2048:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_SSID(WiFi_Config_Variables.wifi_ssid);
2049:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2050:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2051:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_SSID_ERROR;
2052:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2053:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the channel number */  
2054:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_CHANNEL_NUMBER, channel_num);
2055:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
2056:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR; 
2057:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2058:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set radio ON */  
2059:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2060:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 1);  
2061:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2062:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2063:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2064:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2065:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.WiFi_Configuration_Done = WIFI_TRUE;
2066:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2067:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2068:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2069:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
 2552              		.loc 1 2069 3 view .LVU614
 2553              		.loc 1 2069 10 is_stmt 0 view .LVU615
 2554 0050 07E0     		b	.L193
 2555              	.LVL249:
 2556              	.L194:
1965:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2557              		.loc 1 1965 5 is_stmt 1 view .LVU616
1965:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2558              		.loc 1 1965 14 is_stmt 0 view .LVU617
 2559 0052 0C4B     		ldr	r3, .L202+16
 2560 0054 5868     		ldr	r0, [r3, #4]
 2561 0056 FFF7FEFF 		bl	SET_SSID
 2562              	.LVL250:
1965:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2563              		.loc 1 1965 14 view .LVU618
 2564 005a DEE7     		b	.L195
 2565              	.L196:
ARM GAS  /tmp/cc7EC8er.s 			page 89


1957:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2566              		.loc 1 1957 16 view .LVU619
 2567 005c 0924     		movs	r4, #9
 2568              	.LVL251:
1957:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2569              		.loc 1 1957 16 view .LVU620
 2570 005e 00E0     		b	.L193
 2571              	.LVL252:
 2572              	.L197:
1968:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 2573              		.loc 1 1968 12 view .LVU621
 2574 0060 0824     		movs	r4, #8
 2575              	.LVL253:
 2576              	.L193:
2070:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2577              		.loc 1 2070 1 view .LVU622
 2578 0062 2046     		mov	r0, r4
 2579 0064 70BD     		pop	{r4, r5, r6, pc}
 2580              	.LVL254:
 2581              	.L198:
1989:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2582              		.loc 1 1989 12 view .LVU623
 2583 0066 0A24     		movs	r4, #10
 2584              	.LVL255:
1989:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2585              		.loc 1 1989 12 view .LVU624
 2586 0068 FBE7     		b	.L193
 2587              	.LVL256:
 2588              	.L199:
1994:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 2589              		.loc 1 1994 12 view .LVU625
 2590 006a 0A24     		movs	r4, #10
 2591              	.LVL257:
1994:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
 2592              		.loc 1 1994 12 view .LVU626
 2593 006c F9E7     		b	.L193
 2594              	.L200:
1999:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 2595              		.loc 1 1999 12 view .LVU627
 2596 006e 0A24     		movs	r4, #10
 2597 0070 F7E7     		b	.L193
 2598              	.L203:
 2599 0072 00BF     		.align	2
 2600              	.L202:
 2601 0074 00000000 		.word	.LC13
 2602 0078 10000000 		.word	.LC14
 2603 007c 1C000000 		.word	.LC15
 2604 0080 00000000 		.word	WiFi_Control_Variables
 2605 0084 00000000 		.word	WiFi_Config_Variables
 2606              		.cfi_endproc
 2607              	.LFE306:
 2609              		.section	.text.wifi_connect,"ax",%progbits
 2610              		.align	1
 2611              		.global	wifi_connect
 2612              		.syntax unified
 2613              		.thumb
 2614              		.thumb_func
ARM GAS  /tmp/cc7EC8er.s 			page 90


 2615              		.fpu fpv4-sp-d16
 2617              	wifi_connect:
 2618              	.LVL258:
 2619              	.LFB307:
2071:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2072:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2073:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2074:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  SET_WiFi_STA_Mode
2075:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configure Wi-Fi module in STA mode
2076:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  SSID     : SSID name
2077:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  sec_key  : security key
2078:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  priv_mode : network privecy mode
2079:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd 
2080:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2081:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_connect(char * ssid, char * sec_key, WiFi_Priv_Mode priv_mode)
2082:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2620              		.loc 1 2082 1 is_stmt 1 view -0
 2621              		.cfi_startproc
 2622              		@ args = 0, pretend = 0, frame = 0
 2623              		@ frame_needed = 0, uses_anonymous_args = 0
 2624              		.loc 1 2082 1 is_stmt 0 view .LVU629
 2625 0000 38B5     		push	{r3, r4, r5, lr}
 2626              	.LCFI44:
 2627              		.cfi_def_cfa_offset 16
 2628              		.cfi_offset 3, -16
 2629              		.cfi_offset 4, -12
 2630              		.cfi_offset 5, -8
 2631              		.cfi_offset 14, -4
2083:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 2632              		.loc 1 2083 3 is_stmt 1 view .LVU630
 2633              	.LVL259:
2084:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(WiFi_Control_Variables.AT_Cmd_Ongoing == WIFI_FALSE)
 2634              		.loc 1 2084 4 view .LVU631
 2635              		.loc 1 2084 45 is_stmt 0 view .LVU632
 2636 0002 1F4B     		ldr	r3, .L215
 2637 0004 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2638              		.loc 1 2084 6 view .LVU633
 2639 0006 13F0040F 		tst	r3, #4
 2640 000a 2ED1     		bne	.L209
 2641 000c 0446     		mov	r4, r0
 2642 000e 1546     		mov	r5, r2
2085:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.AT_Cmd_Ongoing = WIFI_TRUE;
 2643              		.loc 1 2085 5 is_stmt 1 view .LVU634
 2644              		.loc 1 2085 43 is_stmt 0 view .LVU635
 2645 0010 1B4A     		ldr	r2, .L215
 2646              	.LVL260:
 2647              		.loc 1 2085 43 view .LVU636
 2648 0012 43F00403 		orr	r3, r3, #4
 2649 0016 5370     		strb	r3, [r2, #1]
2086:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
2087:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2088:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_AT_CMD_BUSY;
2089:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2090:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2091:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(sec_key) {
 2650              		.loc 1 2091 3 is_stmt 1 view .LVU637
 2651              		.loc 1 2091 5 is_stmt 0 view .LVU638
ARM GAS  /tmp/cc7EC8er.s 			page 91


 2652 0018 19B1     		cbz	r1, .L206
2092:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_WiFi_SecKey((char*)sec_key);
 2653              		.loc 1 2092 5 is_stmt 1 view .LVU639
 2654              		.loc 1 2092 14 is_stmt 0 view .LVU640
 2655 001a 0846     		mov	r0, r1
 2656              	.LVL261:
 2657              		.loc 1 2092 14 view .LVU641
 2658 001c FFF7FEFF 		bl	SET_WiFi_SecKey
 2659              	.LVL262:
2093:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS)
 2660              		.loc 1 2093 5 is_stmt 1 view .LVU642
 2661              		.loc 1 2093 7 is_stmt 0 view .LVU643
 2662 0020 28BB     		cbnz	r0, .L210
 2663              	.LVL263:
 2664              	.L206:
2094:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return WiFi_SecKey_ERROR;
2095:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2096:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
2097:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the SSID : AT+S.SSIDTXT=<SSID>*/    
2098:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ssid)
 2665              		.loc 1 2098 3 is_stmt 1 view .LVU644
 2666              		.loc 1 2098 5 is_stmt 0 view .LVU645
 2667 0022 ECB1     		cbz	r4, .L207
2099:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = SET_SSID((char*)ssid);
 2668              		.loc 1 2099 7 is_stmt 1 view .LVU646
 2669              		.loc 1 2099 16 is_stmt 0 view .LVU647
 2670 0024 2046     		mov	r0, r4
 2671 0026 FFF7FEFF 		bl	SET_SSID
 2672              	.LVL264:
 2673              	.L208:
2100:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
2101:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* default SSID : AT+S.SSIDTXT=SPWF_STA*/
2102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_SSID(WiFi_Config_Variables.wifi_ssid);
2103:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2104:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
 2674              		.loc 1 2104 4 is_stmt 1 view .LVU648
 2675              		.loc 1 2104 6 is_stmt 0 view .LVU649
 2676 002a 10BB     		cbnz	r0, .L211
2105:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_SSID_ERROR;
2106:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2107:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2108:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    
2109:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
2110:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /*AT+S.WIFI=0<cr>*/  
2111:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);  
2112:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2113:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2114:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2115:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2116:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2117:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
2118:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2119:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State != WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2120:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2121:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2122:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set the network privacy mode : AT+S.SCFG=wifi_priv_mode,2*/ 
2123:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_PRIV_MODE, priv_mode);
ARM GAS  /tmp/cc7EC8er.s 			page 92


 2677              		.loc 1 2123 4 is_stmt 1 view .LVU650
 2678              		.loc 1 2123 13 is_stmt 0 view .LVU651
 2679 002c 2946     		mov	r1, r5
 2680 002e 1548     		ldr	r0, .L215+4
 2681              	.LVL265:
 2682              		.loc 1 2123 13 view .LVU652
 2683 0030 FFF7FEFF 		bl	SET_Configuration_Value
 2684              	.LVL266:
2124:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
 2685              		.loc 1 2124 4 is_stmt 1 view .LVU653
 2686              		.loc 1 2124 6 is_stmt 0 view .LVU654
 2687 0034 00BB     		cbnz	r0, .L212
2125:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2126:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2127:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set the network mode (1 = STA, 2 = IBSS, 3 = MiniAP) :: AT+S.SCFG=wifi_mode,1*/  
2128:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    status = SET_Configuration_Value(WIFI_MODE, WiFi_STA_MODE);
 2688              		.loc 1 2128 4 is_stmt 1 view .LVU655
 2689              		.loc 1 2128 13 is_stmt 0 view .LVU656
 2690 0036 0121     		movs	r1, #1
 2691 0038 1348     		ldr	r0, .L215+8
 2692              	.LVL267:
 2693              		.loc 1 2128 13 view .LVU657
 2694 003a FFF7FEFF 		bl	SET_Configuration_Value
 2695              	.LVL268:
2129:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    if(status != WiFi_MODULE_SUCCESS)
 2696              		.loc 1 2129 4 is_stmt 1 view .LVU658
 2697              		.loc 1 2129 6 is_stmt 0 view .LVU659
 2698 003e 0446     		mov	r4, r0
 2699              	.LVL269:
 2700              		.loc 1 2129 6 view .LVU660
 2701 0040 E0B9     		cbnz	r0, .L213
2130:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2131:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2132:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
2133:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=1<cr>*/  
2134:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);  
2135:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2136:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2137:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2138:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2139:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2140:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
2141:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2142:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2143:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2144:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Save the settings on the flash memory : AT&W*/ 
2145:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Save_Current_Setting();
 2702              		.loc 1 2145 3 is_stmt 1 view .LVU661
 2703 0042 FFF7FEFF 		bl	Save_Current_Setting
 2704              	.LVL270:
2146:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2147:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Power_State(PowerSave_State);
 2705              		.loc 1 2147 3 view .LVU662
 2706 0046 0120     		movs	r0, #1
 2707 0048 FFF7FEFF 		bl	SET_Power_State
 2708              	.LVL271:
2148:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
ARM GAS  /tmp/cc7EC8er.s 			page 93


2149:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2150:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2151:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2152:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set radio OFF */
2153:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2154:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
2155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2156:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2157:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2158:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2160:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(sec_key) {
2161:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_WiFi_SecKey((char*)sec_key);
2162:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS)
2163:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return WiFi_SecKey_ERROR;
2164:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2165:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****  
2166:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the SSID : AT+S.SSIDTXT=<SSID>*/    
2167:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(ssid)
2168:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_SSID((char*)ssid);
2169:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else 
2170:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* default SSID : AT+S.SSIDTXT=SPWF_STA*/
2171:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_SSID(WiFi_Config_Variables.wifi_ssid);
2172:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2173:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
2174:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    return WiFi_SSID_ERROR;
2175:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2176:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set the network privacy mode : AT+S.SCFG=wifi_priv_mode,2 */  
2177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_PRIV_MODE, priv_mode);
2178:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2179:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2180:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set wifi_mode to STA */  
2181:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_MODE, WiFi_STA_MODE);
2182:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2184:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set radio ON */  
2185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 1);  
2187:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2188:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2191:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2192:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2193:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2194:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.WiFi_Configuration_Done = WIFI_TRUE;  
 2709              		.loc 1 2194 3 view .LVU663
 2710              		.loc 1 2194 50 is_stmt 0 view .LVU664
 2711 004c 0C4B     		ldr	r3, .L215
 2712 004e 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2713 0050 42F00402 		orr	r2, r2, #4
 2714 0054 1A70     		strb	r2, [r3]
2195:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Control_Variables.AT_Cmd_Ongoing = WIFI_FALSE;
 2715              		.loc 1 2195 3 is_stmt 1 view .LVU665
 2716              		.loc 1 2195 41 is_stmt 0 view .LVU666
 2717 0056 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 2718 0058 6FF38202 		bfc	r2, #2, #1
ARM GAS  /tmp/cc7EC8er.s 			page 94


 2719 005c 5A70     		strb	r2, [r3, #1]
2196:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2197:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status; 
 2720              		.loc 1 2197 3 is_stmt 1 view .LVU667
 2721              		.loc 1 2197 10 is_stmt 0 view .LVU668
 2722 005e 09E0     		b	.L205
 2723              	.LVL272:
 2724              	.L207:
2102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2725              		.loc 1 2102 5 is_stmt 1 view .LVU669
2102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2726              		.loc 1 2102 14 is_stmt 0 view .LVU670
 2727 0060 0A4B     		ldr	r3, .L215+12
 2728 0062 5868     		ldr	r0, [r3, #4]
 2729 0064 FFF7FEFF 		bl	SET_SSID
 2730              	.LVL273:
2102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2731              		.loc 1 2102 14 view .LVU671
 2732 0068 DFE7     		b	.L208
 2733              	.LVL274:
 2734              	.L209:
2088:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2735              		.loc 1 2088 12 view .LVU672
 2736 006a 0724     		movs	r4, #7
 2737 006c 02E0     		b	.L205
 2738              	.LVL275:
 2739              	.L210:
2094:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2740              		.loc 1 2094 16 view .LVU673
 2741 006e 0924     		movs	r4, #9
 2742              	.LVL276:
2094:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
 2743              		.loc 1 2094 16 view .LVU674
 2744 0070 00E0     		b	.L205
 2745              	.LVL277:
 2746              	.L211:
2105:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2747              		.loc 1 2105 12 view .LVU675
 2748 0072 0824     		movs	r4, #8
 2749              	.LVL278:
 2750              	.L205:
2198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2751              		.loc 1 2198 1 view .LVU676
 2752 0074 2046     		mov	r0, r4
 2753 0076 38BD     		pop	{r3, r4, r5, pc}
 2754              	.LVL279:
 2755              	.L212:
2125:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2756              		.loc 1 2125 12 view .LVU677
 2757 0078 0A24     		movs	r4, #10
 2758              	.LVL280:
2125:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2759              		.loc 1 2125 12 view .LVU678
 2760 007a FBE7     		b	.L205
 2761              	.L213:
2130:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2762              		.loc 1 2130 12 view .LVU679
ARM GAS  /tmp/cc7EC8er.s 			page 95


 2763 007c 0A24     		movs	r4, #10
 2764 007e F9E7     		b	.L205
 2765              	.L216:
 2766              		.align	2
 2767              	.L215:
 2768 0080 00000000 		.word	WiFi_Control_Variables
 2769 0084 00000000 		.word	.LC13
 2770 0088 10000000 		.word	.LC14
 2771 008c 00000000 		.word	WiFi_Config_Variables
 2772              		.cfi_endproc
 2773              	.LFE307:
 2775              		.section	.rodata.wifi_adhoc_create.str1.4,"aMS",%progbits,1
 2776              		.align	2
 2777              	.LC16:
 2778 0000 3139322E 		.ascii	"192.168.2.100\000"
 2778      3136382E 
 2778      322E3130 
 2778      3000
 2779 000e 0000     		.align	2
 2780              	.LC17:
 2781 0010 69705F69 		.ascii	"ip_ipaddr\000"
 2781      70616464 
 2781      7200
 2782 001a 0000     		.align	2
 2783              	.LC18:
 2784 001c 3139322E 		.ascii	"192.168.2.1\000"
 2784      3136382E 
 2784      322E3100 
 2785              		.align	2
 2786              	.LC19:
 2787 0028 69705F67 		.ascii	"ip_gw\000"
 2787      7700
 2788 002e 0000     		.align	2
 2789              	.LC20:
 2790 0030 69705F64 		.ascii	"ip_dns\000"
 2790      6E7300
 2791 0037 00       		.align	2
 2792              	.LC21:
 2793 0038 3235352E 		.ascii	"255.255.255.0\000"
 2793      3235352E 
 2793      3235352E 
 2793      3000
 2794 0046 0000     		.align	2
 2795              	.LC22:
 2796 0048 69705F6E 		.ascii	"ip_netmask\000"
 2796      65746D61 
 2796      736B00
 2797 0053 00       		.align	2
 2798              	.LC23:
 2799 0054 69705F75 		.ascii	"ip_use_dhcp\000"
 2799      73655F64 
 2799      68637000 
 2800              		.section	.text.wifi_adhoc_create,"ax",%progbits
 2801              		.align	1
 2802              		.global	wifi_adhoc_create
 2803              		.syntax unified
 2804              		.thumb
ARM GAS  /tmp/cc7EC8er.s 			page 96


 2805              		.thumb_func
 2806              		.fpu fpv4-sp-d16
 2808              	wifi_adhoc_create:
 2809              	.LVL281:
 2810              	.LFB308:
2199:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2200:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2201:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  SET_WiFi_IBSS_Mode
2202:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configure Wi-Fi module in IBSS mode
2203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  SSID     : SSID name
2204:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  priv_mode : network privecy mode
2205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2207:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_adhoc_create(uint8_t * ssid, WiFi_Priv_Mode priv_mode)
2208:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2811              		.loc 1 2208 1 is_stmt 1 view -0
 2812              		.cfi_startproc
 2813              		@ args = 0, pretend = 0, frame = 0
 2814              		@ frame_needed = 0, uses_anonymous_args = 0
 2815              		.loc 1 2208 1 is_stmt 0 view .LVU681
 2816 0000 10B5     		push	{r4, lr}
 2817              	.LCFI45:
 2818              		.cfi_def_cfa_offset 8
 2819              		.cfi_offset 4, -8
 2820              		.cfi_offset 14, -4
 2821 0002 0C46     		mov	r4, r1
2209:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 2822              		.loc 1 2209 3 is_stmt 1 view .LVU682
 2823              	.LVL282:
2210:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2211:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the SSID : AT+S.SSIDTXT=<SSID>*/    
2212:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_SSID((char*)ssid);  
 2824              		.loc 1 2212 3 view .LVU683
 2825              		.loc 1 2212 12 is_stmt 0 view .LVU684
 2826 0004 FFF7FEFF 		bl	SET_SSID
 2827              	.LVL283:
2213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2828              		.loc 1 2213 3 is_stmt 1 view .LVU685
 2829              		.loc 1 2213 5 is_stmt 0 view .LVU686
 2830 0008 40BB     		cbnz	r0, .L219
2214:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_SSID_ERROR;
2215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #ifdef SPWF04
2217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /*AT+S.WIFI=0<cr>*/
2218:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);
2219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2220:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #ifdef CONSOLE_UART_ENABLED
2221:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2222:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
2223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2224:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
2225:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
2226:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         else IO_status_flag.radio_off = WIFI_TRUE;
2227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2228:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
2229:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2230:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
ARM GAS  /tmp/cc7EC8er.s 			page 97


2231:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;  
2232:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif //end of CONSOLE_UART_ENABLED
2233:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2234:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif // end of SPWF04
2235:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2236:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the network privacy mode : AT+S.SCFG=wifi_priv_mode,0*/ 
2237:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_PRIV_MODE, priv_mode);
 2831              		.loc 1 2237 3 is_stmt 1 view .LVU687
 2832              		.loc 1 2237 12 is_stmt 0 view .LVU688
 2833 000a 2146     		mov	r1, r4
 2834 000c 1B48     		ldr	r0, .L227
 2835              	.LVL284:
 2836              		.loc 1 2237 12 view .LVU689
 2837 000e FFF7FEFF 		bl	SET_Configuration_Value
 2838              	.LVL285:
2238:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2839              		.loc 1 2238 3 is_stmt 1 view .LVU690
 2840              		.loc 1 2238 5 is_stmt 0 view .LVU691
 2841 0012 30BB     		cbnz	r0, .L220
2239:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;  
2240:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2241:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set the network mode (1 = STA, 2 = IBSS, 3 = MiniAP) :: AT+S.SCFG=wifi_mode,2*/  
2242:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_MODE, WiFi_IBSS_MODE);
 2842              		.loc 1 2242 3 is_stmt 1 view .LVU692
 2843              		.loc 1 2242 12 is_stmt 0 view .LVU693
 2844 0014 0221     		movs	r1, #2
 2845 0016 1A48     		ldr	r0, .L227+4
 2846              	.LVL286:
 2847              		.loc 1 2242 12 view .LVU694
 2848 0018 FFF7FEFF 		bl	SET_Configuration_Value
 2849              	.LVL287:
2243:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2850              		.loc 1 2243 3 is_stmt 1 view .LVU695
 2851              		.loc 1 2243 5 is_stmt 0 view .LVU696
 2852 001c 18BB     		cbnz	r0, .L221
2244:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2245:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2246:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set IP address */
2247:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Addr(WIFI_IP_ADDRESS, WIFI_IBSS_IP_ADDR);
 2853              		.loc 1 2247 3 is_stmt 1 view .LVU697
 2854              		.loc 1 2247 12 is_stmt 0 view .LVU698
 2855 001e 1949     		ldr	r1, .L227+8
 2856 0020 1948     		ldr	r0, .L227+12
 2857              	.LVL288:
 2858              		.loc 1 2247 12 view .LVU699
 2859 0022 FFF7FEFF 		bl	SET_Configuration_Addr
 2860              	.LVL289:
2248:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2861              		.loc 1 2248 3 is_stmt 1 view .LVU700
 2862              		.loc 1 2248 5 is_stmt 0 view .LVU701
 2863 0026 00BB     		cbnz	r0, .L222
2249:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2250:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2251:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set IP default gateway */
2252:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Addr(WIFI_IP_DEFAULT_GATEWAY, WIFI_IBSS_DEFAULT_GATEWAY);
 2864              		.loc 1 2252 3 is_stmt 1 view .LVU702
 2865              		.loc 1 2252 12 is_stmt 0 view .LVU703
ARM GAS  /tmp/cc7EC8er.s 			page 98


 2866 0028 1849     		ldr	r1, .L227+16
 2867 002a 1948     		ldr	r0, .L227+20
 2868              	.LVL290:
 2869              		.loc 1 2252 12 view .LVU704
 2870 002c FFF7FEFF 		bl	SET_Configuration_Addr
 2871              	.LVL291:
2253:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2872              		.loc 1 2253 3 is_stmt 1 view .LVU705
 2873              		.loc 1 2253 5 is_stmt 0 view .LVU706
 2874 0030 E8B9     		cbnz	r0, .L223
2254:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;  
2255:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2256:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set IP DNS */
2257:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #ifdef SPWF04
2258:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_Configuration_Addr(WIFI_IP_DNS1, WIFI_IBSS_IP_DNS_ADDR);
2259:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
2260:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = SET_Configuration_Addr(WIFI_IP_DNS, WIFI_IBSS_IP_DNS_ADDR);
 2875              		.loc 1 2260 5 is_stmt 1 view .LVU707
 2876              		.loc 1 2260 14 is_stmt 0 view .LVU708
 2877 0032 1649     		ldr	r1, .L227+16
 2878 0034 1748     		ldr	r0, .L227+24
 2879              	.LVL292:
 2880              		.loc 1 2260 14 view .LVU709
 2881 0036 FFF7FEFF 		bl	SET_Configuration_Addr
 2882              	.LVL293:
2261:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
2262:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2883              		.loc 1 2262 3 is_stmt 1 view .LVU710
 2884              		.loc 1 2262 5 is_stmt 0 view .LVU711
 2885 003a D0B9     		cbnz	r0, .L224
2263:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2264:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2265:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set IP netmask */
2266:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Addr(WIFI_IP_NETMASK, WIFI_IBSS_IP_MASK);
 2886              		.loc 1 2266 3 is_stmt 1 view .LVU712
 2887              		.loc 1 2266 12 is_stmt 0 view .LVU713
 2888 003c 1649     		ldr	r1, .L227+28
 2889 003e 1748     		ldr	r0, .L227+32
 2890              	.LVL294:
 2891              		.loc 1 2266 12 view .LVU714
 2892 0040 FFF7FEFF 		bl	SET_Configuration_Addr
 2893              	.LVL295:
2267:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2894              		.loc 1 2267 3 is_stmt 1 view .LVU715
 2895              		.loc 1 2267 5 is_stmt 0 view .LVU716
 2896 0044 0446     		mov	r4, r0
 2897 0046 B0B9     		cbnz	r0, .L225
2268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2269:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2270:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Turn OFF the DHCP */
2271:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(IP_USE_DHCP_SERVER, WIFI_IP_USE_DHCP);   
 2898              		.loc 1 2271 3 is_stmt 1 view .LVU717
 2899 0048 0021     		movs	r1, #0
 2900 004a 1548     		ldr	r0, .L227+36
 2901              	.LVL296:
 2902              		.loc 1 2271 3 is_stmt 0 view .LVU718
 2903 004c FFF7FEFF 		bl	SET_Configuration_Value
ARM GAS  /tmp/cc7EC8er.s 			page 99


 2904              	.LVL297:
2272:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS)
 2905              		.loc 1 2272 3 is_stmt 1 view .LVU719
2273:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_CONFIG_ERROR;
2274:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2275:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #ifdef SPWF04  
2276:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /*AT+S.WIFI=1<cr>*/  
2277:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);
2278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2279:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #ifdef CONSOLE_UART_ENABLED
2280:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2281:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
2282:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2283:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
2284:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
2285:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         else IO_status_flag.radio_off = WIFI_TRUE;
2286:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2287:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
2288:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2289:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
2290:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;
2291:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif //end of CONSOLE_UART_ENABLED
2292:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2293:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif  //end of SPWF04  
2294:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2295:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Save the settings on the flash memory : AT&W*/ 
2296:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Save_Current_Setting();
 2906              		.loc 1 2296 3 view .LVU720
 2907 0050 FFF7FEFF 		bl	Save_Current_Setting
 2908              	.LVL298:
2297:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2298:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
2299:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #ifdef SPWF04
2300:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Soft_Reset();
2301:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
2302:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     SET_Power_State(PowerSave_State);   
 2909              		.loc 1 2302 5 view .LVU721
 2910 0054 0120     		movs	r0, #1
 2911 0056 FFF7FEFF 		bl	SET_Power_State
 2912              	.LVL299:
2303:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
2304:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2305:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 2913              		.loc 1 2305 3 view .LVU722
 2914              		.loc 1 2305 10 is_stmt 0 view .LVU723
 2915 005a 00E0     		b	.L218
 2916              	.LVL300:
 2917              	.L219:
2214:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2918              		.loc 1 2214 12 view .LVU724
 2919 005c 0824     		movs	r4, #8
 2920              	.LVL301:
 2921              	.L218:
2306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 2922              		.loc 1 2306 1 view .LVU725
 2923 005e 2046     		mov	r0, r4
 2924 0060 10BD     		pop	{r4, pc}
ARM GAS  /tmp/cc7EC8er.s 			page 100


 2925              	.LVL302:
 2926              	.L220:
2239:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2927              		.loc 1 2239 12 view .LVU726
 2928 0062 0A24     		movs	r4, #10
 2929 0064 FBE7     		b	.L218
 2930              	.L221:
2244:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2931              		.loc 1 2244 12 view .LVU727
 2932 0066 0A24     		movs	r4, #10
 2933 0068 F9E7     		b	.L218
 2934              	.L222:
2249:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2935              		.loc 1 2249 12 view .LVU728
 2936 006a 0A24     		movs	r4, #10
 2937 006c F7E7     		b	.L218
 2938              	.L223:
2254:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 2939              		.loc 1 2254 12 view .LVU729
 2940 006e 0A24     		movs	r4, #10
 2941 0070 F5E7     		b	.L218
 2942              	.L224:
2263:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2943              		.loc 1 2263 12 view .LVU730
 2944 0072 0A24     		movs	r4, #10
 2945 0074 F3E7     		b	.L218
 2946              	.L225:
2268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 2947              		.loc 1 2268 12 view .LVU731
 2948 0076 0A24     		movs	r4, #10
 2949 0078 F1E7     		b	.L218
 2950              	.L228:
 2951 007a 00BF     		.align	2
 2952              	.L227:
 2953 007c 00000000 		.word	.LC13
 2954 0080 10000000 		.word	.LC14
 2955 0084 00000000 		.word	.LC16
 2956 0088 10000000 		.word	.LC17
 2957 008c 1C000000 		.word	.LC18
 2958 0090 28000000 		.word	.LC19
 2959 0094 30000000 		.word	.LC20
 2960 0098 38000000 		.word	.LC21
 2961 009c 48000000 		.word	.LC22
 2962 00a0 54000000 		.word	.LC23
 2963              		.cfi_endproc
 2964              	.LFE308:
 2966              		.section	.rodata.wifi_standby.str1.4,"aMS",%progbits,1
 2967              		.align	2
 2968              	.LC24:
 2969 0000 736C6565 		.ascii	"sleep_enabled\000"
 2969      705F656E 
 2969      61626C65 
 2969      6400
 2970 000e 0000     		.align	2
 2971              	.LC25:
 2972 0010 7374616E 		.ascii	"standby_enabled\000"
 2972      6462795F 
ARM GAS  /tmp/cc7EC8er.s 			page 101


 2972      656E6162 
 2972      6C656400 
 2973              		.align	2
 2974              	.LC26:
 2975 0020 7374616E 		.ascii	"standby_time\000"
 2975      6462795F 
 2975      74696D65 
 2975      00
 2976 002d 000000   		.align	2
 2977              	.LC27:
 2978 0030 41542B43 		.ascii	"AT+CFUN=%d\015\000"
 2978      46554E3D 
 2978      25640D00 
 2979              		.section	.text.wifi_standby,"ax",%progbits
 2980              		.align	1
 2981              		.global	wifi_standby
 2982              		.syntax unified
 2983              		.thumb
 2984              		.thumb_func
 2985              		.fpu fpv4-sp-d16
 2987              	wifi_standby:
 2988              	.LVL303:
 2989              	.LFB309:
2307:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2308:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2309:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_standby
2310:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configured WiFi module to enter standby
2311:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  arg_standby_time: standby time (in seconds)
2312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2313:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2314:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_standby(uint8_t arg_standby_time)
2315:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 2990              		.loc 1 2315 1 is_stmt 1 view -0
 2991              		.cfi_startproc
 2992              		@ args = 0, pretend = 0, frame = 0
 2993              		@ frame_needed = 0, uses_anonymous_args = 0
 2994              		.loc 1 2315 1 is_stmt 0 view .LVU733
 2995 0000 10B5     		push	{r4, lr}
 2996              	.LCFI46:
 2997              		.cfi_def_cfa_offset 8
 2998              		.cfi_offset 4, -8
 2999              		.cfi_offset 14, -4
 3000 0002 0446     		mov	r4, r0
2316:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*
2317:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   For SPWF01:
2318:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   For Standby, the presence of Jumpers on JP4 and JP3 has the following behaviour:
2319:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   JP3 (middle and bottom): prevents standby and immediately wakes-up module
2320:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   JP3 (middle and top): no effect on standby
2321:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   JP4 (middle and right): prevents wakeup and standby runs forever
2322:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   JP4 (middle and left): no effect on standby
2323:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   */
2324:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2325:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 3001              		.loc 1 2325 3 is_stmt 1 view .LVU734
 3002              	.LVL304:
2326:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2327:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*if(arg_standby_time<2)
ARM GAS  /tmp/cc7EC8er.s 			page 102


2328:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_NOT_SUPPORTED;*/
2329:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
2330:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 3003              		.loc 1 2330 3 view .LVU735
 3004 0004 0021     		movs	r1, #0
 3005 0006 1248     		ldr	r0, .L232
 3006              	.LVL305:
 3007              		.loc 1 2330 3 is_stmt 0 view .LVU736
 3008 0008 FFF7FEFF 		bl	SET_Configuration_Value
 3009              	.LVL306:
2331:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(WIFI_STANDBY_ENABLED, 1);  
 3010              		.loc 1 2331 3 is_stmt 1 view .LVU737
 3011 000c 0121     		movs	r1, #1
 3012 000e 1148     		ldr	r0, .L232+4
 3013 0010 FFF7FEFF 		bl	SET_Configuration_Value
 3014              	.LVL307:
2332:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_STANDBY_TIME, arg_standby_time);  
 3015              		.loc 1 2332 3 view .LVU738
 3016              		.loc 1 2332 12 is_stmt 0 view .LVU739
 3017 0014 2146     		mov	r1, r4
 3018 0016 1048     		ldr	r0, .L232+8
 3019 0018 FFF7FEFF 		bl	SET_Configuration_Value
 3020              	.LVL308:
2333:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2334:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF01  
2335:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* save current setting in flash */
2336:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Save_Current_Setting();
 3021              		.loc 1 2336 3 is_stmt 1 view .LVU740
 3022 001c FFF7FEFF 		bl	Save_Current_Setting
 3023              	.LVL309:
2337:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2338:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2339:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module/ Set the PMS mode */
2340:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04  
2341:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef CONSOLE_UART_ENABLED
2342:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.PMS=%d\r",3);//3->standby
2343:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2344:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2345:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.PMS=%d",3);//3->standby
2346:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);  
2347:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif  
2348:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(WiFi_Control_Variables.in_standby_mode != WIFI_TRUE);//Till WIND:67 arrives
2349:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2350:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else //if SPWF01
2351:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_SET_POWER_STATE,1);//cfun=1->simple reset (SPWF01)
 3024              		.loc 1 2351 3 view .LVU741
 3025 0020 0E4C     		ldr	r4, .L232+12
 3026 0022 0122     		movs	r2, #1
 3027 0024 0E49     		ldr	r1, .L232+16
 3028 0026 2046     		mov	r0, r4
 3029 0028 FFF7FEFF 		bl	sprintf
 3030              	.LVL310:
2352:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3031              		.loc 1 2352 3 view .LVU742
 3032              		.loc 1 2352 34 is_stmt 0 view .LVU743
 3033 002c 2046     		mov	r0, r4
 3034 002e FFF7FEFF 		bl	strlen
ARM GAS  /tmp/cc7EC8er.s 			page 103


 3035              	.LVL311:
 3036              		.loc 1 2352 12 view .LVU744
 3037 0032 80B2     		uxth	r0, r0
 3038 0034 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3039              	.LVL312:
2353:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   IO_status_flag.WiFi_Enabled=WIFI_FALSE;
 3040              		.loc 1 2353 3 is_stmt 1 view .LVU745
 3041              		.loc 1 2353 30 is_stmt 0 view .LVU746
 3042 0038 0A4A     		ldr	r2, .L232+20
 3043 003a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3044 003c 6FF30413 		bfc	r3, #4, #1
 3045 0040 1370     		strb	r3, [r2]
2354:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
 3046              		.loc 1 2354 3 is_stmt 1 view .LVU747
 3047              	.L230:
 3048              		.loc 1 2354 50 discriminator 1 view .LVU748
 3049              		.loc 1 2354 8 discriminator 1 view .LVU749
 3050              		.loc 1 2354 23 is_stmt 0 discriminator 1 view .LVU750
 3051 0042 084B     		ldr	r3, .L232+20
 3052 0044 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3053              		.loc 1 2354 8 discriminator 1 view .LVU751
 3054 0046 13F0100F 		tst	r3, #16
 3055 004a FAD0     		beq	.L230
2355:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2356:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2357:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3056              		.loc 1 2357 1 view .LVU752
 3057 004c 10BD     		pop	{r4, pc}
 3058              	.L233:
 3059 004e 00BF     		.align	2
 3060              	.L232:
 3061 0050 00000000 		.word	.LC24
 3062 0054 10000000 		.word	.LC25
 3063 0058 20000000 		.word	.LC26
 3064 005c 00000000 		.word	WiFi_AT_Cmd_Buff
 3065 0060 30000000 		.word	.LC27
 3066 0064 00000000 		.word	IO_status_flag
 3067              		.cfi_endproc
 3068              	.LFE309:
 3070              		.section	.text.wifi_wakeup,"ax",%progbits
 3071              		.align	1
 3072              		.global	wifi_wakeup
 3073              		.syntax unified
 3074              		.thumb
 3075              		.thumb_func
 3076              		.fpu fpv4-sp-d16
 3078              	wifi_wakeup:
 3079              	.LVL313:
 3080              	.LFB310:
2358:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2359:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04
2360:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2361:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_sleep
2362:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configured WiFi module to enter sleep mode
2363:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Needs to be woken up by wifi_wakeup()
2364:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
2365:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
ARM GAS  /tmp/cc7EC8er.s 			page 104


2366:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2367:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_powersave(power_mode mode)
2368:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
2369:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
2370:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2371:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef CONSOLE_UART_ENABLED
2372:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.PMS=%d\r",mode);
2373:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2374:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2375:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.PMS=%d",mode);
2376:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);  
2377:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2378:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2379:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(mode==wifi_sleep)
2380:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2381:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.Deep_Sleep_Enabled = WIFI_FALSE; 
2382:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(WiFi_Control_Variables.Deep_Sleep_Enabled != WIFI_TRUE);//Till WIND:69 arrives    
2383:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2384:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else if(mode==wifi_reactive)
2385:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2386:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Control_Variables.LowPowerMode_Enabled = WIFI_FALSE;
2387:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(WiFi_Control_Variables.LowPowerMode_Enabled != WIFI_TRUE);//Till WIND:66 arrives
2388:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2389:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else if(mode==wifi_active)
2390:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2391:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.WiFi_Enabled=WIFI_FALSE;
2392:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2393:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2394:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2395:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2396:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
2397:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2398:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2399:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2400:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_wakeup
2401:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         wakeup the module from sleep by setting the GPIO6 through PC13
2402:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         or allow it to go to sleep
2403:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Jumper needed on JP4
2404:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  wakeup wakeup (WIFI_TRUE) or allow sleep(WIFI_FALSE)
2405:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of function call 
2406:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2407:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_wakeup(wifi_bool wakeup)
2408:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 3081              		.loc 1 2408 1 is_stmt 1 view -0
 3082              		.cfi_startproc
 3083              		@ args = 0, pretend = 0, frame = 24
 3084              		@ frame_needed = 0, uses_anonymous_args = 0
 3085              		.loc 1 2408 1 is_stmt 0 view .LVU754
 3086 0000 10B5     		push	{r4, lr}
 3087              	.LCFI47:
 3088              		.cfi_def_cfa_offset 8
 3089              		.cfi_offset 4, -8
 3090              		.cfi_offset 14, -4
 3091 0002 86B0     		sub	sp, sp, #24
 3092              	.LCFI48:
 3093              		.cfi_def_cfa_offset 32
 3094 0004 0446     		mov	r4, r0
ARM GAS  /tmp/cc7EC8er.s 			page 105


2409:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;    
 3095              		.loc 1 2409 3 is_stmt 1 view .LVU755
 3096              	.LVL314:
2410:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2411:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   GPIO_InitTypeDef  WAKEUP_InitStruct;
 3097              		.loc 1 2411 3 view .LVU756
2412:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   RESET_WAKEUP_GPIO_CLK_ENABLE();
 3098              		.loc 1 2412 3 view .LVU757
 3099              	.LBB28:
 3100              		.loc 1 2412 3 view .LVU758
 3101 0006 0021     		movs	r1, #0
 3102 0008 0091     		str	r1, [sp]
 3103              		.loc 1 2412 3 view .LVU759
 3104 000a 134B     		ldr	r3, .L238
 3105 000c 1A6B     		ldr	r2, [r3, #48]
 3106 000e 42F00402 		orr	r2, r2, #4
 3107 0012 1A63     		str	r2, [r3, #48]
 3108              		.loc 1 2412 3 view .LVU760
 3109 0014 1B6B     		ldr	r3, [r3, #48]
 3110 0016 03F00403 		and	r3, r3, #4
 3111 001a 0093     		str	r3, [sp]
 3112              		.loc 1 2412 3 view .LVU761
 3113 001c 009B     		ldr	r3, [sp]
 3114              	.LBE28:
 3115              		.loc 1 2412 3 view .LVU762
2413:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2414:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WAKEUP_InitStruct.Pin       = WiFi_WAKEUP_GPIO_PIN;
 3116              		.loc 1 2414 3 view .LVU763
 3117              		.loc 1 2414 31 is_stmt 0 view .LVU764
 3118 001e 4FF48073 		mov	r3, #256
 3119 0022 0193     		str	r3, [sp, #4]
2415:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WAKEUP_InitStruct.Mode      = GPIO_MODE_OUTPUT_PP;
 3120              		.loc 1 2415 3 is_stmt 1 view .LVU765
 3121              		.loc 1 2415 31 is_stmt 0 view .LVU766
 3122 0024 0123     		movs	r3, #1
 3123 0026 0293     		str	r3, [sp, #8]
2416:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WAKEUP_InitStruct.Pull      = GPIO_NOPULL;
 3124              		.loc 1 2416 3 is_stmt 1 view .LVU767
 3125              		.loc 1 2416 31 is_stmt 0 view .LVU768
 3126 0028 0391     		str	r1, [sp, #12]
2417:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WAKEUP_InitStruct.Speed     = GPIO_SPEED_HIGH;
 3127              		.loc 1 2417 3 is_stmt 1 view .LVU769
 3128              		.loc 1 2417 31 is_stmt 0 view .LVU770
 3129 002a 0323     		movs	r3, #3
 3130 002c 0493     		str	r3, [sp, #16]
2418:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2419:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   HAL_GPIO_Init(WiFi_WAKEUP_GPIO_PORT, &WAKEUP_InitStruct);;
 3131              		.loc 1 2419 3 is_stmt 1 view .LVU771
 3132 002e 01A9     		add	r1, sp, #4
 3133 0030 0A48     		ldr	r0, .L238+4
 3134              	.LVL315:
 3135              		.loc 1 2419 3 is_stmt 0 view .LVU772
 3136 0032 FFF7FEFF 		bl	HAL_GPIO_Init
 3137              	.LVL316:
 3138              		.loc 1 2419 60 is_stmt 1 view .LVU773
2420:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2421:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(wakeup)
ARM GAS  /tmp/cc7EC8er.s 			page 106


 3139              		.loc 1 2421 3 view .LVU774
 3140              		.loc 1 2421 5 is_stmt 0 view .LVU775
 3141 0036 44B1     		cbz	r4, .L235
2422:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     HAL_GPIO_WritePin(WiFi_WAKEUP_GPIO_PORT, WiFi_WAKEUP_GPIO_PIN, GPIO_PIN_SET);
 3142              		.loc 1 2422 5 is_stmt 1 view .LVU776
 3143 0038 0122     		movs	r2, #1
 3144 003a 4FF48071 		mov	r1, #256
 3145 003e 0748     		ldr	r0, .L238+4
 3146 0040 FFF7FEFF 		bl	HAL_GPIO_WritePin
 3147              	.LVL317:
 3148              	.L236:
2423:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else
2424:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     HAL_GPIO_WritePin(WiFi_WAKEUP_GPIO_PORT, WiFi_WAKEUP_GPIO_PIN, GPIO_PIN_RESET);
2425:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2426:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 3149              		.loc 1 2426 3 view .LVU777
2427:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3150              		.loc 1 2427 1 is_stmt 0 view .LVU778
 3151 0044 0020     		movs	r0, #0
 3152 0046 06B0     		add	sp, sp, #24
 3153              	.LCFI49:
 3154              		.cfi_remember_state
 3155              		.cfi_def_cfa_offset 8
 3156              		@ sp needed
 3157 0048 10BD     		pop	{r4, pc}
 3158              	.L235:
 3159              	.LCFI50:
 3160              		.cfi_restore_state
2424:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
 3161              		.loc 1 2424 5 is_stmt 1 view .LVU779
 3162 004a 0022     		movs	r2, #0
 3163 004c 4FF48071 		mov	r1, #256
 3164 0050 0248     		ldr	r0, .L238+4
 3165 0052 FFF7FEFF 		bl	HAL_GPIO_WritePin
 3166              	.LVL318:
 3167 0056 F5E7     		b	.L236
 3168              	.L239:
 3169              		.align	2
 3170              	.L238:
 3171 0058 00380240 		.word	1073887232
 3172 005c 00080240 		.word	1073874944
 3173              		.cfi_endproc
 3174              	.LFE310:
 3176              		.section	.rodata.wifi_init.str1.4,"aMS",%progbits,1
 3177              		.align	2
 3178              	.LC28:
 3179 0000 0D0A0A42 		.ascii	"\015\012\012Build Configuration:\000"
 3179      75696C64 
 3179      20436F6E 
 3179      66696775 
 3179      72617469 
 3180              		.align	2
 3181              	.LC29:
 3182 0018 0D0A4E75 		.ascii	"\015\012Nucleo: NUCLEO-F401RE\015\000"
 3182      636C656F 
 3182      3A204E55 
 3182      434C454F 
ARM GAS  /tmp/cc7EC8er.s 			page 107


 3182      2D463430 
 3183 0031 000000   		.align	2
 3184              	.LC30:
 3185 0034 582D4E75 		.ascii	"X-Nucleo: X-NUCLEO-IDW01M1\015\000"
 3185      636C656F 
 3185      3A20582D 
 3185      4E55434C 
 3185      454F2D49 
 3186              		.align	2
 3187              	.LC31:
 3188 0050 496E7465 		.ascii	"Interface: UART\015\000"
 3188      72666163 
 3188      653A2055 
 3188      4152540D 
 3188      00
 3189 0061 000000   		.align	2
 3190              	.LC32:
 3191 0064 636F6E73 		.ascii	"console1_speed\000"
 3191      6F6C6531 
 3191      5F737065 
 3191      656400
 3192 0073 00       		.align	2
 3193              	.LC33:
 3194 0074 41542657 		.ascii	"AT&W\015\000"
 3194      0D00
 3195 007a 0000     		.align	2
 3196              	.LC34:
 3197 007c 636F6E73 		.ascii	"console1_hwfc\000"
 3197      6F6C6531 
 3197      5F687766 
 3197      6300
 3198 008a 0000     		.align	2
 3199              	.LC35:
 3200 008c 77696669 		.ascii	"wifi_ht_mode\000"
 3200      5F68745F 
 3200      6D6F6465 
 3200      00
 3201 0099 000000   		.align	2
 3202              	.LC36:
 3203 009c 30783030 		.ascii	"0x00003FCF\000"
 3203      30303346 
 3203      434600
 3204 00a7 00       		.align	2
 3205              	.LC37:
 3206 00a8 77696669 		.ascii	"wifi_opr_rate_mask\000"
 3206      5F6F7072 
 3206      5F726174 
 3206      655F6D61 
 3206      736B00
 3207 00bb 00       		.align	2
 3208              	.LC38:
 3209 00bc 30783030 		.ascii	"0x003FFFCF\000"
 3209      33464646 
 3209      434600
 3210 00c7 00       		.align	2
 3211              	.LC39:
 3212 00c8 77696669 		.ascii	"wifi_powersave\000"
ARM GAS  /tmp/cc7EC8er.s 			page 108


 3212      5F706F77 
 3212      65727361 
 3212      766500
 3213 00d7 00       		.align	2
 3214              	.LC40:
 3215 00d8 77696669 		.ascii	"wifi_operational_mode\000"
 3215      5F6F7065 
 3215      72617469 
 3215      6F6E616C 
 3215      5F6D6F64 
 3216 00ee 0000     		.align	2
 3217              	.LC41:
 3218 00f0 77696669 		.ascii	"wifi_beacon_wakeup\000"
 3218      5F626561 
 3218      636F6E5F 
 3218      77616B65 
 3218      757000
 3219 0103 00       		.align	2
 3220              	.LC42:
 3221 0104 77696669 		.ascii	"wifi_listen_interval\000"
 3221      5F6C6973 
 3221      74656E5F 
 3221      696E7465 
 3221      7276616C 
 3222 0119 000000   		.align	2
 3223              	.LC43:
 3224 011c 77696669 		.ascii	"wifi_tx_power\000"
 3224      5F74785F 
 3224      706F7765 
 3224      7200
 3225 012a 0000     		.align	2
 3226              	.LC44:
 3227 012c 69705F68 		.ascii	"ip_hostname\000"
 3227      6F73746E 
 3227      616D6500 
 3228              		.align	2
 3229              	.LC45:
 3230 0138 69705F61 		.ascii	"ip_apdomainname\000"
 3230      70646F6D 
 3230      61696E6E 
 3230      616D6500 
 3231              		.align	2
 3232              	.LC46:
 3233 0148 69705F61 		.ascii	"ip_apredirect\000"
 3233      70726564 
 3233      69726563 
 3233      7400
 3234 0156 0000     		.align	2
 3235              	.LC47:
 3236 0158 69705F68 		.ascii	"ip_http_get_recv_timeout\000"
 3236      7474705F 
 3236      6765745F 
 3236      72656376 
 3236      5F74696D 
 3237 0171 000000   		.align	2
 3238              	.LC48:
 3239 0174 69705F64 		.ascii	"ip_dhcp_timeout\000"
ARM GAS  /tmp/cc7EC8er.s 			page 109


 3239      6863705F 
 3239      74696D65 
 3239      6F757400 
 3240              		.align	2
 3241              	.LC49:
 3242 0184 77696669 		.ascii	"wifi_reg_country\000"
 3242      5F726567 
 3242      5F636F75 
 3242      6E747279 
 3242      00
 3243 0195 000000   		.align	2
 3244              	.LC50:
 3245 0198 41542B53 		.ascii	"AT+S.HTTPD=%d\015\000"
 3245      2E485454 
 3245      50443D25 
 3245      640D00
 3246 01a7 00       		.align	2
 3247              	.LC51:
 3248 01a8 0D0A456E 		.ascii	"\015\012End of Initialization..\015\000"
 3248      64206F66 
 3248      20496E69 
 3248      7469616C 
 3248      697A6174 
 3249              		.section	.text.wifi_init,"ax",%progbits
 3250              		.align	1
 3251              		.global	wifi_init
 3252              		.syntax unified
 3253              		.thumb
 3254              		.thumb_func
 3255              		.fpu fpv4-sp-d16
 3257              	wifi_init:
 3258              	.LVL319:
 3259              	.LFB279:
  82:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 3260              		.loc 1 82 1 view -0
 3261              		.cfi_startproc
 3262              		@ args = 0, pretend = 0, frame = 0
 3263              		@ frame_needed = 0, uses_anonymous_args = 0
  82:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 3264              		.loc 1 82 1 is_stmt 0 view .LVU781
 3265 0000 70B5     		push	{r4, r5, r6, lr}
 3266              	.LCFI51:
 3267              		.cfi_def_cfa_offset 16
 3268              		.cfi_offset 4, -16
 3269              		.cfi_offset 5, -12
 3270              		.cfi_offset 6, -8
 3271              		.cfi_offset 14, -4
 3272 0002 0546     		mov	r5, r0
  83:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 3273              		.loc 1 83 3 is_stmt 1 view .LVU782
 3274              	.LVL320:
  86:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32F4XX_NUCLEO)  
 3275              		.loc 1 86 5 view .LVU783
 3276 0004 9F48     		ldr	r0, .L275
 3277              	.LVL321:
  86:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if defined(USE_STM32F4XX_NUCLEO)  
 3278              		.loc 1 86 5 is_stmt 0 view .LVU784
ARM GAS  /tmp/cc7EC8er.s 			page 110


 3279 0006 FFF7FEFF 		bl	printf
 3280              	.LVL322:
  88:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 3281              		.loc 1 88 7 is_stmt 1 view .LVU785
 3282 000a 9F48     		ldr	r0, .L275+4
 3283 000c FFF7FEFF 		bl	puts
 3284              	.LVL323:
 102:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
 3285              		.loc 1 102 7 view .LVU786
 3286 0010 9E48     		ldr	r0, .L275+8
 3287 0012 FFF7FEFF 		bl	puts
 3288              	.LVL324:
 105:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #else
 3289              		.loc 1 105 7 view .LVU787
 3290 0016 9E48     		ldr	r0, .L275+12
 3291 0018 FFF7FEFF 		bl	puts
 3292              	.LVL325:
 111:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 3293              		.loc 1 111 3 view .LVU788
 3294 001c FFF7FEFF 		bl	WiFi_Module_Init
 3295              	.LVL326:
 114:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 3296              		.loc 1 114 5 view .LVU789
 3297 0020 0120     		movs	r0, #1
 3298 0022 FFF7FEFF 		bl	wifi_wakeup
 3299              	.LVL327:
 117:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 3300              		.loc 1 117 5 view .LVU790
 3301 0026 FFF7FEFF 		bl	wifi_reset
 3302              	.LVL328:
 121:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) 
 3303              		.loc 1 121 7 view .LVU791
 121:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) 
 3304              		.loc 1 121 16 is_stmt 0 view .LVU792
 3305 002a FFF7FEFF 		bl	Restore_Default_Setting
 3306              	.LVL329:
 122:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return status;
 3307              		.loc 1 122 7 is_stmt 1 view .LVU793
 122:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         return status;
 3308              		.loc 1 122 9 is_stmt 0 view .LVU794
 3309 002e 0446     		mov	r4, r0
 3310 0030 08B1     		cbz	r0, .L267
 3311              	.LVL330:
 3312              	.L241:
 475:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 3313              		.loc 1 475 1 view .LVU795
 3314 0032 2046     		mov	r0, r4
 3315 0034 70BD     		pop	{r4, r5, r6, pc}
 3316              	.LVL331:
 3317              	.L267:
 129:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 3318              		.loc 1 129 9 is_stmt 1 view .LVU796
 129:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 3319              		.loc 1 129 18 is_stmt 0 view .LVU797
 3320 0036 696B     		ldr	r1, [r5, #52]
 3321 0038 9648     		ldr	r0, .L275+16
 3322              	.LVL332:
ARM GAS  /tmp/cc7EC8er.s 			page 111


 129:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 3323              		.loc 1 129 18 view .LVU798
 3324 003a FFF7FEFF 		bl	SET_Configuration_Value
 3325              	.LVL333:
 130:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         
 3326              		.loc 1 130 9 is_stmt 1 view .LVU799
 130:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         
 3327              		.loc 1 130 11 is_stmt 0 view .LVU800
 3328 003e 0446     		mov	r4, r0
 3329 0040 0028     		cmp	r0, #0
 3330 0042 F6D1     		bne	.L241
 133:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_SAVE_CURRENT_SETTING);  
 3331              		.loc 1 133 9 is_stmt 1 view .LVU801
 3332 0044 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3333              	.LVL334:
 134:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3334              		.loc 1 134 9 view .LVU802
 3335 0048 934B     		ldr	r3, .L275+20
 3336 004a 944A     		ldr	r2, .L275+24
 3337 004c 1068     		ldr	r0, [r2]
 3338 004e 1860     		str	r0, [r3]	@ unaligned
 3339 0050 9288     		ldrh	r2, [r2, #4]	@ unaligned
 3340 0052 9A80     		strh	r2, [r3, #4]	@ unaligned
 135:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 3341              		.loc 1 135 9 view .LVU803
 135:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 3342              		.loc 1 135 40 is_stmt 0 view .LVU804
 3343 0054 1846     		mov	r0, r3
 3344 0056 FFF7FEFF 		bl	strlen
 3345              	.LVL335:
 135:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 3346              		.loc 1 135 18 view .LVU805
 3347 005a 80B2     		uxth	r0, r0
 3348 005c FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3349              	.LVL336:
 136:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 3350              		.loc 1 136 9 is_stmt 1 view .LVU806
 136:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 3351              		.loc 1 136 11 is_stmt 0 view .LVU807
 3352 0060 20B9     		cbnz	r0, .L242
 138:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3353              		.loc 1 138 11 is_stmt 1 view .LVU808
 138:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3354              		.loc 1 138 20 is_stmt 0 view .LVU809
 3355 0062 FFF7FEFF 		bl	USART_Receive_AT_Resp
 3356              	.LVL337:
 139:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         } 
 3357              		.loc 1 139 11 is_stmt 1 view .LVU810
 139:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         } 
 3358              		.loc 1 139 13 is_stmt 0 view .LVU811
 3359 0066 0446     		mov	r4, r0
 3360 0068 0028     		cmp	r0, #0
 3361 006a E2D1     		bne	.L241
 3362              	.L242:
 143:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 3363              		.loc 1 143 9 is_stmt 1 view .LVU812
 3364 006c FFF7FEFF 		bl	wifi_reset
ARM GAS  /tmp/cc7EC8er.s 			page 112


 3365              	.LVL338:
 150:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 3366              		.loc 1 150 9 view .LVU813
 150:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       #endif
 3367              		.loc 1 150 18 is_stmt 0 view .LVU814
 3368 0070 0121     		movs	r1, #1
 3369 0072 8B48     		ldr	r0, .L275+28
 3370 0074 FFF7FEFF 		bl	SET_Configuration_Value
 3371              	.LVL339:
 153:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 3372              		.loc 1 153 7 is_stmt 1 view .LVU815
 153:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 3373              		.loc 1 153 9 is_stmt 0 view .LVU816
 3374 0078 0446     		mov	r4, r0
 3375 007a 0028     		cmp	r0, #0
 3376 007c D9D1     		bne	.L241
 155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3377              		.loc 1 155 7 is_stmt 1 view .LVU817
 155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3378              		.loc 1 155 16 is_stmt 0 view .LVU818
 3379 007e 296B     		ldr	r1, [r5, #48]
 155:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3380              		.loc 1 155 9 view .LVU819
 3381 0080 29B1     		cbz	r1, .L243
 158:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 3382              		.loc 1 158 9 is_stmt 1 view .LVU820
 158:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 3383              		.loc 1 158 18 is_stmt 0 view .LVU821
 3384 0082 8448     		ldr	r0, .L275+16
 3385              	.LVL340:
 158:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status; 
 3386              		.loc 1 158 18 view .LVU822
 3387 0084 FFF7FEFF 		bl	SET_Configuration_Value
 3388              	.LVL341:
 159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3389              		.loc 1 159 9 is_stmt 1 view .LVU823
 159:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3390              		.loc 1 159 11 is_stmt 0 view .LVU824
 3391 0088 0446     		mov	r4, r0
 3392 008a 0028     		cmp	r0, #0
 3393 008c D1D1     		bne	.L241
 3394              	.L243:
 177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;   
 3395              		.loc 1 177 7 is_stmt 1 view .LVU825
 177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;   
 3396              		.loc 1 177 16 is_stmt 0 view .LVU826
 3397 008e 0021     		movs	r1, #0
 3398 0090 8448     		ldr	r0, .L275+32
 3399              	.LVL342:
 177:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status != WiFi_MODULE_SUCCESS) return status;   
 3400              		.loc 1 177 16 view .LVU827
 3401 0092 FFF7FEFF 		bl	SET_Configuration_Value
 3402              	.LVL343:
 178:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 3403              		.loc 1 178 7 is_stmt 1 view .LVU828
 178:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 3404              		.loc 1 178 9 is_stmt 0 view .LVU829
ARM GAS  /tmp/cc7EC8er.s 			page 113


 3405 0096 0446     		mov	r4, r0
 3406 0098 0028     		cmp	r0, #0
 3407 009a CAD1     		bne	.L241
 180:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3408              		.loc 1 180 7 is_stmt 1 view .LVU830
 180:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3409              		.loc 1 180 20 is_stmt 0 view .LVU831
 3410 009c 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 180:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3411              		.loc 1 180 7 view .LVU832
 3412 009e 002B     		cmp	r3, #0
 3413 00a0 00F0B480 		beq	.L244
 3414 00a4 012B     		cmp	r3, #1
 3415 00a6 00F0C280 		beq	.L245
 3416              	.L246:
 198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3417              		.loc 1 198 7 is_stmt 1 view .LVU833
 198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3418              		.loc 1 198 20 is_stmt 0 view .LVU834
 3419 00aa 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 198:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3420              		.loc 1 198 7 view .LVU835
 3421 00ac 012B     		cmp	r3, #1
 3422 00ae 00F02181 		beq	.L247
 3423 00b2 022B     		cmp	r3, #2
 3424 00b4 00F04F81 		beq	.L248
 3425 00b8 002B     		cmp	r3, #0
 3426 00ba 00F0C980 		beq	.L268
 3427              	.L249:
 240:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3428              		.loc 1 240 7 is_stmt 1 view .LVU836
 240:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3429              		.loc 1 240 20 is_stmt 0 view .LVU837
 3430 00be A978     		ldrb	r1, [r5, #2]	@ zero_extendqisi2
 240:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3431              		.loc 1 240 7 view .LVU838
 3432 00c0 0329     		cmp	r1, #3
 3433 00c2 40F27981 		bls	.L269
 3434              	.L250:
 253:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3435              		.loc 1 253 7 is_stmt 1 view .LVU839
 253:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3436              		.loc 1 253 20 is_stmt 0 view .LVU840
 3437 00c6 E978     		ldrb	r1, [r5, #3]	@ zero_extendqisi2
 253:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3438              		.loc 1 253 7 view .LVU841
 3439 00c8 0229     		cmp	r1, #2
 3440 00ca 40F28081 		bls	.L270
 3441              	.L251:
 266:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3442              		.loc 1 266 7 is_stmt 1 view .LVU842
 266:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3443              		.loc 1 266 16 is_stmt 0 view .LVU843
 3444 00ce 6968     		ldr	r1, [r5, #4]
 266:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3445              		.loc 1 266 9 view .LVU844
 3446 00d0 29B1     		cbz	r1, .L252
ARM GAS  /tmp/cc7EC8er.s 			page 114


 268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3447              		.loc 1 268 9 is_stmt 1 view .LVU845
 268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3448              		.loc 1 268 18 is_stmt 0 view .LVU846
 3449 00d2 7548     		ldr	r0, .L275+36
 3450              	.LVL344:
 268:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3451              		.loc 1 268 18 view .LVU847
 3452 00d4 FFF7FEFF 		bl	SET_Configuration_Addr
 3453              	.LVL345:
 269:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3454              		.loc 1 269 9 is_stmt 1 view .LVU848
 269:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3455              		.loc 1 269 11 is_stmt 0 view .LVU849
 3456 00d8 0446     		mov	r4, r0
 3457 00da 0028     		cmp	r0, #0
 3458 00dc A9D1     		bne	.L241
 3459              	.L252:
 272:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3460              		.loc 1 272 7 is_stmt 1 view .LVU850
 272:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3461              		.loc 1 272 16 is_stmt 0 view .LVU851
 3462 00de A968     		ldr	r1, [r5, #8]
 272:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3463              		.loc 1 272 9 view .LVU852
 3464 00e0 29B1     		cbz	r1, .L253
 274:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3465              		.loc 1 274 9 is_stmt 1 view .LVU853
 274:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3466              		.loc 1 274 18 is_stmt 0 view .LVU854
 3467 00e2 7248     		ldr	r0, .L275+40
 3468              	.LVL346:
 274:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3469              		.loc 1 274 18 view .LVU855
 3470 00e4 FFF7FEFF 		bl	SET_Configuration_Addr
 3471              	.LVL347:
 275:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3472              		.loc 1 275 9 is_stmt 1 view .LVU856
 275:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3473              		.loc 1 275 11 is_stmt 0 view .LVU857
 3474 00e8 0446     		mov	r4, r0
 3475 00ea 0028     		cmp	r0, #0
 3476 00ec A1D1     		bne	.L241
 3477              	.L253:
 278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3478              		.loc 1 278 7 is_stmt 1 view .LVU858
 278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3479              		.loc 1 278 16 is_stmt 0 view .LVU859
 3480 00ee E968     		ldr	r1, [r5, #12]
 278:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3481              		.loc 1 278 9 view .LVU860
 3482 00f0 29B1     		cbz	r1, .L254
 280:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3483              		.loc 1 280 9 is_stmt 1 view .LVU861
 280:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3484              		.loc 1 280 18 is_stmt 0 view .LVU862
 3485 00f2 6F48     		ldr	r0, .L275+44
ARM GAS  /tmp/cc7EC8er.s 			page 115


 3486              	.LVL348:
 280:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3487              		.loc 1 280 18 view .LVU863
 3488 00f4 FFF7FEFF 		bl	SET_Configuration_Addr
 3489              	.LVL349:
 281:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3490              		.loc 1 281 9 is_stmt 1 view .LVU864
 281:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3491              		.loc 1 281 11 is_stmt 0 view .LVU865
 3492 00f8 0446     		mov	r4, r0
 3493 00fa 0028     		cmp	r0, #0
 3494 00fc 99D1     		bne	.L241
 3495              	.L254:
 284:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3496              		.loc 1 284 7 is_stmt 1 view .LVU866
 284:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3497              		.loc 1 284 16 is_stmt 0 view .LVU867
 3498 00fe 2969     		ldr	r1, [r5, #16]
 284:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3499              		.loc 1 284 9 view .LVU868
 3500 0100 29B1     		cbz	r1, .L255
 289:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #endif
 3501              		.loc 1 289 13 is_stmt 1 view .LVU869
 289:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #endif
 3502              		.loc 1 289 22 is_stmt 0 view .LVU870
 3503 0102 6C48     		ldr	r0, .L275+48
 3504              	.LVL350:
 289:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #endif
 3505              		.loc 1 289 22 view .LVU871
 3506 0104 FFF7FEFF 		bl	SET_Configuration_Addr
 3507              	.LVL351:
 291:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3508              		.loc 1 291 13 is_stmt 1 view .LVU872
 291:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3509              		.loc 1 291 15 is_stmt 0 view .LVU873
 3510 0108 0446     		mov	r4, r0
 3511 010a 0028     		cmp	r0, #0
 3512 010c 91D1     		bne	.L241
 3513              	.L255:
 294:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3514              		.loc 1 294 7 is_stmt 1 view .LVU874
 294:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3515              		.loc 1 294 16 is_stmt 0 view .LVU875
 3516 010e 6969     		ldr	r1, [r5, #20]
 294:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3517              		.loc 1 294 9 view .LVU876
 3518 0110 29B1     		cbz	r1, .L256
 296:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3519              		.loc 1 296 9 is_stmt 1 view .LVU877
 296:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3520              		.loc 1 296 18 is_stmt 0 view .LVU878
 3521 0112 6948     		ldr	r0, .L275+52
 3522              	.LVL352:
 296:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3523              		.loc 1 296 18 view .LVU879
 3524 0114 FFF7FEFF 		bl	SET_Configuration_Addr
 3525              	.LVL353:
ARM GAS  /tmp/cc7EC8er.s 			page 116


 297:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3526              		.loc 1 297 9 is_stmt 1 view .LVU880
 297:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3527              		.loc 1 297 11 is_stmt 0 view .LVU881
 3528 0118 0446     		mov	r4, r0
 3529 011a 0028     		cmp	r0, #0
 3530 011c 89D1     		bne	.L241
 3531              	.L256:
 300:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3532              		.loc 1 300 7 is_stmt 1 view .LVU882
 300:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3533              		.loc 1 300 16 is_stmt 0 view .LVU883
 3534 011e E969     		ldr	r1, [r5, #28]
 300:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3535              		.loc 1 300 9 view .LVU884
 3536 0120 29B1     		cbz	r1, .L257
 302:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3537              		.loc 1 302 9 is_stmt 1 view .LVU885
 302:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3538              		.loc 1 302 18 is_stmt 0 view .LVU886
 3539 0122 6648     		ldr	r0, .L275+56
 3540              	.LVL354:
 302:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3541              		.loc 1 302 18 view .LVU887
 3542 0124 FFF7FEFF 		bl	SET_Configuration_Addr
 3543              	.LVL355:
 303:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3544              		.loc 1 303 9 is_stmt 1 view .LVU888
 303:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3545              		.loc 1 303 11 is_stmt 0 view .LVU889
 3546 0128 0446     		mov	r4, r0
 3547 012a 0028     		cmp	r0, #0
 3548 012c 81D1     		bne	.L241
 3549              	.L257:
 306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3550              		.loc 1 306 7 is_stmt 1 view .LVU890
 306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3551              		.loc 1 306 16 is_stmt 0 view .LVU891
 3552 012e 296A     		ldr	r1, [r5, #32]
 306:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3553              		.loc 1 306 9 view .LVU892
 3554 0130 31B1     		cbz	r1, .L258
 308:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3555              		.loc 1 308 9 is_stmt 1 view .LVU893
 308:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3556              		.loc 1 308 18 is_stmt 0 view .LVU894
 3557 0132 6348     		ldr	r0, .L275+60
 3558              	.LVL356:
 308:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3559              		.loc 1 308 18 view .LVU895
 3560 0134 FFF7FEFF 		bl	SET_Configuration_Addr
 3561              	.LVL357:
 309:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3562              		.loc 1 309 9 is_stmt 1 view .LVU896
 309:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 3563              		.loc 1 309 11 is_stmt 0 view .LVU897
 3564 0138 0446     		mov	r4, r0
ARM GAS  /tmp/cc7EC8er.s 			page 117


 3565 013a 0028     		cmp	r0, #0
 3566 013c 7FF479AF 		bne	.L241
 3567              	.L258:
 312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3568              		.loc 1 312 7 is_stmt 1 view .LVU898
 312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3569              		.loc 1 312 16 is_stmt 0 view .LVU899
 3570 0140 6B6A     		ldr	r3, [r5, #36]
 312:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3571              		.loc 1 312 9 view .LVU900
 3572 0142 002B     		cmp	r3, #0
 3573 0144 40F04B81 		bne	.L271
 3574              	.L259:
 317:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3575              		.loc 1 317 7 is_stmt 1 view .LVU901
 317:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3576              		.loc 1 317 16 is_stmt 0 view .LVU902
 3577 0148 A96A     		ldr	r1, [r5, #40]
 317:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3578              		.loc 1 317 9 view .LVU903
 3579 014a 0029     		cmp	r1, #0
 3580 014c 40F05381 		bne	.L272
 3581              	.L260:
 322:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3582              		.loc 1 322 7 is_stmt 1 view .LVU904
 322:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3583              		.loc 1 322 16 is_stmt 0 view .LVU905
 3584 0150 95F82C10 		ldrb	r1, [r5, #44]	@ zero_extendqisi2
 322:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3585              		.loc 1 322 9 view .LVU906
 3586 0154 31B1     		cbz	r1, .L261
 324:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3587              		.loc 1 324 9 is_stmt 1 view .LVU907
 324:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3588              		.loc 1 324 18 is_stmt 0 view .LVU908
 3589 0156 5B48     		ldr	r0, .L275+64
 3590              	.LVL358:
 324:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 3591              		.loc 1 324 18 view .LVU909
 3592 0158 FFF7FEFF 		bl	SET_Configuration_Value
 3593              	.LVL359:
 325:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }   
 3594              		.loc 1 325 9 is_stmt 1 view .LVU910
 325:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }   
 3595              		.loc 1 325 11 is_stmt 0 view .LVU911
 3596 015c 0446     		mov	r4, r0
 3597 015e 0028     		cmp	r0, #0
 3598 0160 7FF467AF 		bne	.L241
 3599              	.L261:
 329:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         sprintf((char*)WiFi_AT_Cmd_Buff,AT_HTTPD, config->web_server);  
 3600              		.loc 1 329 9 is_stmt 1 view .LVU912
 3601 0164 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3602              	.LVL360:
 330:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3603              		.loc 1 330 9 view .LVU913
 3604 0168 4B4C     		ldr	r4, .L275+20
 3605 016a 2A7E     		ldrb	r2, [r5, #24]	@ zero_extendqisi2
ARM GAS  /tmp/cc7EC8er.s 			page 118


 3606 016c 5649     		ldr	r1, .L275+68
 3607 016e 2046     		mov	r0, r4
 3608 0170 FFF7FEFF 		bl	sprintf
 3609              	.LVL361:
 331:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 3610              		.loc 1 331 9 view .LVU914
 331:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 3611              		.loc 1 331 40 is_stmt 0 view .LVU915
 3612 0174 2046     		mov	r0, r4
 3613 0176 FFF7FEFF 		bl	strlen
 3614              	.LVL362:
 331:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status == WiFi_MODULE_SUCCESS)
 3615              		.loc 1 331 18 view .LVU916
 3616 017a 80B2     		uxth	r0, r0
 3617 017c FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3618              	.LVL363:
 332:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 3619              		.loc 1 332 9 is_stmt 1 view .LVU917
 332:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         {
 3620              		.loc 1 332 11 is_stmt 0 view .LVU918
 3621 0180 28B9     		cbnz	r0, .L262
 334:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3622              		.loc 1 334 11 is_stmt 1 view .LVU919
 334:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3623              		.loc 1 334 20 is_stmt 0 view .LVU920
 3624 0182 FFF7FEFF 		bl	USART_Receive_AT_Resp
 3625              	.LVL364:
 335:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }  
 3626              		.loc 1 335 11 is_stmt 1 view .LVU921
 335:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         }  
 3627              		.loc 1 335 13 is_stmt 0 view .LVU922
 3628 0186 0446     		mov	r4, r0
 3629 0188 0028     		cmp	r0, #0
 3630 018a 7FF452AF 		bne	.L241
 3631              	.L262:
 367:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.TLSCERT2=clean,all\r");        
 3632              		.loc 1 367 11 is_stmt 1 view .LVU923
 3633 018e FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3634              	.LVL365:
 368:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3635              		.loc 1 368 11 view .LVU924
 3636 0192 414E     		ldr	r6, .L275+20
 3637 0194 4D4C     		ldr	r4, .L275+72
 3638 0196 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 3639 0198 3060     		str	r0, [r6]	@ unaligned
 3640 019a 7160     		str	r1, [r6, #4]	@ unaligned
 3641 019c B260     		str	r2, [r6, #8]	@ unaligned
 3642 019e F360     		str	r3, [r6, #12]	@ unaligned
 3643 01a0 03CC     		ldmia	r4!, {r0, r1}
 3644 01a2 3061     		str	r0, [r6, #16]	@ unaligned
 3645 01a4 7161     		str	r1, [r6, #20]	@ unaligned
 3646 01a6 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 3647 01a8 3376     		strb	r3, [r6, #24]
 369:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status == WiFi_MODULE_SUCCESS)
 3648              		.loc 1 369 11 view .LVU925
 369:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status == WiFi_MODULE_SUCCESS)
 3649              		.loc 1 369 42 is_stmt 0 view .LVU926
ARM GAS  /tmp/cc7EC8er.s 			page 119


 3650 01aa 3046     		mov	r0, r6
 3651 01ac FFF7FEFF 		bl	strlen
 3652              	.LVL366:
 369:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status == WiFi_MODULE_SUCCESS)
 3653              		.loc 1 369 20 view .LVU927
 3654 01b0 80B2     		uxth	r0, r0
 3655 01b2 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3656              	.LVL367:
 370:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           {
 3657              		.loc 1 370 11 is_stmt 1 view .LVU928
 370:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           {
 3658              		.loc 1 370 13 is_stmt 0 view .LVU929
 3659 01b6 28B9     		cbnz	r0, .L263
 372:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 3660              		.loc 1 372 13 is_stmt 1 view .LVU930
 372:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****             if(status != WiFi_MODULE_SUCCESS) return status;
 3661              		.loc 1 372 22 is_stmt 0 view .LVU931
 3662 01b8 FFF7FEFF 		bl	USART_Receive_AT_Resp
 3663              	.LVL368:
 373:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           }
 3664              		.loc 1 373 13 is_stmt 1 view .LVU932
 373:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           }
 3665              		.loc 1 373 15 is_stmt 0 view .LVU933
 3666 01bc 0446     		mov	r4, r0
 3667 01be 0028     		cmp	r0, #0
 3668 01c0 7FF437AF 		bne	.L241
 3669              	.L263:
 378:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_SAVE_CURRENT_SETTING);  
 3670              		.loc 1 378 7 is_stmt 1 view .LVU934
 3671 01c4 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 3672              	.LVL369:
 379:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 3673              		.loc 1 379 7 view .LVU935
 3674 01c8 334B     		ldr	r3, .L275+20
 3675 01ca 344A     		ldr	r2, .L275+24
 3676 01cc 1068     		ldr	r0, [r2]
 3677 01ce 1860     		str	r0, [r3]	@ unaligned
 3678 01d0 9288     		ldrh	r2, [r2, #4]	@ unaligned
 3679 01d2 9A80     		strh	r2, [r3, #4]	@ unaligned
 380:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
 3680              		.loc 1 380 7 view .LVU936
 380:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
 3681              		.loc 1 380 38 is_stmt 0 view .LVU937
 3682 01d4 1846     		mov	r0, r3
 3683 01d6 FFF7FEFF 		bl	strlen
 3684              	.LVL370:
 380:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if(status == WiFi_MODULE_SUCCESS)
 3685              		.loc 1 380 16 view .LVU938
 3686 01da 80B2     		uxth	r0, r0
 3687 01dc FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 3688              	.LVL371:
 381:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3689              		.loc 1 381 7 is_stmt 1 view .LVU939
 381:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3690              		.loc 1 381 9 is_stmt 0 view .LVU940
 3691 01e0 0446     		mov	r4, r0
 3692 01e2 0028     		cmp	r0, #0
ARM GAS  /tmp/cc7EC8er.s 			page 120


 3693 01e4 00F00F81 		beq	.L273
 3694              	.L264:
 3695              	.LVL372:
 387:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3696              		.loc 1 387 7 is_stmt 1 view .LVU941
 387:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3697              		.loc 1 387 16 is_stmt 0 view .LVU942
 3698 01e8 286B     		ldr	r0, [r5, #48]
 387:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 3699              		.loc 1 387 9 view .LVU943
 3700 01ea 0028     		cmp	r0, #0
 3701 01ec 40F01281 		bne	.L274
 3702              	.L265:
 400:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 3703              		.loc 1 400 7 is_stmt 1 view .LVU944
 3704 01f0 FFF7FEFF 		bl	wifi_reset
 3705              	.LVL373:
 461:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif  //WIFI_USE_VCOM
 3706              		.loc 1 461 3 view .LVU945
 3707 01f4 0020     		movs	r0, #0
 3708 01f6 FFF7FEFF 		bl	wifi_wakeup
 3709              	.LVL374:
 471:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     fflush(stdout);
 3710              		.loc 1 471 5 view .LVU946
 3711 01fa 3548     		ldr	r0, .L275+76
 3712 01fc FFF7FEFF 		bl	puts
 3713              	.LVL375:
 472:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 3714              		.loc 1 472 5 view .LVU947
 472:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 3715              		.loc 1 472 12 is_stmt 0 view .LVU948
 3716 0200 344B     		ldr	r3, .L275+80
 3717 0202 1B68     		ldr	r3, [r3]
 472:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
 3718              		.loc 1 472 5 view .LVU949
 3719 0204 9868     		ldr	r0, [r3, #8]
 3720 0206 FFF7FEFF 		bl	fflush
 3721              	.LVL376:
 474:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3722              		.loc 1 474 3 is_stmt 1 view .LVU950
 474:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 3723              		.loc 1 474 10 is_stmt 0 view .LVU951
 3724 020a 12E7     		b	.L241
 3725              	.LVL377:
 3726              	.L244:
 183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3727              		.loc 1 183 11 is_stmt 1 view .LVU952
 183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3728              		.loc 1 183 20 is_stmt 0 view .LVU953
 3729 020c 0021     		movs	r1, #0
 3730 020e 3248     		ldr	r0, .L275+84
 3731              	.LVL378:
 183:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3732              		.loc 1 183 20 view .LVU954
 3733 0210 FFF7FEFF 		bl	SET_Configuration_Value
 3734              	.LVL379:
 184:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Addr(WIFI_OPR_RATE_MASK, "0x00003FCF");
ARM GAS  /tmp/cc7EC8er.s 			page 121


 3735              		.loc 1 184 11 is_stmt 1 view .LVU955
 184:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Addr(WIFI_OPR_RATE_MASK, "0x00003FCF");
 3736              		.loc 1 184 13 is_stmt 0 view .LVU956
 3737 0214 0446     		mov	r4, r0
 3738 0216 0028     		cmp	r0, #0
 3739 0218 7FF40BAF 		bne	.L241
 185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3740              		.loc 1 185 11 is_stmt 1 view .LVU957
 185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3741              		.loc 1 185 20 is_stmt 0 view .LVU958
 3742 021c 2F49     		ldr	r1, .L275+88
 3743 021e 3048     		ldr	r0, .L275+92
 3744              	.LVL380:
 185:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3745              		.loc 1 185 20 view .LVU959
 3746 0220 FFF7FEFF 		bl	SET_Configuration_Addr
 3747              	.LVL381:
 186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3748              		.loc 1 186 11 is_stmt 1 view .LVU960
 186:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3749              		.loc 1 186 13 is_stmt 0 view .LVU961
 3750 0224 0446     		mov	r4, r0
 3751 0226 0028     		cmp	r0, #0
 3752 0228 3FF43FAF 		beq	.L246
 3753 022c 01E7     		b	.L241
 3754              	.L245:
 189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3755              		.loc 1 189 11 is_stmt 1 view .LVU962
 189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3756              		.loc 1 189 20 is_stmt 0 view .LVU963
 3757 022e 0121     		movs	r1, #1
 3758 0230 2948     		ldr	r0, .L275+84
 3759              	.LVL382:
 189:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3760              		.loc 1 189 20 view .LVU964
 3761 0232 FFF7FEFF 		bl	SET_Configuration_Value
 3762              	.LVL383:
 190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Addr(WIFI_OPR_RATE_MASK, "0x003FFFCF");
 3763              		.loc 1 190 11 is_stmt 1 view .LVU965
 190:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Addr(WIFI_OPR_RATE_MASK, "0x003FFFCF");
 3764              		.loc 1 190 13 is_stmt 0 view .LVU966
 3765 0236 0446     		mov	r4, r0
 3766 0238 0028     		cmp	r0, #0
 3767 023a 7FF4FAAE 		bne	.L241
 191:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3768              		.loc 1 191 11 is_stmt 1 view .LVU967
 191:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3769              		.loc 1 191 20 is_stmt 0 view .LVU968
 3770 023e 2949     		ldr	r1, .L275+96
 3771 0240 2748     		ldr	r0, .L275+92
 3772              	.LVL384:
 191:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3773              		.loc 1 191 20 view .LVU969
 3774 0242 FFF7FEFF 		bl	SET_Configuration_Addr
 3775              	.LVL385:
 192:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3776              		.loc 1 192 11 is_stmt 1 view .LVU970
ARM GAS  /tmp/cc7EC8er.s 			page 122


 192:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3777              		.loc 1 192 13 is_stmt 0 view .LVU971
 3778 0246 0446     		mov	r4, r0
 3779 0248 0028     		cmp	r0, #0
 3780 024a 3FF42EAF 		beq	.L246
 3781 024e F0E6     		b	.L241
 3782              	.L268:
 201:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3783              		.loc 1 201 11 is_stmt 1 view .LVU972
 201:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3784              		.loc 1 201 20 is_stmt 0 view .LVU973
 3785 0250 0021     		movs	r1, #0
 3786 0252 2548     		ldr	r0, .L275+100
 3787              	.LVL386:
 201:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3788              		.loc 1 201 20 view .LVU974
 3789 0254 FFF7FEFF 		bl	SET_Configuration_Value
 3790              	.LVL387:
 202:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 3791              		.loc 1 202 11 is_stmt 1 view .LVU975
 202:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 3792              		.loc 1 202 13 is_stmt 0 view .LVU976
 3793 0258 0446     		mov	r4, r0
 3794 025a 0028     		cmp	r0, #0
 3795 025c 7FF4E9AE 		bne	.L241
 203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3796              		.loc 1 203 11 is_stmt 1 view .LVU977
 203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3797              		.loc 1 203 20 is_stmt 0 view .LVU978
 3798 0260 0021     		movs	r1, #0
 3799 0262 2248     		ldr	r0, .L275+104
 3800              	.LVL388:
 203:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3801              		.loc 1 203 20 view .LVU979
 3802 0264 FFF7FEFF 		bl	SET_Configuration_Value
 3803              	.LVL389:
 204:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 3804              		.loc 1 204 11 is_stmt 1 view .LVU980
 204:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 3805              		.loc 1 204 13 is_stmt 0 view .LVU981
 3806 0268 0446     		mov	r4, r0
 3807 026a 0028     		cmp	r0, #0
 3808 026c 7FF4E1AE 		bne	.L241
 205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3809              		.loc 1 205 11 is_stmt 1 view .LVU982
 205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3810              		.loc 1 205 20 is_stmt 0 view .LVU983
 3811 0270 0021     		movs	r1, #0
 3812 0272 1F48     		ldr	r0, .L275+108
 3813              	.LVL390:
 205:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3814              		.loc 1 205 20 view .LVU984
 3815 0274 FFF7FEFF 		bl	SET_Configuration_Value
 3816              	.LVL391:
 206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3817              		.loc 1 206 11 is_stmt 1 view .LVU985
 206:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
ARM GAS  /tmp/cc7EC8er.s 			page 123


 3818              		.loc 1 206 13 is_stmt 0 view .LVU986
 3819 0278 0446     		mov	r4, r0
 3820 027a 0028     		cmp	r0, #0
 3821 027c 3FF41FAF 		beq	.L249
 3822 0280 D7E6     		b	.L241
 3823              	.L276:
 3824 0282 00BF     		.align	2
 3825              	.L275:
 3826 0284 00000000 		.word	.LC28
 3827 0288 18000000 		.word	.LC29
 3828 028c 34000000 		.word	.LC30
 3829 0290 50000000 		.word	.LC31
 3830 0294 64000000 		.word	.LC32
 3831 0298 00000000 		.word	WiFi_AT_Cmd_Buff
 3832 029c 74000000 		.word	.LC33
 3833 02a0 7C000000 		.word	.LC34
 3834 02a4 10000000 		.word	.LC14
 3835 02a8 10000000 		.word	.LC17
 3836 02ac 48000000 		.word	.LC22
 3837 02b0 28000000 		.word	.LC19
 3838 02b4 30000000 		.word	.LC20
 3839 02b8 2C010000 		.word	.LC44
 3840 02bc 38010000 		.word	.LC45
 3841 02c0 48010000 		.word	.LC46
 3842 02c4 84010000 		.word	.LC49
 3843 02c8 98010000 		.word	.LC50
 3844 02cc 00000000 		.word	.LC0
 3845 02d0 A8010000 		.word	.LC51
 3846 02d4 00000000 		.word	_impure_ptr
 3847 02d8 8C000000 		.word	.LC35
 3848 02dc 9C000000 		.word	.LC36
 3849 02e0 A8000000 		.word	.LC37
 3850 02e4 BC000000 		.word	.LC38
 3851 02e8 C8000000 		.word	.LC39
 3852 02ec 00000000 		.word	.LC24
 3853 02f0 10000000 		.word	.LC25
 3854              	.L247:
 209:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3855              		.loc 1 209 11 is_stmt 1 view .LVU987
 209:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3856              		.loc 1 209 20 is_stmt 0 view .LVU988
 3857 02f4 0121     		movs	r1, #1
 3858 02f6 4A48     		ldr	r0, .L277
 3859              	.LVL392:
 209:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3860              		.loc 1 209 20 view .LVU989
 3861 02f8 FFF7FEFF 		bl	SET_Configuration_Value
 3862              	.LVL393:
 210:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_OPERATIONAL_MODE, 11);  
 3863              		.loc 1 210 11 is_stmt 1 view .LVU990
 210:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_OPERATIONAL_MODE, 11);  
 3864              		.loc 1 210 13 is_stmt 0 view .LVU991
 3865 02fc 0446     		mov	r4, r0
 3866 02fe 0028     		cmp	r0, #0
 3867 0300 7FF497AE 		bne	.L241
 211:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3868              		.loc 1 211 11 is_stmt 1 view .LVU992
ARM GAS  /tmp/cc7EC8er.s 			page 124


 211:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3869              		.loc 1 211 20 is_stmt 0 view .LVU993
 3870 0304 0B21     		movs	r1, #11
 3871 0306 4748     		ldr	r0, .L277+4
 3872              	.LVL394:
 211:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3873              		.loc 1 211 20 view .LVU994
 3874 0308 FFF7FEFF 		bl	SET_Configuration_Value
 3875              	.LVL395:
 212:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_BEACON_WAKEUP, 0);
 3876              		.loc 1 212 11 is_stmt 1 view .LVU995
 212:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_BEACON_WAKEUP, 0);
 3877              		.loc 1 212 13 is_stmt 0 view .LVU996
 3878 030c 0446     		mov	r4, r0
 3879 030e 0028     		cmp	r0, #0
 3880 0310 7FF48FAE 		bne	.L241
 213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3881              		.loc 1 213 11 is_stmt 1 view .LVU997
 213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3882              		.loc 1 213 20 is_stmt 0 view .LVU998
 3883 0314 0021     		movs	r1, #0
 3884 0316 4448     		ldr	r0, .L277+8
 3885              	.LVL396:
 213:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3886              		.loc 1 213 20 view .LVU999
 3887 0318 FFF7FEFF 		bl	SET_Configuration_Value
 3888              	.LVL397:
 214:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_LISTEN_INTERVAL, 0);
 3889              		.loc 1 214 11 is_stmt 1 view .LVU1000
 214:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_LISTEN_INTERVAL, 0);
 3890              		.loc 1 214 13 is_stmt 0 view .LVU1001
 3891 031c 0446     		mov	r4, r0
 3892 031e 0028     		cmp	r0, #0
 3893 0320 7FF487AE 		bne	.L241
 215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3894              		.loc 1 215 11 is_stmt 1 view .LVU1002
 215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3895              		.loc 1 215 20 is_stmt 0 view .LVU1003
 3896 0324 0021     		movs	r1, #0
 3897 0326 4148     		ldr	r0, .L277+12
 3898              	.LVL398:
 215:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3899              		.loc 1 215 20 view .LVU1004
 3900 0328 FFF7FEFF 		bl	SET_Configuration_Value
 3901              	.LVL399:
 216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 3902              		.loc 1 216 11 is_stmt 1 view .LVU1005
 216:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 0);  
 3903              		.loc 1 216 13 is_stmt 0 view .LVU1006
 3904 032c 0446     		mov	r4, r0
 3905 032e 0028     		cmp	r0, #0
 3906 0330 7FF47FAE 		bne	.L241
 217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3907              		.loc 1 217 11 is_stmt 1 view .LVU1007
 217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3908              		.loc 1 217 20 is_stmt 0 view .LVU1008
 3909 0334 0021     		movs	r1, #0
ARM GAS  /tmp/cc7EC8er.s 			page 125


 3910 0336 3E48     		ldr	r0, .L277+16
 3911              	.LVL400:
 217:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3912              		.loc 1 217 20 view .LVU1009
 3913 0338 FFF7FEFF 		bl	SET_Configuration_Value
 3914              	.LVL401:
 218:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 3915              		.loc 1 218 11 is_stmt 1 view .LVU1010
 218:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 3916              		.loc 1 218 13 is_stmt 0 view .LVU1011
 3917 033c 0446     		mov	r4, r0
 3918 033e 0028     		cmp	r0, #0
 3919 0340 7FF477AE 		bne	.L241
 219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3920              		.loc 1 219 11 is_stmt 1 view .LVU1012
 219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3921              		.loc 1 219 20 is_stmt 0 view .LVU1013
 3922 0344 0021     		movs	r1, #0
 3923 0346 3B48     		ldr	r0, .L277+20
 3924              	.LVL402:
 219:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3925              		.loc 1 219 20 view .LVU1014
 3926 0348 FFF7FEFF 		bl	SET_Configuration_Value
 3927              	.LVL403:
 220:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3928              		.loc 1 220 11 is_stmt 1 view .LVU1015
 220:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 3929              		.loc 1 220 13 is_stmt 0 view .LVU1016
 3930 034c 0446     		mov	r4, r0
 3931 034e 0028     		cmp	r0, #0
 3932 0350 3FF4B5AE 		beq	.L249
 3933 0354 6DE6     		b	.L241
 3934              	.L248:
 223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3935              		.loc 1 223 11 is_stmt 1 view .LVU1017
 223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3936              		.loc 1 223 20 is_stmt 0 view .LVU1018
 3937 0356 0121     		movs	r1, #1
 3938 0358 3148     		ldr	r0, .L277
 3939              	.LVL404:
 223:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3940              		.loc 1 223 20 view .LVU1019
 3941 035a FFF7FEFF 		bl	SET_Configuration_Value
 3942              	.LVL405:
 224:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_OPERATIONAL_MODE, 12);  
 3943              		.loc 1 224 11 is_stmt 1 view .LVU1020
 224:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_OPERATIONAL_MODE, 12);  
 3944              		.loc 1 224 13 is_stmt 0 view .LVU1021
 3945 035e 0446     		mov	r4, r0
 3946 0360 0028     		cmp	r0, #0
 3947 0362 7FF466AE 		bne	.L241
 225:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3948              		.loc 1 225 11 is_stmt 1 view .LVU1022
 225:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3949              		.loc 1 225 20 is_stmt 0 view .LVU1023
 3950 0366 0C21     		movs	r1, #12
 3951 0368 2E48     		ldr	r0, .L277+4
ARM GAS  /tmp/cc7EC8er.s 			page 126


 3952              	.LVL406:
 225:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3953              		.loc 1 225 20 view .LVU1024
 3954 036a FFF7FEFF 		bl	SET_Configuration_Value
 3955              	.LVL407:
 226:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_BEACON_WAKEUP, 10);
 3956              		.loc 1 226 11 is_stmt 1 view .LVU1025
 226:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_BEACON_WAKEUP, 10);
 3957              		.loc 1 226 13 is_stmt 0 view .LVU1026
 3958 036e 0446     		mov	r4, r0
 3959 0370 0028     		cmp	r0, #0
 3960 0372 7FF45EAE 		bne	.L241
 227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3961              		.loc 1 227 11 is_stmt 1 view .LVU1027
 227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3962              		.loc 1 227 20 is_stmt 0 view .LVU1028
 3963 0376 0A21     		movs	r1, #10
 3964 0378 2B48     		ldr	r0, .L277+8
 3965              	.LVL408:
 227:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3966              		.loc 1 227 20 view .LVU1029
 3967 037a FFF7FEFF 		bl	SET_Configuration_Value
 3968              	.LVL409:
 228:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_LISTEN_INTERVAL, 1);
 3969              		.loc 1 228 11 is_stmt 1 view .LVU1030
 228:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_LISTEN_INTERVAL, 1);
 3970              		.loc 1 228 13 is_stmt 0 view .LVU1031
 3971 037e 0446     		mov	r4, r0
 3972 0380 0028     		cmp	r0, #0
 3973 0382 7FF456AE 		bne	.L241
 229:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3974              		.loc 1 229 11 is_stmt 1 view .LVU1032
 229:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3975              		.loc 1 229 20 is_stmt 0 view .LVU1033
 3976 0386 0121     		movs	r1, #1
 3977 0388 2848     		ldr	r0, .L277+12
 3978              	.LVL410:
 229:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3979              		.loc 1 229 20 view .LVU1034
 3980 038a FFF7FEFF 		bl	SET_Configuration_Value
 3981              	.LVL411:
 230:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 1);  
 3982              		.loc 1 230 11 is_stmt 1 view .LVU1035
 230:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_SLEEP_ENABLED, 1);  
 3983              		.loc 1 230 13 is_stmt 0 view .LVU1036
 3984 038e 0446     		mov	r4, r0
 3985 0390 0028     		cmp	r0, #0
 3986 0392 7FF44EAE 		bne	.L241
 231:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3987              		.loc 1 231 11 is_stmt 1 view .LVU1037
 231:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3988              		.loc 1 231 20 is_stmt 0 view .LVU1038
 3989 0396 0121     		movs	r1, #1
 3990 0398 2548     		ldr	r0, .L277+16
 3991              	.LVL412:
 231:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 3992              		.loc 1 231 20 view .LVU1039
ARM GAS  /tmp/cc7EC8er.s 			page 127


 3993 039a FFF7FEFF 		bl	SET_Configuration_Value
 3994              	.LVL413:
 232:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 3995              		.loc 1 232 11 is_stmt 1 view .LVU1040
 232:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           status = SET_Configuration_Value(WIFI_STANDBY_ENABLED, 0);  
 3996              		.loc 1 232 13 is_stmt 0 view .LVU1041
 3997 039e 0446     		mov	r4, r0
 3998 03a0 0028     		cmp	r0, #0
 3999 03a2 7FF446AE 		bne	.L241
 233:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 4000              		.loc 1 233 11 is_stmt 1 view .LVU1042
 233:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 4001              		.loc 1 233 20 is_stmt 0 view .LVU1043
 4002 03a6 0021     		movs	r1, #0
 4003 03a8 2248     		ldr	r0, .L277+20
 4004              	.LVL414:
 233:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 4005              		.loc 1 233 20 view .LVU1044
 4006 03aa FFF7FEFF 		bl	SET_Configuration_Value
 4007              	.LVL415:
 234:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 4008              		.loc 1 234 11 is_stmt 1 view .LVU1045
 234:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 4009              		.loc 1 234 13 is_stmt 0 view .LVU1046
 4010 03ae 0446     		mov	r4, r0
 4011 03b0 0028     		cmp	r0, #0
 4012 03b2 3FF484AE 		beq	.L249
 4013 03b6 3CE6     		b	.L241
 4014              	.L269:
 246:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 4015              		.loc 1 246 11 is_stmt 1 view .LVU1047
 246:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 4016              		.loc 1 246 78 is_stmt 0 view .LVU1048
 4017 03b8 01EB4101 		add	r1, r1, r1, lsl #1
 246:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 4018              		.loc 1 246 20 view .LVU1049
 4019 03bc 4900     		lsls	r1, r1, #1
 4020 03be 1E48     		ldr	r0, .L277+24
 4021              	.LVL416:
 246:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 4022              		.loc 1 246 20 view .LVU1050
 4023 03c0 FFF7FEFF 		bl	SET_Configuration_Value
 4024              	.LVL417:
 247:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 4025              		.loc 1 247 11 is_stmt 1 view .LVU1051
 247:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 4026              		.loc 1 247 13 is_stmt 0 view .LVU1052
 4027 03c4 0446     		mov	r4, r0
 4028 03c6 0028     		cmp	r0, #0
 4029 03c8 3FF47DAE 		beq	.L250
 4030 03cc 31E6     		b	.L241
 4031              	.L270:
 258:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 4032              		.loc 1 258 11 is_stmt 1 view .LVU1053
 258:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 4033              		.loc 1 258 20 is_stmt 0 view .LVU1054
 4034 03ce 1B48     		ldr	r0, .L277+28
ARM GAS  /tmp/cc7EC8er.s 			page 128


 4035              	.LVL418:
 258:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           if(status != WiFi_MODULE_SUCCESS) return status;
 4036              		.loc 1 258 20 view .LVU1055
 4037 03d0 FFF7FEFF 		bl	SET_Configuration_Value
 4038              	.LVL419:
 259:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 4039              		.loc 1 259 11 is_stmt 1 view .LVU1056
 259:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****           break;
 4040              		.loc 1 259 13 is_stmt 0 view .LVU1057
 4041 03d4 0446     		mov	r4, r0
 4042 03d6 0028     		cmp	r0, #0
 4043 03d8 3FF479AE 		beq	.L251
 4044 03dc 29E6     		b	.L241
 4045              	.L271:
 314:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 4046              		.loc 1 314 9 is_stmt 1 view .LVU1058
 314:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 4047              		.loc 1 314 18 is_stmt 0 view .LVU1059
 4048 03de 4FF47A71 		mov	r1, #1000
 4049 03e2 01FB03F1 		mul	r1, r1, r3
 4050 03e6 1648     		ldr	r0, .L277+32
 4051              	.LVL420:
 314:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 4052              		.loc 1 314 18 view .LVU1060
 4053 03e8 FFF7FEFF 		bl	SET_Configuration_Value
 4054              	.LVL421:
 315:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4055              		.loc 1 315 9 is_stmt 1 view .LVU1061
 315:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4056              		.loc 1 315 11 is_stmt 0 view .LVU1062
 4057 03ec 0446     		mov	r4, r0
 4058 03ee 0028     		cmp	r0, #0
 4059 03f0 3FF4AAAE 		beq	.L259
 4060 03f4 1DE6     		b	.L241
 4061              	.L272:
 319:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 4062              		.loc 1 319 9 is_stmt 1 view .LVU1063
 319:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 4063              		.loc 1 319 18 is_stmt 0 view .LVU1064
 4064 03f6 1348     		ldr	r0, .L277+36
 4065              	.LVL422:
 319:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 4066              		.loc 1 319 18 view .LVU1065
 4067 03f8 FFF7FEFF 		bl	SET_Configuration_Value
 4068              	.LVL423:
 320:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4069              		.loc 1 320 9 is_stmt 1 view .LVU1066
 320:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4070              		.loc 1 320 11 is_stmt 0 view .LVU1067
 4071 03fc 0446     		mov	r4, r0
 4072 03fe 0028     		cmp	r0, #0
 4073 0400 3FF4A6AE 		beq	.L260
 4074 0404 15E6     		b	.L241
 4075              	.L273:
 383:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
 4076              		.loc 1 383 9 is_stmt 1 view .LVU1068
 383:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         if(status != WiFi_MODULE_SUCCESS) return status;
ARM GAS  /tmp/cc7EC8er.s 			page 129


 4077              		.loc 1 383 18 is_stmt 0 view .LVU1069
 4078 0406 FFF7FEFF 		bl	USART_Receive_AT_Resp
 4079              	.LVL424:
 384:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }   
 4080              		.loc 1 384 9 is_stmt 1 view .LVU1070
 384:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }   
 4081              		.loc 1 384 11 is_stmt 0 view .LVU1071
 4082 040a 0446     		mov	r4, r0
 4083 040c 0028     		cmp	r0, #0
 4084 040e 3FF4EBAE 		beq	.L264
 4085 0412 0EE6     		b	.L241
 4086              	.LVL425:
 4087              	.L274:
 389:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #if defined(SPWF01) 
 4088              		.loc 1 389 9 is_stmt 1 view .LVU1072
 4089 0414 FFF7FEFF 		bl	UART_Configuration
 4090              	.LVL426:
 391:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         #else
 4091              		.loc 1 391 11 view .LVU1073
 4092 0418 FFF7FEFF 		bl	Receive_Data
 4093              	.LVL427:
 4094 041c E8E6     		b	.L265
 4095              	.L278:
 4096 041e 00BF     		.align	2
 4097              	.L277:
 4098 0420 C8000000 		.word	.LC39
 4099 0424 D8000000 		.word	.LC40
 4100 0428 F0000000 		.word	.LC41
 4101 042c 04010000 		.word	.LC42
 4102 0430 00000000 		.word	.LC24
 4103 0434 10000000 		.word	.LC25
 4104 0438 1C010000 		.word	.LC43
 4105 043c 54000000 		.word	.LC23
 4106 0440 58010000 		.word	.LC47
 4107 0444 74010000 		.word	.LC48
 4108              		.cfi_endproc
 4109              	.LFE279:
 4111              		.section	.text.wifi_disconnect,"ax",%progbits
 4112              		.align	1
 4113              		.global	wifi_disconnect
 4114              		.syntax unified
 4115              		.thumb
 4116              		.thumb_func
 4117              		.fpu fpv4-sp-d16
 4119              	wifi_disconnect:
 4120              	.LFB311:
2428:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2429:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2430:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_disconnect
2431:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         disconnect the module from any AP
2432:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
2433:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2434:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2435:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_disconnect(void)
2436:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 4121              		.loc 1 2436 1 view -0
 4122              		.cfi_startproc
ARM GAS  /tmp/cc7EC8er.s 			page 130


 4123              		@ args = 0, pretend = 0, frame = 0
 4124              		@ frame_needed = 0, uses_anonymous_args = 0
 4125 0000 08B5     		push	{r3, lr}
 4126              	.LCFI52:
 4127              		.cfi_def_cfa_offset 8
 4128              		.cfi_offset 3, -8
 4129              		.cfi_offset 14, -4
2437:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;  
 4130              		.loc 1 2437 3 view .LVU1075
 4131              	.LVL428:
2438:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2439:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
 4132              		.loc 1 2439 3 view .LVU1076
 4133 0002 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 4134              	.LVL429:
2440:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2441:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04  
2442:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=0<cr>*/  
2443:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2444:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);  
2445:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2446:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2447:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
2448:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2449:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;
2450:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2451:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2452:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2453:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2454:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2455:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
2456:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2457:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2458:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2459:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2460:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2461:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set wifi_mode to idle*/
2462:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Configuration_Value(WIFI_MODE, WiFi_IDLE_MODE);
 4135              		.loc 1 2462 3 view .LVU1077
 4136              		.loc 1 2462 12 is_stmt 0 view .LVU1078
 4137 0006 0021     		movs	r1, #0
 4138 0008 0848     		ldr	r0, .L283
 4139 000a FFF7FEFF 		bl	SET_Configuration_Value
 4140              	.LVL430:
2463:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2464:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*If module was connected, reset the status*/
2465:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(wifi_connected == 1)
 4141              		.loc 1 2465 3 is_stmt 1 view .LVU1079
 4142              		.loc 1 2465 21 is_stmt 0 view .LVU1080
 4143 000e 084B     		ldr	r3, .L283+4
 4144 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4145 0012 DBB2     		uxtb	r3, r3
 4146              		.loc 1 2465 5 view .LVU1081
 4147 0014 012B     		cmp	r3, #1
 4148 0016 05D0     		beq	.L282
 4149              	.L280:
2466:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
ARM GAS  /tmp/cc7EC8er.s 			page 131


2467:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         wifi_connected = 0;//this will allow the TIM handler to make the callback on connection(WiF
2468:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }  
2469:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2470:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04  
2471:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=1<cr>*/  
2472:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer(); 
2473:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)
2474:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);  
2475:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2476:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2477:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 1);  
2478:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2479:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;
2480:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2481:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2482:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2483:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2484:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2485:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2486:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_FALSE;
2487:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }  
2488:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2489:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2490:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2491:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2492:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* save current setting in flash */
2493:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Save_Current_Setting();
 4150              		.loc 1 2493 3 is_stmt 1 view .LVU1082
 4151 0018 FFF7FEFF 		bl	Save_Current_Setting
 4152              	.LVL431:
2494:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2495:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2496:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
2497:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined (SPWF04)
2498:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //status = Soft_Reset();
2499:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2500:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Power_State((WiFi_Power_State_t)PowerSave_State);//CFUN=1
 4153              		.loc 1 2500 3 view .LVU1083
 4154              		.loc 1 2500 12 is_stmt 0 view .LVU1084
 4155 001c 0120     		movs	r0, #1
 4156 001e FFF7FEFF 		bl	SET_Power_State
 4157              	.LVL432:
2501:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2502:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****        
2503:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 4158              		.loc 1 2503 3 is_stmt 1 view .LVU1085
2504:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 4159              		.loc 1 2504 1 is_stmt 0 view .LVU1086
 4160 0022 08BD     		pop	{r3, pc}
 4161              	.LVL433:
 4162              	.L282:
2467:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }  
 4163              		.loc 1 2467 9 is_stmt 1 view .LVU1087
2467:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }  
 4164              		.loc 1 2467 24 is_stmt 0 view .LVU1088
 4165 0024 024B     		ldr	r3, .L283+4
 4166 0026 0022     		movs	r2, #0
ARM GAS  /tmp/cc7EC8er.s 			page 132


 4167 0028 1A70     		strb	r2, [r3]
 4168 002a F5E7     		b	.L280
 4169              	.L284:
 4170              		.align	2
 4171              	.L283:
 4172 002c 10000000 		.word	.LC14
 4173 0030 00000000 		.word	wifi_connected
 4174              		.cfi_endproc
 4175              	.LFE311:
 4177              		.section	.rodata.wifi_enable.str1.4,"aMS",%progbits,1
 4178              		.align	2
 4179              	.LC52:
 4180 0000 41542B53 		.ascii	"AT+S.WIFI=%d\015\000"
 4180      2E574946 
 4180      493D2564 
 4180      0D00
 4181              		.section	.text.wifi_enable,"ax",%progbits
 4182              		.align	1
 4183              		.global	wifi_enable
 4184              		.syntax unified
 4185              		.thumb
 4186              		.thumb_func
 4187              		.fpu fpv4-sp-d16
 4189              	wifi_enable:
 4190              	.LVL434:
 4191              	.LFB312:
2505:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2506:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2507:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_enable
2508:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Enable/Disable the Wi-Fi interface
2509:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  enable enable Wi-Fi (WIFI_TRUE) disable Wi-Fi (WIFI_FALSE)
2510:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2511:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2512:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_enable(wifi_bool enable)
2513:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 4192              		.loc 1 2513 1 is_stmt 1 view -0
 4193              		.cfi_startproc
 4194              		@ args = 0, pretend = 0, frame = 0
 4195              		@ frame_needed = 0, uses_anonymous_args = 0
 4196              		.loc 1 2513 1 is_stmt 0 view .LVU1090
 4197 0000 38B5     		push	{r3, r4, r5, lr}
 4198              	.LCFI53:
 4199              		.cfi_def_cfa_offset 16
 4200              		.cfi_offset 3, -16
 4201              		.cfi_offset 4, -12
 4202              		.cfi_offset 5, -8
 4203              		.cfi_offset 14, -4
2514:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 4204              		.loc 1 2514 3 is_stmt 1 view .LVU1091
 4205              	.LVL435:
2515:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2516:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if((enable && IO_status_flag.WiFi_Enabled == WIFI_TRUE) || (!enable && IO_status_flag.WiFi_Enable
 4206              		.loc 1 2516 3 view .LVU1092
 4207              		.loc 1 2516 5 is_stmt 0 view .LVU1093
 4208 0002 0446     		mov	r4, r0
 4209 0004 20B1     		cbz	r0, .L286
 4210              		.loc 1 2516 31 discriminator 1 view .LVU1094
ARM GAS  /tmp/cc7EC8er.s 			page 133


 4211 0006 1F4B     		ldr	r3, .L299
 4212 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4213              		.loc 1 2516 14 discriminator 1 view .LVU1095
 4214 000a 13F0100F 		tst	r3, #16
 4215 000e 34D1     		bne	.L294
 4216              	.L286:
 4217              		.loc 1 2516 59 discriminator 3 view .LVU1096
 4218 0010 24B9     		cbnz	r4, .L288
 4219              		.loc 1 2516 88 discriminator 4 view .LVU1097
 4220 0012 1C4B     		ldr	r3, .L299
 4221 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4222              		.loc 1 2516 71 discriminator 4 view .LVU1098
 4223 0016 13F0100F 		tst	r3, #16
 4224 001a 30D0     		beq	.L295
 4225              	.L288:
2517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;//already in desired state
2518:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2519:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Enable or Disable wifi interface*/  
2520:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
 4226              		.loc 1 2520 3 is_stmt 1 view .LVU1099
 4227 001c FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 4228              	.LVL436:
2521:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2522:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2523:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2524:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, enable);  
 4229              		.loc 1 2524 3 view .LVU1100
 4230 0020 194D     		ldr	r5, .L299+4
 4231 0022 2246     		mov	r2, r4
 4232 0024 1949     		ldr	r1, .L299+8
 4233 0026 2846     		mov	r0, r5
 4234 0028 FFF7FEFF 		bl	sprintf
 4235              	.LVL437:
2525:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(HAL_UART_Transmit(&UartWiFiHandle, (uint8_t *)WiFi_AT_Cmd_Buff, strlen((char*)WiFi_AT_Cmd_Buff
 4236              		.loc 1 2525 3 view .LVU1101
 4237              		.loc 1 2525 70 is_stmt 0 view .LVU1102
 4238 002c 2846     		mov	r0, r5
 4239 002e FFF7FEFF 		bl	strlen
 4240              	.LVL438:
 4241              		.loc 1 2525 6 view .LVU1103
 4242 0032 4FF47A73 		mov	r3, #1000
 4243 0036 82B2     		uxth	r2, r0
 4244 0038 2946     		mov	r1, r5
 4245 003a 1548     		ldr	r0, .L299+12
 4246 003c FFF7FEFF 		bl	HAL_UART_Transmit
 4247              	.LVL439:
 4248              		.loc 1 2525 5 view .LVU1104
 4249 0040 48B9     		cbnz	r0, .L298
2526:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2527:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_UART_Error_Handler();
2528:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if DEBUG_PRINT
2529:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     printf("HAL_UART_Transmit Error");
2530:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #endif
2531:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return WiFi_HAL_UART_ERROR;
2532:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }  
2533:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2534:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
ARM GAS  /tmp/cc7EC8er.s 			page 134


2535:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=0<cr>*/  
2536:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
2537:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2538:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;  
2539:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2540:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2541:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2542:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 4250              		.loc 1 2542 3 is_stmt 1 view .LVU1105
2543:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2544:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
 4251              		.loc 1 2544 5 view .LVU1106
 4252              		.loc 1 2544 14 is_stmt 0 view .LVU1107
 4253 0042 FFF7FEFF 		bl	USART_Receive_AT_Resp
 4254              	.LVL440:
2545:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
 4255              		.loc 1 2545 5 is_stmt 1 view .LVU1108
 4256              		.loc 1 2545 7 is_stmt 0 view .LVU1109
 4257 0046 D8B9     		cbnz	r0, .L287
2546:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
 4258              		.loc 1 2546 10 is_stmt 1 view .LVU1110
 4259              		.loc 1 2546 35 is_stmt 0 view .LVU1111
 4260 0048 0E4A     		ldr	r2, .L299
 4261 004a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 4262 004c 43F04003 		orr	r3, r3, #64
 4263 0050 1370     		strb	r3, [r2]
2547:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2548:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2549:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //wait for power down/hw started
2550:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(enable)
 4264              		.loc 1 2550 3 is_stmt 1 view .LVU1112
 4265              		.loc 1 2550 5 is_stmt 0 view .LVU1113
 4266 0052 2CB9     		cbnz	r4, .L290
 4267 0054 0BE0     		b	.L291
 4268              	.LVL441:
 4269              	.L298:
2527:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     #if DEBUG_PRINT
 4270              		.loc 1 2527 5 is_stmt 1 view .LVU1114
 4271 0056 FFF7FEFF 		bl	WiFi_UART_Error_Handler
 4272              	.LVL442:
2531:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }  
 4273              		.loc 1 2531 5 view .LVU1115
2531:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }  
 4274              		.loc 1 2531 12 is_stmt 0 view .LVU1116
 4275 005a 0F20     		movs	r0, #15
 4276 005c 10E0     		b	.L287
 4277              	.LVL443:
 4278              	.L296:
2551:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE) {
2552:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
 4279              		.loc 1 2552 9 is_stmt 1 view .LVU1117
 4280              		.syntax unified
 4281              	@ 2552 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 4282 005e 00BF     		nop
 4283              	@ 0 "" 2
 4284              		.thumb
 4285              		.syntax unified
ARM GAS  /tmp/cc7EC8er.s 			page 135


 4286              	.L290:
2551:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE) {
 4287              		.loc 1 2551 8 view .LVU1118
2551:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE) {
 4288              		.loc 1 2551 23 is_stmt 0 view .LVU1119
 4289 0060 084B     		ldr	r3, .L299
 4290 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
2551:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE) {
 4291              		.loc 1 2551 8 view .LVU1120
 4292 0064 13F0100F 		tst	r3, #16
 4293 0068 F9D0     		beq	.L296
 4294 006a 09E0     		b	.L287
 4295              	.L293:
2553:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2554:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   else
2555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     while(IO_status_flag.WiFi_Enabled != WIFI_FALSE) {
2556:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
 4296              		.loc 1 2556 9 is_stmt 1 view .LVU1121
 4297              		.syntax unified
 4298              	@ 2556 "Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c" 1
 4299 006c 00BF     		nop
 4300              	@ 0 "" 2
 4301              		.thumb
 4302              		.syntax unified
 4303              	.L291:
2555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
 4304              		.loc 1 2555 10 view .LVU1122
2555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
 4305              		.loc 1 2555 25 is_stmt 0 view .LVU1123
 4306 006e 054B     		ldr	r3, .L299
 4307 0070 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
2555:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         __NOP(); //nothing to do
 4308              		.loc 1 2555 10 view .LVU1124
 4309 0072 13F0100F 		tst	r3, #16
 4310 0076 F9D1     		bne	.L293
 4311 0078 02E0     		b	.L287
 4312              	.LVL444:
 4313              	.L294:
2517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 4314              		.loc 1 2517 12 view .LVU1125
 4315 007a 0020     		movs	r0, #0
 4316              	.LVL445:
2517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 4317              		.loc 1 2517 12 view .LVU1126
 4318 007c 00E0     		b	.L287
 4319              	.LVL446:
 4320              	.L295:
2517:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 4321              		.loc 1 2517 12 view .LVU1127
 4322 007e 2046     		mov	r0, r4
 4323              	.LVL447:
 4324              	.L287:
2557:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2558:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2559:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
2560:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 4325              		.loc 1 2560 1 view .LVU1128
ARM GAS  /tmp/cc7EC8er.s 			page 136


 4326 0080 38BD     		pop	{r3, r4, r5, pc}
 4327              	.L300:
 4328 0082 00BF     		.align	2
 4329              	.L299:
 4330 0084 00000000 		.word	IO_status_flag
 4331 0088 00000000 		.word	WiFi_AT_Cmd_Buff
 4332 008c 00000000 		.word	.LC52
 4333 0090 00000000 		.word	UartWiFiHandle
 4334              		.cfi_endproc
 4335              	.LFE312:
 4337              		.section	.rodata.wifi_restore.str1.4,"aMS",%progbits,1
 4338              		.align	2
 4339              	.LC53:
 4340 0000 6C6F6361 		.ascii	"localecho1\000"
 4340      6C656368 
 4340      6F3100
 4341              		.section	.text.wifi_restore,"ax",%progbits
 4342              		.align	1
 4343              		.global	wifi_restore
 4344              		.syntax unified
 4345              		.thumb
 4346              		.thumb_func
 4347              		.fpu fpv4-sp-d16
 4349              	wifi_restore:
 4350              	.LFB313:
2561:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2562:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2563:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_restore
2564:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Restore the Wi-Fi with default values.
2565:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  None
2566:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2567:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2568:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_restore()
2569:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 4351              		.loc 1 2569 1 is_stmt 1 view -0
 4352              		.cfi_startproc
 4353              		@ args = 0, pretend = 0, frame = 0
 4354              		@ frame_needed = 0, uses_anonymous_args = 0
 4355 0000 08B5     		push	{r3, lr}
 4356              	.LCFI54:
 4357              		.cfi_def_cfa_offset 8
 4358              		.cfi_offset 3, -8
 4359              		.cfi_offset 14, -4
2570:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 4360              		.loc 1 2570 3 view .LVU1130
 4361              	.LVL448:
2571:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2572:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Restore default setting*/
2573:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Restore_Default_Setting();  
 4362              		.loc 1 2573 3 view .LVU1131
 4363 0002 FFF7FEFF 		bl	Restore_Default_Setting
 4364              	.LVL449:
2574:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2575:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2576:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04    
2577:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=0<cr>*/  
2578:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 0);  
ARM GAS  /tmp/cc7EC8er.s 			page 137


2579:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2580:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2581:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2582:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2583:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2584:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_TRUE;
2585:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2586:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2587:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2588:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif  
2589:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set wifi_mode to idle*/
2590:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(WIFI_MODE, WiFi_IDLE_MODE);
 4365              		.loc 1 2590 3 view .LVU1132
 4366 0006 0021     		movs	r1, #0
 4367 0008 0648     		ldr	r0, .L303
 4368 000a FFF7FEFF 		bl	SET_Configuration_Value
 4369              	.LVL450:
2591:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #ifdef SPWF04    
2592:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /*AT+S.WIFI=1<cr>*/  
2593:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Restore_Default_Setting();  
2594:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_WIFI_ENABLE, 1);  
2595:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
2596:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
2597:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   {
2598:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Receive_AT_Resp( );
2599:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status != WiFi_MODULE_SUCCESS) return status;
2600:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else IO_status_flag.radio_off = WIFI_FALSE;
2601:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   }
2602:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2603:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2604:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif  
2605:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2606:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2607:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set radio OFF */
2608:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2609:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 0);  
2610:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2611:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2612:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2613:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_WIND_State!= WiFiPowerDown);//Till +WIND:38:WiFi Powered Down arrives
2614:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2615:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* Set wifi_mode to idle*/
2616:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(WIFI_MODE, WiFi_IDLE_MODE);
2617:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2618:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Set radio ON */  
2619:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer();  
2620:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.WIFI=%d", 1);  
2621:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2622:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Receive_AT_Resp( );
2623:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status != WiFi_MODULE_SUCCESS) return status;
2624:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   while(IO_status_flag.WiFi_Enabled != WIFI_TRUE);//Till Hardware Started arrives
2625:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2626:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif  
2627:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2628:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* set the local echo */
2629:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   SET_Configuration_Value(LOCALECHO1, 0); 
 4370              		.loc 1 2629 3 view .LVU1133
ARM GAS  /tmp/cc7EC8er.s 			page 138


 4371 000e 0021     		movs	r1, #0
 4372 0010 0548     		ldr	r0, .L303+4
 4373 0012 FFF7FEFF 		bl	SET_Configuration_Value
 4374              	.LVL451:
2630:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2631:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* Soft reset the module */
2632:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined (SPWF04)
2633:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   //status = Soft_Reset();
2634:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2635:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* save current setting in flash */
2636:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Save_Current_Setting();
 4375              		.loc 1 2636 3 view .LVU1134
 4376 0016 FFF7FEFF 		bl	Save_Current_Setting
 4377              	.LVL452:
2637:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2638:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = SET_Power_State((WiFi_Power_State_t)PowerSave_State);//CFUN=1
 4378              		.loc 1 2638 3 view .LVU1135
 4379              		.loc 1 2638 12 is_stmt 0 view .LVU1136
 4380 001a 0120     		movs	r0, #1
 4381 001c FFF7FEFF 		bl	SET_Power_State
 4382              	.LVL453:
2639:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2640:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2641:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 4383              		.loc 1 2641 3 is_stmt 1 view .LVU1137
2642:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 4384              		.loc 1 2642 1 is_stmt 0 view .LVU1138
 4385 0020 08BD     		pop	{r3, pc}
 4386              	.L304:
 4387 0022 00BF     		.align	2
 4388              	.L303:
 4389 0024 10000000 		.word	.LC14
 4390 0028 00000000 		.word	.LC53
 4391              		.cfi_endproc
 4392              	.LFE313:
 4394              		.section	.rodata.wifi_gpio_init.str1.4,"aMS",%progbits,1
 4395              		.align	2
 4396              	.LC54:
 4397 0000 41542B53 		.ascii	"AT+S.GPIOC=%d,%s,%c\015\000"
 4397      2E475049 
 4397      4F433D25 
 4397      642C2573 
 4397      2C25630D 
 4398 0015 000000   		.align	2
 4399              	.LC55:
 4400 0018 41542B53 		.ascii	"AT+S.GPIOC=%d,%s\015\000"
 4400      2E475049 
 4400      4F433D25 
 4400      642C2573 
 4400      0D00
 4401              		.section	.text.wifi_gpio_init,"ax",%progbits
 4402              		.align	1
 4403              		.global	wifi_gpio_init
 4404              		.syntax unified
 4405              		.thumb
 4406              		.thumb_func
 4407              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cc7EC8er.s 			page 139


 4409              	wifi_gpio_init:
 4410              	.LVL454:
 4411              	.LFB314:
2643:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2644:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /*GPIO Configuration Functions*/
2645:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2646:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2647:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_gpio_init
2648:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Configure a GPIO pin as in or out with IRQ setting
2649:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  pin GPIO pin number
2650:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  irq configuration of the pin
2651:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2652:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2653:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** uint8_t wifi_gpio_init(GpioPin pin, char* dir, char irq)
2654:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 4412              		.loc 1 2654 1 is_stmt 1 view -0
 4413              		.cfi_startproc
 4414              		@ args = 0, pretend = 0, frame = 0
 4415              		@ frame_needed = 0, uses_anonymous_args = 0
 4416              		.loc 1 2654 1 is_stmt 0 view .LVU1140
 4417 0000 70B5     		push	{r4, r5, r6, lr}
 4418              	.LCFI55:
 4419              		.cfi_def_cfa_offset 16
 4420              		.cfi_offset 4, -16
 4421              		.cfi_offset 5, -12
 4422              		.cfi_offset 6, -8
 4423              		.cfi_offset 14, -4
 4424 0002 82B0     		sub	sp, sp, #8
 4425              	.LCFI56:
 4426              		.cfi_def_cfa_offset 24
 4427 0004 0546     		mov	r5, r0
 4428 0006 0E46     		mov	r6, r1
 4429 0008 1446     		mov	r4, r2
2655:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 4430              		.loc 1 2655 5 is_stmt 1 view .LVU1141
 4431              	.LVL455:
2656:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2657:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* AT+S.GPIOC=pin,dir,irq */
2658:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();
 4432              		.loc 1 2658 5 view .LVU1142
 4433 000a FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 4434              	.LVL456:
2659:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2660:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(irq!=GPIO_Off)
 4435              		.loc 1 2660 5 view .LVU1143
 4436              		.loc 1 2660 7 is_stmt 0 view .LVU1144
 4437 000e 302C     		cmp	r4, #48
 4438 0010 0FD0     		beq	.L306
2661:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOC=%d,%s,%c\r", pin, dir, irq);
 4439              		.loc 1 2661 7 is_stmt 1 view .LVU1145
 4440 0012 0094     		str	r4, [sp]
 4441 0014 3346     		mov	r3, r6
 4442 0016 2A46     		mov	r2, r5
 4443 0018 0B49     		ldr	r1, .L311
 4444 001a 0C48     		ldr	r0, .L311+4
 4445 001c FFF7FEFF 		bl	sprintf
 4446              	.LVL457:
ARM GAS  /tmp/cc7EC8er.s 			page 140


 4447              	.L307:
2662:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else
2663:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOC=%d,%s\r", pin, dir);
2664:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2665:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 4448              		.loc 1 2665 5 view .LVU1146
 4449              		.loc 1 2665 36 is_stmt 0 view .LVU1147
 4450 0020 0A48     		ldr	r0, .L311+4
 4451 0022 FFF7FEFF 		bl	strlen
 4452              	.LVL458:
 4453              		.loc 1 2665 14 view .LVU1148
 4454 0026 80B2     		uxth	r0, r0
 4455 0028 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 4456              	.LVL459:
2666:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2667:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(irq!=GPIO_Off)
2668:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOC=%d,%s,%c", pin, dir, irq);
2669:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     else
2670:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOC=%d,%s", pin, dir);
2671:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2672:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;  
2673:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2674:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2675:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2676:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 4457              		.loc 1 2676 5 is_stmt 1 view .LVU1149
 4458              		.loc 1 2676 7 is_stmt 0 view .LVU1150
 4459 002c 40B1     		cbz	r0, .L310
 4460              	.L308:
2677:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2678:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
2679:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2680:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2681:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
 4461              		.loc 1 2681 5 is_stmt 1 view .LVU1151
2682:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 4462              		.loc 1 2682 1 is_stmt 0 view .LVU1152
 4463 002e 02B0     		add	sp, sp, #8
 4464              	.LCFI57:
 4465              		.cfi_remember_state
 4466              		.cfi_def_cfa_offset 16
 4467              		@ sp needed
 4468 0030 70BD     		pop	{r4, r5, r6, pc}
 4469              	.LVL460:
 4470              	.L306:
 4471              	.LCFI58:
 4472              		.cfi_restore_state
2663:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
 4473              		.loc 1 2663 7 is_stmt 1 view .LVU1153
 4474 0032 3346     		mov	r3, r6
 4475 0034 2A46     		mov	r2, r5
 4476 0036 0649     		ldr	r1, .L311+8
 4477 0038 0448     		ldr	r0, .L311+4
 4478 003a FFF7FEFF 		bl	sprintf
 4479              	.LVL461:
 4480 003e EFE7     		b	.L307
 4481              	.LVL462:
ARM GAS  /tmp/cc7EC8er.s 			page 141


 4482              	.L310:
2678:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4483              		.loc 1 2678 9 view .LVU1154
2678:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4484              		.loc 1 2678 18 is_stmt 0 view .LVU1155
 4485 0040 FFF7FEFF 		bl	USART_Receive_AT_Resp
 4486              	.LVL463:
2678:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4487              		.loc 1 2678 18 view .LVU1156
 4488 0044 F3E7     		b	.L308
 4489              	.L312:
 4490 0046 00BF     		.align	2
 4491              	.L311:
 4492 0048 00000000 		.word	.LC54
 4493 004c 00000000 		.word	WiFi_AT_Cmd_Buff
 4494 0050 18000000 		.word	.LC55
 4495              		.cfi_endproc
 4496              	.LFE314:
 4498              		.section	.rodata.wifi_gpio_read.str1.4,"aMS",%progbits,1
 4499              		.align	2
 4500              	.LC56:
 4501 0000 41542B53 		.ascii	"AT+S.GPIOR=%d\015\000"
 4501      2E475049 
 4501      4F523D25 
 4501      640D00
 4502              		.section	.text.wifi_gpio_read,"ax",%progbits
 4503              		.align	1
 4504              		.global	wifi_gpio_read
 4505              		.syntax unified
 4506              		.thumb
 4507              		.thumb_func
 4508              		.fpu fpv4-sp-d16
 4510              	wifi_gpio_read:
 4511              	.LVL464:
 4512              	.LFB315:
2683:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2684:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2685:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_gpio_read
2686:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Read the configuration of a GPIO pin
2687:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  pin GPIO pin number
2688:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  val value returned
2689:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  dir configuration direction returned
2690:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2691:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2692:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** uint8_t wifi_gpio_read(GpioPin pin, uint8_t *val, uint8_t *dir)
2693:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 4513              		.loc 1 2693 1 is_stmt 1 view -0
 4514              		.cfi_startproc
 4515              		@ args = 0, pretend = 0, frame = 0
 4516              		@ frame_needed = 0, uses_anonymous_args = 0
 4517              		.loc 1 2693 1 is_stmt 0 view .LVU1158
 4518 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4519              	.LCFI59:
 4520              		.cfi_def_cfa_offset 24
 4521              		.cfi_offset 3, -24
 4522              		.cfi_offset 4, -20
 4523              		.cfi_offset 5, -16
ARM GAS  /tmp/cc7EC8er.s 			page 142


 4524              		.cfi_offset 6, -12
 4525              		.cfi_offset 7, -8
 4526              		.cfi_offset 14, -4
 4527 0002 0646     		mov	r6, r0
 4528 0004 0D46     		mov	r5, r1
 4529 0006 1446     		mov	r4, r2
2694:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Status_t status = WiFi_MODULE_SUCCESS;    
 4530              		.loc 1 2694 5 is_stmt 1 view .LVU1159
 4531              	.LVL465:
2695:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2696:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* AT+S.GPIOR=pin */
2697:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer();  
 4532              		.loc 1 2697 5 view .LVU1160
 4533 0008 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 4534              	.LVL466:
2698:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2699:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOR=%d\r", pin);
 4535              		.loc 1 2699 5 view .LVU1161
 4536 000c 0A4F     		ldr	r7, .L317
 4537 000e 3246     		mov	r2, r6
 4538 0010 0A49     		ldr	r1, .L317+4
 4539 0012 3846     		mov	r0, r7
 4540 0014 FFF7FEFF 		bl	sprintf
 4541              	.LVL467:
2700:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 4542              		.loc 1 2700 5 view .LVU1162
 4543              		.loc 1 2700 36 is_stmt 0 view .LVU1163
 4544 0018 3846     		mov	r0, r7
 4545 001a FFF7FEFF 		bl	strlen
 4546              	.LVL468:
 4547              		.loc 1 2700 14 view .LVU1164
 4548 001e 80B2     		uxth	r0, r0
 4549 0020 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 4550              	.LVL469:
2701:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2702:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOR=%d", pin);
2703:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2704:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_GPIO_EVENT;
2705:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;
2706:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2707:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2708:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 4551              		.loc 1 2708 5 is_stmt 1 view .LVU1165
 4552              		.loc 1 2708 7 is_stmt 0 view .LVU1166
 4553 0024 28B1     		cbz	r0, .L316
 4554              	.L314:
 4555              	.LVL470:
2709:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2710:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
2711:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2712:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     *val = WiFi_Counter_Variables.gpio_value;
 4556              		.loc 1 2712 5 is_stmt 1 view .LVU1167
 4557              		.loc 1 2712 34 is_stmt 0 view .LVU1168
 4558 0026 064B     		ldr	r3, .L317+8
 4559 0028 5A7A     		ldrb	r2, [r3, #9]	@ zero_extendqisi2
 4560              		.loc 1 2712 10 view .LVU1169
 4561 002a 2A70     		strb	r2, [r5]
ARM GAS  /tmp/cc7EC8er.s 			page 143


2713:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     *dir = WiFi_Counter_Variables.gpio_dir;
 4562              		.loc 1 2713 5 is_stmt 1 view .LVU1170
 4563              		.loc 1 2713 34 is_stmt 0 view .LVU1171
 4564 002c 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 4565              		.loc 1 2713 10 view .LVU1172
 4566 002e 2370     		strb	r3, [r4]
2714:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2715:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
 4567              		.loc 1 2715 5 is_stmt 1 view .LVU1173
2716:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 4568              		.loc 1 2716 1 is_stmt 0 view .LVU1174
 4569 0030 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4570              	.LVL471:
 4571              	.L316:
2710:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4572              		.loc 1 2710 9 is_stmt 1 view .LVU1175
2710:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4573              		.loc 1 2710 18 is_stmt 0 view .LVU1176
 4574 0032 FFF7FEFF 		bl	USART_Receive_AT_Resp
 4575              	.LVL472:
2710:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4576              		.loc 1 2710 18 view .LVU1177
 4577 0036 F6E7     		b	.L314
 4578              	.L318:
 4579              		.align	2
 4580              	.L317:
 4581 0038 00000000 		.word	WiFi_AT_Cmd_Buff
 4582 003c 00000000 		.word	.LC56
 4583 0040 00000000 		.word	WiFi_Counter_Variables
 4584              		.cfi_endproc
 4585              	.LFE315:
 4587              		.section	.rodata.wifi_gpio_write.str1.4,"aMS",%progbits,1
 4588              		.align	2
 4589              	.LC57:
 4590 0000 41542B53 		.ascii	"AT+S.GPIOW=%d,%d\015\000"
 4590      2E475049 
 4590      4F573D25 
 4590      642C2564 
 4590      0D00
 4591              		.section	.text.wifi_gpio_write,"ax",%progbits
 4592              		.align	1
 4593              		.global	wifi_gpio_write
 4594              		.syntax unified
 4595              		.thumb
 4596              		.thumb_func
 4597              		.fpu fpv4-sp-d16
 4599              	wifi_gpio_write:
 4600              	.LVL473:
 4601              	.LFB316:
2717:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2718:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2719:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_gpio_write
2720:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Read the value of a GPIO pin
2721:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  pin GPIO pin number
2722:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  val value to be configured
2723:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval WiFi_Status_t : status of AT cmd
2724:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
ARM GAS  /tmp/cc7EC8er.s 			page 144


2725:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** uint8_t wifi_gpio_write(GpioPin pin, GpioWriteValue value)
2726:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 4602              		.loc 1 2726 1 is_stmt 1 view -0
 4603              		.cfi_startproc
 4604              		@ args = 0, pretend = 0, frame = 0
 4605              		@ frame_needed = 0, uses_anonymous_args = 0
 4606              		.loc 1 2726 1 is_stmt 0 view .LVU1179
 4607 0000 70B5     		push	{r4, r5, r6, lr}
 4608              	.LCFI60:
 4609              		.cfi_def_cfa_offset 16
 4610              		.cfi_offset 4, -16
 4611              		.cfi_offset 5, -12
 4612              		.cfi_offset 6, -8
 4613              		.cfi_offset 14, -4
 4614 0002 0446     		mov	r4, r0
 4615 0004 0D46     		mov	r5, r1
2727:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 4616              		.loc 1 2727 5 is_stmt 1 view .LVU1180
 4617              	.LVL474:
2728:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2729:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     /* AT+S.GPIOW=pin,value */
2730:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     Reset_AT_CMD_Buffer(); 
 4618              		.loc 1 2730 5 view .LVU1181
 4619 0006 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 4620              	.LVL475:
2731:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)
2732:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOW=%d,%d\r", pin, value);
 4621              		.loc 1 2732 5 view .LVU1182
 4622 000a 094E     		ldr	r6, .L323
 4623 000c 2B46     		mov	r3, r5
 4624 000e 2246     		mov	r2, r4
 4625 0010 0849     		ldr	r1, .L323+4
 4626 0012 3046     		mov	r0, r6
 4627 0014 FFF7FEFF 		bl	sprintf
 4628              	.LVL476:
2733:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2734:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 4629              		.loc 1 2734 5 view .LVU1183
 4630              		.loc 1 2734 36 is_stmt 0 view .LVU1184
 4631 0018 3046     		mov	r0, r6
 4632 001a FFF7FEFF 		bl	strlen
 4633              	.LVL477:
 4634              		.loc 1 2734 14 view .LVU1185
 4635 001e 80B2     		uxth	r0, r0
 4636 0020 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 4637              	.LVL478:
2735:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2736:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GPIOW=%d,%d", pin, value);
2737:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2738:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;
2739:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2740:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2741:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     if(status == WiFi_MODULE_SUCCESS)
 4638              		.loc 1 2741 5 is_stmt 1 view .LVU1186
 4639              		.loc 1 2741 7 is_stmt 0 view .LVU1187
 4640 0024 00B1     		cbz	r0, .L322
 4641              	.L320:
ARM GAS  /tmp/cc7EC8er.s 			page 145


 4642              	.LVL479:
2742:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2743:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         status = USART_Receive_AT_Resp( );
2744:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2745:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     
2746:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     return status;
 4643              		.loc 1 2746 5 is_stmt 1 view .LVU1188
2747:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 4644              		.loc 1 2747 1 is_stmt 0 view .LVU1189
 4645 0026 70BD     		pop	{r4, r5, r6, pc}
 4646              	.LVL480:
 4647              	.L322:
2743:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4648              		.loc 1 2743 9 is_stmt 1 view .LVU1190
2743:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4649              		.loc 1 2743 18 is_stmt 0 view .LVU1191
 4650 0028 FFF7FEFF 		bl	USART_Receive_AT_Resp
 4651              	.LVL481:
2743:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4652              		.loc 1 2743 18 view .LVU1192
 4653 002c FBE7     		b	.L320
 4654              	.L324:
 4655 002e 00BF     		.align	2
 4656              	.L323:
 4657 0030 00000000 		.word	WiFi_AT_Cmd_Buff
 4658 0034 00000000 		.word	.LC57
 4659              		.cfi_endproc
 4660              	.LFE316:
 4662              		.section	.rodata.wifi_get_IP_address.str1.4,"aMS",%progbits,1
 4663              		.align	2
 4664              	.LC58:
 4665 0000 41542B53 		.ascii	"AT+S.STS=%s\015\000"
 4665      2E535453 
 4665      3D25730D 
 4665      00
 4666              		.section	.text.wifi_get_IP_address,"ax",%progbits
 4667              		.align	1
 4668              		.global	wifi_get_IP_address
 4669              		.syntax unified
 4670              		.thumb
 4671              		.thumb_func
 4672              		.fpu fpv4-sp-d16
 4674              	wifi_get_IP_address:
 4675              	.LVL482:
 4676              	.LFB317:
2748:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2749:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2750:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_get_IP_address
2751:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Get the ip address
2752:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  ip_addr : pointer to ip address
2753:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval status  : status of AT cmd request
2754:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2755:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_get_IP_address(uint8_t *ip_addr)
2756:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 4677              		.loc 1 2756 1 is_stmt 1 view -0
 4678              		.cfi_startproc
 4679              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/cc7EC8er.s 			page 146


 4680              		@ frame_needed = 0, uses_anonymous_args = 0
 4681              		.loc 1 2756 1 is_stmt 0 view .LVU1194
 4682 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4683              	.LCFI61:
 4684              		.cfi_def_cfa_offset 24
 4685              		.cfi_offset 3, -24
 4686              		.cfi_offset 4, -20
 4687              		.cfi_offset 5, -16
 4688              		.cfi_offset 6, -12
 4689              		.cfi_offset 7, -8
 4690              		.cfi_offset 14, -4
 4691 0002 0546     		mov	r5, r0
2757:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 4692              		.loc 1 2757 3 is_stmt 1 view .LVU1195
 4693              	.LVL483:
2758:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   int cfg_value_length;
 4694              		.loc 1 2758 3 view .LVU1196
2759:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2760:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* AT : send AT command */
2761:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer(); 
 4695              		.loc 1 2761 3 view .LVU1197
 4696 0004 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 4697              	.LVL484:
2762:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #if defined(CONSOLE_UART_ENABLED)  
2763:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_GET_STATUS_VALUE,"ip_ipaddr");
 4698              		.loc 1 2763 3 view .LVU1198
 4699 0008 114C     		ldr	r4, .L329
 4700 000a 124A     		ldr	r2, .L329+4
 4701 000c 1249     		ldr	r1, .L329+8
 4702 000e 2046     		mov	r0, r4
 4703 0010 FFF7FEFF 		bl	sprintf
 4704              	.LVL485:
2764:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 4705              		.loc 1 2764 3 view .LVU1199
 4706              		.loc 1 2764 34 is_stmt 0 view .LVU1200
 4707 0014 2046     		mov	r0, r4
 4708 0016 FFF7FEFF 		bl	strlen
 4709              	.LVL486:
 4710              		.loc 1 2764 12 view .LVU1201
 4711 001a 80B2     		uxth	r0, r0
 4712 001c FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 4713              	.LVL487:
2765:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2766:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.STS=%s", "ip_ipaddr");  
2767:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2768:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   IO_status_flag.AT_event_processing = WIFI_GCFG_EVENT;
2769:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;
2770:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif
2771:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2772:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 4714              		.loc 1 2772 3 is_stmt 1 view .LVU1202
 4715              		.loc 1 2772 5 is_stmt 0 view .LVU1203
 4716 0020 0446     		mov	r4, r0
 4717 0022 08B1     		cbz	r0, .L328
 4718              	.LVL488:
 4719              	.L326:
2773:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
ARM GAS  /tmp/cc7EC8er.s 			page 147


2774:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
2775:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
2776:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
2777:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* copy user pointer to get_cfg_value */
2778:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy(ip_addr,WiFi_Counter_Variables.get_cfg_value,cfg_value_length);   
2779:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
2780:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
2781:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 4720              		.loc 1 2781 3 is_stmt 1 view .LVU1204
2782:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 4721              		.loc 1 2782 1 is_stmt 0 view .LVU1205
 4722 0024 2046     		mov	r0, r4
 4723 0026 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4724              	.LVL489:
 4725              	.L328:
2774:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 4726              		.loc 1 2774 7 is_stmt 1 view .LVU1206
2774:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 4727              		.loc 1 2774 16 is_stmt 0 view .LVU1207
 4728 0028 FFF7FEFF 		bl	USART_Receive_AT_Resp
 4729              	.LVL490:
2774:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 4730              		.loc 1 2774 16 view .LVU1208
 4731 002c 0446     		mov	r4, r0
 4732              	.LVL491:
2775:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 4733              		.loc 1 2775 7 is_stmt 1 view .LVU1209
2775:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 4734              		.loc 1 2775 26 is_stmt 0 view .LVU1210
 4735 002e 0B4F     		ldr	r7, .L329+12
 4736 0030 3846     		mov	r0, r7
 4737 0032 FFF7FEFF 		bl	strlen
 4738              	.LVL492:
 4739 0036 0646     		mov	r6, r0
 4740              	.LVL493:
2778:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
 4741              		.loc 1 2778 7 is_stmt 1 view .LVU1211
 4742 0038 0246     		mov	r2, r0
 4743 003a 3946     		mov	r1, r7
 4744 003c 2846     		mov	r0, r5
 4745              	.LVL494:
2778:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
 4746              		.loc 1 2778 7 is_stmt 0 view .LVU1212
 4747 003e FFF7FEFF 		bl	memcpy
 4748              	.LVL495:
2779:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 4749              		.loc 1 2779 7 is_stmt 1 view .LVU1213
 4750 0042 3246     		mov	r2, r6
 4751 0044 0021     		movs	r1, #0
 4752 0046 3846     		mov	r0, r7
 4753 0048 FFF7FEFF 		bl	memset
 4754              	.LVL496:
 4755 004c EAE7     		b	.L326
 4756              	.L330:
 4757 004e 00BF     		.align	2
 4758              	.L329:
 4759 0050 00000000 		.word	WiFi_AT_Cmd_Buff
ARM GAS  /tmp/cc7EC8er.s 			page 148


 4760 0054 10000000 		.word	.LC17
 4761 0058 00000000 		.word	.LC58
 4762 005c 0E000000 		.word	WiFi_Counter_Variables+14
 4763              		.cfi_endproc
 4764              	.LFE317:
 4766              		.section	.rodata.wifi_get_MAC_address.str1.4,"aMS",%progbits,1
 4767              		.align	2
 4768              	.LC59:
 4769 0000 6E765F77 		.ascii	"nv_wifi_macaddr\000"
 4769      6966695F 
 4769      6D616361 
 4769      64647200 
 4770              		.align	2
 4771              	.LC60:
 4772 0010 41542B53 		.ascii	"AT+S.GCFG=%s\015\000"
 4772      2E474346 
 4772      473D2573 
 4772      0D00
 4773              		.section	.text.wifi_get_MAC_address,"ax",%progbits
 4774              		.align	1
 4775              		.global	wifi_get_MAC_address
 4776              		.syntax unified
 4777              		.thumb
 4778              		.thumb_func
 4779              		.fpu fpv4-sp-d16
 4781              	wifi_get_MAC_address:
 4782              	.LVL497:
 4783              	.LFB318:
2783:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2784:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2785:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  WiFi_get_MAC_address
2786:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Get the MAC address
2787:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  ip_addr : pointer to MAC address
2788:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval status  : status of AT cmd request
2789:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2790:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** WiFi_Status_t wifi_get_MAC_address(uint8_t *mac_addr)
2791:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 4784              		.loc 1 2791 1 view -0
 4785              		.cfi_startproc
 4786              		@ args = 0, pretend = 0, frame = 0
 4787              		@ frame_needed = 0, uses_anonymous_args = 0
 4788              		.loc 1 2791 1 is_stmt 0 view .LVU1215
 4789 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4790              	.LCFI62:
 4791              		.cfi_def_cfa_offset 24
 4792              		.cfi_offset 3, -24
 4793              		.cfi_offset 4, -20
 4794              		.cfi_offset 5, -16
 4795              		.cfi_offset 6, -12
 4796              		.cfi_offset 7, -8
 4797              		.cfi_offset 14, -4
 4798 0002 0546     		mov	r5, r0
2792:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 4799              		.loc 1 2792 3 is_stmt 1 view .LVU1216
 4800              	.LVL498:
2793:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   int cfg_value_length;
 4801              		.loc 1 2793 3 view .LVU1217
ARM GAS  /tmp/cc7EC8er.s 			page 149


2794:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2795:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   /* AT : send AT command */
2796:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer(); 
 4802              		.loc 1 2796 3 view .LVU1218
 4803 0004 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 4804              	.LVL499:
2797:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)  
2798:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,AT_GET_CONFIGURATION_VALUE,"nv_wifi_macaddr");
 4805              		.loc 1 2798 3 view .LVU1219
 4806 0008 114C     		ldr	r4, .L335
 4807 000a 124A     		ldr	r2, .L335+4
 4808 000c 1249     		ldr	r1, .L335+8
 4809 000e 2046     		mov	r0, r4
 4810 0010 FFF7FEFF 		bl	sprintf
 4811              	.LVL500:
2799:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 4812              		.loc 1 2799 3 view .LVU1220
 4813              		.loc 1 2799 34 is_stmt 0 view .LVU1221
 4814 0014 2046     		mov	r0, r4
 4815 0016 FFF7FEFF 		bl	strlen
 4816              	.LVL501:
 4817              		.loc 1 2799 12 view .LVU1222
 4818 001a 80B2     		uxth	r0, r0
 4819 001c FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 4820              	.LVL502:
2800:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #else
2801:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.GCFG=%s", "nv_wifi_macaddr");  
2802:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2803:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   IO_status_flag.AT_event_processing = WIFI_GCFG_EVENT;
2804:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   status = WiFi_MODULE_SUCCESS;
2805:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** #endif   
2806:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   
2807:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 4821              		.loc 1 2807 3 is_stmt 1 view .LVU1223
 4822              		.loc 1 2807 5 is_stmt 0 view .LVU1224
 4823 0020 0446     		mov	r4, r0
 4824 0022 08B1     		cbz	r0, .L334
 4825              	.LVL503:
 4826              	.L332:
2808:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
2809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
2810:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
2811:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
2812:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* copy user pointer to get_cfg_value */
2813:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy(mac_addr,&WiFi_Counter_Variables.get_cfg_value,cfg_value_length);  //IP address will h
2814:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
2815:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
2816:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return status;
 4827              		.loc 1 2816 3 is_stmt 1 view .LVU1225
2817:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 4828              		.loc 1 2817 1 is_stmt 0 view .LVU1226
 4829 0024 2046     		mov	r0, r4
 4830 0026 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4831              	.LVL504:
 4832              	.L334:
2809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 4833              		.loc 1 2809 7 is_stmt 1 view .LVU1227
ARM GAS  /tmp/cc7EC8er.s 			page 150


2809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 4834              		.loc 1 2809 16 is_stmt 0 view .LVU1228
 4835 0028 FFF7FEFF 		bl	USART_Receive_AT_Resp
 4836              	.LVL505:
2809:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 4837              		.loc 1 2809 16 view .LVU1229
 4838 002c 0446     		mov	r4, r0
 4839              	.LVL506:
2810:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 4840              		.loc 1 2810 7 is_stmt 1 view .LVU1230
2810:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 4841              		.loc 1 2810 26 is_stmt 0 view .LVU1231
 4842 002e 0B4F     		ldr	r7, .L335+12
 4843 0030 3846     		mov	r0, r7
 4844 0032 FFF7FEFF 		bl	strlen
 4845              	.LVL507:
 4846 0036 0646     		mov	r6, r0
 4847              	.LVL508:
2813:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
 4848              		.loc 1 2813 7 is_stmt 1 view .LVU1232
 4849 0038 0246     		mov	r2, r0
 4850 003a 3946     		mov	r1, r7
 4851 003c 2846     		mov	r0, r5
 4852              	.LVL509:
2813:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
 4853              		.loc 1 2813 7 is_stmt 0 view .LVU1233
 4854 003e FFF7FEFF 		bl	memcpy
 4855              	.LVL510:
2814:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 4856              		.loc 1 2814 7 is_stmt 1 view .LVU1234
 4857 0042 3246     		mov	r2, r6
 4858 0044 0021     		movs	r1, #0
 4859 0046 3846     		mov	r0, r7
 4860 0048 FFF7FEFF 		bl	memset
 4861              	.LVL511:
 4862 004c EAE7     		b	.L332
 4863              	.L336:
 4864 004e 00BF     		.align	2
 4865              	.L335:
 4866 0050 00000000 		.word	WiFi_AT_Cmd_Buff
 4867 0054 00000000 		.word	.LC59
 4868 0058 10000000 		.word	.LC60
 4869 005c 0E000000 		.word	WiFi_Counter_Variables+14
 4870              		.cfi_endproc
 4871              	.LFE318:
 4873              		.section	.rodata.wifi_get_status_variable_value.str1.4,"aMS",%progbits,1
 4874              		.align	2
 4875              	.LC61:
 4876 0000 66726565 		.ascii	"free_heap\000"
 4876      5F686561 
 4876      7000
 4877              		.section	.text.wifi_get_status_variable_value,"ax",%progbits
 4878              		.align	1
 4879              		.global	wifi_get_status_variable_value
 4880              		.syntax unified
 4881              		.thumb
 4882              		.thumb_func
ARM GAS  /tmp/cc7EC8er.s 			page 151


 4883              		.fpu fpv4-sp-d16
 4885              	wifi_get_status_variable_value:
 4886              	.LVL512:
 4887              	.LFB319:
2818:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2819:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** /**
2820:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @brief  wifi_get_status_variable_value
2821:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** *         Get the value of any status variable.
2822:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  status_variable_name  : name of the Status Variable whose value needs to be found. 
2823:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @param  status_variable_value : value of the Status Variable.
2824:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @retval uint32_t : If successful, the total number of charcters written in user buffer is returne
2825:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** * @NOTE:  The user should make sure to allocate enough memory to the buffer pointed by status_varia
2826:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** */
2827:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** uint32_t wifi_get_status_variable_value(uint8_t *status_variable_name, uint8_t *status_variable_val
2828:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** {
 4888              		.loc 1 2828 1 view -0
 4889              		.cfi_startproc
 4890              		@ args = 0, pretend = 0, frame = 0
 4891              		@ frame_needed = 0, uses_anonymous_args = 0
 4892              		.loc 1 2828 1 is_stmt 0 view .LVU1236
 4893 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4894              	.LCFI63:
 4895              		.cfi_def_cfa_offset 24
 4896              		.cfi_offset 3, -24
 4897              		.cfi_offset 4, -20
 4898              		.cfi_offset 5, -16
 4899              		.cfi_offset 6, -12
 4900              		.cfi_offset 7, -8
 4901              		.cfi_offset 14, -4
 4902 0002 0446     		mov	r4, r0
 4903 0004 0D46     		mov	r5, r1
2829:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   WiFi_Status_t status = WiFi_MODULE_SUCCESS;
 4904              		.loc 1 2829 3 is_stmt 1 view .LVU1237
 4905              	.LVL513:
2830:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   uint32_t cfg_value_length = 0;
 4906              		.loc 1 2830 3 view .LVU1238
2831:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2832:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****    /* AT : send AT command */
2833:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   Reset_AT_CMD_Buffer(); 
 4907              		.loc 1 2833 3 view .LVU1239
 4908 0006 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 4909              	.LVL514:
2834:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #if defined(CONSOLE_UART_ENABLED)  
2835:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,AT_GET_STATUS_VALUE,status_variable_name);
 4910              		.loc 1 2835 5 view .LVU1240
 4911 000a 194E     		ldr	r6, .L343
 4912 000c 2246     		mov	r2, r4
 4913 000e 1949     		ldr	r1, .L343+4
 4914 0010 3046     		mov	r0, r6
 4915 0012 FFF7FEFF 		bl	sprintf
 4916              	.LVL515:
2836:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 4917              		.loc 1 2836 5 view .LVU1241
 4918              		.loc 1 2836 36 is_stmt 0 view .LVU1242
 4919 0016 3046     		mov	r0, r6
 4920 0018 FFF7FEFF 		bl	strlen
 4921              	.LVL516:
ARM GAS  /tmp/cc7EC8er.s 			page 152


 4922              		.loc 1 2836 14 view .LVU1243
 4923 001c 80B2     		uxth	r0, r0
 4924 001e FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 4925              	.LVL517:
2837:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #else
2838:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     sprintf((char*)WiFi_AT_Cmd_Buff,"AT+S.STS=%s", status_variable_name);  
2839:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     run_spi_cmd((char*)WiFi_AT_Cmd_Buff, SPI_DMA);
2840:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     IO_status_flag.AT_event_processing = WIFI_GCFG_EVENT;
2841:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     status = WiFi_MODULE_SUCCESS;
2842:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   #endif
2843:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2844:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   if(status == WiFi_MODULE_SUCCESS)
 4926              		.loc 1 2844 3 is_stmt 1 view .LVU1244
 4927              		.loc 1 2844 5 is_stmt 0 view .LVU1245
 4928 0022 10B1     		cbz	r0, .L342
2830:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 4929              		.loc 1 2830 12 view .LVU1246
 4930 0024 0026     		movs	r6, #0
2845:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     {
2846:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       status = USART_Receive_AT_Resp( );
2847:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
2848:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
2849:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       /* copy user pointer to get_cfg_value */
2850:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memcpy(status_variable_value,WiFi_Counter_Variables.get_cfg_value,cfg_value_length);
2851:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
2852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       if((strstr((const char *)status_variable_name,"free_heap")) != NULL)
2853:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
2854:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         uint32_t free_heap_size;
2855:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         free_heap_size = atoi((const char*)WiFi_Counter_Variables.get_cfg_value);
2856:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Update the wifi_socket_write_limit value to 80% of the free heap size Value*/
2857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         WiFi_Counter_Variables.wifi_socket_write_limit = 80*(free_heap_size/100); //can use upto 80
2858:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
2859:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       memset(WiFi_Counter_Variables.get_cfg_value, 0x00,cfg_value_length);
2860:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
2861:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****   return cfg_value_length;
 4931              		.loc 1 2861 3 is_stmt 1 view .LVU1247
 4932              	.LVL518:
 4933              	.L337:
2862:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** }
 4934              		.loc 1 2862 1 is_stmt 0 view .LVU1248
 4935 0026 3046     		mov	r0, r6
 4936 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4937              	.LVL519:
 4938              	.L342:
2846:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 4939              		.loc 1 2846 7 is_stmt 1 view .LVU1249
2846:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       cfg_value_length = strlen((const char*)WiFi_Counter_Variables.get_cfg_value);
 4940              		.loc 1 2846 16 is_stmt 0 view .LVU1250
 4941 002a FFF7FEFF 		bl	USART_Receive_AT_Resp
 4942              	.LVL520:
2847:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 4943              		.loc 1 2847 7 is_stmt 1 view .LVU1251
2847:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c **** 
 4944              		.loc 1 2847 26 is_stmt 0 view .LVU1252
 4945 002e 124F     		ldr	r7, .L343+8
 4946 0030 3846     		mov	r0, r7
 4947 0032 FFF7FEFF 		bl	strlen
ARM GAS  /tmp/cc7EC8er.s 			page 153


 4948              	.LVL521:
 4949 0036 0646     		mov	r6, r0
 4950              	.LVL522:
2850:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 4951              		.loc 1 2850 7 is_stmt 1 view .LVU1253
 4952 0038 0246     		mov	r2, r0
 4953 003a 3946     		mov	r1, r7
 4954 003c 2846     		mov	r0, r5
 4955              	.LVL523:
2850:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       
 4956              		.loc 1 2850 7 is_stmt 0 view .LVU1254
 4957 003e FFF7FEFF 		bl	memcpy
 4958              	.LVL524:
2852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 4959              		.loc 1 2852 7 is_stmt 1 view .LVU1255
2852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 4960              		.loc 1 2852 11 is_stmt 0 view .LVU1256
 4961 0042 0E49     		ldr	r1, .L343+12
 4962 0044 2046     		mov	r0, r4
 4963 0046 FFF7FEFF 		bl	strstr
 4964              	.LVL525:
2852:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       {
 4965              		.loc 1 2852 9 view .LVU1257
 4966 004a 58B1     		cbz	r0, .L339
 4967              	.LBB29:
2854:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         free_heap_size = atoi((const char*)WiFi_Counter_Variables.get_cfg_value);
 4968              		.loc 1 2854 9 is_stmt 1 view .LVU1258
2855:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Update the wifi_socket_write_limit value to 80% of the free heap size Value*/
 4969              		.loc 1 2855 9 view .LVU1259
2855:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****         /* Update the wifi_socket_write_limit value to 80% of the free heap size Value*/
 4970              		.loc 1 2855 26 is_stmt 0 view .LVU1260
 4971 004c 3846     		mov	r0, r7
 4972 004e FFF7FEFF 		bl	atoi
 4973              	.LVL526:
2857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4974              		.loc 1 2857 9 is_stmt 1 view .LVU1261
2857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4975              		.loc 1 2857 76 is_stmt 0 view .LVU1262
 4976 0052 0B4B     		ldr	r3, .L343+16
 4977 0054 A3FB0023 		umull	r2, r3, r3, r0
 4978 0058 5B09     		lsrs	r3, r3, #5
2857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4979              		.loc 1 2857 60 view .LVU1263
 4980 005a 03EB8303 		add	r3, r3, r3, lsl #2
 4981 005e 1B01     		lsls	r3, r3, #4
2857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4982              		.loc 1 2857 56 view .LVU1264
 4983 0060 C7F8D630 		str	r3, [r7, #214]
 4984              	.LVL527:
 4985              	.L339:
2857:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****       }
 4986              		.loc 1 2857 56 view .LVU1265
 4987              	.LBE29:
2859:Middlewares/ST/STM32_SPWF0xSy/wifi_interface.c ****     }
 4988              		.loc 1 2859 7 is_stmt 1 view .LVU1266
 4989 0064 3246     		mov	r2, r6
 4990 0066 0021     		movs	r1, #0
ARM GAS  /tmp/cc7EC8er.s 			page 154


 4991 0068 0348     		ldr	r0, .L343+8
 4992 006a FFF7FEFF 		bl	memset
 4993              	.LVL528:
 4994 006e DAE7     		b	.L337
 4995              	.L344:
 4996              		.align	2
 4997              	.L343:
 4998 0070 00000000 		.word	WiFi_AT_Cmd_Buff
 4999 0074 00000000 		.word	.LC58
 5000 0078 0E000000 		.word	WiFi_Counter_Variables+14
 5001 007c 00000000 		.word	.LC61
 5002 0080 1F85EB51 		.word	1374389535
 5003              		.cfi_endproc
 5004              	.LFE319:
 5006              		.comm	WAKEUP_InitStruct,20,4
 5007              		.text
 5008              	.Letext0:
 5009              		.file 3 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 5010              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 5011              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 5012              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xe.h"
 5013              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 5014              		.file 8 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 5015              		.file 9 "/usr/include/newlib/sys/_types.h"
 5016              		.file 10 "/usr/include/newlib/sys/reent.h"
 5017              		.file 11 "/usr/include/newlib/sys/lock.h"
 5018              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 5019              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 5020              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 5021              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 5022              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 5023              		.file 17 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 5024              		.file 18 "Middlewares/ST/STM32_SPWF0xSy/Inc/wifi_interface.h"
 5025              		.file 19 "/usr/include/newlib/stdlib.h"
 5026              		.file 20 "Middlewares/ST/STM32_SPWF0xSy/Utils/event_buffer.h"
 5027              		.file 21 "/usr/include/newlib/time.h"
 5028              		.file 22 "Middlewares/ST/STM32_SPWF0xSy/Inc/wifi_module.h"
 5029              		.file 23 "Middlewares/ST/STM32_SPWF0xSy/Utils/wifi_globals.h"
 5030              		.file 24 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_ll_dma.h"
 5031              		.file 25 "/usr/include/newlib/stdio.h"
 5032              		.file 26 "/usr/include/newlib/string.h"
 5033              		.file 27 "<built-in>"
 5034              		.file 28 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_cortex.h"
ARM GAS  /tmp/cc7EC8er.s 			page 155


DEFINED SYMBOLS
                            *ABS*:0000000000000000 wifi_interface.c
     /tmp/cc7EC8er.s:18     .rodata.wifi_set_socket_certificates.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:37     .text.wifi_set_socket_certificates:0000000000000000 $t
     /tmp/cc7EC8er.s:45     .text.wifi_set_socket_certificates:0000000000000000 wifi_set_socket_certificates
     /tmp/cc7EC8er.s:345    .text.wifi_set_socket_certificates:000000000000015c $d
     /tmp/cc7EC8er.s:358    .rodata.wifi_ping.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:362    .text.wifi_ping:0000000000000000 $t
     /tmp/cc7EC8er.s:369    .text.wifi_ping:0000000000000000 wifi_ping
     /tmp/cc7EC8er.s:421    .text.wifi_ping:0000000000000024 $d
     /tmp/cc7EC8er.s:427    .text.wifi_websocket_client_open:0000000000000000 $t
     /tmp/cc7EC8er.s:434    .text.wifi_websocket_client_open:0000000000000000 wifi_websocket_client_open
     /tmp/cc7EC8er.s:475    .text.wifi_websocket_client_open:000000000000001c $d
     /tmp/cc7EC8er.s:480    .text.wifi_websocket_client_write:0000000000000000 $t
     /tmp/cc7EC8er.s:487    .text.wifi_websocket_client_write:0000000000000000 wifi_websocket_client_write
     /tmp/cc7EC8er.s:547    .text.wifi_websocket_client_write:0000000000000028 $d
     /tmp/cc7EC8er.s:553    .text.wifi_websocket_client_close:0000000000000000 $t
     /tmp/cc7EC8er.s:560    .text.wifi_websocket_client_close:0000000000000000 wifi_websocket_client_close
     /tmp/cc7EC8er.s:587    .text.wifi_socket_client_open:0000000000000000 $t
     /tmp/cc7EC8er.s:594    .text.wifi_socket_client_open:0000000000000000 wifi_socket_client_open
     /tmp/cc7EC8er.s:635    .text.wifi_socket_client_open:000000000000001c $d
     /tmp/cc7EC8er.s:640    .text.Open_Serial_Port:0000000000000000 $t
     /tmp/cc7EC8er.s:647    .text.Open_Serial_Port:0000000000000000 Open_Serial_Port
     /tmp/cc7EC8er.s:691    .text.Open_Serial_Port:000000000000001c $d
     /tmp/cc7EC8er.s:696    .text.wifi_socket_client_write:0000000000000000 $t
     /tmp/cc7EC8er.s:703    .text.wifi_socket_client_write:0000000000000000 wifi_socket_client_write
     /tmp/cc7EC8er.s:844    .text.wifi_socket_client_write:000000000000006c $d
     /tmp/cc7EC8er.s:849    .text.wifi_socket_client_close:0000000000000000 $t
     /tmp/cc7EC8er.s:856    .text.wifi_socket_client_close:0000000000000000 wifi_socket_client_close
     /tmp/cc7EC8er.s:902    .text.wifi_socket_client_close:0000000000000020 $d
     /tmp/cc7EC8er.s:908    .text.wifi_socket_server_open:0000000000000000 $t
     /tmp/cc7EC8er.s:915    .text.wifi_socket_server_open:0000000000000000 wifi_socket_server_open
     /tmp/cc7EC8er.s:944    .text.wifi_socket_server_close:0000000000000000 $t
     /tmp/cc7EC8er.s:951    .text.wifi_socket_server_close:0000000000000000 wifi_socket_server_close
     /tmp/cc7EC8er.s:975    .text.wait_for_command_mode:0000000000000000 $t
     /tmp/cc7EC8er.s:982    .text.wait_for_command_mode:0000000000000000 wait_for_command_mode
     /tmp/cc7EC8er.s:1012   .text.wait_for_command_mode:0000000000000010 $d
     /tmp/cc7EC8er.s:1017   .rodata.Socket_Read.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:1021   .text.Socket_Read:0000000000000000 $t
     /tmp/cc7EC8er.s:1028   .text.Socket_Read:0000000000000000 Socket_Read
     /tmp/cc7EC8er.s:1109   .text.Socket_Read:0000000000000054 $d
     /tmp/cc7EC8er.s:1117   .rodata.Socket_Pending_Data.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:1121   .text.Socket_Pending_Data:0000000000000000 $t
     /tmp/cc7EC8er.s:1128   .text.Socket_Pending_Data:0000000000000000 Socket_Pending_Data
     /tmp/cc7EC8er.s:1189   .text.Socket_Pending_Data:0000000000000044 $d
     /tmp/cc7EC8er.s:1198   .text.wifi_socket_server_write:0000000000000000 $t
     /tmp/cc7EC8er.s:1205   .text.wifi_socket_server_write:0000000000000000 wifi_socket_server_write
     /tmp/cc7EC8er.s:1516   .text.wifi_socket_server_write:00000000000000ec $d
     /tmp/cc7EC8er.s:1525   .text.wifi_file_delete:0000000000000000 $t
     /tmp/cc7EC8er.s:1532   .text.wifi_file_delete:0000000000000000 wifi_file_delete
     /tmp/cc7EC8er.s:1578   .text.wifi_file_list:0000000000000000 $t
     /tmp/cc7EC8er.s:1585   .text.wifi_file_list:0000000000000000 wifi_file_list
     /tmp/cc7EC8er.s:1623   .text.wifi_file_print_content:0000000000000000 $t
     /tmp/cc7EC8er.s:1630   .text.wifi_file_print_content:0000000000000000 wifi_file_print_content
     /tmp/cc7EC8er.s:1685   .rodata.wifi_file_create.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:1692   .text.wifi_file_create:0000000000000000 $t
     /tmp/cc7EC8er.s:1699   .text.wifi_file_create:0000000000000000 wifi_file_create
ARM GAS  /tmp/cc7EC8er.s 			page 156


     /tmp/cc7EC8er.s:1867   .text.wifi_file_create:0000000000000098 $d
     /tmp/cc7EC8er.s:1875   .text.wifi_fill_input_buffer:0000000000000000 $t
     /tmp/cc7EC8er.s:1882   .text.wifi_fill_input_buffer:0000000000000000 wifi_fill_input_buffer
     /tmp/cc7EC8er.s:1940   .text.wifi_fill_input_buffer:0000000000000034 $d
     /tmp/cc7EC8er.s:1945   .text.wifi_http_get:0000000000000000 $t
     /tmp/cc7EC8er.s:1952   .text.wifi_http_get:0000000000000000 wifi_http_get
     /tmp/cc7EC8er.s:2027   .text.wifi_http_get:0000000000000030 $d
     /tmp/cc7EC8er.s:2032   .text.wifi_http_post:0000000000000000 $t
     /tmp/cc7EC8er.s:2039   .text.wifi_http_post:0000000000000000 wifi_http_post
     /tmp/cc7EC8er.s:2115   .text.wifi_http_post:0000000000000034 $d
     /tmp/cc7EC8er.s:2120   .text.wifi_file_image_create:0000000000000000 $t
     /tmp/cc7EC8er.s:2127   .text.wifi_file_image_create:0000000000000000 wifi_file_image_create
     /tmp/cc7EC8er.s:2201   .rodata.wifi_file_erase_external_flash.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:2205   .text.wifi_file_erase_external_flash:0000000000000000 $t
     /tmp/cc7EC8er.s:2212   .text.wifi_file_erase_external_flash:0000000000000000 wifi_file_erase_external_flash
     /tmp/cc7EC8er.s:2269   .text.wifi_file_erase_external_flash:0000000000000038 $d
     /tmp/cc7EC8er.s:2275   .text.wifi_fw_update:0000000000000000 $t
     /tmp/cc7EC8er.s:2282   .text.wifi_fw_update:0000000000000000 wifi_fw_update
     /tmp/cc7EC8er.s:2327   .rodata.wifi_network_scan.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:2331   .text.wifi_network_scan:0000000000000000 $t
     /tmp/cc7EC8er.s:2338   .text.wifi_network_scan:0000000000000000 wifi_network_scan
     /tmp/cc7EC8er.s:2431   .text.wifi_network_scan:0000000000000058 $d
     /tmp/cc7EC8er.s:2440   .rodata.wifi_ap_start.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:2450   .text.wifi_ap_start:0000000000000000 $t
     /tmp/cc7EC8er.s:2457   .text.wifi_ap_start:0000000000000000 wifi_ap_start
     /tmp/cc7EC8er.s:2601   .text.wifi_ap_start:0000000000000074 $d
     /tmp/cc7EC8er.s:2610   .text.wifi_connect:0000000000000000 $t
     /tmp/cc7EC8er.s:2617   .text.wifi_connect:0000000000000000 wifi_connect
     /tmp/cc7EC8er.s:2768   .text.wifi_connect:0000000000000080 $d
     /tmp/cc7EC8er.s:2776   .rodata.wifi_adhoc_create.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:2801   .text.wifi_adhoc_create:0000000000000000 $t
     /tmp/cc7EC8er.s:2808   .text.wifi_adhoc_create:0000000000000000 wifi_adhoc_create
     /tmp/cc7EC8er.s:2953   .text.wifi_adhoc_create:000000000000007c $d
     /tmp/cc7EC8er.s:2967   .rodata.wifi_standby.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:2980   .text.wifi_standby:0000000000000000 $t
     /tmp/cc7EC8er.s:2987   .text.wifi_standby:0000000000000000 wifi_standby
     /tmp/cc7EC8er.s:3061   .text.wifi_standby:0000000000000050 $d
     /tmp/cc7EC8er.s:3071   .text.wifi_wakeup:0000000000000000 $t
     /tmp/cc7EC8er.s:3078   .text.wifi_wakeup:0000000000000000 wifi_wakeup
     /tmp/cc7EC8er.s:3171   .text.wifi_wakeup:0000000000000058 $d
     /tmp/cc7EC8er.s:3177   .rodata.wifi_init.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:3250   .text.wifi_init:0000000000000000 $t
     /tmp/cc7EC8er.s:3257   .text.wifi_init:0000000000000000 wifi_init
     /tmp/cc7EC8er.s:3826   .text.wifi_init:0000000000000284 $d
     /tmp/cc7EC8er.s:3857   .text.wifi_init:00000000000002f4 $t
     /tmp/cc7EC8er.s:4098   .text.wifi_init:0000000000000420 $d
     /tmp/cc7EC8er.s:4112   .text.wifi_disconnect:0000000000000000 $t
     /tmp/cc7EC8er.s:4119   .text.wifi_disconnect:0000000000000000 wifi_disconnect
     /tmp/cc7EC8er.s:4172   .text.wifi_disconnect:000000000000002c $d
     /tmp/cc7EC8er.s:4178   .rodata.wifi_enable.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:4182   .text.wifi_enable:0000000000000000 $t
     /tmp/cc7EC8er.s:4189   .text.wifi_enable:0000000000000000 wifi_enable
     /tmp/cc7EC8er.s:4330   .text.wifi_enable:0000000000000084 $d
     /tmp/cc7EC8er.s:4338   .rodata.wifi_restore.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:4342   .text.wifi_restore:0000000000000000 $t
     /tmp/cc7EC8er.s:4349   .text.wifi_restore:0000000000000000 wifi_restore
     /tmp/cc7EC8er.s:4389   .text.wifi_restore:0000000000000024 $d
ARM GAS  /tmp/cc7EC8er.s 			page 157


     /tmp/cc7EC8er.s:4395   .rodata.wifi_gpio_init.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:4402   .text.wifi_gpio_init:0000000000000000 $t
     /tmp/cc7EC8er.s:4409   .text.wifi_gpio_init:0000000000000000 wifi_gpio_init
     /tmp/cc7EC8er.s:4492   .text.wifi_gpio_init:0000000000000048 $d
     /tmp/cc7EC8er.s:4499   .rodata.wifi_gpio_read.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:4503   .text.wifi_gpio_read:0000000000000000 $t
     /tmp/cc7EC8er.s:4510   .text.wifi_gpio_read:0000000000000000 wifi_gpio_read
     /tmp/cc7EC8er.s:4581   .text.wifi_gpio_read:0000000000000038 $d
     /tmp/cc7EC8er.s:4588   .rodata.wifi_gpio_write.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:4592   .text.wifi_gpio_write:0000000000000000 $t
     /tmp/cc7EC8er.s:4599   .text.wifi_gpio_write:0000000000000000 wifi_gpio_write
     /tmp/cc7EC8er.s:4657   .text.wifi_gpio_write:0000000000000030 $d
     /tmp/cc7EC8er.s:4663   .rodata.wifi_get_IP_address.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:4667   .text.wifi_get_IP_address:0000000000000000 $t
     /tmp/cc7EC8er.s:4674   .text.wifi_get_IP_address:0000000000000000 wifi_get_IP_address
     /tmp/cc7EC8er.s:4759   .text.wifi_get_IP_address:0000000000000050 $d
     /tmp/cc7EC8er.s:4767   .rodata.wifi_get_MAC_address.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:4774   .text.wifi_get_MAC_address:0000000000000000 $t
     /tmp/cc7EC8er.s:4781   .text.wifi_get_MAC_address:0000000000000000 wifi_get_MAC_address
     /tmp/cc7EC8er.s:4866   .text.wifi_get_MAC_address:0000000000000050 $d
     /tmp/cc7EC8er.s:4874   .rodata.wifi_get_status_variable_value.str1.4:0000000000000000 $d
     /tmp/cc7EC8er.s:4878   .text.wifi_get_status_variable_value:0000000000000000 $t
     /tmp/cc7EC8er.s:4885   .text.wifi_get_status_variable_value:0000000000000000 wifi_get_status_variable_value
     /tmp/cc7EC8er.s:4998   .text.wifi_get_status_variable_value:0000000000000070 $d
                            *COM*:0000000000000014 WAKEUP_InitStruct

UNDEFINED SYMBOLS
Reset_AT_CMD_Buffer
strlen
USART_Transmit_AT_Cmd
USART_Receive_AT_Resp
sprintf
WiFi_Counter_Variables
WiFi_AT_Cmd_Buff
Queue_Client_Open_Event
Queue_Client_Write_Event
open_web_socket
Queue_Client_Close_Event
open_sockets
WiFi_Control_Variables
Queue_Server_Open_Event
Queue_Server_Close_Event
IO_status_flag
WiFi_switch_to_data_mode
HAL_UART_Transmit
WiFi_UART_Error_Handler
WiFi_switch_to_command_mode
wifi_client_connected
UartWiFiHandle
Queue_File_Event
Queue_Wifi_File_Event
memset
memcpy
HAL_NVIC_EnableIRQ
Queue_Http_Event
SET_Power_State
ResetBuffer
ARM GAS  /tmp/cc7EC8er.s 			page 158


Queue_Wifi_FW_Update_Event
wifi_scanned_list
SET_WiFi_SecKey
SET_SSID
SET_Configuration_Value
Save_Current_Setting
WiFi_Config_Variables
SET_Configuration_Addr
HAL_GPIO_Init
HAL_GPIO_WritePin
printf
puts
WiFi_Module_Init
wifi_reset
Restore_Default_Setting
fflush
_impure_ptr
UART_Configuration
Receive_Data
wifi_connected
strstr
atoi
