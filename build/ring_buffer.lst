ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"ring_buffer.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.init,"ax",%progbits
  18              		.align	1
  19              		.global	init
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	init:
  26              	.LFB275:
  27              		.file 1 "Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c"
   1:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
   2:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  ******************************************************************************
   3:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * @file    ring_buffer.c
   4:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * @author  Central LAB
   5:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * @version V2.1.0
   6:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * @date    17-May-2016
   7:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * @brief   Implements the Circular Buffer management of the Wi-Fi module
   8:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  ******************************************************************************
   9:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * @attention
  10:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *
  11:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * <h2><center>&copy; COPYRIGHT(c) 2015 STMicroelectronics</center></h2>
  12:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *
  13:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * Redistribution and use in source and binary forms, with or without modification,
  14:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * are permitted provided that the following conditions are met:
  15:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *   1. Redistributions of source code must retain the above copyright notice,
  16:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *      this list of conditions and the following disclaimer.
  17:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *   2. Redistributions in binary form must reproduce the above copyright notice,
  18:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *      this list of conditions and the following disclaimer in the documentation
  19:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *      and/or other materials provided with the distribution.
  20:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *   3. Neither the name of STMicroelectronics nor the names of its contributors
  21:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *      may be used to endorse or promote products derived from this software
  22:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *      without specific prior written permission.
  23:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *
  24:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  25:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  26:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  27:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  28:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  29:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  30:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  31:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 2


  32:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  33:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  34:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  *
  35:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  ******************************************************************************
  36:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  */
  37:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  38:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** #include <stdio.h>
  39:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** #include <stdlib.h>
  40:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** #include "ring_buffer.h"
  41:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** #include "wifi_module.h"
  42:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** #include "wifi_globals.h"
  43:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  44:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /** @addtogroup MIDDLEWARES
  45:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** * @{
  46:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** */ 
  47:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  48:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /** @defgroup  NUCLEO_WIFI_UTILS
  49:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @brief Wi-Fi buffer utility
  50:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @{
  51:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */ 
  52:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  53:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /** @defgroup NUCLEO_WIFI_UTILS_Private_Defines
  54:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @{
  55:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */
  56:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  57:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
  58:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @}
  59:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */
  60:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  61:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /** @defgroup NUCLEO_WIFI_UTILS_Private_Variables
  62:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @{
  63:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */
  64:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  65:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** static uint8_t ring_buffer[RINGBUF_SIZE];       /* Default size for ring buffer */
  66:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  67:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** #define ELEMENT_SIZE 1
  68:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  69:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
  70:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @}
  71:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */
  72:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  73:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /** @defgroup NUCLEO_WIFI_UTILS_Private_Functions
  74:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @{
  75:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */
  76:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  77:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
  78:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @brief  init
  79:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   *         Initialize a circular buffer of type buffer_t
  80:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  *buffer : pointer to ring buffer
  81:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  size    : size of the ring buffer
  82:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @retval None
  83:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */
  84:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** void init(buffer_t *buffer, int size) 
  85:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** {
  28              		.loc 1 85 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 3


  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  86:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     buffer->size = size;
  34              		.loc 1 86 0
  35 0000 8160     		str	r1, [r0, #8]
  87:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     buffer->start = 0;
  36              		.loc 1 87 0
  37 0002 0023     		movs	r3, #0
  38 0004 0360     		str	r3, [r0]
  88:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     buffer->count = 0;
  39              		.loc 1 88 0
  40 0006 C360     		str	r3, [r0, #12]
  89:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     buffer->end = 0;
  41              		.loc 1 89 0
  42 0008 4360     		str	r3, [r0, #4]
  90:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     buffer->element = ring_buffer;
  43              		.loc 1 90 0
  44 000a 014B     		ldr	r3, .L2
  45 000c 0361     		str	r3, [r0, #16]
  46 000e 7047     		bx	lr
  47              	.L3:
  48              		.align	2
  49              	.L2:
  50 0010 00000000 		.word	.LANCHOR0
  51              		.cfi_endproc
  52              	.LFE275:
  54              		.section	.text.flush_buffer_queue,"ax",%progbits
  55              		.align	1
  56              		.global	flush_buffer_queue
  57              		.syntax unified
  58              		.thumb
  59              		.thumb_func
  60              		.fpu fpv4-sp-d16
  62              	flush_buffer_queue:
  63              	.LFB276:
  91:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** }
  92:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
  93:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
  94:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @brief  flush_buffer_queue
  95:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   *         flushes the buffer
  96:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  *buffer : pointer to ring buffer
  97:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @retval None
  98:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */ 
  99:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** void flush_buffer_queue(buffer_t *buffer) 
 100:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** {
  64              		.loc 1 100 0
  65              		.cfi_startproc
  66              		@ args = 0, pretend = 0, frame = 0
  67              		@ frame_needed = 0, uses_anonymous_args = 0
  68              		@ link register save eliminated.
  69              	.LVL1:
 101:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   buffer->start = buffer->end;  //the tail goes up to the head and buffer becomes empty
  70              		.loc 1 101 0
  71 0000 4368     		ldr	r3, [r0, #4]
  72 0002 0360     		str	r3, [r0]
 102:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   buffer->count = 0;
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 4


  73              		.loc 1 102 0
  74 0004 0023     		movs	r3, #0
  75 0006 C360     		str	r3, [r0, #12]
  76 0008 7047     		bx	lr
  77              		.cfi_endproc
  78              	.LFE276:
  80              		.section	.text.is_half_full,"ax",%progbits
  81              		.align	1
  82              		.global	is_half_full
  83              		.syntax unified
  84              		.thumb
  85              		.thumb_func
  86              		.fpu fpv4-sp-d16
  88              	is_half_full:
  89              	.LFB277:
 103:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** }
 104:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
 105:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
 106:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @brief  is_half_full
 107:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   *         checks if the buffer is half full (empty)
 108:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  *buffer : pointer to ring buffer
 109:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @retval status of ring buffer (=1 if half full =0 otherwise)
 110:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */ 
 111:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** int is_half_full(buffer_t *buffer)
 112:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** {
  90              		.loc 1 112 0
  91              		.cfi_startproc
  92              		@ args = 0, pretend = 0, frame = 0
  93              		@ frame_needed = 0, uses_anonymous_args = 0
  94              		@ link register save eliminated.
  95              	.LVL2:
 113:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   return buffer->count >= RINGBUF_SIZE - MAX_POP_SIZE ? 1 : 0;
  96              		.loc 1 113 0
  97 0000 C068     		ldr	r0, [r0, #12]
  98              	.LVL3:
 114:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** }
  99              		.loc 1 114 0
 100 0002 B0F54E7F 		cmp	r0, #824
 101 0006 B4BF     		ite	lt
 102 0008 0020     		movlt	r0, #0
 103 000a 0120     		movge	r0, #1
 104 000c 7047     		bx	lr
 105              		.cfi_endproc
 106              	.LFE277:
 108              		.section	.text.is_half_empty,"ax",%progbits
 109              		.align	1
 110              		.global	is_half_empty
 111              		.syntax unified
 112              		.thumb
 113              		.thumb_func
 114              		.fpu fpv4-sp-d16
 116              	is_half_empty:
 117              	.LFB278:
 115:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
 116:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
 117:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @brief  is_half_empty
 118:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   *         checks if the buffer is less than half
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 5


 119:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  *buffer : pointer to ring buffer
 120:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @retval status of ring buffer (=1 if half empty =0 otherwise)
 121:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */
 122:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** int is_half_empty(buffer_t *buffer)
 123:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** {
 118              		.loc 1 123 0
 119              		.cfi_startproc
 120              		@ args = 0, pretend = 0, frame = 0
 121              		@ frame_needed = 0, uses_anonymous_args = 0
 122              		@ link register save eliminated.
 123              	.LVL4:
 124:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   return (buffer->count <= MAX_POP_SIZE) ? 1 : 0;
 124              		.loc 1 124 0
 125 0000 C068     		ldr	r0, [r0, #12]
 126              	.LVL5:
 125:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** }
 127              		.loc 1 125 0
 128 0002 C828     		cmp	r0, #200
 129 0004 CCBF     		ite	gt
 130 0006 0020     		movgt	r0, #0
 131 0008 0120     		movle	r0, #1
 132 000a 7047     		bx	lr
 133              		.cfi_endproc
 134              	.LFE278:
 136              		.section	.text.full,"ax",%progbits
 137              		.align	1
 138              		.global	full
 139              		.syntax unified
 140              		.thumb
 141              		.thumb_func
 142              		.fpu fpv4-sp-d16
 144              	full:
 145              	.LFB279:
 126:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
 127:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
 128:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @brief  full
 129:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   *         indicates if the given buffer is full or not
 130:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  *buffer : pointer to ring buffer
 131:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @retval status of ring buffer (=1 if full =0 otherwise)
 132:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */
 133:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** int full(buffer_t *buffer) 
 134:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** {
 146              		.loc 1 134 0
 147              		.cfi_startproc
 148              		@ args = 0, pretend = 0, frame = 0
 149              		@ frame_needed = 0, uses_anonymous_args = 0
 150              		@ link register save eliminated.
 151              	.LVL6:
 135:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   return buffer->count == RINGBUF_SIZE ? 1 :0;
 152              		.loc 1 135 0
 153 0000 C068     		ldr	r0, [r0, #12]
 154              	.LVL7:
 136:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** }
 155              		.loc 1 136 0
 156 0002 B0F5806F 		cmp	r0, #1024
 157 0006 14BF     		ite	ne
 158 0008 0020     		movne	r0, #0
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 6


 159 000a 0120     		moveq	r0, #1
 160 000c 7047     		bx	lr
 161              		.cfi_endproc
 162              	.LFE279:
 164              		.section	.text.empty,"ax",%progbits
 165              		.align	1
 166              		.global	empty
 167              		.syntax unified
 168              		.thumb
 169              		.thumb_func
 170              		.fpu fpv4-sp-d16
 172              	empty:
 173              	.LFB280:
 137:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
 138:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
 139:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @brief  empty
 140:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   *         indicates if the given buffer is empty or not
 141:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  *buffer : pointer to ring buffer
 142:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @retval status of ring buffer (=1 if empty =0 otherwise)
 143:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */
 144:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** int empty(buffer_t *buffer) 
 145:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** {
 174              		.loc 1 145 0
 175              		.cfi_startproc
 176              		@ args = 0, pretend = 0, frame = 0
 177              		@ frame_needed = 0, uses_anonymous_args = 0
 178              		@ link register save eliminated.
 179              	.LVL8:
 146:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   return buffer->count == 0 ? 1 : 0;
 180              		.loc 1 146 0
 181 0000 C068     		ldr	r0, [r0, #12]
 182              	.LVL9:
 147:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** }
 183              		.loc 1 147 0
 184 0002 B0FA80F0 		clz	r0, r0
 185 0006 4009     		lsrs	r0, r0, #5
 186 0008 7047     		bx	lr
 187              		.cfi_endproc
 188              	.LFE280:
 190              		.section	.text.push_buffer_queue,"ax",%progbits
 191              		.align	1
 192              		.global	push_buffer_queue
 193              		.syntax unified
 194              		.thumb
 195              		.thumb_func
 196              		.fpu fpv4-sp-d16
 198              	push_buffer_queue:
 199              	.LFB281:
 148:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
 149:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
 150:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @brief  push_buffer_queue
 151:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   *         pushes a new item onto the circular buffer (queues it)
 152:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  *buffer : pointer to ring buffer
 153:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  data : value to be Q'ed in ring buffer.
 154:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @retval None
 155:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */
 156:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** void push_buffer_queue(buffer_t *buffer, uint8_t *data) 
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 7


 157:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** {
 200              		.loc 1 157 0
 201              		.cfi_startproc
 202              		@ args = 0, pretend = 0, frame = 0
 203              		@ frame_needed = 0, uses_anonymous_args = 0
 204              	.LVL10:
 205 0000 38B5     		push	{r3, r4, r5, lr}
 206              	.LCFI0:
 207              		.cfi_def_cfa_offset 16
 208              		.cfi_offset 3, -16
 209              		.cfi_offset 4, -12
 210              		.cfi_offset 5, -8
 211              		.cfi_offset 14, -4
 212 0002 0446     		mov	r4, r0
 213 0004 0D46     		mov	r5, r1
 158:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   if (full(buffer)) 
 214              		.loc 1 158 0
 215 0006 FFF7FEFF 		bl	full
 216              	.LVL11:
 217 000a 88B9     		cbnz	r0, .L9
 159:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     {
 160:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       return;
 161:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     } 
 162:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   else 
 163:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     {
 164:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       buffer->count++;    
 218              		.loc 1 164 0
 219 000c E368     		ldr	r3, [r4, #12]
 220 000e 0133     		adds	r3, r3, #1
 221 0010 E360     		str	r3, [r4, #12]
 165:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       memcpy(&buffer->element[buffer->end++], data, ELEMENT_SIZE);
 222              		.loc 1 165 0
 223 0012 2269     		ldr	r2, [r4, #16]
 224 0014 6368     		ldr	r3, [r4, #4]
 225 0016 591C     		adds	r1, r3, #1
 226 0018 6160     		str	r1, [r4, #4]
 227 001a 2978     		ldrb	r1, [r5]	@ zero_extendqisi2
 228 001c D154     		strb	r1, [r2, r3]
 166:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       buffer->end %= RINGBUF_SIZE;
 229              		.loc 1 166 0
 230 001e 6368     		ldr	r3, [r4, #4]
 231 0020 5A42     		rsbs	r2, r3, #0
 232 0022 C3F30903 		ubfx	r3, r3, #0, #10
 233 0026 C2F30902 		ubfx	r2, r2, #0, #10
 234 002a 58BF     		it	pl
 235 002c 5342     		rsbpl	r3, r2, #0
 236 002e 6360     		str	r3, [r4, #4]
 237              	.L9:
 238 0030 38BD     		pop	{r3, r4, r5, pc}
 239              		.cfi_endproc
 240              	.LFE281:
 242              		.section	.text.pop_buffer_queue,"ax",%progbits
 243              		.align	1
 244              		.global	pop_buffer_queue
 245              		.syntax unified
 246              		.thumb
 247              		.thumb_func
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 8


 248              		.fpu fpv4-sp-d16
 250              	pop_buffer_queue:
 251              	.LFB282:
 167:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     }
 168:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** }
 169:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****  
 170:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
 171:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @brief  pop_buffer_queue
 172:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   *         dequeues the circular buffer
 173:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  *buffer : pointer to ring buffer
 174:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @retval element : value of popped buffer
 175:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */ 
 176:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** uint8_t * pop_buffer_queue(buffer_t *buffer) 
 177:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** {
 252              		.loc 1 177 0
 253              		.cfi_startproc
 254              		@ args = 0, pretend = 0, frame = 0
 255              		@ frame_needed = 0, uses_anonymous_args = 0
 256              	.LVL12:
 257 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 258              	.LCFI1:
 259              		.cfi_def_cfa_offset 24
 260              		.cfi_offset 3, -24
 261              		.cfi_offset 4, -20
 262              		.cfi_offset 5, -16
 263              		.cfi_offset 6, -12
 264              		.cfi_offset 7, -8
 265              		.cfi_offset 14, -4
 266 0002 0446     		mov	r4, r0
 267              	.LVL13:
 178:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   uint8_t * element;
 179:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
 180:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   element = &pop_buffer[0];
 181:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   if (empty(buffer)) 
 268              		.loc 1 181 0
 269 0004 FFF7FEFF 		bl	empty
 270              	.LVL14:
 271 0008 0028     		cmp	r0, #0
 272 000a 40F09380 		bne	.L21
 182:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     {
 183:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       //printf("\r\nRing Buffer Empty!!\r\n");
 184:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       return NULL;
 185:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     } 
 186:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   else
 187:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     {
 188:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       memset(pop_buffer, 0x00 , MAX_BUFFER_GLOBAL);
 273              		.loc 1 188 0
 274 000e 4FF40072 		mov	r2, #512
 275 0012 0021     		movs	r1, #0
 276 0014 4848     		ldr	r0, .L24
 277 0016 FFF7FEFF 		bl	memset
 278              	.LVL15:
 189:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       if(WiFi_Control_Variables.enable_receive_data_chunk)
 279              		.loc 1 189 0
 280 001a 484B     		ldr	r3, .L24+4
 281 001c 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 282 001e 13F0040F 		tst	r3, #4
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 9


 283 0022 6ED0     		beq	.L14
 284              	.LBB2:
 190:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****         {
 191:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                     /* popping only 200 bytes at a time  */
 192:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****           int buf_end = buffer->end;
 285              		.loc 1 192 0
 286 0024 6568     		ldr	r5, [r4, #4]
 287              	.LVL16:
 193:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****           if(buffer->count < MAX_POP_SIZE)
 288              		.loc 1 193 0
 289 0026 E368     		ldr	r3, [r4, #12]
 290 0028 C72B     		cmp	r3, #199
 291 002a 26DC     		bgt	.L15
 194:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             {
 195:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****               WiFi_Counter_Variables.pop_buffer_size = buffer->count;
 292              		.loc 1 195 0
 293 002c E268     		ldr	r2, [r4, #12]
 294 002e 92B2     		uxth	r2, r2
 295 0030 434B     		ldr	r3, .L24+8
 296 0032 A3F89820 		strh	r2, [r3, #152]	@ movhi
 196:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****               if(buf_end >= buffer->start)
 297              		.loc 1 196 0
 298 0036 2368     		ldr	r3, [r4]
 299 0038 9D42     		cmp	r5, r3
 300 003a 0BDB     		blt	.L16
 197:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 {
 198:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   memcpy(element, &buffer->element[buffer->start], WiFi_Counter_Variables.pop_buffe
 301              		.loc 1 198 0
 302 003c 2169     		ldr	r1, [r4, #16]
 303 003e 2368     		ldr	r3, [r4]
 304 0040 1944     		add	r1, r1, r3
 305 0042 3D48     		ldr	r0, .L24
 306 0044 FFF7FEFF 		bl	memcpy
 307              	.LVL17:
 308              	.L17:
 199:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 }
 200:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****               else
 201:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 {
 202:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   int buf_start = buffer->start;
 203:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   memcpy(element, &buffer->element[buffer->start], RINGBUF_SIZE - buf_start);
 204:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   memcpy(element+(RINGBUF_SIZE-buffer->start), &buffer->element[0], buf_end);
 205:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 }
 206:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****               buffer->start = buffer->end;
 309              		.loc 1 206 0
 310 0048 6368     		ldr	r3, [r4, #4]
 311 004a 2360     		str	r3, [r4]
 207:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****               buffer->count = 0;
 312              		.loc 1 207 0
 313 004c 0023     		movs	r3, #0
 314 004e E360     		str	r3, [r4, #12]
 315              	.LBE2:
 208:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             }
 209:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****           else
 210:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             {
 211:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****               if(buf_end >= buffer->start)
 212:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 {
 213:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   memcpy(element, &buffer->element[buffer->start], MAX_POP_SIZE);
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 10


 214:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   buffer->start = buffer->start + MAX_POP_SIZE;
 215:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   buffer->count = buf_end - buffer->start;
 216:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 }
 217:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****               else
 218:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 {
 219:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   if(buffer->start + MAX_POP_SIZE < RINGBUF_SIZE)
 220:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                     {
 221:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       memcpy(element, &buffer->element[buffer->start], MAX_POP_SIZE);
 222:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       buffer->start = buffer->start + MAX_POP_SIZE;
 223:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       buffer->count = (RINGBUF_SIZE - buffer->start)+ buf_end;
 224:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                     }
 225:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   else
 226:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                     {
 227:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       int buf_start = buffer->start;
 228:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       memcpy(element, &buffer->element[buffer->start], RINGBUF_SIZE-buf_start);
 229:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       memcpy(element+(RINGBUF_SIZE-buffer->start), &buffer->element[0], MAX_POP_SIZ
 230:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       buffer->start = MAX_POP_SIZE - (1024-buf_start);
 231:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       buffer->count = buf_end - buffer->start;
 232:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                     }
 233:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 }
 234:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****               WiFi_Counter_Variables.pop_buffer_size = MAX_POP_SIZE;
 235:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             }
 236:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****          }
 237:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       else
 238:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****         {
 239:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             /* First in First Out*/
 240:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             memcpy(element, &buffer->element[buffer->start], ELEMENT_SIZE);
 241:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             buffer->start = buffer->start + ELEMENT_SIZE;
 242:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             buffer->count--;
 243:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             WiFi_Counter_Variables.pop_buffer_size = 1;
 244:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             buffer->start %= RINGBUF_SIZE;
 245:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****         }
 246:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       return element;
 316              		.loc 1 246 0
 317 0050 3948     		ldr	r0, .L24
 318              	.LBB5:
 319 0052 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 320              	.LVL18:
 321              	.L16:
 322              	.LBB3:
 202:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   memcpy(element, &buffer->element[buffer->start], RINGBUF_SIZE - buf_start);
 323              		.loc 1 202 0
 324 0054 2268     		ldr	r2, [r4]
 325              	.LVL19:
 203:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   memcpy(element+(RINGBUF_SIZE-buffer->start), &buffer->element[0], buf_end);
 326              		.loc 1 203 0
 327 0056 2169     		ldr	r1, [r4, #16]
 328 0058 2368     		ldr	r3, [r4]
 329 005a 374E     		ldr	r6, .L24
 330 005c C2F58062 		rsb	r2, r2, #1024
 331              	.LVL20:
 332 0060 1944     		add	r1, r1, r3
 333 0062 3046     		mov	r0, r6
 334 0064 FFF7FEFF 		bl	memcpy
 335              	.LVL21:
 204:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 }
 336              		.loc 1 204 0
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 11


 337 0068 2068     		ldr	r0, [r4]
 338 006a C0F58060 		rsb	r0, r0, #1024
 339 006e 2A46     		mov	r2, r5
 340 0070 2169     		ldr	r1, [r4, #16]
 341 0072 3044     		add	r0, r0, r6
 342 0074 FFF7FEFF 		bl	memcpy
 343              	.LVL22:
 344 0078 E6E7     		b	.L17
 345              	.L15:
 346              	.LBE3:
 211:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 {
 347              		.loc 1 211 0
 348 007a 2368     		ldr	r3, [r4]
 349 007c 9D42     		cmp	r5, r3
 350 007e 19DA     		bge	.L23
 219:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                     {
 351              		.loc 1 219 0
 352 0080 2368     		ldr	r3, [r4]
 353 0082 C833     		adds	r3, r3, #200
 354 0084 B3F5806F 		cmp	r3, #1024
 355 0088 22DA     		bge	.L20
 221:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       buffer->start = buffer->start + MAX_POP_SIZE;
 356              		.loc 1 221 0
 357 008a 2169     		ldr	r1, [r4, #16]
 358 008c 2368     		ldr	r3, [r4]
 359 008e C822     		movs	r2, #200
 360 0090 1944     		add	r1, r1, r3
 361 0092 2948     		ldr	r0, .L24
 362 0094 FFF7FEFF 		bl	memcpy
 363              	.LVL23:
 222:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       buffer->count = (RINGBUF_SIZE - buffer->start)+ buf_end;
 364              		.loc 1 222 0
 365 0098 2368     		ldr	r3, [r4]
 366 009a C833     		adds	r3, r3, #200
 367 009c 2360     		str	r3, [r4]
 223:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                     }
 368              		.loc 1 223 0
 369 009e 2368     		ldr	r3, [r4]
 370 00a0 C3F58063 		rsb	r3, r3, #1024
 371 00a4 1D44     		add	r5, r5, r3
 372              	.LVL24:
 373 00a6 E560     		str	r5, [r4, #12]
 374              	.L19:
 234:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             }
 375              		.loc 1 234 0
 376 00a8 C822     		movs	r2, #200
 377 00aa 254B     		ldr	r3, .L24+8
 378 00ac A3F89820 		strh	r2, [r3, #152]	@ movhi
 379              	.LBE5:
 380              		.loc 1 246 0
 381 00b0 2148     		ldr	r0, .L24
 382 00b2 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 383              	.LVL25:
 384              	.L23:
 385              	.LBB6:
 213:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   buffer->start = buffer->start + MAX_POP_SIZE;
 386              		.loc 1 213 0
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 12


 387 00b4 2169     		ldr	r1, [r4, #16]
 388 00b6 2368     		ldr	r3, [r4]
 389 00b8 C822     		movs	r2, #200
 390 00ba 1944     		add	r1, r1, r3
 391 00bc 1E48     		ldr	r0, .L24
 392 00be FFF7FEFF 		bl	memcpy
 393              	.LVL26:
 214:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                   buffer->count = buf_end - buffer->start;
 394              		.loc 1 214 0
 395 00c2 2368     		ldr	r3, [r4]
 396 00c4 C833     		adds	r3, r3, #200
 397 00c6 2360     		str	r3, [r4]
 215:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                 }
 398              		.loc 1 215 0
 399 00c8 2368     		ldr	r3, [r4]
 400 00ca ED1A     		subs	r5, r5, r3
 401              	.LVL27:
 402 00cc E560     		str	r5, [r4, #12]
 403 00ce EBE7     		b	.L19
 404              	.LVL28:
 405              	.L20:
 406              	.LBB4:
 227:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       memcpy(element, &buffer->element[buffer->start], RINGBUF_SIZE-buf_start);
 407              		.loc 1 227 0
 408 00d0 2668     		ldr	r6, [r4]
 409              	.LVL29:
 228:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       memcpy(element+(RINGBUF_SIZE-buffer->start), &buffer->element[0], MAX_POP_SIZ
 410              		.loc 1 228 0
 411 00d2 2169     		ldr	r1, [r4, #16]
 412 00d4 2368     		ldr	r3, [r4]
 413 00d6 184F     		ldr	r7, .L24
 414 00d8 C6F58062 		rsb	r2, r6, #1024
 415 00dc 1944     		add	r1, r1, r3
 416 00de 3846     		mov	r0, r7
 417 00e0 FFF7FEFF 		bl	memcpy
 418              	.LVL30:
 229:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       buffer->start = MAX_POP_SIZE - (1024-buf_start);
 419              		.loc 1 229 0
 420 00e4 2068     		ldr	r0, [r4]
 421 00e6 C0F58060 		rsb	r0, r0, #1024
 422 00ea A6F54E76 		sub	r6, r6, #824
 423              	.LVL31:
 424 00ee 3246     		mov	r2, r6
 425 00f0 2169     		ldr	r1, [r4, #16]
 426 00f2 3844     		add	r0, r0, r7
 427 00f4 FFF7FEFF 		bl	memcpy
 428              	.LVL32:
 230:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                       buffer->count = buf_end - buffer->start;
 429              		.loc 1 230 0
 430 00f8 2660     		str	r6, [r4]
 231:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****                     }
 431              		.loc 1 231 0
 432 00fa 2368     		ldr	r3, [r4]
 433 00fc ED1A     		subs	r5, r5, r3
 434              	.LVL33:
 435 00fe E560     		str	r5, [r4, #12]
 436 0100 D2E7     		b	.L19
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 13


 437              	.LVL34:
 438              	.L14:
 439              	.LBE4:
 440              	.LBE6:
 240:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             buffer->start = buffer->start + ELEMENT_SIZE;
 441              		.loc 1 240 0
 442 0102 2269     		ldr	r2, [r4, #16]
 443 0104 2368     		ldr	r3, [r4]
 444 0106 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 445 0108 0B48     		ldr	r0, .L24
 446 010a 0370     		strb	r3, [r0]
 241:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             buffer->count--;
 447              		.loc 1 241 0
 448 010c 2368     		ldr	r3, [r4]
 449 010e 0133     		adds	r3, r3, #1
 450 0110 2360     		str	r3, [r4]
 242:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             WiFi_Counter_Variables.pop_buffer_size = 1;
 451              		.loc 1 242 0
 452 0112 E368     		ldr	r3, [r4, #12]
 453 0114 013B     		subs	r3, r3, #1
 454 0116 E360     		str	r3, [r4, #12]
 243:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****             buffer->start %= RINGBUF_SIZE;
 455              		.loc 1 243 0
 456 0118 0122     		movs	r2, #1
 457 011a 094B     		ldr	r3, .L24+8
 458 011c A3F89820 		strh	r2, [r3, #152]	@ movhi
 244:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****         }
 459              		.loc 1 244 0
 460 0120 2368     		ldr	r3, [r4]
 461 0122 5A42     		rsbs	r2, r3, #0
 462 0124 C3F30903 		ubfx	r3, r3, #0, #10
 463 0128 C2F30902 		ubfx	r2, r2, #0, #10
 464 012c 58BF     		it	pl
 465 012e 5342     		rsbpl	r3, r2, #0
 466 0130 2360     		str	r3, [r4]
 467 0132 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 468              	.LVL35:
 469              	.L21:
 184:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     } 
 470              		.loc 1 184 0
 471 0134 0020     		movs	r0, #0
 247:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     }
 248:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** }
 472              		.loc 1 248 0
 473 0136 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 474              	.LVL36:
 475              	.L25:
 476              		.align	2
 477              	.L24:
 478 0138 00000000 		.word	pop_buffer
 479 013c 00000000 		.word	WiFi_Control_Variables
 480 0140 00000000 		.word	WiFi_Counter_Variables
 481              		.cfi_endproc
 482              	.LFE282:
 484              		.section	.text.rewind_buffer_queue,"ax",%progbits
 485              		.align	1
 486              		.global	rewind_buffer_queue
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 14


 487              		.syntax unified
 488              		.thumb
 489              		.thumb_func
 490              		.fpu fpv4-sp-d16
 492              	rewind_buffer_queue:
 493              	.LFB283:
 249:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** 
 250:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** /**
 251:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @brief  rewinds_buffer_queue
 252:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   *         rewinds the circular buffer
 253:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  *buffer : pointer to ring buffer
 254:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @param  count : number of bytes to rewind 
 255:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   * @retval None
 256:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****   */ 
 257:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** void rewind_buffer_queue(buffer_t *buffer , int count)
 258:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c **** {
 494              		.loc 1 258 0
 495              		.cfi_startproc
 496              		@ args = 0, pretend = 0, frame = 0
 497              		@ frame_needed = 0, uses_anonymous_args = 0
 498              		@ link register save eliminated.
 499              	.LVL37:
 259:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     int buf_end = buffer->end;
 500              		.loc 1 259 0
 501 0000 4268     		ldr	r2, [r0, #4]
 502              	.LVL38:
 260:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     if(buffer->start - count >= 0)
 503              		.loc 1 260 0
 504 0002 0368     		ldr	r3, [r0]
 505 0004 5B1A     		subs	r3, r3, r1
 506 0006 002B     		cmp	r3, #0
 507 0008 0FDB     		blt	.L27
 261:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       {
 262:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****           buffer->start = buffer->start - count;
 508              		.loc 1 262 0
 509 000a 0368     		ldr	r3, [r0]
 510 000c 591A     		subs	r1, r3, r1
 511              	.LVL39:
 512 000e 0160     		str	r1, [r0]
 263:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****           if(buf_end > buffer->start) 
 513              		.loc 1 263 0
 514 0010 0368     		ldr	r3, [r0]
 515 0012 9A42     		cmp	r2, r3
 516 0014 03DD     		ble	.L28
 264:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****               buffer->count = buf_end - buffer->start;
 517              		.loc 1 264 0
 518 0016 0368     		ldr	r3, [r0]
 519 0018 D21A     		subs	r2, r2, r3
 520              	.LVL40:
 521 001a C260     		str	r2, [r0, #12]
 522 001c 7047     		bx	lr
 523              	.LVL41:
 524              	.L28:
 265:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****           else 
 266:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****               buffer->count = (RINGBUF_SIZE-buffer->start)+buf_end;
 525              		.loc 1 266 0
 526 001e 0368     		ldr	r3, [r0]
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 15


 527 0020 C3F58063 		rsb	r3, r3, #1024
 528 0024 1A44     		add	r2, r2, r3
 529              	.LVL42:
 530 0026 C260     		str	r2, [r0, #12]
 531 0028 7047     		bx	lr
 532              	.LVL43:
 533              	.L27:
 267:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       }
 268:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****     else
 269:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****       {
 270:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****           buffer->start = RINGBUF_SIZE - (count - buffer->start);
 534              		.loc 1 270 0
 535 002a 0368     		ldr	r3, [r0]
 536 002c C91A     		subs	r1, r1, r3
 537              	.LVL44:
 538 002e C1F58061 		rsb	r1, r1, #1024
 539 0032 0160     		str	r1, [r0]
 271:Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.c ****           buffer->count = (RINGBUF_SIZE - buffer->start)+ buf_end;
 540              		.loc 1 271 0
 541 0034 0368     		ldr	r3, [r0]
 542 0036 C3F58063 		rsb	r3, r3, #1024
 543 003a 1A44     		add	r2, r2, r3
 544              	.LVL45:
 545 003c C260     		str	r2, [r0, #12]
 546 003e 7047     		bx	lr
 547              		.cfi_endproc
 548              	.LFE283:
 550              		.section	.bss.ring_buffer,"aw",%nobits
 551              		.align	2
 552              		.set	.LANCHOR0,. + 0
 555              	ring_buffer:
 556 0000 00000000 		.space	1024
 556      00000000 
 556      00000000 
 556      00000000 
 556      00000000 
 557              		.text
 558              	.Letext0:
 559              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 560              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 561              		.file 4 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 562              		.file 5 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\lib\\gcc\\arm-none-eab
 563              		.file 6 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 564              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 565              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 566              		.file 9 "Middlewares/ST/STM32_SPWF0xSy/Utils/ring_buffer.h"
 567              		.file 10 "Drivers/CMSIS/Include/core_cm4.h"
 568              		.file 11 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 569              		.file 12 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xe.h"
 570              		.file 13 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 571              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 572              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 573              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 574              		.file 17 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 575              		.file 18 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 576              		.file 19 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 577              		.file 20 "Middlewares/ST/STM32_SPWF0xSy/Inc/wifi_interface.h"
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 16


 578              		.file 21 "Middlewares/ST/STM32_SPWF0xSy/Utils/event_buffer.h"
 579              		.file 22 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 580              		.file 23 "Middlewares/ST/STM32_SPWF0xSy/Inc/wifi_module.h"
 581              		.file 24 "Middlewares/ST/STM32_SPWF0xSy/Utils/wifi_globals.h"
 582              		.file 25 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_ll_dma.h"
ARM GAS  D:\cygwin64\tmp\cc8eDMnk.s 			page 17


DEFINED SYMBOLS
                            *ABS*:00000000 ring_buffer.c
D:\cygwin64\tmp\cc8eDMnk.s:18     .text.init:00000000 $t
D:\cygwin64\tmp\cc8eDMnk.s:25     .text.init:00000000 init
D:\cygwin64\tmp\cc8eDMnk.s:50     .text.init:00000010 $d
D:\cygwin64\tmp\cc8eDMnk.s:55     .text.flush_buffer_queue:00000000 $t
D:\cygwin64\tmp\cc8eDMnk.s:62     .text.flush_buffer_queue:00000000 flush_buffer_queue
D:\cygwin64\tmp\cc8eDMnk.s:81     .text.is_half_full:00000000 $t
D:\cygwin64\tmp\cc8eDMnk.s:88     .text.is_half_full:00000000 is_half_full
D:\cygwin64\tmp\cc8eDMnk.s:109    .text.is_half_empty:00000000 $t
D:\cygwin64\tmp\cc8eDMnk.s:116    .text.is_half_empty:00000000 is_half_empty
D:\cygwin64\tmp\cc8eDMnk.s:137    .text.full:00000000 $t
D:\cygwin64\tmp\cc8eDMnk.s:144    .text.full:00000000 full
D:\cygwin64\tmp\cc8eDMnk.s:165    .text.empty:00000000 $t
D:\cygwin64\tmp\cc8eDMnk.s:172    .text.empty:00000000 empty
D:\cygwin64\tmp\cc8eDMnk.s:191    .text.push_buffer_queue:00000000 $t
D:\cygwin64\tmp\cc8eDMnk.s:198    .text.push_buffer_queue:00000000 push_buffer_queue
D:\cygwin64\tmp\cc8eDMnk.s:243    .text.pop_buffer_queue:00000000 $t
D:\cygwin64\tmp\cc8eDMnk.s:250    .text.pop_buffer_queue:00000000 pop_buffer_queue
D:\cygwin64\tmp\cc8eDMnk.s:478    .text.pop_buffer_queue:00000138 $d
D:\cygwin64\tmp\cc8eDMnk.s:485    .text.rewind_buffer_queue:00000000 $t
D:\cygwin64\tmp\cc8eDMnk.s:492    .text.rewind_buffer_queue:00000000 rewind_buffer_queue
D:\cygwin64\tmp\cc8eDMnk.s:551    .bss.ring_buffer:00000000 $d
D:\cygwin64\tmp\cc8eDMnk.s:555    .bss.ring_buffer:00000000 ring_buffer
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
memset
memcpy
pop_buffer
WiFi_Control_Variables
WiFi_Counter_Variables
