ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"stm32_spwf_wifi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.Timer_Config,"ax",%progbits
  18              		.align	1
  19              		.global	Timer_Config
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	Timer_Config:
  26              	.LFB275:
  27              		.file 1 "Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c"
   1:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
   2:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  ******************************************************************************
   3:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @file    stm32_spwf_wifi.c
   4:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @author  Central LAB
   5:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @version V2.1.0
   6:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @date    17-May-2016
   7:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @brief   HAL related functionality of X-CUBE-WIFI1
   8:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  ******************************************************************************
   9:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @attention
  10:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *
  11:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * <h2><center>&copy; COPYRIGHT(c) 2015 STMicroelectronics</center></h2>
  12:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *
  13:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * Redistribution and use in source and binary forms, with or without modification,
  14:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * are permitted provided that the following conditions are met:
  15:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *   1. Redistributions of source code must retain the above copyright notice,
  16:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *      this list of conditions and the following disclaimer.
  17:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *   2. Redistributions in binary form must reproduce the above copyright notice,
  18:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *      this list of conditions and the following disclaimer in the documentation
  19:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *      and/or other materials provided with the distribution.
  20:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *   3. Neither the name of STMicroelectronics nor the names of its contributors
  21:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *      may be used to endorse or promote products derived from this software
  22:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *      without specific prior written permission.
  23:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *
  24:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  25:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  26:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  27:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  28:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  29:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  30:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  31:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 2


  32:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  33:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  34:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  *
  35:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  ******************************************************************************
  36:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  */
  37:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /* Includes ------------------------------------------------------------------*/
  38:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #include "wifi_module.h"
  39:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #include "stm32_spwf_wifi.h"
  40:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #include "wifi_globals.h"
  41:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #include "stm32f4xx_hal_spi.h"
  42:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #include "stm32f4xx_hal_tim.h"
  43:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  44:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /** @addtogroup BSP
  45:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** * @{
  46:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** */ 
  47:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  48:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  49:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /** @defgroup  NUCLEO_WIFI_DRIVER
  50:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   * @brief Wi-Fi_driver modules
  51:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   * @{
  52:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   */
  53:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  54:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  55:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /** @defgroup NUCLEO_WIFI_DRIVER_Private_Defines
  56:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   * @{
  57:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   */
  58:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /* Private typedef -----------------------------------------------------------*/
  59:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /* Private define ------------------------------------------------------------*/
  60:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /* Private macro -------------------------------------------------------------*/
  61:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /* Private variables ---------------------------------------------------------*/
  62:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /* Prescaler declaration */
  63:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** uint32_t uwPrescalerValue = 0;  
  64:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  65:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /* TIM handle declaration */
  66:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  67:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
  68:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   * @}
  69:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   */
  70:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  71:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /** @addtogroup NUCLEO_WIFI_DRIVER_Private_Variables
  72:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   * @{
  73:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   */
  74:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /* Private variables ---------------------------------------------------------*/
  75:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  76:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
  77:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   * @}
  78:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   */
  79:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  80:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
  81:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /** @defgroup NUCLEO_WIFI_DRIVER_Private_Functions
  82:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   * @{
  83:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   */
  84:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  85:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /*##-1- Configure the TIM peripheral #######################################*/
  86:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* -----------------------------------------------------------------------
  87:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     In this example TIM3 input clock (TIM3CLK)  is set to APB1 clock (PCLK1) x2,
  88:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     since APB1 prescaler is set to 4 (0x100).
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 3


  89:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****        TIM3CLK = PCLK1*2
  90:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****        PCLK1   = HCLK/2
  91:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     => TIM3CLK = PCLK1*2 = (HCLK/2)*2 = HCLK = SystemCoreClock
  92:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     To get TIM3 counter clock at 10 KHz, the Prescaler is computed as following:
  93:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     Prescaler = (TIM3CLK / TIM3 counter clock) - 1
  94:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     Prescaler = (SystemCoreClock /10 KHz) - 1
  95:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
  96:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     Note:
  97:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****      SystemCoreClock variable holds HCLK frequency and is defined in system_stm32f1xx.c file.
  98:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****      Each time the core clock (HCLK) changes, user had to update SystemCoreClock
  99:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****      variable value. Otherwise, any configuration based on this variable will be incorrect.
 100:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****      This variable is updated in three ways:
 101:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       1) by calling CMSIS function SystemCoreClockUpdate()
 102:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       2) by calling HAL API function HAL_RCC_GetSysClockFreq()
 103:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       3) each time HAL_RCC_ClockConfig() is called to configure the system clock frequency
 104:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   ----------------------------------------------------------------------- */
 105:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void Timer_Config()
 106:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
  28              		.loc 1 106 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
 107:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* Compute the prescaler value to have TIMx counter clock equal to 10000 Hz */
 108:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   uwPrescalerValue = (uint32_t)(SystemCoreClock / 10000) - 1;
  37              		.loc 1 108 0
  38 0002 0C4B     		ldr	r3, .L5
  39 0004 1B68     		ldr	r3, [r3]
  40 0006 0C4A     		ldr	r2, .L5+4
  41 0008 A2FB0323 		umull	r2, r3, r2, r3
  42 000c 5B0B     		lsrs	r3, r3, #13
  43 000e 013B     		subs	r3, r3, #1
  44 0010 0A4A     		ldr	r2, .L5+8
  45 0012 1360     		str	r3, [r2]
 109:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 110:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* Set TIMx instance */
 111:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   TimHandle.Instance = TIMx;
  46              		.loc 1 111 0
  47 0014 0A48     		ldr	r0, .L5+12
  48 0016 0B4A     		ldr	r2, .L5+16
  49 0018 0260     		str	r2, [r0]
 112:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 113:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* Initialize TIMx peripheral as follows:
 114:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****        + Period = 10000 - 1
 115:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****        + Prescaler = (SystemCoreClock/10000) - 1
 116:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****        + ClockDivision = 0
 117:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****        + Counter direction = Up
 118:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   */
 119:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #if defined (USE_STM32L0XX_NUCLEO) || defined (USE_STM32F4XX_NUCLEO) || defined (USE_STM32L4XX_NUCL
 120:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   TimHandle.Init.Period            = 100 - 1;
  50              		.loc 1 120 0
  51 001a 6322     		movs	r2, #99
  52 001c C260     		str	r2, [r0, #12]
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 4


 121:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #endif
 122:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #if defined (USE_STM32F1xx_NUCLEO) 
 123:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   TimHandle.Init.Period            = 100 - 1;
 124:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #endif  
 125:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   TimHandle.Init.Prescaler         = uwPrescalerValue;
  53              		.loc 1 125 0
  54 001e 4360     		str	r3, [r0, #4]
 126:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   TimHandle.Init.ClockDivision     = 0;
  55              		.loc 1 126 0
  56 0020 0023     		movs	r3, #0
  57 0022 0361     		str	r3, [r0, #16]
 127:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   TimHandle.Init.CounterMode       = TIM_COUNTERMODE_UP;
  58              		.loc 1 127 0
  59 0024 8360     		str	r3, [r0, #8]
 128:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #ifdef USE_STM32F1xx_NUCLEO
 129:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   TimHandle.Init.RepetitionCounter = 0;
 130:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #endif 
 131:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 132:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   if (HAL_TIM_Base_Init(&TimHandle) != HAL_OK)
  60              		.loc 1 132 0
  61 0026 FFF7FEFF 		bl	HAL_TIM_Base_Init
  62              	.LVL0:
  63 002a 00B9     		cbnz	r0, .L4
  64              	.L1:
  65 002c 08BD     		pop	{r3, pc}
  66              	.L4:
 133:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 134:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* Initialization Error */
 135:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     Error_Handler(); 
  67              		.loc 1 135 0
  68 002e FFF7FEFF 		bl	Error_Handler
  69              	.LVL1:
 136:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }
 137:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 138:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
  70              		.loc 1 138 0
  71 0032 FBE7     		b	.L1
  72              	.L6:
  73              		.align	2
  74              	.L5:
  75 0034 00000000 		.word	SystemCoreClock
  76 0038 5917B7D1 		.word	-776530087
  77 003c 00000000 		.word	.LANCHOR0
  78 0040 00000000 		.word	TimHandle
  79 0044 00040040 		.word	1073742848
  80              		.cfi_endproc
  81              	.LFE275:
  83              		.section	.text.Push_Timer_Config,"ax",%progbits
  84              		.align	1
  85              		.global	Push_Timer_Config
  86              		.syntax unified
  87              		.thumb
  88              		.thumb_func
  89              		.fpu fpv4-sp-d16
  91              	Push_Timer_Config:
  92              	.LFB276:
 139:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 5


 140:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
 141:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   * @brief Push_Timer_Config
 142:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   *        This function configures the Push Timer
 143:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   * @param None
 144:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   * @retval None
 145:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   */
 146:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void Push_Timer_Config()
 147:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
  93              		.loc 1 147 0
  94              		.cfi_startproc
  95              		@ args = 0, pretend = 0, frame = 0
  96              		@ frame_needed = 0, uses_anonymous_args = 0
  97 0000 08B5     		push	{r3, lr}
  98              	.LCFI1:
  99              		.cfi_def_cfa_offset 8
 100              		.cfi_offset 3, -8
 101              		.cfi_offset 14, -4
 148:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* Compute the prescaler value to have TIMx counter clock equal to 10000 Hz */
 149:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   uwPrescalerValue = (uint32_t)(SystemCoreClock / 10000) - 1;
 102              		.loc 1 149 0
 103 0002 0D4B     		ldr	r3, .L11
 104 0004 1B68     		ldr	r3, [r3]
 105 0006 0D4A     		ldr	r2, .L11+4
 106 0008 A2FB0323 		umull	r2, r3, r2, r3
 107 000c 5B0B     		lsrs	r3, r3, #13
 108 000e 013B     		subs	r3, r3, #1
 109 0010 0B4A     		ldr	r2, .L11+8
 110 0012 1360     		str	r3, [r2]
 150:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 151:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* Set TIMx instance */
 152:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   PushTimHandle.Instance = TIMp;
 111              		.loc 1 152 0
 112 0014 0B48     		ldr	r0, .L11+12
 113 0016 4FF08042 		mov	r2, #1073741824
 114 001a 0260     		str	r2, [r0]
 153:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 154:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* Initialize TIMx peripheral as follows:
 155:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****        + Period = 10000 - 1
 156:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****        + Prescaler = (SystemCoreClock/10000) - 1
 157:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****        + ClockDivision = 0
 158:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****        + Counter direction = Up
 159:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   */
 160:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   PushTimHandle.Init.Period            = 100 - 1;//10000
 115              		.loc 1 160 0
 116 001c 6322     		movs	r2, #99
 117 001e C260     		str	r2, [r0, #12]
 161:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   PushTimHandle.Init.Prescaler         = uwPrescalerValue;
 118              		.loc 1 161 0
 119 0020 4360     		str	r3, [r0, #4]
 162:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   PushTimHandle.Init.ClockDivision     = 0;
 120              		.loc 1 162 0
 121 0022 0023     		movs	r3, #0
 122 0024 0361     		str	r3, [r0, #16]
 163:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   PushTimHandle.Init.CounterMode       = TIM_COUNTERMODE_UP;
 123              		.loc 1 163 0
 124 0026 8360     		str	r3, [r0, #8]
 164:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #ifdef USE_STM32F1xx_NUCLEO
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 6


 165:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   PushTimHandle.Init.RepetitionCounter = 0;
 166:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #endif 
 167:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 168:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   if (HAL_TIM_Base_Init(&PushTimHandle) != HAL_OK)
 125              		.loc 1 168 0
 126 0028 FFF7FEFF 		bl	HAL_TIM_Base_Init
 127              	.LVL2:
 128 002c 00B9     		cbnz	r0, .L10
 129              	.L7:
 130 002e 08BD     		pop	{r3, pc}
 131              	.L10:
 169:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 170:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* Initialization Error */
 171:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     Error_Handler(); 
 132              		.loc 1 171 0
 133 0030 FFF7FEFF 		bl	Error_Handler
 134              	.LVL3:
 172:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }
 173:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 174:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
 135              		.loc 1 174 0
 136 0034 FBE7     		b	.L7
 137              	.L12:
 138 0036 00BF     		.align	2
 139              	.L11:
 140 0038 00000000 		.word	SystemCoreClock
 141 003c 5917B7D1 		.word	-776530087
 142 0040 00000000 		.word	.LANCHOR0
 143 0044 00000000 		.word	PushTimHandle
 144              		.cfi_endproc
 145              	.LFE276:
 147              		.section	.text.UART_Configuration,"ax",%progbits
 148              		.align	1
 149              		.global	UART_Configuration
 150              		.syntax unified
 151              		.thumb
 152              		.thumb_func
 153              		.fpu fpv4-sp-d16
 155              	UART_Configuration:
 156              	.LFB277:
 175:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 176:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
 177:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** * @brief  USART_Configuration
 178:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** * WB_WIFI_UART configured as follow:
 179:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** *      - BaudRate = 115200 baud  
 180:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** *      - Word Length = 8 Bits
 181:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** *      - One Stop Bit
 182:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** *      - No parity
 183:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** *      - Hardware flow control enabled (RTS and CTS signals)
 184:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** *      - Receive and transmit enabled
 185:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** *
 186:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** * @param  None
 187:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** * @retval None
 188:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** */
 189:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void UART_Configuration(uint32_t baud_rate)
 190:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
 157              		.loc 1 190 0
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 7


 158              		.cfi_startproc
 159              		@ args = 0, pretend = 0, frame = 0
 160              		@ frame_needed = 0, uses_anonymous_args = 0
 161              	.LVL4:
 162 0000 08B5     		push	{r3, lr}
 163              	.LCFI2:
 164              		.cfi_def_cfa_offset 8
 165              		.cfi_offset 3, -8
 166              		.cfi_offset 14, -4
 191:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   UartWiFiHandle.Instance             = WB_WIFI_UART;
 167              		.loc 1 191 0
 168 0002 0E4B     		ldr	r3, .L19
 169 0004 0E4A     		ldr	r2, .L19+4
 170 0006 1A60     		str	r2, [r3]
 192:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   UartWiFiHandle.Init.BaudRate        = baud_rate;
 171              		.loc 1 192 0
 172 0008 5860     		str	r0, [r3, #4]
 193:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   UartWiFiHandle.Init.WordLength      = UART_WORDLENGTH_8B;
 173              		.loc 1 193 0
 174 000a 0022     		movs	r2, #0
 175 000c 9A60     		str	r2, [r3, #8]
 194:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   UartWiFiHandle.Init.StopBits        = UART_STOPBITS_1;
 176              		.loc 1 194 0
 177 000e DA60     		str	r2, [r3, #12]
 195:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   UartWiFiHandle.Init.Parity          = UART_PARITY_NONE ;
 178              		.loc 1 195 0
 179 0010 1A61     		str	r2, [r3, #16]
 196:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 197:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #ifdef SPWF04
 198:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   UartWiFiHandle.Init.HwFlowCtl       = UART_HWCONTROL_NONE;
 199:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #else
 200:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   UartWiFiHandle.Init.HwFlowCtl       = UART_HWCONTROL_RTS;
 180              		.loc 1 200 0
 181 0012 4FF48071 		mov	r1, #256
 182 0016 9961     		str	r1, [r3, #24]
 201:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #endif
 202:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   UartWiFiHandle.Init.Mode            = UART_MODE_TX_RX;
 183              		.loc 1 202 0
 184 0018 0C21     		movs	r1, #12
 185 001a 5961     		str	r1, [r3, #20]
 203:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   UartWiFiHandle.Init.OverSampling    = UART_OVERSAMPLING_16;
 186              		.loc 1 203 0
 187 001c DA61     		str	r2, [r3, #28]
 204:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   //UartWiFiHandle.Init.OneBitSampling  = UART_ONEBIT_SAMPLING_ENABLED;
 205:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 206:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   if(HAL_UART_DeInit(&UartWiFiHandle) != HAL_OK)
 188              		.loc 1 206 0
 189 001e 1846     		mov	r0, r3
 190              	.LVL5:
 191 0020 FFF7FEFF 		bl	HAL_UART_DeInit
 192              	.LVL6:
 193 0024 20B9     		cbnz	r0, .L17
 194              	.L14:
 207:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 208:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     Error_Handler();
 209:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }  
 210:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   if(HAL_UART_Init(&UartWiFiHandle) != HAL_OK)
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 8


 195              		.loc 1 210 0
 196 0026 0548     		ldr	r0, .L19
 197 0028 FFF7FEFF 		bl	HAL_UART_Init
 198              	.LVL7:
 199 002c 18B9     		cbnz	r0, .L18
 200              	.L13:
 201 002e 08BD     		pop	{r3, pc}
 202              	.L17:
 208:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }  
 203              		.loc 1 208 0
 204 0030 FFF7FEFF 		bl	Error_Handler
 205              	.LVL8:
 206 0034 F7E7     		b	.L14
 207              	.L18:
 211:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 212:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     Error_Handler();
 208              		.loc 1 212 0
 209 0036 FFF7FEFF 		bl	Error_Handler
 210              	.LVL9:
 213:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }  
 214:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #ifdef WIFI_USE_VCOM  
 215:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /*## -1- Enable USART1 DMAR #################################################*/
 216:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   UartWiFiHandle.Instance->CR3 |= 0x00000040;
 217:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #endif //WIFI_USE_VCOM   
 218:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  }
 211              		.loc 1 218 0
 212 003a F8E7     		b	.L13
 213              	.L20:
 214              		.align	2
 215              	.L19:
 216 003c 00000000 		.word	UartWiFiHandle
 217 0040 00100140 		.word	1073811456
 218              		.cfi_endproc
 219              	.LFE277:
 221              		.section	.text.WiFi_CheckBaudrate_pin,"ax",%progbits
 222              		.align	1
 223              		.global	WiFi_CheckBaudrate_pin
 224              		.syntax unified
 225              		.thumb
 226              		.thumb_func
 227              		.fpu fpv4-sp-d16
 229              	WiFi_CheckBaudrate_pin:
 230              	.LFB278:
 219:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 220:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #if defined(SPWF01)
 221:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #define NUCLEO_GPIO_PIN                 GPIO_PIN_8
 222:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #define NUCLEO_GPIO                     GPIOC
 223:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #define __NUCLEO_GPIO_CLK_ENABLE()      __GPIOC_CLK_ENABLE()
 224:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #elif defined(SPWF04)
 225:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #define NUCLEO_GPIO_PIN                 GPIO_PIN_0
 226:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #define NUCLEO_GPIO                     GPIOB
 227:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #define __NUCLEO_GPIO_CLK_ENABLE()      __GPIOB_CLK_ENABLE()
 228:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #endif
 229:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 230:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** uint32_t WiFi_CheckBaudrate_pin(void){
 231              		.loc 1 230 0
 232              		.cfi_startproc
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 9


 233              		@ args = 0, pretend = 0, frame = 48
 234              		@ frame_needed = 0, uses_anonymous_args = 0
 235 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 236              	.LCFI3:
 237              		.cfi_def_cfa_offset 28
 238              		.cfi_offset 4, -28
 239              		.cfi_offset 5, -24
 240              		.cfi_offset 6, -20
 241              		.cfi_offset 7, -16
 242              		.cfi_offset 8, -12
 243              		.cfi_offset 9, -8
 244              		.cfi_offset 14, -4
 245 0004 8DB0     		sub	sp, sp, #52
 246              	.LCFI4:
 247              		.cfi_def_cfa_offset 80
 248              	.LVL10:
 231:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   GPIO_InitTypeDef GPIO_InitStruct;
 232:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   uint8_t i = 0;
 233:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   //uint32_t bauds[16] = {110, 300, 600, 1200, 2400, 4800, 9600, 14400, 19200, 38400, 57600, 115200
 234:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   uint32_t bauds[6] = {4800, 9600, 115200, 460800, 921600, 0};
 249              		.loc 1 234 0
 250 0006 01AC     		add	r4, sp, #4
 251 0008 354D     		ldr	r5, .L26
 252 000a 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
 253 000c 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 254 000e 95E80300 		ldm	r5, {r0, r1}
 255 0012 84E80300 		stm	r4, {r0, r1}
 256              	.LBB2:
 235:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   GPIO_PinState Init_Pin_Value;
 236:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   GPIO_PinState End_Pin_Value;
 237:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   uint8_t gpio_value;
 238:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  
 239:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  // Configure InputGPIO
 240:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   __NUCLEO_GPIO_CLK_ENABLE();
 257              		.loc 1 240 0
 258 0016 0026     		movs	r6, #0
 259 0018 0096     		str	r6, [sp]
 260 001a 324B     		ldr	r3, .L26+4
 261 001c 1A6B     		ldr	r2, [r3, #48]
 262 001e 42F00402 		orr	r2, r2, #4
 263 0022 1A63     		str	r2, [r3, #48]
 264 0024 1B6B     		ldr	r3, [r3, #48]
 265 0026 03F00403 		and	r3, r3, #4
 266 002a 0093     		str	r3, [sp]
 267 002c 009B     		ldr	r3, [sp]
 268              	.LBE2:
 241:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  
 242:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   GPIO_InitStruct.Pin = NUCLEO_GPIO_PIN;
 269              		.loc 1 242 0
 270 002e 4FF48075 		mov	r5, #256
 271 0032 0795     		str	r5, [sp, #28]
 243:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
 272              		.loc 1 243 0
 273 0034 0896     		str	r6, [sp, #32]
 244:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   GPIO_InitStruct.Pull = GPIO_NOPULL;
 274              		.loc 1 244 0
 275 0036 0996     		str	r6, [sp, #36]
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 10


 245:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   GPIO_InitStruct.Speed = GPIO_SPEED_HIGH;
 276              		.loc 1 245 0
 277 0038 0323     		movs	r3, #3
 278 003a 0A93     		str	r3, [sp, #40]
 246:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  
 247:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   HAL_GPIO_Init(NUCLEO_GPIO, &GPIO_InitStruct);
 279              		.loc 1 247 0
 280 003c 2A4C     		ldr	r4, .L26+8
 281 003e 07A9     		add	r1, sp, #28
 282 0040 2046     		mov	r0, r4
 283 0042 FFF7FEFF 		bl	HAL_GPIO_Init
 284              	.LVL11:
 248:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  
 249:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   Init_Pin_Value  = HAL_GPIO_ReadPin(NUCLEO_GPIO, NUCLEO_GPIO_PIN);
 285              		.loc 1 249 0
 286 0046 2946     		mov	r1, r5
 287 0048 2046     		mov	r0, r4
 288 004a FFF7FEFF 		bl	HAL_GPIO_ReadPin
 289              	.LVL12:
 250:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   End_Pin_Value = (Init_Pin_Value == GPIO_PIN_RESET) ? GPIO_PIN_SET : GPIO_PIN_RESET;
 290              		.loc 1 250 0
 291 004e B0FA80F8 		clz	r8, r0
 292 0052 4FEA5818 		lsr	r8, r8, #5
 293 0056 C146     		mov	r9, r8
 294              	.LVL13:
 295              	.L22:
 251:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   gpio_value = (Init_Pin_Value == GPIO_PIN_RESET) ? 1 : 0;
 252:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  
 253:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   while(bauds[i] > 0){
 296              		.loc 1 253 0
 297 0058 0CAB     		add	r3, sp, #48
 298 005a 03EB8603 		add	r3, r3, r6, lsl #2
 299 005e 53F82C7C 		ldr	r7, [r3, #-44]
 300 0062 002F     		cmp	r7, #0
 301 0064 37D0     		beq	.L21
 254:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     UART_Configuration(bauds[i]);
 302              		.loc 1 254 0
 303 0066 0CAB     		add	r3, sp, #48
 304 0068 03EB8603 		add	r3, r3, r6, lsl #2
 305 006c 53F82C0C 		ldr	r0, [r3, #-44]
 306 0070 FFF7FEFF 		bl	UART_Configuration
 307              	.LVL14:
 255:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     HAL_Delay(10);
 308              		.loc 1 255 0
 309 0074 0A20     		movs	r0, #10
 310 0076 FFF7FEFF 		bl	HAL_Delay
 311              	.LVL15:
 256:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 257:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     Reset_AT_CMD_Buffer();
 312              		.loc 1 257 0
 313 007a FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 314              	.LVL16:
 258:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     sprintf((char*) WiFi_AT_Cmd_Buff, "AT+S.GPIOC=6,out\r");
 315              		.loc 1 258 0
 316 007e 1B4C     		ldr	r4, .L26+12
 317 0080 1B4D     		ldr	r5, .L26+16
 318 0082 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 11


 319 0084 2060     		str	r0, [r4]	@ unaligned
 320 0086 6160     		str	r1, [r4, #4]	@ unaligned
 321 0088 A260     		str	r2, [r4, #8]	@ unaligned
 322 008a E360     		str	r3, [r4, #12]	@ unaligned
 323 008c 2B88     		ldrh	r3, [r5]	@ unaligned
 324 008e 2382     		strh	r3, [r4, #16]	@ unaligned
 259:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     USART_Transmit_AT_Cmd(strlen((char*) WiFi_AT_Cmd_Buff));
 325              		.loc 1 259 0
 326 0090 2046     		mov	r0, r4
 327 0092 FFF7FEFF 		bl	strlen
 328              	.LVL17:
 329 0096 80B2     		uxth	r0, r0
 330 0098 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 331              	.LVL18:
 260:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     HAL_Delay(30); 
 332              		.loc 1 260 0
 333 009c 1E20     		movs	r0, #30
 334 009e FFF7FEFF 		bl	HAL_Delay
 335              	.LVL19:
 261:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     Reset_AT_CMD_Buffer();
 336              		.loc 1 261 0
 337 00a2 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 338              	.LVL20:
 262:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     sprintf((char*) WiFi_AT_Cmd_Buff, "AT+S.GPIOW=6,%d\r", gpio_value);
 339              		.loc 1 262 0
 340 00a6 4246     		mov	r2, r8
 341 00a8 1249     		ldr	r1, .L26+20
 342 00aa 2046     		mov	r0, r4
 343 00ac FFF7FEFF 		bl	sprintf
 344              	.LVL21:
 263:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     USART_Transmit_AT_Cmd(strlen((char*) WiFi_AT_Cmd_Buff));
 345              		.loc 1 263 0
 346 00b0 2046     		mov	r0, r4
 347 00b2 FFF7FEFF 		bl	strlen
 348              	.LVL22:
 349 00b6 80B2     		uxth	r0, r0
 350 00b8 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 351              	.LVL23:
 264:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     HAL_Delay(30);
 352              		.loc 1 264 0
 353 00bc 1E20     		movs	r0, #30
 354 00be FFF7FEFF 		bl	HAL_Delay
 355              	.LVL24:
 265:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 266:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     if (HAL_GPIO_ReadPin(NUCLEO_GPIO, NUCLEO_GPIO_PIN) != End_Pin_Value){  
 356              		.loc 1 266 0
 357 00c2 4FF48071 		mov	r1, #256
 358 00c6 0848     		ldr	r0, .L26+8
 359 00c8 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 360              	.LVL25:
 361 00cc 8145     		cmp	r9, r0
 362 00ce 02D0     		beq	.L21
 267:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       i++;
 363              		.loc 1 267 0
 364 00d0 0136     		adds	r6, r6, #1
 365              	.LVL26:
 366 00d2 F6B2     		uxtb	r6, r6
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 12


 367              	.LVL27:
 268:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       continue; // Failed to trigger  GPIO
 368              		.loc 1 268 0
 369 00d4 C0E7     		b	.L22
 370              	.L21:
 269:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     }
 270:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     break; 
 271:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   } 
 272:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   return bauds[i]; 
 273:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** } 
 371              		.loc 1 273 0
 372 00d6 3846     		mov	r0, r7
 373 00d8 0DB0     		add	sp, sp, #52
 374              	.LCFI5:
 375              		.cfi_def_cfa_offset 28
 376              		@ sp needed
 377 00da BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 378              	.LVL28:
 379              	.L27:
 380 00de 00BF     		.align	2
 381              	.L26:
 382 00e0 00000000 		.word	.LANCHOR1
 383 00e4 00380240 		.word	1073887232
 384 00e8 00080240 		.word	1073874944
 385 00ec 00000000 		.word	WiFi_AT_Cmd_Buff
 386 00f0 00000000 		.word	.LC1
 387 00f4 14000000 		.word	.LC2
 388              		.cfi_endproc
 389              	.LFE278:
 391              		.section	.text.WiFi_CheckBaudrate,"ax",%progbits
 392              		.align	1
 393              		.global	WiFi_CheckBaudrate
 394              		.syntax unified
 395              		.thumb
 396              		.thumb_func
 397              		.fpu fpv4-sp-d16
 399              	WiFi_CheckBaudrate:
 400              	.LFB279:
 274:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 275:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  
 276:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** uint32_t WiFi_CheckBaudrate(void){
 401              		.loc 1 276 0
 402              		.cfi_startproc
 403              		@ args = 0, pretend = 0, frame = 24
 404              		@ frame_needed = 0, uses_anonymous_args = 0
 405 0000 30B5     		push	{r4, r5, lr}
 406              	.LCFI6:
 407              		.cfi_def_cfa_offset 12
 408              		.cfi_offset 4, -12
 409              		.cfi_offset 5, -8
 410              		.cfi_offset 14, -4
 411 0002 87B0     		sub	sp, sp, #28
 412              	.LCFI7:
 413              		.cfi_def_cfa_offset 40
 414              	.LVL29:
 277:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  uint8_t i = 0;
 278:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  uint32_t bauds[6] = {4800, 9600, 115200, 460800, 921600, 0};
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 13


 415              		.loc 1 278 0
 416 0004 6C46     		mov	r4, sp
 417 0006 0E4D     		ldr	r5, .L33
 418 0008 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
 419 000a 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 420 000c 95E80300 		ldm	r5, {r0, r1}
 421 0010 84E80300 		stm	r4, {r0, r1}
 277:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  uint8_t i = 0;
 422              		.loc 1 277 0
 423 0014 0024     		movs	r4, #0
 424              	.LVL30:
 425              	.L29:
 279:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  
 280:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  while(bauds[i] > 0){
 426              		.loc 1 280 0
 427 0016 06AB     		add	r3, sp, #24
 428 0018 03EB8403 		add	r3, r3, r4, lsl #2
 429 001c 53F8185C 		ldr	r5, [r3, #-24]
 430 0020 5DB1     		cbz	r5, .L28
 281:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****    UART_Configuration(bauds[i]);
 431              		.loc 1 281 0
 432 0022 2846     		mov	r0, r5
 433 0024 FFF7FEFF 		bl	UART_Configuration
 434              	.LVL31:
 282:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****    HAL_Delay(10);
 435              		.loc 1 282 0
 436 0028 0A20     		movs	r0, #10
 437 002a FFF7FEFF 		bl	HAL_Delay
 438              	.LVL32:
 283:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****    
 284:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****    if (Attention_Cmd_Check() != WiFi_MODULE_SUCCESS)
 439              		.loc 1 284 0
 440 002e FFF7FEFF 		bl	Attention_Cmd_Check
 441              	.LVL33:
 442 0032 10B1     		cbz	r0, .L28
 285:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****    {
 286:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****      i++;
 443              		.loc 1 286 0
 444 0034 0134     		adds	r4, r4, #1
 445              	.LVL34:
 446 0036 E4B2     		uxtb	r4, r4
 447              	.LVL35:
 287:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****      continue;
 448              		.loc 1 287 0
 449 0038 EDE7     		b	.L29
 450              	.L28:
 288:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****    }
 289:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****    break;   
 290:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  }
 291:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  return bauds[i]; 
 292:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** } 
 451              		.loc 1 292 0
 452 003a 2846     		mov	r0, r5
 453 003c 07B0     		add	sp, sp, #28
 454              	.LCFI8:
 455              		.cfi_def_cfa_offset 12
 456              		@ sp needed
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 14


 457 003e 30BD     		pop	{r4, r5, pc}
 458              	.LVL36:
 459              	.L34:
 460              		.align	2
 461              	.L33:
 462 0040 00000000 		.word	.LANCHOR1
 463              		.cfi_endproc
 464              	.LFE279:
 466              		.section	.text.WiFi_Module_UART_Configuration,"ax",%progbits
 467              		.align	1
 468              		.global	WiFi_Module_UART_Configuration
 469              		.syntax unified
 470              		.thumb
 471              		.thumb_func
 472              		.fpu fpv4-sp-d16
 474              	WiFi_Module_UART_Configuration:
 475              	.LFB280:
 293:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 294:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 295:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** HAL_StatusTypeDef WiFi_Module_UART_Configuration(uint32_t baud_rate)
 296:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
 476              		.loc 1 296 0
 477              		.cfi_startproc
 478              		@ args = 0, pretend = 0, frame = 0
 479              		@ frame_needed = 0, uses_anonymous_args = 0
 480              	.LVL37:
 481 0000 38B5     		push	{r3, r4, r5, lr}
 482              	.LCFI9:
 483              		.cfi_def_cfa_offset 16
 484              		.cfi_offset 3, -16
 485              		.cfi_offset 4, -12
 486              		.cfi_offset 5, -8
 487              		.cfi_offset 14, -4
 488 0002 0546     		mov	r5, r0
 297:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   WiFi_Status_t status;
 298:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   uint32_t brcheck;
 299:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 300:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   IO_status_flag.WiFi_Enabled = WIFI_TRUE;  
 489              		.loc 1 300 0
 490 0004 1A4A     		ldr	r2, .L41
 491 0006 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 492 0008 43F01003 		orr	r3, r3, #16
 493 000c 1370     		strb	r3, [r2]
 301:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 302:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   //brcheck = WiFi_CheckBaudrate_pin();
 303:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   brcheck = WiFi_CheckBaudrate();
 494              		.loc 1 303 0
 495 000e FFF7FEFF 		bl	WiFi_CheckBaudrate
 496              	.LVL38:
 304:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 305:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   if (brcheck > 0) 
 497              		.loc 1 305 0
 498 0012 48B3     		cbz	r0, .L36
 306:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 307:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     //if (brcheck != baud_rate)//must save and reset every-time and also re-configure UART
 308:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     {
 309:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       status = config_init_value(CONSOLE1_SPEED, baud_rate);
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 15


 499              		.loc 1 309 0
 500 0014 2946     		mov	r1, r5
 501 0016 1748     		ldr	r0, .L41+4
 502              	.LVL39:
 503 0018 FFF7FEFF 		bl	config_init_value
 504              	.LVL40:
 310:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       
 311:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       Reset_AT_CMD_Buffer();  
 505              		.loc 1 311 0
 506 001c FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 507              	.LVL41:
 312:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_SAVE_CURRENT_SETTING);  
 508              		.loc 1 312 0
 509 0020 154C     		ldr	r4, .L41+8
 510 0022 164B     		ldr	r3, .L41+12
 511 0024 1868     		ldr	r0, [r3]
 512 0026 2060     		str	r0, [r4]	@ unaligned
 513 0028 9B88     		ldrh	r3, [r3, #4]	@ unaligned
 514 002a A380     		strh	r3, [r4, #4]	@ unaligned
 313:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 515              		.loc 1 313 0
 516 002c 2046     		mov	r0, r4
 517 002e FFF7FEFF 		bl	strlen
 518              	.LVL42:
 519 0032 80B2     		uxth	r0, r0
 520 0034 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 521              	.LVL43:
 314:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 315:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       Reset_AT_CMD_Buffer();
 522              		.loc 1 315 0
 523 0038 FFF7FEFF 		bl	Reset_AT_CMD_Buffer
 524              	.LVL44:
 316:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       sprintf((char*)WiFi_AT_Cmd_Buff,AT_RESET);
 525              		.loc 1 316 0
 526 003c 104B     		ldr	r3, .L41+16
 527 003e 03CB     		ldmia	r3!, {r0, r1}
 528 0040 2060     		str	r0, [r4]	@ unaligned
 529 0042 6160     		str	r1, [r4, #4]	@ unaligned
 530 0044 1A88     		ldrh	r2, [r3]	@ unaligned
 531 0046 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 532 0048 2281     		strh	r2, [r4, #8]	@ unaligned
 533 004a A372     		strb	r3, [r4, #10]
 317:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       status = USART_Transmit_AT_Cmd(strlen((char*)WiFi_AT_Cmd_Buff));
 534              		.loc 1 317 0
 535 004c 2046     		mov	r0, r4
 536 004e FFF7FEFF 		bl	strlen
 537              	.LVL45:
 538 0052 80B2     		uxth	r0, r0
 539 0054 FFF7FEFF 		bl	USART_Transmit_AT_Cmd
 540              	.LVL46:
 318:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       
 319:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       if (status == WiFi_MODULE_SUCCESS)
 541              		.loc 1 319 0
 542 0058 08B1     		cbz	r0, .L40
 320:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       {
 321:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****         UART_Configuration(baud_rate); 
 322:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       }
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 16


 323:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 	
 324:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       //Receive_Data(); 
 325:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     }
 326:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     return HAL_OK;
 543              		.loc 1 326 0
 544 005a 0020     		movs	r0, #0
 545              	.LVL47:
 327:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }
 328:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   else  //Baudrate detection failed!
 329:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 330:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     Error_Handler();
 331:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     return HAL_ERROR;
 332:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }
 333:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  }
 546              		.loc 1 333 0
 547 005c 38BD     		pop	{r3, r4, r5, pc}
 548              	.LVL48:
 549              	.L40:
 321:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****       }
 550              		.loc 1 321 0
 551 005e 2846     		mov	r0, r5
 552              	.LVL49:
 553 0060 FFF7FEFF 		bl	UART_Configuration
 554              	.LVL50:
 326:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }
 555              		.loc 1 326 0
 556 0064 0020     		movs	r0, #0
 557 0066 38BD     		pop	{r3, r4, r5, pc}
 558              	.LVL51:
 559              	.L36:
 330:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     return HAL_ERROR;
 560              		.loc 1 330 0
 561 0068 FFF7FEFF 		bl	Error_Handler
 562              	.LVL52:
 331:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }
 563              		.loc 1 331 0
 564 006c 0120     		movs	r0, #1
 565 006e 38BD     		pop	{r3, r4, r5, pc}
 566              	.LVL53:
 567              	.L42:
 568              		.align	2
 569              	.L41:
 570 0070 00000000 		.word	IO_status_flag
 571 0074 00000000 		.word	.LC3
 572 0078 00000000 		.word	WiFi_AT_Cmd_Buff
 573 007c 10000000 		.word	.LC4
 574 0080 18000000 		.word	.LC5
 575              		.cfi_endproc
 576              	.LFE280:
 578              		.section	.text.WiFi_SPI_Init,"ax",%progbits
 579              		.align	1
 580              		.global	WiFi_SPI_Init
 581              		.syntax unified
 582              		.thumb
 583              		.thumb_func
 584              		.fpu fpv4-sp-d16
 586              	WiFi_SPI_Init:
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 17


 587              	.LFB281:
 334:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 335:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #if defined (USE_STM32F1xx_NUCLEO)
 336:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void DMA_ConfigAddress(DMA_HandleTypeDef *hdma, uint32_t SrcAddress, uint32_t DstAddress, uint32_t 
 337:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
 338:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* Configure DMA Channel data length */
 339:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hdma->Instance->CNDTR = DataLength;
 340:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 341:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* Peripheral to Memory */
 342:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   if((hdma->Init.Direction) == DMA_MEMORY_TO_PERIPH)
 343:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 344:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* Configure DMA Channel destination address */
 345:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     hdma->Instance->CPAR = DstAddress;
 346:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 347:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* Configure DMA Channel source address */
 348:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     hdma->Instance->CMAR = SrcAddress;
 349:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }
 350:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* Memory to Peripheral */
 351:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   else
 352:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 353:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* Configure DMA Channel source address */
 354:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     hdma->Instance->CPAR = SrcAddress;
 355:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 356:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* Configure DMA Channel destination address */
 357:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     hdma->Instance->CMAR = DstAddress;
 358:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }
 359:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
 360:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #endif
 361:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 362:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #if defined (USE_STM32F4XX_NUCLEO) || defined (USE_STM32L4XX_NUCLEO)
 363:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  
 364:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void WiFi_SPI_Init(SPI_HandleTypeDef * hspi)
 365:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
 588              		.loc 1 365 0
 589              		.cfi_startproc
 590              		@ args = 0, pretend = 0, frame = 0
 591              		@ frame_needed = 0, uses_anonymous_args = 0
 592              	.LVL54:
 593 0000 10B5     		push	{r4, lr}
 594              	.LCFI10:
 595              		.cfi_def_cfa_offset 8
 596              		.cfi_offset 4, -8
 597              		.cfi_offset 14, -4
 598 0002 0446     		mov	r4, r0
 366:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Instance = WIFI_SPI_INSTANCE;
 599              		.loc 1 366 0
 600 0004 104B     		ldr	r3, .L45
 601 0006 0360     		str	r3, [r0]
 367:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.Mode = WIFI_SPI_MODE;
 602              		.loc 1 367 0
 603 0008 4FF48273 		mov	r3, #260
 604 000c 4360     		str	r3, [r0, #4]
 368:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.Direction = WIFI_SPI_DIRECTION;
 605              		.loc 1 368 0
 606 000e 0023     		movs	r3, #0
 607 0010 8360     		str	r3, [r0, #8]
 369:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.DataSize = WIFI_SPI_DATASIZE;
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 18


 608              		.loc 1 369 0
 609 0012 C360     		str	r3, [r0, #12]
 370:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.CLKPolarity = WIFI_SPI_CLKPOLARITY;
 610              		.loc 1 370 0
 611 0014 0361     		str	r3, [r0, #16]
 371:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.CLKPhase = WIFI_SPI_CLKPHASE;
 612              		.loc 1 371 0
 613 0016 4361     		str	r3, [r0, #20]
 372:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.NSS = WIFI_SPI_NSS;
 614              		.loc 1 372 0
 615 0018 4FF40072 		mov	r2, #512
 616 001c 8261     		str	r2, [r0, #24]
 373:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.FirstBit = WIFI_SPI_FIRSTBIT;
 617              		.loc 1 373 0
 618 001e 0362     		str	r3, [r0, #32]
 374:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.TIMode = WIFI_SPI_TIMODE;
 619              		.loc 1 374 0
 620 0020 4362     		str	r3, [r0, #36]
 375:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.CRCPolynomial = WIFI_SPI_CRCPOLYNOMIAL;
 621              		.loc 1 375 0
 622 0022 0722     		movs	r2, #7
 623 0024 C262     		str	r2, [r0, #44]
 376:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.BaudRatePrescaler = WIFI_SPI_BAUDRATEPRESCALER;
 624              		.loc 1 376 0
 625 0026 1822     		movs	r2, #24
 626 0028 C261     		str	r2, [r0, #28]
 377:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   hspi->Init.CRCCalculation = WIFI_SPI_CRCCALCULATION;
 627              		.loc 1 377 0
 628 002a 8362     		str	r3, [r0, #40]
 378:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 379:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   HAL_SPI_Init(hspi);
 629              		.loc 1 379 0
 630 002c FFF7FEFF 		bl	HAL_SPI_Init
 631              	.LVL55:
 380:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 381:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   __HAL_WIFI_SPI_ENABLE_DMAREQ(hspi, SPI_CR2_RXDMAEN | SPI_CR2_TXDMAEN);
 632              		.loc 1 381 0
 633 0030 2268     		ldr	r2, [r4]
 634 0032 5368     		ldr	r3, [r2, #4]
 635 0034 43F00303 		orr	r3, r3, #3
 636 0038 5360     		str	r3, [r2, #4]
 382:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 383:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   __HAL_SPI_ENABLE(hspi);
 637              		.loc 1 383 0
 638 003a 2268     		ldr	r2, [r4]
 639 003c 1368     		ldr	r3, [r2]
 640 003e 43F04003 		orr	r3, r3, #64
 641 0042 1360     		str	r3, [r2]
 642 0044 10BD     		pop	{r4, pc}
 643              	.LVL56:
 644              	.L46:
 645 0046 00BF     		.align	2
 646              	.L45:
 647 0048 00300140 		.word	1073819648
 648              		.cfi_endproc
 649              	.LFE281:
 651              		.section	.text.SPI_Gpio_Init,"ax",%progbits
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 19


 652              		.align	1
 653              		.global	SPI_Gpio_Init
 654              		.syntax unified
 655              		.thumb
 656              		.thumb_func
 657              		.fpu fpv4-sp-d16
 659              	SPI_Gpio_Init:
 660              	.LFB282:
 384:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 385:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   return;
 386:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
 387:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 388:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void SPI_Gpio_Init(SPI_HandleTypeDef* hspi)
 389:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** { 
 661              		.loc 1 389 0
 662              		.cfi_startproc
 663              		@ args = 0, pretend = 0, frame = 48
 664              		@ frame_needed = 0, uses_anonymous_args = 0
 665              	.LVL57:
 390:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   GPIO_InitTypeDef GPIO_InitStruct;
 391:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   if(hspi->Instance==WIFI_SPI_INSTANCE)
 666              		.loc 1 391 0
 667 0000 0268     		ldr	r2, [r0]
 668 0002 464B     		ldr	r3, .L54
 669 0004 9A42     		cmp	r2, r3
 670 0006 00D0     		beq	.L53
 671 0008 7047     		bx	lr
 672              	.L53:
 389:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   GPIO_InitTypeDef GPIO_InitStruct;
 673              		.loc 1 389 0
 674 000a 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 675              	.LCFI11:
 676              		.cfi_def_cfa_offset 24
 677              		.cfi_offset 4, -24
 678              		.cfi_offset 5, -20
 679              		.cfi_offset 6, -16
 680              		.cfi_offset 7, -12
 681              		.cfi_offset 8, -8
 682              		.cfi_offset 14, -4
 683 000e 8CB0     		sub	sp, sp, #48
 684              	.LCFI12:
 685              		.cfi_def_cfa_offset 72
 686              	.LBB3:
 392:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 393:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* Enable peripherals clock */
 394:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 395:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* Enable GPIO Ports Clock */ 
 396:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     WIFI_SPI_SCLK_CLK_ENABLE();
 687              		.loc 1 396 0
 688 0010 0025     		movs	r5, #0
 689 0012 0195     		str	r5, [sp, #4]
 690 0014 03F58433 		add	r3, r3, #67584
 691 0018 1A6B     		ldr	r2, [r3, #48]
 692 001a 42F00102 		orr	r2, r2, #1
 693 001e 1A63     		str	r2, [r3, #48]
 694 0020 1A6B     		ldr	r2, [r3, #48]
 695 0022 02F00102 		and	r2, r2, #1
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 20


 696 0026 0192     		str	r2, [sp, #4]
 697 0028 019A     		ldr	r2, [sp, #4]
 698              	.LBE3:
 699              	.LBB4:
 397:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     WIFI_SPI_MISO_CLK_ENABLE();
 700              		.loc 1 397 0
 701 002a 0295     		str	r5, [sp, #8]
 702 002c 1A6B     		ldr	r2, [r3, #48]
 703 002e 42F00102 		orr	r2, r2, #1
 704 0032 1A63     		str	r2, [r3, #48]
 705 0034 1A6B     		ldr	r2, [r3, #48]
 706 0036 02F00102 		and	r2, r2, #1
 707 003a 0292     		str	r2, [sp, #8]
 708 003c 029A     		ldr	r2, [sp, #8]
 709              	.LBE4:
 710              	.LBB5:
 398:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     WIFI_SPI_MOSI_CLK_ENABLE();
 711              		.loc 1 398 0
 712 003e 0395     		str	r5, [sp, #12]
 713 0040 1A6B     		ldr	r2, [r3, #48]
 714 0042 42F00102 		orr	r2, r2, #1
 715 0046 1A63     		str	r2, [r3, #48]
 716 0048 1A6B     		ldr	r2, [r3, #48]
 717 004a 02F00102 		and	r2, r2, #1
 718 004e 0392     		str	r2, [sp, #12]
 719 0050 039A     		ldr	r2, [sp, #12]
 720              	.LBE5:
 721              	.LBB6:
 399:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     WIFI_SPI_CS_CLK_ENABLE();
 722              		.loc 1 399 0
 723 0052 0495     		str	r5, [sp, #16]
 724 0054 1A6B     		ldr	r2, [r3, #48]
 725 0056 42F00402 		orr	r2, r2, #4
 726 005a 1A63     		str	r2, [r3, #48]
 727 005c 1A6B     		ldr	r2, [r3, #48]
 728 005e 02F00402 		and	r2, r2, #4
 729 0062 0492     		str	r2, [sp, #16]
 730 0064 049A     		ldr	r2, [sp, #16]
 731              	.LBE6:
 732              	.LBB7:
 400:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     WIFI_SPI_IRQ_CLK_ENABLE();
 733              		.loc 1 400 0
 734 0066 0595     		str	r5, [sp, #20]
 735 0068 1A6B     		ldr	r2, [r3, #48]
 736 006a 42F00402 		orr	r2, r2, #4
 737 006e 1A63     		str	r2, [r3, #48]
 738 0070 1A6B     		ldr	r2, [r3, #48]
 739 0072 02F00402 		and	r2, r2, #4
 740 0076 0592     		str	r2, [sp, #20]
 741 0078 059A     		ldr	r2, [sp, #20]
 742              	.LBE7:
 743              	.LBB8:
 401:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 402:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* Enable SPI clock */
 403:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     WIFI_SPI_CLK_ENABLE();
 744              		.loc 1 403 0
 745 007a 0695     		str	r5, [sp, #24]
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 21


 746 007c 5A6C     		ldr	r2, [r3, #68]
 747 007e 42F48052 		orr	r2, r2, #4096
 748 0082 5A64     		str	r2, [r3, #68]
 749 0084 5B6C     		ldr	r3, [r3, #68]
 750 0086 03F48053 		and	r3, r3, #4096
 751 008a 0693     		str	r3, [sp, #24]
 752 008c 069B     		ldr	r3, [sp, #24]
 753              	.LBE8:
 404:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 405:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* SCLK */
 406:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Pin = WIFI_SPI_SCLK_PIN;
 754              		.loc 1 406 0
 755 008e 2023     		movs	r3, #32
 756 0090 0793     		str	r3, [sp, #28]
 407:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Mode = WIFI_SPI_SCLK_MODE;
 757              		.loc 1 407 0
 758 0092 0224     		movs	r4, #2
 759 0094 0894     		str	r4, [sp, #32]
 408:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Pull = WIFI_SPI_SCLK_PULL;
 760              		.loc 1 408 0
 761 0096 0994     		str	r4, [sp, #36]
 409:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Speed = WIFI_SPI_SCLK_SPEED;
 762              		.loc 1 409 0
 763 0098 0A94     		str	r4, [sp, #40]
 410:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Alternate = WIFI_SPI_SCLK_ALTERNATE;
 764              		.loc 1 410 0
 765 009a 0527     		movs	r7, #5
 766 009c 0B97     		str	r7, [sp, #44]
 411:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     HAL_GPIO_Init(WIFI_SPI_SCLK_PORT, &GPIO_InitStruct); 
 767              		.loc 1 411 0
 768 009e 204E     		ldr	r6, .L54+4
 769 00a0 07A9     		add	r1, sp, #28
 770 00a2 3046     		mov	r0, r6
 771              	.LVL58:
 772 00a4 FFF7FEFF 		bl	HAL_GPIO_Init
 773              	.LVL59:
 412:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 413:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* MISO */
 414:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Pin = WIFI_SPI_MISO_PIN;
 774              		.loc 1 414 0
 775 00a8 4023     		movs	r3, #64
 776 00aa 0793     		str	r3, [sp, #28]
 415:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Mode = WIFI_SPI_MISO_MODE;
 777              		.loc 1 415 0
 778 00ac 0894     		str	r4, [sp, #32]
 416:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Pull = WIFI_SPI_MISO_PULL;
 779              		.loc 1 416 0
 780 00ae 0995     		str	r5, [sp, #36]
 417:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Speed = WIFI_SPI_MISO_SPEED;
 781              		.loc 1 417 0
 782 00b0 0A94     		str	r4, [sp, #40]
 418:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Alternate = WIFI_SPI_MISO_ALTERNATE;
 783              		.loc 1 418 0
 784 00b2 0B97     		str	r7, [sp, #44]
 419:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     HAL_GPIO_Init(WIFI_SPI_MISO_PORT, &GPIO_InitStruct);
 785              		.loc 1 419 0
 786 00b4 07A9     		add	r1, sp, #28
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 22


 787 00b6 3046     		mov	r0, r6
 788 00b8 FFF7FEFF 		bl	HAL_GPIO_Init
 789              	.LVL60:
 420:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 421:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* MOSI */
 422:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Pin = WIFI_SPI_MOSI_PIN;
 790              		.loc 1 422 0
 791 00bc 4FF08008 		mov	r8, #128
 792 00c0 CDF81C80 		str	r8, [sp, #28]
 423:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Mode = WIFI_SPI_MOSI_MODE;
 793              		.loc 1 423 0
 794 00c4 0894     		str	r4, [sp, #32]
 424:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Pull = WIFI_SPI_MOSI_PULL;
 795              		.loc 1 424 0
 796 00c6 0995     		str	r5, [sp, #36]
 425:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Speed = WIFI_SPI_MOSI_SPEED;
 797              		.loc 1 425 0
 798 00c8 0A94     		str	r4, [sp, #40]
 426:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Alternate = WIFI_SPI_MOSI_ALTERNATE;
 799              		.loc 1 426 0
 800 00ca 0B97     		str	r7, [sp, #44]
 427:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     HAL_GPIO_Init(WIFI_SPI_MOSI_PORT, &GPIO_InitStruct);
 801              		.loc 1 427 0
 802 00cc 07A9     		add	r1, sp, #28
 803 00ce 3046     		mov	r0, r6
 804 00d0 FFF7FEFF 		bl	HAL_GPIO_Init
 805              	.LVL61:
 428:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 429:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* NSS/CSN/CS */
 430:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Pin = WIFI_SPI_CS_PIN;
 806              		.loc 1 430 0
 807 00d4 0794     		str	r4, [sp, #28]
 431:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Mode = WIFI_SPI_CS_MODE;
 808              		.loc 1 431 0
 809 00d6 0126     		movs	r6, #1
 810 00d8 0896     		str	r6, [sp, #32]
 432:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Pull = WIFI_SPI_CS_PULL;
 811              		.loc 1 432 0
 812 00da 0996     		str	r6, [sp, #36]
 433:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Speed = WIFI_SPI_CS_SPEED;
 813              		.loc 1 433 0
 814 00dc 0A94     		str	r4, [sp, #40]
 434:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Alternate = WIFI_SPI_CS_ALTERNATE;
 815              		.loc 1 434 0
 816 00de 0B95     		str	r5, [sp, #44]
 435:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     HAL_GPIO_Init(WIFI_SPI_CS_PORT, &GPIO_InitStruct);
 817              		.loc 1 435 0
 818 00e0 104F     		ldr	r7, .L54+8
 819 00e2 07A9     		add	r1, sp, #28
 820 00e4 3846     		mov	r0, r7
 821 00e6 FFF7FEFF 		bl	HAL_GPIO_Init
 822              	.LVL62:
 436:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     HAL_GPIO_WritePin(WIFI_SPI_CS_PORT, WIFI_SPI_CS_PIN, GPIO_PIN_SET);
 823              		.loc 1 436 0
 824 00ea 3246     		mov	r2, r6
 825 00ec 2146     		mov	r1, r4
 826 00ee 3846     		mov	r0, r7
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 23


 827 00f0 FFF7FEFF 		bl	HAL_GPIO_WritePin
 828              	.LVL63:
 437:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 438:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* IRQ -- INPUT */
 439:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Pin = WIFI_SPI_IRQ_PIN;
 829              		.loc 1 439 0
 830 00f4 CDF81C80 		str	r8, [sp, #28]
 440:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Mode = WIFI_SPI_IRQ_MODE;
 831              		.loc 1 440 0
 832 00f8 0B4B     		ldr	r3, .L54+12
 833 00fa 0893     		str	r3, [sp, #32]
 441:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Pull = WIFI_SPI_IRQ_PULL;
 834              		.loc 1 441 0
 835 00fc 0996     		str	r6, [sp, #36]
 442:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Speed = WIFI_SPI_IRQ_SPEED;
 836              		.loc 1 442 0
 837 00fe 0A94     		str	r4, [sp, #40]
 443:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     GPIO_InitStruct.Alternate = WIFI_SPI_IRQ_ALTERNATE;
 838              		.loc 1 443 0
 839 0100 0B95     		str	r5, [sp, #44]
 444:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     HAL_GPIO_Init(WIFI_SPI_IRQ_PORT, &GPIO_InitStruct);
 840              		.loc 1 444 0
 841 0102 07A9     		add	r1, sp, #28
 842 0104 3846     		mov	r0, r7
 843 0106 FFF7FEFF 		bl	HAL_GPIO_Init
 844              	.LVL64:
 445:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     
 446:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     /* Configure the NVIC for EXTI */  
 447:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     HAL_NVIC_SetPriority(WIFI_SPI_EXTI_IRQn, 2, 0);    
 845              		.loc 1 447 0
 846 010a 2A46     		mov	r2, r5
 847 010c 2146     		mov	r1, r4
 848 010e 1720     		movs	r0, #23
 849 0110 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 850              	.LVL65:
 448:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     //HAL_NVIC_EnableIRQ(WIFI_SPI_EXTI_IRQn);
 449:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }
 450:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
 851              		.loc 1 450 0
 852 0114 0CB0     		add	sp, sp, #48
 853              	.LCFI13:
 854              		.cfi_def_cfa_offset 24
 855              		@ sp needed
 856 0116 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 857              	.L55:
 858 011a 00BF     		.align	2
 859              	.L54:
 860 011c 00300140 		.word	1073819648
 861 0120 00000240 		.word	1073872896
 862 0124 00080240 		.word	1073874944
 863 0128 00002110 		.word	270598144
 864              		.cfi_endproc
 865              	.LFE282:
 867              		.section	.text.set_irq_as_output,"ax",%progbits
 868              		.align	1
 869              		.global	set_irq_as_output
 870              		.syntax unified
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 24


 871              		.thumb
 872              		.thumb_func
 873              		.fpu fpv4-sp-d16
 875              	set_irq_as_output:
 876              	.LFB283:
 451:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 452:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
 453:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @brief  Set in Output mode the IRQ.
 454:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @param  None
 455:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @retval None
 456:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  */
 457:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void set_irq_as_output(void)
 458:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
 877              		.loc 1 458 0
 878              		.cfi_startproc
 879              		@ args = 0, pretend = 0, frame = 0
 880              		@ frame_needed = 0, uses_anonymous_args = 0
 881 0000 08B5     		push	{r3, lr}
 882              	.LCFI14:
 883              		.cfi_def_cfa_offset 8
 884              		.cfi_offset 3, -8
 885              		.cfi_offset 14, -4
 459:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   HAL_GPIO_WritePin(WIFI_SPI_IRQ_PORT, WIFI_SPI_IRQ_PIN, GPIO_PIN_SET);
 886              		.loc 1 459 0
 887 0002 0122     		movs	r2, #1
 888 0004 8021     		movs	r1, #128
 889 0006 0348     		ldr	r0, .L58
 890 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 891              	.LVL66:
 460:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   //HAL_LPPUART_GPIO_Set_Mode(WIFI_SPI_IRQ_PORT, WIFI_SPI_IRQ_PIN_POSITION, GPIO_MODE_OUTPUT_PP);
 461:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   __HAL_GPIO_EXTI_CLEAR_IT(WIFI_SPI_IRQ_PIN);
 892              		.loc 1 461 0
 893 000c 8022     		movs	r2, #128
 894 000e 024B     		ldr	r3, .L58+4
 895 0010 5A61     		str	r2, [r3, #20]
 896 0012 08BD     		pop	{r3, pc}
 897              	.L59:
 898              		.align	2
 899              	.L58:
 900 0014 00080240 		.word	1073874944
 901 0018 003C0140 		.word	1073822720
 902              		.cfi_endproc
 903              	.LFE283:
 905              		.section	.text.set_irq_as_input,"ax",%progbits
 906              		.align	1
 907              		.global	set_irq_as_input
 908              		.syntax unified
 909              		.thumb
 910              		.thumb_func
 911              		.fpu fpv4-sp-d16
 913              	set_irq_as_input:
 914              	.LFB284:
 462:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
 463:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 464:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
 465:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @brief  Set the IRQ in input mode.
 466:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @param  None
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 25


 467:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @retval None
 468:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  */
 469:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void set_irq_as_input(void)
 470:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
 915              		.loc 1 470 0
 916              		.cfi_startproc
 917              		@ args = 0, pretend = 0, frame = 0
 918              		@ frame_needed = 0, uses_anonymous_args = 0
 919 0000 08B5     		push	{r3, lr}
 920              	.LCFI15:
 921              		.cfi_def_cfa_offset 8
 922              		.cfi_offset 3, -8
 923              		.cfi_offset 14, -4
 471:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   HAL_GPIO_WritePin(WIFI_SPI_IRQ_PORT, WIFI_SPI_IRQ_PIN, GPIO_PIN_RESET); // WARNING: it may confli
 924              		.loc 1 471 0
 925 0002 0022     		movs	r2, #0
 926 0004 8021     		movs	r1, #128
 927 0006 0248     		ldr	r0, .L62
 928 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 929              	.LVL67:
 930 000c 08BD     		pop	{r3, pc}
 931              	.L63:
 932 000e 00BF     		.align	2
 933              	.L62:
 934 0010 00080240 		.word	1073874944
 935              		.cfi_endproc
 936              	.LFE284:
 938              		.section	.text.Enable_SPI_Receiving_Path,"ax",%progbits
 939              		.align	1
 940              		.global	Enable_SPI_Receiving_Path
 941              		.syntax unified
 942              		.thumb
 943              		.thumb_func
 944              		.fpu fpv4-sp-d16
 946              	Enable_SPI_Receiving_Path:
 947              	.LFB285:
 472:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   //HAL_LPPUART_GPIO_Set_Mode(WIFI_SPI_IRQ_PORT, WIFI_SPI_IRQ_PIN_POSITION, GPIO_MODE_INPUT);
 473:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
 474:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 475:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
 476:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @brief  Enable SPI IRQ.
 477:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @param  None
 478:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @retval None
 479:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  */
 480:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void Enable_SPI_Receiving_Path(void)
 481:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {  
 948              		.loc 1 481 0
 949              		.cfi_startproc
 950              		@ args = 0, pretend = 0, frame = 0
 951              		@ frame_needed = 0, uses_anonymous_args = 0
 952 0000 08B5     		push	{r3, lr}
 953              	.LCFI16:
 954              		.cfi_def_cfa_offset 8
 955              		.cfi_offset 3, -8
 956              		.cfi_offset 14, -4
 482:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   __HAL_GPIO_EXTI_CLEAR_IT(WIFI_SPI_EXTI_PIN);
 957              		.loc 1 482 0
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 26


 958 0002 8022     		movs	r2, #128
 959 0004 044B     		ldr	r3, .L66
 960 0006 5A61     		str	r2, [r3, #20]
 483:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   HAL_NVIC_ClearPendingIRQ(WIFI_SPI_EXTI_IRQn);
 961              		.loc 1 483 0
 962 0008 1720     		movs	r0, #23
 963 000a FFF7FEFF 		bl	HAL_NVIC_ClearPendingIRQ
 964              	.LVL68:
 484:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   HAL_NVIC_EnableIRQ(WIFI_SPI_EXTI_IRQn);
 965              		.loc 1 484 0
 966 000e 1720     		movs	r0, #23
 967 0010 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 968              	.LVL69:
 969 0014 08BD     		pop	{r3, pc}
 970              	.L67:
 971 0016 00BF     		.align	2
 972              	.L66:
 973 0018 003C0140 		.word	1073822720
 974              		.cfi_endproc
 975              	.LFE285:
 977              		.section	.text.Disable_SPI_Receiving_Path,"ax",%progbits
 978              		.align	1
 979              		.global	Disable_SPI_Receiving_Path
 980              		.syntax unified
 981              		.thumb
 982              		.thumb_func
 983              		.fpu fpv4-sp-d16
 985              	Disable_SPI_Receiving_Path:
 986              	.LFB286:
 485:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
 486:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 487:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
 488:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @brief  Disable SPI IRQ.
 489:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @param  None
 490:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @retval None
 491:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  */
 492:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void Disable_SPI_Receiving_Path(void)
 493:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {  
 987              		.loc 1 493 0
 988              		.cfi_startproc
 989              		@ args = 0, pretend = 0, frame = 0
 990              		@ frame_needed = 0, uses_anonymous_args = 0
 991 0000 08B5     		push	{r3, lr}
 992              	.LCFI17:
 993              		.cfi_def_cfa_offset 8
 994              		.cfi_offset 3, -8
 995              		.cfi_offset 14, -4
 494:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   HAL_NVIC_DisableIRQ(WIFI_SPI_EXTI_IRQn);
 996              		.loc 1 494 0
 997 0002 1720     		movs	r0, #23
 998 0004 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 999              	.LVL70:
 1000 0008 08BD     		pop	{r3, pc}
 1001              		.cfi_endproc
 1002              	.LFE286:
 1004              		.section	.text.Enable_SPI_CS,"ax",%progbits
 1005              		.align	1
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 27


 1006              		.global	Enable_SPI_CS
 1007              		.syntax unified
 1008              		.thumb
 1009              		.thumb_func
 1010              		.fpu fpv4-sp-d16
 1012              	Enable_SPI_CS:
 1013              	.LFB287:
 495:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
 496:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 497:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
 498:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @brief  Enable SPI CS.
 499:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @param  None
 500:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @retval None
 501:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  */
 502:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void Enable_SPI_CS(void)
 503:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
 1014              		.loc 1 503 0
 1015              		.cfi_startproc
 1016              		@ args = 0, pretend = 0, frame = 0
 1017              		@ frame_needed = 0, uses_anonymous_args = 0
 1018 0000 08B5     		push	{r3, lr}
 1019              	.LCFI18:
 1020              		.cfi_def_cfa_offset 8
 1021              		.cfi_offset 3, -8
 1022              		.cfi_offset 14, -4
 504:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* CS reset */
 505:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   HAL_GPIO_WritePin(WIFI_SPI_CS_PORT, WIFI_SPI_CS_PIN, GPIO_PIN_RESET);
 1023              		.loc 1 505 0
 1024 0002 0022     		movs	r2, #0
 1025 0004 0221     		movs	r1, #2
 1026 0006 0548     		ldr	r0, .L73
 1027 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1028              	.LVL71:
 1029              	.L71:
 506:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #if defined (USE_STM32F4XX_NUCLEO) || defined (USE_STM32L4XX_NUCLEO)
 507:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   while( HAL_GPIO_ReadPin(WIFI_SPI_CS_PORT, WIFI_SPI_CS_PIN) != GPIO_PIN_RESET );
 1030              		.loc 1 507 0 discriminator 1
 1031 000c 0221     		movs	r1, #2
 1032 000e 0348     		ldr	r0, .L73
 1033 0010 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1034              	.LVL72:
 1035 0014 0028     		cmp	r0, #0
 1036 0016 F9D1     		bne	.L71
 508:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #endif
 509:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
 1037              		.loc 1 509 0
 1038 0018 08BD     		pop	{r3, pc}
 1039              	.L74:
 1040 001a 00BF     		.align	2
 1041              	.L73:
 1042 001c 00080240 		.word	1073874944
 1043              		.cfi_endproc
 1044              	.LFE287:
 1046              		.section	.text.Disable_SPI_CS,"ax",%progbits
 1047              		.align	1
 1048              		.global	Disable_SPI_CS
 1049              		.syntax unified
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 28


 1050              		.thumb
 1051              		.thumb_func
 1052              		.fpu fpv4-sp-d16
 1054              	Disable_SPI_CS:
 1055              	.LFB288:
 510:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 511:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
 512:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @brief  Disable SPI CS.
 513:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @param  None
 514:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @retval None
 515:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  */
 516:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void Disable_SPI_CS(void)
 517:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
 1056              		.loc 1 517 0
 1057              		.cfi_startproc
 1058              		@ args = 0, pretend = 0, frame = 0
 1059              		@ frame_needed = 0, uses_anonymous_args = 0
 1060 0000 08B5     		push	{r3, lr}
 1061              	.LCFI19:
 1062              		.cfi_def_cfa_offset 8
 1063              		.cfi_offset 3, -8
 1064              		.cfi_offset 14, -4
 1065              	.L76:
 518:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   while (__HAL_SPI_GET_FLAG(&SpiHandle,SPI_FLAG_BSY) == SET);
 1066              		.loc 1 518 0 discriminator 1
 1067 0002 064B     		ldr	r3, .L78
 1068 0004 1B68     		ldr	r3, [r3]
 1069 0006 9B68     		ldr	r3, [r3, #8]
 1070 0008 13F0800F 		tst	r3, #128
 1071 000c F9D1     		bne	.L76
 519:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 520:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /* CS set */
 521:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   HAL_GPIO_WritePin(WIFI_SPI_CS_PORT, WIFI_SPI_CS_PIN, GPIO_PIN_SET);
 1072              		.loc 1 521 0
 1073 000e 0122     		movs	r2, #1
 1074 0010 0221     		movs	r1, #2
 1075 0012 0348     		ldr	r0, .L78+4
 1076 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1077              	.LVL73:
 1078 0018 08BD     		pop	{r3, pc}
 1079              	.L79:
 1080 001a 00BF     		.align	2
 1081              	.L78:
 1082 001c 00000000 		.word	SpiHandle
 1083 0020 00080240 		.word	1073874944
 1084              		.cfi_endproc
 1085              	.LFE288:
 1087              		.section	.text.DisableEnable_SPI_CS,"ax",%progbits
 1088              		.align	1
 1089              		.global	DisableEnable_SPI_CS
 1090              		.syntax unified
 1091              		.thumb
 1092              		.thumb_func
 1093              		.fpu fpv4-sp-d16
 1095              	DisableEnable_SPI_CS:
 1096              	.LFB289:
 522:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 29


 523:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 524:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #define CS_PULSE_700NS_NBR_CYCLES_REQ  352
 525:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #define CS_PULSE_LENGTH (CS_PULSE_700NS_NBR_CYCLES_REQ/4)
 526:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** #define DUMMY_RAM_ADDRESS_TO_READ (0x20000000)
 527:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 528:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** /**
 529:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @brief  Disable and Enable SPI CS.
 530:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @param  None
 531:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  * @retval None
 532:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****  */
 533:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** void DisableEnable_SPI_CS(void)
 534:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** {
 1097              		.loc 1 534 0
 1098              		.cfi_startproc
 1099              		@ args = 0, pretend = 0, frame = 8
 1100              		@ frame_needed = 0, uses_anonymous_args = 0
 1101 0000 00B5     		push	{lr}
 1102              	.LCFI20:
 1103              		.cfi_def_cfa_offset 4
 1104              		.cfi_offset 14, -4
 1105 0002 83B0     		sub	sp, sp, #12
 1106              	.LCFI21:
 1107              		.cfi_def_cfa_offset 16
 535:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   volatile uint8_t localloop;
 536:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 537:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   Disable_SPI_CS(); /**< CS Set */
 1108              		.loc 1 537 0
 1109 0004 FFF7FEFF 		bl	Disable_SPI_CS
 1110              	.LVL74:
 538:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 539:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   /**
 540:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****    *  The CS shall be kept high for at least 625ns
 541:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****    */
 542:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   for (localloop = 0 ; localloop < CS_PULSE_LENGTH ; localloop++)
 1111              		.loc 1 542 0
 1112 0008 0023     		movs	r3, #0
 1113 000a 8DF80730 		strb	r3, [sp, #7]
 1114 000e 08E0     		b	.L81
 1115              	.L82:
 543:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 544:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****     *(volatile uint32_t*)DUMMY_RAM_ADDRESS_TO_READ;
 1116              		.loc 1 544 0 discriminator 3
 1117 0010 4FF00053 		mov	r3, #536870912
 1118 0014 1B68     		ldr	r3, [r3]
 542:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 1119              		.loc 1 542 0 discriminator 3
 1120 0016 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1121 001a 0133     		adds	r3, r3, #1
 1122 001c DBB2     		uxtb	r3, r3
 1123 001e 8DF80730 		strb	r3, [sp, #7]
 1124              	.L81:
 542:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   {
 1125              		.loc 1 542 0 is_stmt 0 discriminator 1
 1126 0022 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1127 0026 DBB2     		uxtb	r3, r3
 1128 0028 572B     		cmp	r3, #87
 1129 002a F1D9     		bls	.L82
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 30


 545:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   }
 546:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   
 547:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   Enable_SPI_CS(); /**< CS Reset */
 1130              		.loc 1 547 0 is_stmt 1
 1131 002c FFF7FEFF 		bl	Enable_SPI_CS
 1132              	.LVL75:
 548:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** 
 549:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c ****   return;
 550:Drivers/BSP/X-NUCLEO-IDW0xx1/stm32_spwf_wifi.c **** }
 1133              		.loc 1 550 0
 1134 0030 03B0     		add	sp, sp, #12
 1135              	.LCFI22:
 1136              		.cfi_def_cfa_offset 4
 1137              		@ sp needed
 1138 0032 5DF804FB 		ldr	pc, [sp], #4
 1139              		.cfi_endproc
 1140              	.LFE289:
 1142              		.global	uwPrescalerValue
 1143              		.section	.rodata
 1144              		.align	2
 1145              		.set	.LANCHOR1,. + 0
 1146              	.LC0:
 1147 0000 C0120000 		.word	4800
 1148 0004 80250000 		.word	9600
 1149 0008 00C20100 		.word	115200
 1150 000c 00080700 		.word	460800
 1151 0010 00100E00 		.word	921600
 1152 0014 00000000 		.word	0
 1153              		.section	.bss.uwPrescalerValue,"aw",%nobits
 1154              		.align	2
 1155              		.set	.LANCHOR0,. + 0
 1158              	uwPrescalerValue:
 1159 0000 00000000 		.space	4
 1160              		.section	.rodata.WiFi_CheckBaudrate_pin.str1.4,"aMS",%progbits,1
 1161              		.align	2
 1162              	.LC1:
 1163 0000 41542B53 		.ascii	"AT+S.GPIOC=6,out\015\000"
 1163      2E475049 
 1163      4F433D36 
 1163      2C6F7574 
 1163      0D00
 1164 0012 0000     		.space	2
 1165              	.LC2:
 1166 0014 41542B53 		.ascii	"AT+S.GPIOW=6,%d\015\000"
 1166      2E475049 
 1166      4F573D36 
 1166      2C25640D 
 1166      00
 1167              		.section	.rodata.WiFi_Module_UART_Configuration.str1.4,"aMS",%progbits,1
 1168              		.align	2
 1169              	.LC3:
 1170 0000 636F6E73 		.ascii	"console1_speed\000"
 1170      6F6C6531 
 1170      5F737065 
 1170      656400
 1171 000f 00       		.space	1
 1172              	.LC4:
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 31


 1173 0010 41542657 		.ascii	"AT&W\015\000"
 1173      0D00
 1174 0016 0000     		.space	2
 1175              	.LC5:
 1176 0018 41542B43 		.ascii	"AT+CFUN=0\015\000"
 1176      46554E3D 
 1176      300D00
 1177              		.text
 1178              	.Letext0:
 1179              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 1180              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\include
 1181              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 1182              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1183              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xe.h"
 1184              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 1185              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1186              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 1187              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1188              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 1189              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 1190              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 1191              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 1192              		.file 15 "Middlewares/ST/STM32_SPWF0xSy/Inc/wifi_interface.h"
 1193              		.file 16 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 1194              		.file 17 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 1195              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\lib\\gcc\\arm-none-ea
 1196              		.file 19 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 1197              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 1198              		.file 21 "Middlewares/ST/STM32_SPWF0xSy/Utils/event_buffer.h"
 1199              		.file 22 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 1200              		.file 23 "Middlewares/ST/STM32_SPWF0xSy/Inc/wifi_module.h"
 1201              		.file 24 "Middlewares/ST/STM32_SPWF0xSy/Utils/wifi_globals.h"
 1202              		.file 25 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_ll_dma.h"
 1203              		.file 26 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_cortex.h"
 1204              		.file 27 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
 1205              		.file 28 "c:\\program files (x86)\\gnu tools arm embedded\\6 2017-q2-update\\arm-none-eabi\\includ
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 32


DEFINED SYMBOLS
                            *ABS*:00000000 stm32_spwf_wifi.c
D:\cygwin64\tmp\ccIzrJPa.s:18     .text.Timer_Config:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:25     .text.Timer_Config:00000000 Timer_Config
D:\cygwin64\tmp\ccIzrJPa.s:75     .text.Timer_Config:00000034 $d
D:\cygwin64\tmp\ccIzrJPa.s:84     .text.Push_Timer_Config:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:91     .text.Push_Timer_Config:00000000 Push_Timer_Config
D:\cygwin64\tmp\ccIzrJPa.s:140    .text.Push_Timer_Config:00000038 $d
D:\cygwin64\tmp\ccIzrJPa.s:148    .text.UART_Configuration:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:155    .text.UART_Configuration:00000000 UART_Configuration
D:\cygwin64\tmp\ccIzrJPa.s:216    .text.UART_Configuration:0000003c $d
D:\cygwin64\tmp\ccIzrJPa.s:222    .text.WiFi_CheckBaudrate_pin:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:229    .text.WiFi_CheckBaudrate_pin:00000000 WiFi_CheckBaudrate_pin
D:\cygwin64\tmp\ccIzrJPa.s:382    .text.WiFi_CheckBaudrate_pin:000000e0 $d
D:\cygwin64\tmp\ccIzrJPa.s:392    .text.WiFi_CheckBaudrate:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:399    .text.WiFi_CheckBaudrate:00000000 WiFi_CheckBaudrate
D:\cygwin64\tmp\ccIzrJPa.s:462    .text.WiFi_CheckBaudrate:00000040 $d
D:\cygwin64\tmp\ccIzrJPa.s:467    .text.WiFi_Module_UART_Configuration:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:474    .text.WiFi_Module_UART_Configuration:00000000 WiFi_Module_UART_Configuration
D:\cygwin64\tmp\ccIzrJPa.s:570    .text.WiFi_Module_UART_Configuration:00000070 $d
D:\cygwin64\tmp\ccIzrJPa.s:579    .text.WiFi_SPI_Init:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:586    .text.WiFi_SPI_Init:00000000 WiFi_SPI_Init
D:\cygwin64\tmp\ccIzrJPa.s:647    .text.WiFi_SPI_Init:00000048 $d
D:\cygwin64\tmp\ccIzrJPa.s:652    .text.SPI_Gpio_Init:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:659    .text.SPI_Gpio_Init:00000000 SPI_Gpio_Init
D:\cygwin64\tmp\ccIzrJPa.s:860    .text.SPI_Gpio_Init:0000011c $d
D:\cygwin64\tmp\ccIzrJPa.s:868    .text.set_irq_as_output:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:875    .text.set_irq_as_output:00000000 set_irq_as_output
D:\cygwin64\tmp\ccIzrJPa.s:900    .text.set_irq_as_output:00000014 $d
D:\cygwin64\tmp\ccIzrJPa.s:906    .text.set_irq_as_input:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:913    .text.set_irq_as_input:00000000 set_irq_as_input
D:\cygwin64\tmp\ccIzrJPa.s:934    .text.set_irq_as_input:00000010 $d
D:\cygwin64\tmp\ccIzrJPa.s:939    .text.Enable_SPI_Receiving_Path:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:946    .text.Enable_SPI_Receiving_Path:00000000 Enable_SPI_Receiving_Path
D:\cygwin64\tmp\ccIzrJPa.s:973    .text.Enable_SPI_Receiving_Path:00000018 $d
D:\cygwin64\tmp\ccIzrJPa.s:978    .text.Disable_SPI_Receiving_Path:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:985    .text.Disable_SPI_Receiving_Path:00000000 Disable_SPI_Receiving_Path
D:\cygwin64\tmp\ccIzrJPa.s:1005   .text.Enable_SPI_CS:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:1012   .text.Enable_SPI_CS:00000000 Enable_SPI_CS
D:\cygwin64\tmp\ccIzrJPa.s:1042   .text.Enable_SPI_CS:0000001c $d
D:\cygwin64\tmp\ccIzrJPa.s:1047   .text.Disable_SPI_CS:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:1054   .text.Disable_SPI_CS:00000000 Disable_SPI_CS
D:\cygwin64\tmp\ccIzrJPa.s:1082   .text.Disable_SPI_CS:0000001c $d
D:\cygwin64\tmp\ccIzrJPa.s:1088   .text.DisableEnable_SPI_CS:00000000 $t
D:\cygwin64\tmp\ccIzrJPa.s:1095   .text.DisableEnable_SPI_CS:00000000 DisableEnable_SPI_CS
D:\cygwin64\tmp\ccIzrJPa.s:1158   .bss.uwPrescalerValue:00000000 uwPrescalerValue
D:\cygwin64\tmp\ccIzrJPa.s:1144   .rodata:00000000 $d
D:\cygwin64\tmp\ccIzrJPa.s:1154   .bss.uwPrescalerValue:00000000 $d
D:\cygwin64\tmp\ccIzrJPa.s:1161   .rodata.WiFi_CheckBaudrate_pin.str1.4:00000000 $d
D:\cygwin64\tmp\ccIzrJPa.s:1168   .rodata.WiFi_Module_UART_Configuration.str1.4:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
HAL_TIM_Base_Init
Error_Handler
SystemCoreClock
TimHandle
ARM GAS  D:\cygwin64\tmp\ccIzrJPa.s 			page 33


PushTimHandle
HAL_UART_DeInit
HAL_UART_Init
UartWiFiHandle
HAL_GPIO_Init
HAL_GPIO_ReadPin
HAL_Delay
Reset_AT_CMD_Buffer
strlen
USART_Transmit_AT_Cmd
sprintf
WiFi_AT_Cmd_Buff
Attention_Cmd_Check
config_init_value
IO_status_flag
HAL_SPI_Init
HAL_GPIO_WritePin
HAL_NVIC_SetPriority
HAL_NVIC_ClearPendingIRQ
HAL_NVIC_EnableIRQ
HAL_NVIC_DisableIRQ
SpiHandle
